/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./demo/client.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./demo/client.ts":
/*!************************!*\
  !*** ./demo/client.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright (c) 2018 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * This file is the entry point for browserify.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/// <reference path="../typings/xterm.d.ts"/>
var Terminal_1 = __webpack_require__(/*! ../lib/public/Terminal */ "./lib/public/Terminal.js");
var attach = __webpack_require__(/*! ../lib/addons/attach/attach */ "./lib/addons/attach/attach.js");
var fit = __webpack_require__(/*! ../lib/addons/fit/fit */ "./lib/addons/fit/fit.js");
var fullscreen = __webpack_require__(/*! ../lib/addons/fullscreen/fullscreen */ "./lib/addons/fullscreen/fullscreen.js");
var search = __webpack_require__(/*! ../lib/addons/search/search */ "./lib/addons/search/search.js");
var webLinks = __webpack_require__(/*! ../lib/addons/webLinks/webLinks */ "./lib/addons/webLinks/webLinks.js");
Terminal_1.Terminal.applyAddon(attach);
Terminal_1.Terminal.applyAddon(fit);
Terminal_1.Terminal.applyAddon(fullscreen);
Terminal_1.Terminal.applyAddon(search);
Terminal_1.Terminal.applyAddon(webLinks);
var term;
var protocol;
var socketURL;
var socket;
var pid;
var terminalContainer = document.getElementById('terminal-container');
var actionElements = {
    findNext: document.querySelector('#find-next'),
    findPrevious: document.querySelector('#find-previous')
};
var paddingElement = document.getElementById('padding');
function setPadding() {
    term.element.style.padding = parseInt(paddingElement.value, 10).toString() + 'px';
    term.fit();
}
function getSearchOptions() {
    return {
        regex: document.getElementById('regex').checked,
        wholeWord: document.getElementById('whole-word').checked,
        caseSensitive: document.getElementById('case-sensitive').checked
    };
}
createTerminal();
var disposeRecreateButtonHandler = function () {
    // If the terminal exists dispose of it, otherwise recreate it
    if (term) {
        term.dispose();
        term = null;
        window.term = null;
        socket = null;
        document.getElementById('dispose').innerHTML = 'Recreate Terminal';
    }
    else {
        createTerminal();
        document.getElementById('dispose').innerHTML = 'Dispose terminal';
    }
};
document.getElementById('dispose').addEventListener('click', disposeRecreateButtonHandler);
function createTerminal() {
    var urlPrefix = '/ctf-tool-xterm_5cf8d9f977b72';
    // Clean terminal
    while (terminalContainer.children.length) {
        terminalContainer.removeChild(terminalContainer.children[0]);
    }
    var isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].indexOf(navigator.platform) >= 0;
    term = new Terminal_1.Terminal({
        windowsMode: isWindows
    });
    window.term = term; // Expose `term` to window for debugging purposes
    term.onResize(function (size) {
        if (!pid) {
            return;
        }
        var cols = size.cols;
        var rows = size.rows;
        var url = urlPrefix + '/terminals/' + pid + '/size?cols=' + cols + '&rows=' + rows;
        fetch(url, { method: 'POST' });
    });
    protocol = (location.protocol === 'https:') ? 'wss://' : 'ws://';
    socketURL = protocol + location.hostname + ((location.port) ? (':' + location.port) : '') + urlPrefix + '/terminals/';
    term.open(terminalContainer);
    term.webLinksInit();
    term.fit();
    term.focus();
    addDomListener(paddingElement, 'change', setPadding);
    addDomListener(actionElements.findNext, 'keyup', function (e) {
        var searchOptions = getSearchOptions();
        searchOptions.incremental = e.key !== "Enter";
        term.findNext(actionElements.findNext.value, searchOptions);
    });
    addDomListener(actionElements.findPrevious, 'keyup', function (e) {
        if (e.key === "Enter") {
            term.findPrevious(actionElements.findPrevious.value, getSearchOptions());
        }
    });
    // fit is called within a setTimeout, cols and rows need this.
    setTimeout(function () {
        initOptions(term);
        // TODO: Clean this up, opt-cols/rows doesn't exist anymore
        document.getElementById("opt-cols").value = term.cols;
        document.getElementById("opt-rows").value = term.rows;
        paddingElement.value = '0';
        // Set terminal size again to set the specific dimensions on the demo
        updateTerminalSize();
        fetch(urlPrefix + '/terminals?cols=' + term.cols + '&rows=' + term.rows, { method: 'POST' }).then(function (res) {
            res.text().then(function (processId) {
                pid = processId;
                socketURL += processId;
                socket = new WebSocket(socketURL);
                socket.onopen = runRealTerminal;
                socket.onclose = runFakeTerminal;
                socket.onerror = runFakeTerminal;
            });
        });
    }, 0);
}
function runRealTerminal() {
    term.attach(socket);
    term._initialized = true;
}
function runFakeTerminal() {
    if (term._initialized) {
        return;
    }
    term._initialized = true;
    term.prompt = function () {
        term.write('\r\n$ ');
    };
    term.writeln('-- Yolo Xterm --');
    term.writeln('Probleme de connection au serveur: Temps de connection trop long...');
    term.writeln('veuillez recharger la page.');
    term.writeln('');
    term.prompt();
    term.onKey(function (e) {
        var ev = e.domEvent;
        var printable = !ev.altKey && !ev.ctrlKey && !ev.metaKey;
        if (ev.keyCode === 13) {
            term.prompt();
        }
        else if (ev.keyCode === 8) {
            // Do not delete the prompt
            if (term._core.buffer.x > 2) {
                term.write('\b \b');
            }
        }
        else if (printable) {
            term.write(e.key);
        }
    });
}
function initOptions(term) {
    var blacklistedOptions = [
        // Internal only options
        'cancelEvents',
        'convertEol',
        'debug',
        'handler',
        'screenKeys',
        'termName',
        'useFlowControl',
        // Complex option
        'theme'
    ];
    var stringOptions = {
        bellSound: null,
        bellStyle: ['none', 'sound'],
        cursorStyle: ['block', 'underline', 'bar'],
        experimentalCharAtlas: ['none', 'static', 'dynamic'],
        fontFamily: null,
        fontWeight: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        fontWeightBold: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        rendererType: ['dom', 'canvas']
    };
    var options = Object.keys(term._core.options);
    var booleanOptions = [];
    var numberOptions = [];
    options.filter(function (o) { return blacklistedOptions.indexOf(o) === -1; }).forEach(function (o) {
        switch (typeof term.getOption(o)) {
            case 'boolean':
                // booleanOptions.push(o);
                break;
            case 'number':
                if ((o === 'cols') || (o === 'rows') || (o === 'fontSize')) {
                    numberOptions.push(o);
                }
                break;
            default:
                if (Object.keys(stringOptions).indexOf(o) === -1) {
                    console.warn("Unrecognized option: \"" + o + "\"");
                }
        }
    });
    var html = '';
    html += '<div class="option-group">';
    booleanOptions.forEach(function (o) {
        html += "<div class=\"option\"><label><input id=\"opt-" + o + "\" type=\"checkbox\" " + (term.getOption(o) ? 'checked' : '') + "/> " + o + "</label></div>";
    });
    html += '</div><div class="option-group">';
    numberOptions.forEach(function (o) {
        html += "<div class=\"option\"><label>" + o + " <input id=\"opt-" + o + "\" type=\"number\" value=\"" + term.getOption(o) + "\" step=\"" + (o === 'lineHeight' ? '0.1' : '1') + "\"/></label></div>";
    });
    /*
    html += '</div><div class="option-group">';
    Object.keys(stringOptions).forEach(o => {
      if (stringOptions[o]) {
        html += `<div class="option"><label>${o} <select id="opt-${o}">${stringOptions[o].map(v => `<option ${term.getOption(o) === v ? 'selected' : ''}>${v}</option>`).join('')}</select></label></div>`;
      } else {
        html += `<div class="option"><label>${o} <input id="opt-${o}" type="text" value="${term.getOption(o)}"/></label></div>`;
      }
    });
  */
    html += '</div>';
    var container = document.getElementById('options-container');
    container.innerHTML = html;
    // Attach listeners
    booleanOptions.forEach(function (o) {
        var input = document.getElementById("opt-" + o);
        addDomListener(input, 'change', function () {
            console.log('change', o, input.checked);
            term.setOption(o, input.checked);
        });
    });
    numberOptions.forEach(function (o) {
        var input = document.getElementById("opt-" + o);
        addDomListener(input, 'change', function () {
            console.log('change', o, input.value);
            if (o === 'cols' || o === 'rows') {
                updateTerminalSize();
            }
            else {
                term.setOption(o, o === 'lineHeight' ? parseFloat(input.value) : parseInt(input.value, 10));
            }
        });
    });
    /*
    Object.keys(stringOptions).forEach(o => {
      const input = <HTMLInputElement>document.getElementById(`opt-${o}`);
      addDomListener(input, 'change', () => {
        console.log('change', o, input.value);
        term.setOption(o, input.value);
      });
    });
    */
}
function addDomListener(element, type, handler) {
    element.addEventListener(type, handler);
    term._core.register({ dispose: function () { return element.removeEventListener(type, handler); } });
}
function updateTerminalSize() {
    var cols = parseInt(document.getElementById("opt-cols").value, 10);
    var rows = parseInt(document.getElementById("opt-rows").value, 10);
    var width = (cols * term._core.renderer.dimensions.actualCellWidth + term._core.viewport.scrollBarWidth).toString() + 'px';
    var height = (rows * term._core.renderer.dimensions.actualCellHeight).toString() + 'px';
    terminalContainer.style.width = width;
    terminalContainer.style.height = height;
    term.fit();
}


/***/ }),

/***/ "./lib/AccessibilityManager.js":
/*!*************************************!*\
  !*** ./lib/AccessibilityManager.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Strings = __webpack_require__(/*! ./Strings */ "./lib/Strings.js");
var Platform_1 = __webpack_require__(/*! ./common/Platform */ "./lib/common/Platform.js");
var RenderDebouncer_1 = __webpack_require__(/*! ./ui/RenderDebouncer */ "./lib/ui/RenderDebouncer.js");
var Lifecycle_1 = __webpack_require__(/*! ./ui/Lifecycle */ "./lib/ui/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! ./common/Lifecycle */ "./lib/common/Lifecycle.js");
var MAX_ROWS_TO_READ = 20;
var AccessibilityManager = (function (_super) {
    __extends(AccessibilityManager, _super);
    function AccessibilityManager(_terminal) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._liveRegionLineCount = 0;
        _this._charsToConsume = [];
        _this._accessibilityTreeRoot = document.createElement('div');
        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add('xterm-accessibility-tree');
        _this._rowElements = [];
        for (var i = 0; i < _this._terminal.rows; i++) {
            _this._rowElements[i] = _this._createAccessibilityTreeNode();
            _this._rowContainer.appendChild(_this._rowElements[i]);
        }
        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };
        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };
        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);
        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);
        _this._refreshRowsDimensions();
        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);
        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));
        _this._refreshRows();
        _this._liveRegion = document.createElement('div');
        _this._liveRegion.classList.add('live-region');
        _this._liveRegion.setAttribute('aria-live', 'assertive');
        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);
        _this.register(_this._renderRowsDebouncer);
        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));
        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));
        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));
        _this.register(_this._terminal.addDisposableListener('a11y.char', function (char) { return _this._onChar(char); }));
        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\n'); }));
        _this.register(_this._terminal.addDisposableListener('a11y.tab', function (spaceCount) { return _this._onTab(spaceCount); }));
        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));
        _this.register(_this._terminal.addDisposableListener('blur', function () { return _this._clearLiveRegion(); }));
        _this.register(_this._terminal.addDisposableListener('dprchange', function () { return _this._refreshRowsDimensions(); }));
        _this.register(_this._terminal.renderer.onCanvasResize(function () { return _this._refreshRowsDimensions(); }));
        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));
        return _this;
    }
    AccessibilityManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._terminal.element.removeChild(this._accessibilityTreeRoot);
        this._rowElements.length = 0;
    };
    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {
        var boundaryElement = e.target;
        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];
        var posInSet = boundaryElement.getAttribute('aria-posinset');
        var lastRowPos = position === 0 ? '1' : "" + this._terminal.buffer.lines.length;
        if (posInSet === lastRowPos) {
            return;
        }
        if (e.relatedTarget !== beforeBoundaryElement) {
            return;
        }
        var topBoundaryElement;
        var bottomBoundaryElement;
        if (position === 0) {
            topBoundaryElement = boundaryElement;
            bottomBoundaryElement = this._rowElements.pop();
            this._rowContainer.removeChild(bottomBoundaryElement);
        }
        else {
            topBoundaryElement = this._rowElements.shift();
            bottomBoundaryElement = boundaryElement;
            this._rowContainer.removeChild(topBoundaryElement);
        }
        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);
        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);
        if (position === 0) {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.unshift(newElement);
            this._rowContainer.insertAdjacentElement('afterbegin', newElement);
        }
        else {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.push(newElement);
            this._rowContainer.appendChild(newElement);
        }
        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._terminal.scrollLines(position === 0 ? -1 : 1);
        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();
        e.preventDefault();
        e.stopImmediatePropagation();
    };
    AccessibilityManager.prototype._onResize = function (rows) {
        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);
        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {
            this._rowElements[i] = this._createAccessibilityTreeNode();
            this._rowContainer.appendChild(this._rowElements[i]);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._refreshRowsDimensions();
    };
    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {
        var element = document.createElement('div');
        element.setAttribute('role', 'listitem');
        element.tabIndex = -1;
        this._refreshRowDimensions(element);
        return element;
    };
    AccessibilityManager.prototype._onTab = function (spaceCount) {
        for (var i = 0; i < spaceCount; i++) {
            this._onChar(' ');
        }
    };
    AccessibilityManager.prototype._onChar = function (char) {
        var _this = this;
        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {
            if (this._charsToConsume.length > 0) {
                var shiftedChar = this._charsToConsume.shift();
                if (shiftedChar !== char) {
                    this._announceCharacter(char);
                }
            }
            else {
                this._announceCharacter(char);
            }
            if (char === '\n') {
                this._liveRegionLineCount++;
                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {
                    this._liveRegion.textContent += Strings.tooMuchOutput;
                }
            }
            if (Platform_1.isMac) {
                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {
                    setTimeout(function () {
                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
                    }, 0);
                }
            }
        }
    };
    AccessibilityManager.prototype._clearLiveRegion = function () {
        this._liveRegion.textContent = '';
        this._liveRegionLineCount = 0;
        if (Platform_1.isMac) {
            if (this._liveRegion.parentNode) {
                this._accessibilityTreeRoot.removeChild(this._liveRegion);
            }
        }
    };
    AccessibilityManager.prototype._onKey = function (keyChar) {
        this._clearLiveRegion();
        this._charsToConsume.push(keyChar);
    };
    AccessibilityManager.prototype._refreshRows = function (start, end) {
        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);
    };
    AccessibilityManager.prototype._renderRows = function (start, end) {
        var buffer = this._terminal.buffer;
        var setSize = buffer.lines.length.toString();
        for (var i = start; i <= end; i++) {
            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);
            var posInSet = (buffer.ydisp + i + 1).toString();
            var element = this._rowElements[i];
            element.textContent = lineData.length === 0 ? Strings.blankLine : lineData;
            element.setAttribute('aria-posinset', posInSet);
            element.setAttribute('aria-setsize', setSize);
        }
    };
    AccessibilityManager.prototype._refreshRowsDimensions = function () {
        if (!this._terminal.renderer.dimensions.actualCellHeight) {
            return;
        }
        if (this._rowElements.length !== this._terminal.rows) {
            this._onResize(this._terminal.rows);
        }
        for (var i = 0; i < this._terminal.rows; i++) {
            this._refreshRowDimensions(this._rowElements[i]);
        }
    };
    AccessibilityManager.prototype._refreshRowDimensions = function (element) {
        element.style.height = this._terminal.renderer.dimensions.actualCellHeight + "px";
    };
    AccessibilityManager.prototype._announceCharacter = function (char) {
        if (char === ' ') {
            this._liveRegion.innerHTML += '&nbsp;';
        }
        else {
            this._liveRegion.textContent += char;
        }
    };
    return AccessibilityManager;
}(Lifecycle_2.Disposable));
exports.AccessibilityManager = AccessibilityManager;


/***/ }),

/***/ "./lib/Buffer.js":
/*!***********************!*\
  !*** ./lib/Buffer.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var CircularList_1 = __webpack_require__(/*! ./common/CircularList */ "./lib/common/CircularList.js");
var BufferLine_1 = __webpack_require__(/*! ./BufferLine */ "./lib/BufferLine.js");
var BufferReflow_1 = __webpack_require__(/*! ./BufferReflow */ "./lib/BufferReflow.js");
var Types_1 = __webpack_require__(/*! ./renderer/atlas/Types */ "./lib/renderer/atlas/Types.js");
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var Lifecycle_1 = __webpack_require__(/*! ../lib/common/Lifecycle */ "./lib/common/Lifecycle.js");
exports.DEFAULT_ATTR = (0 << 18) | (Types_1.DEFAULT_COLOR << 9) | (256 << 0);
exports.DEFAULT_ATTR_DATA = new BufferLine_1.AttributeData();
exports.CHAR_DATA_ATTR_INDEX = 0;
exports.CHAR_DATA_CHAR_INDEX = 1;
exports.CHAR_DATA_WIDTH_INDEX = 2;
exports.CHAR_DATA_CODE_INDEX = 3;
exports.MAX_BUFFER_SIZE = 4294967295;
exports.NULL_CELL_CHAR = '';
exports.NULL_CELL_WIDTH = 1;
exports.NULL_CELL_CODE = 0;
exports.WHITESPACE_CELL_CHAR = ' ';
exports.WHITESPACE_CELL_WIDTH = 1;
exports.WHITESPACE_CELL_CODE = 32;
var Buffer = (function () {
    function Buffer(_terminal, _hasScrollback) {
        this._terminal = _terminal;
        this._hasScrollback = _hasScrollback;
        this.savedCurAttrData = exports.DEFAULT_ATTR_DATA.clone();
        this.markers = [];
        this._nullCell = BufferLine_1.CellData.fromCharData([0, exports.NULL_CELL_CHAR, exports.NULL_CELL_WIDTH, exports.NULL_CELL_CODE]);
        this._whitespaceCell = BufferLine_1.CellData.fromCharData([0, exports.WHITESPACE_CELL_CHAR, exports.WHITESPACE_CELL_WIDTH, exports.WHITESPACE_CELL_CODE]);
        this._cols = this._terminal.cols;
        this._rows = this._terminal.rows;
        this.clear();
    }
    Buffer.prototype.getNullCell = function (attr) {
        if (attr) {
            this._nullCell.fg = attr.fg;
            this._nullCell.bg = attr.bg;
        }
        else {
            this._nullCell.fg = 0;
            this._nullCell.bg = 0;
        }
        return this._nullCell;
    };
    Buffer.prototype.getWhitespaceCell = function (attr) {
        if (attr) {
            this._whitespaceCell.fg = attr.fg;
            this._whitespaceCell.bg = attr.bg;
        }
        else {
            this._whitespaceCell.fg = 0;
            this._whitespaceCell.bg = 0;
        }
        return this._whitespaceCell;
    };
    Buffer.prototype.getBlankLine = function (attr, isWrapped) {
        return new BufferLine_1.BufferLine(this._terminal.cols, this.getNullCell(attr), isWrapped);
    };
    Object.defineProperty(Buffer.prototype, "hasScrollback", {
        get: function () {
            return this._hasScrollback && this.lines.maxLength > this._rows;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Buffer.prototype, "isCursorInViewport", {
        get: function () {
            var absoluteY = this.ybase + this.y;
            var relativeY = absoluteY - this.ydisp;
            return (relativeY >= 0 && relativeY < this._rows);
        },
        enumerable: true,
        configurable: true
    });
    Buffer.prototype._getCorrectBufferLength = function (rows) {
        if (!this._hasScrollback) {
            return rows;
        }
        var correctBufferLength = rows + this._terminal.options.scrollback;
        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;
    };
    Buffer.prototype.fillViewportRows = function (fillAttr) {
        if (this.lines.length === 0) {
            if (fillAttr === undefined) {
                fillAttr = exports.DEFAULT_ATTR_DATA;
            }
            var i = this._rows;
            while (i--) {
                this.lines.push(this.getBlankLine(fillAttr));
            }
        }
    };
    Buffer.prototype.clear = function () {
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    };
    Buffer.prototype.resize = function (newCols, newRows) {
        var nullCell = this.getNullCell(exports.DEFAULT_ATTR_DATA);
        var newMaxLength = this._getCorrectBufferLength(newRows);
        if (newMaxLength > this.lines.maxLength) {
            this.lines.maxLength = newMaxLength;
        }
        if (this.lines.length > 0) {
            if (this._cols < newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
            var addToY = 0;
            if (this._rows < newRows) {
                for (var y = this._rows; y < newRows; y++) {
                    if (this.lines.length < newRows + this.ybase) {
                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {
                            this.ybase--;
                            addToY++;
                            if (this.ydisp > 0) {
                                this.ydisp--;
                            }
                        }
                        else {
                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                        }
                    }
                }
            }
            else {
                for (var y = this._rows; y > newRows; y--) {
                    if (this.lines.length > newRows + this.ybase) {
                        if (this.lines.length > this.ybase + this.y + 1) {
                            this.lines.pop();
                        }
                        else {
                            this.ybase++;
                            this.ydisp++;
                        }
                    }
                }
            }
            if (newMaxLength < this.lines.maxLength) {
                var amountToTrim = this.lines.length - newMaxLength;
                if (amountToTrim > 0) {
                    this.lines.trimStart(amountToTrim);
                    this.ybase = Math.max(this.ybase - amountToTrim, 0);
                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);
                }
                this.lines.maxLength = newMaxLength;
            }
            this.x = Math.min(this.x, newCols - 1);
            this.y = Math.min(this.y, newRows - 1);
            if (addToY) {
                this.y += addToY;
            }
            this.savedY = Math.min(this.savedY, newRows - 1);
            this.savedX = Math.min(this.savedX, newCols - 1);
            this.scrollTop = 0;
        }
        this.scrollBottom = newRows - 1;
        if (this._isReflowEnabled) {
            this._reflow(newCols, newRows);
            if (this._cols > newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
        }
        this._cols = newCols;
        this._rows = newRows;
    };
    Object.defineProperty(Buffer.prototype, "_isReflowEnabled", {
        get: function () {
            return this._hasScrollback && !this._terminal.options.windowsMode;
        },
        enumerable: true,
        configurable: true
    });
    Buffer.prototype._reflow = function (newCols, newRows) {
        if (this._cols === newCols) {
            return;
        }
        if (newCols > this._cols) {
            this._reflowLarger(newCols, newRows);
        }
        else {
            this._reflowSmaller(newCols, newRows);
        }
    };
    Buffer.prototype._reflowLarger = function (newCols, newRows) {
        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(exports.DEFAULT_ATTR_DATA));
        if (toRemove.length > 0) {
            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);
            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);
            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);
        }
    };
    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {
        var nullCell = this.getNullCell(exports.DEFAULT_ATTR_DATA);
        var viewportAdjustments = countRemoved;
        while (viewportAdjustments-- > 0) {
            if (this.ybase === 0) {
                if (this.y > 0) {
                    this.y--;
                }
                if (this.lines.length < newRows) {
                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                }
            }
            else {
                if (this.ydisp === this.ybase) {
                    this.ydisp--;
                }
                this.ybase--;
            }
        }
    };
    Buffer.prototype._reflowSmaller = function (newCols, newRows) {
        var nullCell = this.getNullCell(exports.DEFAULT_ATTR_DATA);
        var toInsert = [];
        var countToInsert = 0;
        for (var y = this.lines.length - 1; y >= 0; y--) {
            var nextLine = this.lines.get(y);
            if (!nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {
                continue;
            }
            var wrappedLines = [nextLine];
            while (nextLine.isWrapped && y > 0) {
                nextLine = this.lines.get(--y);
                wrappedLines.unshift(nextLine);
            }
            var absoluteY = this.ybase + this.y;
            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {
                continue;
            }
            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();
            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);
            var linesToAdd = destLineLengths.length - wrappedLines.length;
            var trimmedLines = void 0;
            if (this.ybase === 0 && this.y !== this.lines.length - 1) {
                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);
            }
            else {
                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);
            }
            var newLines = [];
            for (var i = 0; i < linesToAdd; i++) {
                var newLine = this.getBlankLine(exports.DEFAULT_ATTR_DATA, true);
                newLines.push(newLine);
            }
            if (newLines.length > 0) {
                toInsert.push({
                    start: y + wrappedLines.length + countToInsert,
                    newLines: newLines
                });
                countToInsert += newLines.length;
            }
            wrappedLines.push.apply(wrappedLines, newLines);
            var destLineIndex = destLineLengths.length - 1;
            var destCol = destLineLengths[destLineIndex];
            if (destCol === 0) {
                destLineIndex--;
                destCol = destLineLengths[destLineIndex];
            }
            var srcLineIndex = wrappedLines.length - linesToAdd - 1;
            var srcCol = lastLineLength;
            while (srcLineIndex >= 0) {
                var cellsToCopy = Math.min(srcCol, destCol);
                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);
                destCol -= cellsToCopy;
                if (destCol === 0) {
                    destLineIndex--;
                    destCol = destLineLengths[destLineIndex];
                }
                srcCol -= cellsToCopy;
                if (srcCol === 0) {
                    srcLineIndex--;
                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);
                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);
                }
            }
            for (var i = 0; i < wrappedLines.length; i++) {
                if (destLineLengths[i] < newCols) {
                    wrappedLines[i].setCell(destLineLengths[i], nullCell);
                }
            }
            var viewportAdjustments = linesToAdd - trimmedLines;
            while (viewportAdjustments-- > 0) {
                if (this.ybase === 0) {
                    if (this.y < newRows - 1) {
                        this.y++;
                        this.lines.pop();
                    }
                    else {
                        this.ybase++;
                        this.ydisp++;
                    }
                }
                else {
                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {
                        if (this.ybase === this.ydisp) {
                            this.ydisp++;
                        }
                        this.ybase++;
                    }
                }
            }
        }
        if (toInsert.length > 0) {
            var insertEvents = [];
            var originalLines = [];
            for (var i = 0; i < this.lines.length; i++) {
                originalLines.push(this.lines.get(i));
            }
            var originalLinesLength = this.lines.length;
            var originalLineIndex = originalLinesLength - 1;
            var nextToInsertIndex = 0;
            var nextToInsert = toInsert[nextToInsertIndex];
            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);
            var countInsertedSoFar = 0;
            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {
                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {
                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {
                        this.lines.set(i--, nextToInsert.newLines[nextI]);
                    }
                    i++;
                    insertEvents.push({
                        index: originalLineIndex + 1,
                        amount: nextToInsert.newLines.length
                    });
                    countInsertedSoFar += nextToInsert.newLines.length;
                    nextToInsert = toInsert[++nextToInsertIndex];
                }
                else {
                    this.lines.set(i, originalLines[originalLineIndex--]);
                }
            }
            var insertCountEmitted = 0;
            for (var i = insertEvents.length - 1; i >= 0; i--) {
                insertEvents[i].index += insertCountEmitted;
                this.lines.onInsertEmitter.fire(insertEvents[i]);
                insertCountEmitted += insertEvents[i].amount;
            }
            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);
            if (amountToTrim > 0) {
                this.lines.onTrimEmitter.fire(amountToTrim);
            }
        }
    };
    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {
        if (trimRight === void 0) { trimRight = false; }
        while (stringIndex) {
            var line = this.lines.get(lineIndex);
            if (!line) {
                return [-1, -1];
            }
            var length_1 = (trimRight) ? line.getTrimmedLength() : line.length;
            for (var i = 0; i < length_1; ++i) {
                if (line.get(i)[exports.CHAR_DATA_WIDTH_INDEX]) {
                    stringIndex -= line.get(i)[exports.CHAR_DATA_CHAR_INDEX].length || 1;
                }
                if (stringIndex < 0) {
                    return [lineIndex, i];
                }
            }
            lineIndex++;
        }
        return [lineIndex, 0];
    };
    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {
        if (startCol === void 0) { startCol = 0; }
        var line = this.lines.get(lineIndex);
        if (!line) {
            return '';
        }
        return line.translateToString(trimRight, startCol, endCol);
    };
    Buffer.prototype.getWrappedRangeForLine = function (y) {
        var first = y;
        var last = y;
        while (first > 0 && this.lines.get(first).isWrapped) {
            first--;
        }
        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {
            last++;
        }
        return { first: first, last: last };
    };
    Buffer.prototype.setupTabStops = function (i) {
        if (i !== null && i !== undefined) {
            if (!this.tabs[i]) {
                i = this.prevStop(i);
            }
        }
        else {
            this.tabs = {};
            i = 0;
        }
        for (; i < this._cols; i += this._terminal.options.tabStopWidth) {
            this.tabs[i] = true;
        }
    };
    Buffer.prototype.prevStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[--x] && x > 0)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.nextStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[++x] && x < this._cols)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.addMarker = function (y) {
        var _this = this;
        var marker = new Marker(y);
        this.markers.push(marker);
        marker.register(this.lines.onTrim(function (amount) {
            marker.line -= amount;
            if (marker.line < 0) {
                marker.dispose();
            }
        }));
        marker.register(this.lines.onInsert(function (event) {
            if (marker.line >= event.index) {
                marker.line += event.amount;
            }
        }));
        marker.register(this.lines.onDelete(function (event) {
            if (marker.line >= event.index && marker.line < event.index + event.amount) {
                marker.dispose();
            }
            if (marker.line > event.index) {
                marker.line -= event.amount;
            }
        }));
        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));
        return marker;
    };
    Buffer.prototype._removeMarker = function (marker) {
        this.markers.splice(this.markers.indexOf(marker), 1);
    };
    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {
        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);
    };
    return Buffer;
}());
exports.Buffer = Buffer;
var Marker = (function (_super) {
    __extends(Marker, _super);
    function Marker(line) {
        var _this = _super.call(this) || this;
        _this.line = line;
        _this._id = Marker._nextId++;
        _this.isDisposed = false;
        _this._onDispose = new EventEmitter2_1.EventEmitter2();
        return _this;
    }
    Object.defineProperty(Marker.prototype, "id", {
        get: function () { return this._id; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Marker.prototype, "onDispose", {
        get: function () { return this._onDispose.event; },
        enumerable: true,
        configurable: true
    });
    Marker.prototype.dispose = function () {
        if (this.isDisposed) {
            return;
        }
        this.isDisposed = true;
        this._onDispose.fire();
    };
    Marker._nextId = 1;
    return Marker;
}(Lifecycle_1.Disposable));
exports.Marker = Marker;
var BufferStringIterator = (function () {
    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {
        if (_startIndex === void 0) { _startIndex = 0; }
        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }
        if (_startOverscan === void 0) { _startOverscan = 0; }
        if (_endOverscan === void 0) { _endOverscan = 0; }
        this._buffer = _buffer;
        this._trimRight = _trimRight;
        this._startIndex = _startIndex;
        this._endIndex = _endIndex;
        this._startOverscan = _startOverscan;
        this._endOverscan = _endOverscan;
        if (this._startIndex < 0) {
            this._startIndex = 0;
        }
        if (this._endIndex > this._buffer.lines.length) {
            this._endIndex = this._buffer.lines.length;
        }
        this._current = this._startIndex;
    }
    BufferStringIterator.prototype.hasNext = function () {
        return this._current < this._endIndex;
    };
    BufferStringIterator.prototype.next = function () {
        var range = this._buffer.getWrappedRangeForLine(this._current);
        if (range.first < this._startIndex - this._startOverscan) {
            range.first = this._startIndex - this._startOverscan;
        }
        if (range.last > this._endIndex + this._endOverscan) {
            range.last = this._endIndex + this._endOverscan;
        }
        range.first = Math.max(range.first, 0);
        range.last = Math.min(range.last, this._buffer.lines.length);
        var result = '';
        for (var i = range.first; i <= range.last; ++i) {
            result += this._buffer.translateBufferLineToString(i, this._trimRight);
        }
        this._current = range.last + 1;
        return { range: range, content: result };
    };
    return BufferStringIterator;
}());
exports.BufferStringIterator = BufferStringIterator;


/***/ }),

/***/ "./lib/BufferLine.js":
/*!***************************!*\
  !*** ./lib/BufferLine.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! ./Buffer */ "./lib/Buffer.js");
var TextDecoder_1 = __webpack_require__(/*! ./core/input/TextDecoder */ "./lib/core/input/TextDecoder.js");
var CELL_SIZE = 3;
var AttributeData = (function () {
    function AttributeData() {
        this.fg = 0;
        this.bg = 0;
    }
    AttributeData.toColorRGB = function (value) {
        return [
            value >>> 16 & 255,
            value >>> 8 & 255,
            value & 255
        ];
    };
    AttributeData.fromColorRGB = function (value) {
        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;
    };
    AttributeData.prototype.clone = function () {
        var newObj = new AttributeData();
        newObj.fg = this.fg;
        newObj.bg = this.bg;
        return newObj;
    };
    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };
    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };
    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };
    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };
    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };
    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };
    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };
    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };
    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };
    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };
    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };
    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };
    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };
    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };
    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };
    AttributeData.prototype.getFgColor = function () {
        switch (this.fg & 50331648) {
            case 16777216:
            case 33554432: return this.fg & 255;
            case 50331648: return this.fg & 16777215;
            default: return -1;
        }
    };
    AttributeData.prototype.getBgColor = function () {
        switch (this.bg & 50331648) {
            case 16777216:
            case 33554432: return this.bg & 255;
            case 50331648: return this.bg & 16777215;
            default: return -1;
        }
    };
    return AttributeData;
}());
exports.AttributeData = AttributeData;
var CellData = (function (_super) {
    __extends(CellData, _super);
    function CellData() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.content = 0;
        _this.fg = 0;
        _this.bg = 0;
        _this.combinedData = '';
        return _this;
    }
    CellData.fromCharData = function (value) {
        var obj = new CellData();
        obj.setFromCharData(value);
        return obj;
    };
    CellData.prototype.isCombined = function () {
        return this.content & 2097152;
    };
    CellData.prototype.getWidth = function () {
        return this.content >> 22;
    };
    CellData.prototype.getChars = function () {
        if (this.content & 2097152) {
            return this.combinedData;
        }
        if (this.content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);
        }
        return '';
    };
    CellData.prototype.getCode = function () {
        return (this.isCombined())
            ? this.combinedData.charCodeAt(this.combinedData.length - 1)
            : this.content & 2097151;
    };
    CellData.prototype.setFromCharData = function (value) {
        this.fg = value[Buffer_1.CHAR_DATA_ATTR_INDEX];
        this.bg = 0;
        var combined = false;
        if (value[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 2) {
            combined = true;
        }
        else if (value[Buffer_1.CHAR_DATA_CHAR_INDEX].length === 2) {
            var code = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
            if (0xD800 <= code && code <= 0xDBFF) {
                var second = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);
                }
                else {
                    combined = true;
                }
            }
            else {
                combined = true;
            }
        }
        else {
            this.content = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        if (combined) {
            this.combinedData = value[Buffer_1.CHAR_DATA_CHAR_INDEX];
            this.content = 2097152 | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    CellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return CellData;
}(AttributeData));
exports.CellData = CellData;
var BufferLine = (function () {
    function BufferLine(cols, fillCellData, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        this.isWrapped = isWrapped;
        this._data = null;
        this._combined = {};
        if (cols) {
            this._data = new Uint32Array(cols * CELL_SIZE);
            var cell = fillCellData || CellData.fromCharData([0, Buffer_1.NULL_CELL_CHAR, Buffer_1.NULL_CELL_WIDTH, Buffer_1.NULL_CELL_CODE]);
            for (var i = 0; i < cols; ++i) {
                this.setCell(i, cell);
            }
        }
        this.length = cols;
    }
    BufferLine.prototype.get = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        var cp = content & 2097151;
        return [
            this._data[index * CELL_SIZE + 1],
            (content & 2097152)
                ? this._combined[index]
                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',
            content >> 22,
            (content & 2097152)
                ? this._combined[index].charCodeAt(this._combined[index].length - 1)
                : cp
        ];
    };
    BufferLine.prototype.set = function (index, value) {
        this._data[index * CELL_SIZE + 1] = value[Buffer_1.CHAR_DATA_ATTR_INDEX];
        if (value[Buffer_1.CHAR_DATA_CHAR_INDEX].length > 1) {
            this._combined[index] = value[1];
            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        else {
            this._data[index * CELL_SIZE + 0] = value[Buffer_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Buffer_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    BufferLine.prototype.getWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] >> 22;
    };
    BufferLine.prototype.hasWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] & 12582912;
    };
    BufferLine.prototype.getFg = function (index) {
        return this._data[index * CELL_SIZE + 1];
    };
    BufferLine.prototype.getBg = function (index) {
        return this._data[index * CELL_SIZE + 2];
    };
    BufferLine.prototype.hasContent = function (index) {
        return this._data[index * CELL_SIZE + 0] & 4194303;
    };
    BufferLine.prototype.getCodePoint = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index].charCodeAt(this._combined[index].length - 1);
        }
        return content & 2097151;
    };
    BufferLine.prototype.isCombined = function (index) {
        return this._data[index * CELL_SIZE + 0] & 2097152;
    };
    BufferLine.prototype.getString = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index];
        }
        if (content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(content & 2097151);
        }
        return '';
    };
    BufferLine.prototype.loadCell = function (index, cell) {
        var startIndex = index * CELL_SIZE;
        cell.content = this._data[startIndex + 0];
        cell.fg = this._data[startIndex + 1];
        cell.bg = this._data[startIndex + 2];
        if (cell.content & 2097152) {
            cell.combinedData = this._combined[index];
        }
        return cell;
    };
    BufferLine.prototype.setCell = function (index, cell) {
        if (cell.content & 2097152) {
            this._combined[index] = cell.combinedData;
        }
        this._data[index * CELL_SIZE + 0] = cell.content;
        this._data[index * CELL_SIZE + 1] = cell.fg;
        this._data[index * CELL_SIZE + 2] = cell.bg;
    };
    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {
        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);
        this._data[index * CELL_SIZE + 1] = fg;
        this._data[index * CELL_SIZE + 2] = bg;
    };
    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);
        }
        else {
            if (content & 2097151) {
                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);
                content &= ~2097151;
                content |= 2097152;
            }
            else {
                content = codePoint | (1 << 22);
            }
            this._data[index * CELL_SIZE + 0] = content;
        }
    };
    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {
        pos %= this.length;
        if (n < this.length - pos) {
            var cell = new CellData();
            for (var i = this.length - pos - n - 1; i >= 0; --i) {
                this.setCell(pos + n + i, this.loadCell(pos + i, cell));
            }
            for (var i = 0; i < n; ++i) {
                this.setCell(pos + i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
    };
    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {
        pos %= this.length;
        if (n < this.length - pos) {
            var cell = new CellData();
            for (var i = 0; i < this.length - pos - n; ++i) {
                this.setCell(pos + i, this.loadCell(pos + n + i, cell));
            }
            for (var i = this.length - n; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
    };
    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {
        while (start < end && start < this.length) {
            this.setCell(start++, fillCellData);
        }
    };
    BufferLine.prototype.resize = function (cols, fillCellData) {
        if (cols === this.length) {
            return;
        }
        if (cols > this.length) {
            var data = new Uint32Array(cols * CELL_SIZE);
            if (this.length) {
                if (cols * CELL_SIZE < this._data.length) {
                    data.set(this._data.subarray(0, cols * CELL_SIZE));
                }
                else {
                    data.set(this._data);
                }
            }
            this._data = data;
            for (var i = this.length; i < cols; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            if (cols) {
                var data = new Uint32Array(cols * CELL_SIZE);
                data.set(this._data.subarray(0, cols * CELL_SIZE));
                this._data = data;
                var keys = Object.keys(this._combined);
                for (var i = 0; i < keys.length; i++) {
                    var key = parseInt(keys[i], 10);
                    if (key >= cols) {
                        delete this._combined[key];
                    }
                }
            }
            else {
                this._data = null;
                this._combined = {};
            }
        }
        this.length = cols;
    };
    BufferLine.prototype.fill = function (fillCellData) {
        this._combined = {};
        for (var i = 0; i < this.length; ++i) {
            this.setCell(i, fillCellData);
        }
    };
    BufferLine.prototype.copyFrom = function (line) {
        if (this.length !== line.length) {
            this._data = new Uint32Array(line._data);
        }
        else {
            this._data.set(line._data);
        }
        this.length = line.length;
        this._combined = {};
        for (var el in line._combined) {
            this._combined[el] = line._combined[el];
        }
        this.isWrapped = line.isWrapped;
    };
    BufferLine.prototype.clone = function () {
        var newLine = new BufferLine(0);
        newLine._data = new Uint32Array(this._data);
        newLine.length = this.length;
        for (var el in this._combined) {
            newLine._combined[el] = this._combined[el];
        }
        newLine.isWrapped = this.isWrapped;
        return newLine;
    };
    BufferLine.prototype.getTrimmedLength = function () {
        for (var i = this.length - 1; i >= 0; --i) {
            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {
                return i + (this._data[i * CELL_SIZE + 0] >> 22);
            }
        }
        return 0;
    };
    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {
        var srcData = src._data;
        if (applyInReverse) {
            for (var cell = length - 1; cell >= 0; cell--) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        else {
            for (var cell = 0; cell < length; cell++) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        var srcCombinedKeys = Object.keys(src._combined);
        for (var i = 0; i < srcCombinedKeys.length; i++) {
            var key = parseInt(srcCombinedKeys[i], 10);
            if (key >= srcCol) {
                this._combined[key - srcCol + destCol] = src._combined[key];
            }
        }
    };
    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {
        if (trimRight === void 0) { trimRight = false; }
        if (startCol === void 0) { startCol = 0; }
        if (endCol === void 0) { endCol = this.length; }
        if (trimRight) {
            endCol = Math.min(endCol, this.getTrimmedLength());
        }
        var result = '';
        while (startCol < endCol) {
            var content = this._data[startCol * CELL_SIZE + 0];
            var cp = content & 2097151;
            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : Buffer_1.WHITESPACE_CELL_CHAR;
            startCol += (content >> 22) || 1;
        }
        return result;
    };
    return BufferLine;
}());
exports.BufferLine = BufferLine;


/***/ }),

/***/ "./lib/BufferReflow.js":
/*!*****************************!*\
  !*** ./lib/BufferReflow.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {
    var toRemove = [];
    for (var y = 0; y < lines.length - 1; y++) {
        var i = y;
        var nextLine = lines.get(++i);
        if (!nextLine.isWrapped) {
            continue;
        }
        var wrappedLines = [lines.get(y)];
        while (i < lines.length && nextLine.isWrapped) {
            wrappedLines.push(nextLine);
            nextLine = lines.get(++i);
        }
        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {
            y += wrappedLines.length - 1;
            continue;
        }
        var destLineIndex = 0;
        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);
        var srcLineIndex = 1;
        var srcCol = 0;
        while (srcLineIndex < wrappedLines.length) {
            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);
            var srcRemainingCells = srcTrimmedTineLength - srcCol;
            var destRemainingCells = newCols - destCol;
            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);
            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);
            destCol += cellsToCopy;
            if (destCol === newCols) {
                destLineIndex++;
                destCol = 0;
            }
            srcCol += cellsToCopy;
            if (srcCol === srcTrimmedTineLength) {
                srcLineIndex++;
                srcCol = 0;
            }
            if (destCol === 0 && destLineIndex !== 0) {
                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {
                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);
                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);
                }
            }
        }
        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);
        var countToRemove = 0;
        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {
            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {
                countToRemove++;
            }
            else {
                break;
            }
        }
        if (countToRemove > 0) {
            toRemove.push(y + wrappedLines.length - countToRemove);
            toRemove.push(countToRemove);
        }
        y += wrappedLines.length - 1;
    }
    return toRemove;
}
exports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;
function reflowLargerCreateNewLayout(lines, toRemove) {
    var layout = [];
    var nextToRemoveIndex = 0;
    var nextToRemoveStart = toRemove[nextToRemoveIndex];
    var countRemovedSoFar = 0;
    for (var i = 0; i < lines.length; i++) {
        if (nextToRemoveStart === i) {
            var countToRemove = toRemove[++nextToRemoveIndex];
            lines.onDeleteEmitter.fire({
                index: i - countRemovedSoFar,
                amount: countToRemove
            });
            i += countToRemove - 1;
            countRemovedSoFar += countToRemove;
            nextToRemoveStart = toRemove[++nextToRemoveIndex];
        }
        else {
            layout.push(i);
        }
    }
    return {
        layout: layout,
        countRemoved: countRemovedSoFar
    };
}
exports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;
function reflowLargerApplyNewLayout(lines, newLayout) {
    var newLayoutLines = [];
    for (var i = 0; i < newLayout.length; i++) {
        newLayoutLines.push(lines.get(newLayout[i]));
    }
    for (var i = 0; i < newLayoutLines.length; i++) {
        lines.set(i, newLayoutLines[i]);
    }
    lines.length = newLayout.length;
}
exports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;
function reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {
    var newLineLengths = [];
    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });
    var srcCol = 0;
    var srcLine = 0;
    var cellsAvailable = 0;
    while (cellsAvailable < cellsNeeded) {
        if (cellsNeeded - cellsAvailable < newCols) {
            newLineLengths.push(cellsNeeded - cellsAvailable);
            break;
        }
        srcCol += newCols;
        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);
        if (srcCol > oldTrimmedLength) {
            srcCol -= oldTrimmedLength;
            srcLine++;
        }
        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;
        if (endsWithWide) {
            srcCol--;
        }
        var lineLength = endsWithWide ? newCols - 1 : newCols;
        newLineLengths.push(lineLength);
        cellsAvailable += lineLength;
    }
    return newLineLengths;
}
exports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;
function getWrappedLineTrimmedLength(lines, i, cols) {
    if (i === lines.length - 1) {
        return lines[i].getTrimmedLength();
    }
    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;
    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;
    if (endsInNull && followingLineStartsWithWide) {
        return cols - 1;
    }
    return cols;
}
exports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;


/***/ }),

/***/ "./lib/BufferSet.js":
/*!**************************!*\
  !*** ./lib/BufferSet.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! ./Buffer */ "./lib/Buffer.js");
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var BufferSet = (function () {
    function BufferSet(_terminal) {
        this._terminal = _terminal;
        this._onBufferActivate = new EventEmitter2_1.EventEmitter2();
        this._normal = new Buffer_1.Buffer(this._terminal, true);
        this._normal.fillViewportRows();
        this._alt = new Buffer_1.Buffer(this._terminal, false);
        this._activeBuffer = this._normal;
        this.setupTabStops();
    }
    Object.defineProperty(BufferSet.prototype, "onBufferActivate", {
        get: function () { return this._onBufferActivate.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "alt", {
        get: function () {
            return this._alt;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "active", {
        get: function () {
            return this._activeBuffer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "normal", {
        get: function () {
            return this._normal;
        },
        enumerable: true,
        configurable: true
    });
    BufferSet.prototype.activateNormalBuffer = function () {
        if (this._activeBuffer === this._normal) {
            return;
        }
        this._normal.x = this._alt.x;
        this._normal.y = this._alt.y;
        this._alt.clear();
        this._activeBuffer = this._normal;
        this._onBufferActivate.fire({
            activeBuffer: this._normal,
            inactiveBuffer: this._alt
        });
    };
    BufferSet.prototype.activateAltBuffer = function (fillAttr) {
        if (this._activeBuffer === this._alt) {
            return;
        }
        this._alt.fillViewportRows(fillAttr);
        this._alt.x = this._normal.x;
        this._alt.y = this._normal.y;
        this._activeBuffer = this._alt;
        this._onBufferActivate.fire({
            activeBuffer: this._alt,
            inactiveBuffer: this._normal
        });
    };
    BufferSet.prototype.resize = function (newCols, newRows) {
        this._normal.resize(newCols, newRows);
        this._alt.resize(newCols, newRows);
    };
    BufferSet.prototype.setupTabStops = function (i) {
        this._normal.setupTabStops(i);
        this._alt.setupTabStops(i);
    };
    return BufferSet;
}());
exports.BufferSet = BufferSet;


/***/ }),

/***/ "./lib/CharMeasure.js":
/*!****************************!*\
  !*** ./lib/CharMeasure.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var CharMeasure = (function () {
    function CharMeasure(document, parentElement) {
        this._onCharSizeChanged = new EventEmitter2_1.EventEmitter2();
        this._document = document;
        this._parentElement = parentElement;
        this._measureElement = this._document.createElement('span');
        this._measureElement.classList.add('xterm-char-measure-element');
        this._measureElement.textContent = 'W';
        this._measureElement.setAttribute('aria-hidden', 'true');
        this._parentElement.appendChild(this._measureElement);
    }
    Object.defineProperty(CharMeasure.prototype, "onCharSizeChanged", {
        get: function () { return this._onCharSizeChanged.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CharMeasure.prototype, "width", {
        get: function () {
            return this._width;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CharMeasure.prototype, "height", {
        get: function () {
            return this._height;
        },
        enumerable: true,
        configurable: true
    });
    CharMeasure.prototype.measure = function (options) {
        this._measureElement.style.fontFamily = options.fontFamily;
        this._measureElement.style.fontSize = options.fontSize + "px";
        var geometry = this._measureElement.getBoundingClientRect();
        if (geometry.width === 0 || geometry.height === 0) {
            return;
        }
        var adjustedHeight = Math.ceil(geometry.height);
        if (this._width !== geometry.width || this._height !== adjustedHeight) {
            this._width = geometry.width;
            this._height = adjustedHeight;
            this._onCharSizeChanged.fire();
        }
    };
    return CharMeasure;
}());
exports.CharMeasure = CharMeasure;


/***/ }),

/***/ "./lib/CharWidth.js":
/*!**************************!*\
  !*** ./lib/CharWidth.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TypedArrayUtils_1 = __webpack_require__(/*! ./common/TypedArrayUtils */ "./lib/common/TypedArrayUtils.js");
exports.wcwidth = (function (opts) {
    var COMBINING_BMP = [
        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],
        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],
        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],
        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],
        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],
        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],
        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],
        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],
        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],
        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],
        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],
        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],
        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],
        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],
        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],
        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],
        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],
        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],
        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],
        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],
        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],
        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],
        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],
        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],
        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],
        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],
        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],
        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],
        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],
        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],
        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],
        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],
        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],
        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],
        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],
        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],
        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],
        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],
        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],
        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],
        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],
        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],
        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]
    ];
    var COMBINING_HIGH = [
        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],
        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],
        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],
        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],
        [0xE0100, 0xE01EF]
    ];
    function bisearch(ucs, data) {
        var min = 0;
        var max = data.length - 1;
        var mid;
        if (ucs < data[0][0] || ucs > data[max][1]) {
            return false;
        }
        while (max >= min) {
            mid = (min + max) >> 1;
            if (ucs > data[mid][1]) {
                min = mid + 1;
            }
            else if (ucs < data[mid][0]) {
                max = mid - 1;
            }
            else {
                return true;
            }
        }
        return false;
    }
    function wcwidthHigh(ucs) {
        if (bisearch(ucs, COMBINING_HIGH)) {
            return 0;
        }
        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {
            return 2;
        }
        return 1;
    }
    var control = opts.control | 0;
    var table = new Uint8Array(65536);
    TypedArrayUtils_1.fill(table, 1);
    table[0] = opts.nul;
    TypedArrayUtils_1.fill(table, opts.control, 1, 32);
    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);
    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);
    table[0x2329] = 2;
    table[0x232a] = 2;
    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);
    table[0x303f] = 1;
    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);
    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);
    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);
    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);
    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);
    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);
    for (var r = 0; r < COMBINING_BMP.length; ++r) {
        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);
    }
    return function (num) {
        if (num < 32) {
            return control | 0;
        }
        if (num < 127) {
            return 1;
        }
        if (num < 65536) {
            return table[num];
        }
        return wcwidthHigh(num);
    };
})({ nul: 0, control: 0 });
function getStringCellWidth(s) {
    var result = 0;
    var length = s.length;
    for (var i = 0; i < length; ++i) {
        var code = s.charCodeAt(i);
        if (0xD800 <= code && code <= 0xDBFF) {
            if (++i >= length) {
                return result + exports.wcwidth(code);
            }
            var second = s.charCodeAt(i);
            if (0xDC00 <= second && second <= 0xDFFF) {
                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                result += exports.wcwidth(second);
            }
        }
        result += exports.wcwidth(code);
    }
    return result;
}
exports.getStringCellWidth = getStringCellWidth;


/***/ }),

/***/ "./lib/Clipboard.js":
/*!**************************!*\
  !*** ./lib/Clipboard.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function prepareTextForTerminal(text) {
    return text.replace(/\r?\n/g, '\r');
}
exports.prepareTextForTerminal = prepareTextForTerminal;
function bracketTextForPaste(text, bracketedPasteMode) {
    if (bracketedPasteMode) {
        return '\x1b[200~' + text + '\x1b[201~';
    }
    return text;
}
exports.bracketTextForPaste = bracketTextForPaste;
function copyHandler(ev, term, selectionManager) {
    if (term.browser.isMSIE) {
        window.clipboardData.setData('Text', selectionManager.selectionText);
    }
    else {
        ev.clipboardData.setData('text/plain', selectionManager.selectionText);
    }
    ev.preventDefault();
}
exports.copyHandler = copyHandler;
function pasteHandler(ev, term) {
    ev.stopPropagation();
    var text;
    var dispatchPaste = function (text) {
        text = prepareTextForTerminal(text);
        text = bracketTextForPaste(text, term.bracketedPasteMode);
        term.handler(text);
        term.textarea.value = '';
        term.emit('paste', text);
        term.cancel(ev);
    };
    if (term.browser.isMSIE) {
        if (window.clipboardData) {
            text = window.clipboardData.getData('Text');
            dispatchPaste(text);
        }
    }
    else {
        if (ev.clipboardData) {
            text = ev.clipboardData.getData('text/plain');
            dispatchPaste(text);
        }
    }
}
exports.pasteHandler = pasteHandler;
function moveTextAreaUnderMouseCursor(ev, term) {
    var pos = term.screenElement.getBoundingClientRect();
    var left = ev.clientX - pos.left - 10;
    var top = ev.clientY - pos.top - 10;
    term.textarea.style.position = 'absolute';
    term.textarea.style.width = '20px';
    term.textarea.style.height = '20px';
    term.textarea.style.left = left + "px";
    term.textarea.style.top = top + "px";
    term.textarea.style.zIndex = '1000';
    term.textarea.focus();
    setTimeout(function () {
        term.textarea.style.position = null;
        term.textarea.style.width = null;
        term.textarea.style.height = null;
        term.textarea.style.left = null;
        term.textarea.style.top = null;
        term.textarea.style.zIndex = null;
    }, 200);
}
exports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;
function rightClickHandler(ev, term, selectionManager, shouldSelectWord) {
    moveTextAreaUnderMouseCursor(ev, term);
    if (shouldSelectWord && !selectionManager.isClickInSelection(ev)) {
        selectionManager.selectWordAtCursor(ev);
    }
    term.textarea.value = selectionManager.selectionText;
    term.textarea.select();
}
exports.rightClickHandler = rightClickHandler;


/***/ }),

/***/ "./lib/CompositionHelper.js":
/*!**********************************!*\
  !*** ./lib/CompositionHelper.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CompositionHelper = (function () {
    function CompositionHelper(_textarea, _compositionView, _terminal) {
        this._textarea = _textarea;
        this._compositionView = _compositionView;
        this._terminal = _terminal;
        this._isComposing = false;
        this._isSendingComposition = false;
        this._compositionPosition = { start: null, end: null };
    }
    CompositionHelper.prototype.compositionstart = function () {
        this._isComposing = true;
        this._compositionPosition.start = this._textarea.value.length;
        this._compositionView.textContent = '';
        this._compositionView.classList.add('active');
    };
    CompositionHelper.prototype.compositionupdate = function (ev) {
        var _this = this;
        this._compositionView.textContent = ev.data;
        this.updateCompositionElements();
        setTimeout(function () {
            _this._compositionPosition.end = _this._textarea.value.length;
        }, 0);
    };
    CompositionHelper.prototype.compositionend = function () {
        this._finalizeComposition(true);
    };
    CompositionHelper.prototype.keydown = function (ev) {
        if (this._isComposing || this._isSendingComposition) {
            if (ev.keyCode === 229) {
                return false;
            }
            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {
                return false;
            }
            this._finalizeComposition(false);
        }
        if (ev.keyCode === 229) {
            this._handleAnyTextareaChanges();
            return false;
        }
        return true;
    };
    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {
        var _this = this;
        this._compositionView.classList.remove('active');
        this._isComposing = false;
        this._clearTextareaPosition();
        if (!waitForPropagation) {
            this._isSendingComposition = false;
            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);
            this._terminal.handler(input);
        }
        else {
            var currentCompositionPosition_1 = {
                start: this._compositionPosition.start,
                end: this._compositionPosition.end
            };
            this._isSendingComposition = true;
            setTimeout(function () {
                if (_this._isSendingComposition) {
                    _this._isSendingComposition = false;
                    var input = void 0;
                    if (_this._isComposing) {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);
                    }
                    else {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);
                    }
                    _this._terminal.handler(input);
                }
            }, 0);
        }
    };
    CompositionHelper.prototype._handleAnyTextareaChanges = function () {
        var _this = this;
        var oldValue = this._textarea.value;
        setTimeout(function () {
            if (!_this._isComposing) {
                var newValue = _this._textarea.value;
                var diff = newValue.replace(oldValue, '');
                if (diff.length > 0) {
                    _this._terminal.handler(diff);
                }
            }
        }, 0);
    };
    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {
        var _this = this;
        if (!this._isComposing) {
            return;
        }
        if (this._terminal.buffer.isCursorInViewport) {
            var cellHeight = Math.ceil(this._terminal.charMeasure.height * this._terminal.options.lineHeight);
            var cursorTop = this._terminal.buffer.y * cellHeight;
            var cursorLeft = this._terminal.buffer.x * this._terminal.charMeasure.width;
            this._compositionView.style.left = cursorLeft + 'px';
            this._compositionView.style.top = cursorTop + 'px';
            this._compositionView.style.height = cellHeight + 'px';
            this._compositionView.style.lineHeight = cellHeight + 'px';
            this._compositionView.style.fontFamily = this._terminal.options.fontFamily;
            this._compositionView.style.fontSize = this._terminal.options.fontSize + 'px';
            var compositionViewBounds = this._compositionView.getBoundingClientRect();
            this._textarea.style.left = cursorLeft + 'px';
            this._textarea.style.top = cursorTop + 'px';
            this._textarea.style.width = compositionViewBounds.width + 'px';
            this._textarea.style.height = compositionViewBounds.height + 'px';
            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';
        }
        if (!dontRecurse) {
            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);
        }
    };
    CompositionHelper.prototype._clearTextareaPosition = function () {
        this._textarea.style.left = '';
        this._textarea.style.top = '';
    };
    return CompositionHelper;
}());
exports.CompositionHelper = CompositionHelper;


/***/ }),

/***/ "./lib/EscapeSequenceParser.js":
/*!*************************************!*\
  !*** ./lib/EscapeSequenceParser.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! ./common/Lifecycle */ "./lib/common/Lifecycle.js");
var TextDecoder_1 = __webpack_require__(/*! ./core/input/TextDecoder */ "./lib/core/input/TextDecoder.js");
function r(low, high) {
    var c = high - low;
    var arr = new Array(c);
    while (c--) {
        arr[c] = --high;
    }
    return arr;
}
var TransitionTable = (function () {
    function TransitionTable(length) {
        this.table = (typeof Uint8Array === 'undefined')
            ? new Array(length)
            : new Uint8Array(length);
    }
    TransitionTable.prototype.add = function (code, state, action, next) {
        this.table[state << 8 | code] = ((action | 0) << 4) | ((next === undefined) ? state : next);
    };
    TransitionTable.prototype.addMany = function (codes, state, action, next) {
        for (var i = 0; i < codes.length; i++) {
            this.add(codes[i], state, action, next);
        }
    };
    return TransitionTable;
}());
exports.TransitionTable = TransitionTable;
var PRINTABLES = r(0x20, 0x7f);
var EXECUTABLES = r(0x00, 0x18);
EXECUTABLES.push(0x19);
EXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));
var NON_ASCII_PRINTABLE = 0xA0;
exports.VT500_TRANSITION_TABLE = (function () {
    var table = new TransitionTable(4095);
    var states = r(0, 13 + 1);
    var state;
    for (state in states) {
        for (var code = 0; code <= NON_ASCII_PRINTABLE; ++code) {
            table.add(code, state, 1, 0);
        }
    }
    table.addMany(PRINTABLES, 0, 2, 0);
    for (state in states) {
        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);
        table.addMany(r(0x80, 0x90), state, 3, 0);
        table.addMany(r(0x90, 0x98), state, 3, 0);
        table.add(0x9c, state, 0, 0);
        table.add(0x1b, state, 11, 1);
        table.add(0x9d, state, 4, 8);
        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);
        table.add(0x9b, state, 11, 3);
        table.add(0x90, state, 11, 9);
    }
    table.addMany(EXECUTABLES, 0, 3, 0);
    table.addMany(EXECUTABLES, 1, 3, 1);
    table.add(0x7f, 1, 0, 1);
    table.addMany(EXECUTABLES, 8, 0, 8);
    table.addMany(EXECUTABLES, 3, 3, 3);
    table.add(0x7f, 3, 0, 3);
    table.addMany(EXECUTABLES, 4, 3, 4);
    table.add(0x7f, 4, 0, 4);
    table.addMany(EXECUTABLES, 6, 3, 6);
    table.addMany(EXECUTABLES, 5, 3, 5);
    table.add(0x7f, 5, 0, 5);
    table.addMany(EXECUTABLES, 2, 3, 2);
    table.add(0x7f, 2, 0, 2);
    table.add(0x5d, 1, 4, 8);
    table.addMany(PRINTABLES, 8, 5, 8);
    table.add(0x7f, 8, 5, 8);
    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);
    table.addMany(r(0x1c, 0x20), 8, 0, 8);
    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);
    table.addMany(PRINTABLES, 7, 0, 7);
    table.addMany(EXECUTABLES, 7, 0, 7);
    table.add(0x9c, 7, 0, 0);
    table.add(0x7f, 7, 0, 7);
    table.add(0x5b, 1, 11, 3);
    table.addMany(r(0x40, 0x7f), 3, 7, 0);
    table.addMany(r(0x30, 0x3a), 3, 8, 4);
    table.add(0x3b, 3, 8, 4);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);
    table.addMany(r(0x30, 0x3a), 4, 8, 4);
    table.add(0x3b, 4, 8, 4);
    table.addMany(r(0x40, 0x7f), 4, 7, 0);
    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);
    table.addMany(r(0x20, 0x40), 6, 0, 6);
    table.add(0x7f, 6, 0, 6);
    table.addMany(r(0x40, 0x7f), 6, 0, 0);
    table.add(0x3a, 3, 0, 6);
    table.addMany(r(0x20, 0x30), 3, 9, 5);
    table.addMany(r(0x20, 0x30), 5, 9, 5);
    table.addMany(r(0x30, 0x40), 5, 0, 6);
    table.addMany(r(0x40, 0x7f), 5, 7, 0);
    table.addMany(r(0x20, 0x30), 4, 9, 5);
    table.addMany(r(0x20, 0x30), 1, 9, 2);
    table.addMany(r(0x20, 0x30), 2, 9, 2);
    table.addMany(r(0x30, 0x7f), 2, 10, 0);
    table.addMany(r(0x30, 0x50), 1, 10, 0);
    table.addMany(r(0x51, 0x58), 1, 10, 0);
    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);
    table.addMany(r(0x60, 0x7f), 1, 10, 0);
    table.add(0x50, 1, 11, 9);
    table.addMany(EXECUTABLES, 9, 0, 9);
    table.add(0x7f, 9, 0, 9);
    table.addMany(r(0x1c, 0x20), 9, 0, 9);
    table.addMany(r(0x20, 0x30), 9, 9, 12);
    table.add(0x3a, 9, 0, 11);
    table.addMany(r(0x30, 0x3a), 9, 8, 10);
    table.add(0x3b, 9, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);
    table.addMany(EXECUTABLES, 11, 0, 11);
    table.addMany(r(0x20, 0x80), 11, 0, 11);
    table.addMany(r(0x1c, 0x20), 11, 0, 11);
    table.addMany(EXECUTABLES, 10, 0, 10);
    table.add(0x7f, 10, 0, 10);
    table.addMany(r(0x1c, 0x20), 10, 0, 10);
    table.addMany(r(0x30, 0x3a), 10, 8, 10);
    table.add(0x3b, 10, 8, 10);
    table.addMany([0x3a, 0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);
    table.addMany(r(0x20, 0x30), 10, 9, 12);
    table.addMany(EXECUTABLES, 12, 0, 12);
    table.add(0x7f, 12, 0, 12);
    table.addMany(r(0x1c, 0x20), 12, 0, 12);
    table.addMany(r(0x20, 0x30), 12, 9, 12);
    table.addMany(r(0x30, 0x40), 12, 0, 11);
    table.addMany(r(0x40, 0x7f), 12, 12, 13);
    table.addMany(r(0x40, 0x7f), 10, 12, 13);
    table.addMany(r(0x40, 0x7f), 9, 12, 13);
    table.addMany(EXECUTABLES, 13, 13, 13);
    table.addMany(PRINTABLES, 13, 13, 13);
    table.add(0x7f, 13, 0, 13);
    table.addMany([0x1b, 0x9c], 13, 14, 0);
    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);
    return table;
})();
var DcsDummy = (function () {
    function DcsDummy() {
    }
    DcsDummy.prototype.hook = function (collect, params, flag) { };
    DcsDummy.prototype.put = function (data, start, end) { };
    DcsDummy.prototype.unhook = function () { };
    return DcsDummy;
}());
var EscapeSequenceParser = (function (_super) {
    __extends(EscapeSequenceParser, _super);
    function EscapeSequenceParser(TRANSITIONS) {
        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }
        var _this = _super.call(this) || this;
        _this.TRANSITIONS = TRANSITIONS;
        _this.initialState = 0;
        _this.currentState = _this.initialState;
        _this._osc = '';
        _this._params = [0];
        _this._collect = '';
        _this._printHandlerFb = function (data, start, end) { };
        _this._executeHandlerFb = function (code) { };
        _this._csiHandlerFb = function (collect, params, flag) { };
        _this._escHandlerFb = function (collect, flag) { };
        _this._oscHandlerFb = function (identifier, data) { };
        _this._dcsHandlerFb = new DcsDummy();
        _this._errorHandlerFb = function (state) { return state; };
        _this._printHandler = _this._printHandlerFb;
        _this._executeHandlers = Object.create(null);
        _this._csiHandlers = Object.create(null);
        _this._escHandlers = Object.create(null);
        _this._oscHandlers = Object.create(null);
        _this._dcsHandlers = Object.create(null);
        _this._activeDcsHandler = null;
        _this._errorHandler = _this._errorHandlerFb;
        _this.setEscHandler('\\', function () { });
        return _this;
    }
    EscapeSequenceParser.prototype.dispose = function () {
        this._printHandlerFb = null;
        this._executeHandlerFb = null;
        this._csiHandlerFb = null;
        this._escHandlerFb = null;
        this._oscHandlerFb = null;
        this._dcsHandlerFb = null;
        this._errorHandlerFb = null;
        this._printHandler = null;
        this._executeHandlers = null;
        this._escHandlers = null;
        this._csiHandlers = null;
        this._oscHandlers = null;
        this._dcsHandlers = null;
        this._activeDcsHandler = null;
        this._errorHandler = null;
    };
    EscapeSequenceParser.prototype.setPrintHandler = function (callback) {
        this._printHandler = callback;
    };
    EscapeSequenceParser.prototype.clearPrintHandler = function () {
        this._printHandler = this._printHandlerFb;
    };
    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, callback) {
        this._executeHandlers[flag.charCodeAt(0)] = callback;
    };
    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {
        if (this._executeHandlers[flag.charCodeAt(0)])
            delete this._executeHandlers[flag.charCodeAt(0)];
    };
    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (callback) {
        this._executeHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.addCsiHandler = function (flag, callback) {
        var index = flag.charCodeAt(0);
        if (this._csiHandlers[index] === undefined) {
            this._csiHandlers[index] = [];
        }
        var handlerList = this._csiHandlers[index];
        handlerList.push(callback);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(callback);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.setCsiHandler = function (flag, callback) {
        this._csiHandlers[flag.charCodeAt(0)] = [callback];
    };
    EscapeSequenceParser.prototype.clearCsiHandler = function (flag) {
        if (this._csiHandlers[flag.charCodeAt(0)])
            delete this._csiHandlers[flag.charCodeAt(0)];
    };
    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {
        this._csiHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.setEscHandler = function (collectAndFlag, callback) {
        this._escHandlers[collectAndFlag] = callback;
    };
    EscapeSequenceParser.prototype.clearEscHandler = function (collectAndFlag) {
        if (this._escHandlers[collectAndFlag])
            delete this._escHandlers[collectAndFlag];
    };
    EscapeSequenceParser.prototype.setEscHandlerFallback = function (callback) {
        this._escHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.addOscHandler = function (ident, callback) {
        if (this._oscHandlers[ident] === undefined) {
            this._oscHandlers[ident] = [];
        }
        var handlerList = this._oscHandlers[ident];
        handlerList.push(callback);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(callback);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.setOscHandler = function (ident, callback) {
        this._oscHandlers[ident] = [callback];
    };
    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {
        if (this._oscHandlers[ident])
            delete this._oscHandlers[ident];
    };
    EscapeSequenceParser.prototype.setOscHandlerFallback = function (callback) {
        this._oscHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.setDcsHandler = function (collectAndFlag, handler) {
        this._dcsHandlers[collectAndFlag] = handler;
    };
    EscapeSequenceParser.prototype.clearDcsHandler = function (collectAndFlag) {
        if (this._dcsHandlers[collectAndFlag])
            delete this._dcsHandlers[collectAndFlag];
    };
    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {
        this._dcsHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {
        this._errorHandler = callback;
    };
    EscapeSequenceParser.prototype.clearErrorHandler = function () {
        this._errorHandler = this._errorHandlerFb;
    };
    EscapeSequenceParser.prototype.reset = function () {
        this.currentState = this.initialState;
        this._osc = '';
        this._params = [0];
        this._collect = '';
        this._activeDcsHandler = null;
    };
    EscapeSequenceParser.prototype.parse = function (data, length) {
        var code = 0;
        var transition = 0;
        var error = false;
        var currentState = this.currentState;
        var print = -1;
        var dcs = -1;
        var osc = this._osc;
        var collect = this._collect;
        var params = this._params;
        var table = this.TRANSITIONS.table;
        var dcsHandler = this._activeDcsHandler;
        var callback = null;
        for (var i = 0; i < length; ++i) {
            code = data[i];
            if (currentState === 0 && code > 0x1f && code < 0x80) {
                print = (~print) ? print : i;
                do
                    i++;
                while (i < length && data[i] > 0x1f && data[i] < 0x80);
                i--;
                continue;
            }
            if (currentState === 4 && (code > 0x2f && code < 0x39)) {
                params[params.length - 1] = params[params.length - 1] * 10 + code - 48;
                continue;
            }
            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];
            switch (transition >> 4) {
                case 2:
                    print = (~print) ? print : i;
                    break;
                case 3:
                    if (~print) {
                        this._printHandler(data, print, i);
                        print = -1;
                    }
                    callback = this._executeHandlers[code];
                    if (callback)
                        callback();
                    else
                        this._executeHandlerFb(code);
                    break;
                case 0:
                    if (~print) {
                        this._printHandler(data, print, i);
                        print = -1;
                    }
                    else if (~dcs) {
                        dcsHandler.put(data, dcs, i);
                        dcs = -1;
                    }
                    break;
                case 1:
                    if (code > 0x9f) {
                        switch (currentState) {
                            case 0:
                                print = (~print) ? print : i;
                                break;
                            case 6:
                                transition |= 6;
                                break;
                            case 11:
                                transition |= 11;
                                break;
                            case 13:
                                dcs = (~dcs) ? dcs : i;
                                transition |= 13;
                                break;
                            default:
                                error = true;
                        }
                    }
                    else {
                        error = true;
                    }
                    if (error) {
                        var inject = this._errorHandler({
                            position: i,
                            code: code,
                            currentState: currentState,
                            print: print,
                            dcs: dcs,
                            osc: osc,
                            collect: collect,
                            params: params,
                            abort: false
                        });
                        if (inject.abort)
                            return;
                        error = false;
                    }
                    break;
                case 7:
                    var handlers = this._csiHandlers[code];
                    var j = handlers ? handlers.length - 1 : -1;
                    for (; j >= 0; j--) {
                        if (handlers[j](params, collect) !== false) {
                            break;
                        }
                    }
                    if (j < 0) {
                        this._csiHandlerFb(collect, params, code);
                    }
                    break;
                case 8:
                    if (code === 0x3b)
                        params.push(0);
                    else
                        params[params.length - 1] = params[params.length - 1] * 10 + code - 48;
                    break;
                case 9:
                    collect += String.fromCharCode(code);
                    break;
                case 10:
                    callback = this._escHandlers[collect + String.fromCharCode(code)];
                    if (callback)
                        callback(collect, code);
                    else
                        this._escHandlerFb(collect, code);
                    break;
                case 11:
                    if (~print) {
                        this._printHandler(data, print, i);
                        print = -1;
                    }
                    osc = '';
                    params = [0];
                    collect = '';
                    dcs = -1;
                    break;
                case 12:
                    dcsHandler = this._dcsHandlers[collect + String.fromCharCode(code)];
                    if (!dcsHandler)
                        dcsHandler = this._dcsHandlerFb;
                    dcsHandler.hook(collect, params, code);
                    break;
                case 13:
                    dcs = (~dcs) ? dcs : i;
                    break;
                case 14:
                    if (dcsHandler) {
                        if (~dcs)
                            dcsHandler.put(data, dcs, i);
                        dcsHandler.unhook();
                        dcsHandler = null;
                    }
                    if (code === 0x1b)
                        transition |= 1;
                    osc = '';
                    params = [0];
                    collect = '';
                    dcs = -1;
                    break;
                case 4:
                    if (~print) {
                        this._printHandler(data, print, i);
                        print = -1;
                    }
                    osc = '';
                    break;
                case 5:
                    for (var j_1 = i + 1;; j_1++) {
                        if (j_1 >= length
                            || (code = data[j_1]) < 0x20
                            || (code > 0x7f && code <= 0x9f)) {
                            osc += TextDecoder_1.utf32ToString(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                    }
                    break;
                case 6:
                    if (osc && code !== 0x18 && code !== 0x1a) {
                        var idx = osc.indexOf(';');
                        if (idx === -1) {
                            this._oscHandlerFb(-1, osc);
                        }
                        else {
                            var identifier = parseInt(osc.substring(0, idx));
                            var content = osc.substring(idx + 1);
                            var handlers_1 = this._oscHandlers[identifier];
                            var j_2 = handlers_1 ? handlers_1.length - 1 : -1;
                            for (; j_2 >= 0; j_2--) {
                                if (handlers_1[j_2](content) !== false) {
                                    break;
                                }
                            }
                            if (j_2 < 0) {
                                this._oscHandlerFb(identifier, content);
                            }
                        }
                    }
                    if (code === 0x1b)
                        transition |= 1;
                    osc = '';
                    params = [0];
                    collect = '';
                    dcs = -1;
                    break;
            }
            currentState = transition & 15;
        }
        if (currentState === 0 && ~print) {
            this._printHandler(data, print, length);
        }
        else if (currentState === 13 && ~dcs && dcsHandler) {
            dcsHandler.put(data, dcs, length);
        }
        this._osc = osc;
        this._collect = collect;
        this._params = params;
        this._activeDcsHandler = dcsHandler;
        this.currentState = currentState;
    };
    return EscapeSequenceParser;
}(Lifecycle_1.Disposable));
exports.EscapeSequenceParser = EscapeSequenceParser;


/***/ }),

/***/ "./lib/InputHandler.js":
/*!*****************************!*\
  !*** ./lib/InputHandler.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! ./common/data/EscapeSequences */ "./lib/common/data/EscapeSequences.js");
var Charsets_1 = __webpack_require__(/*! ./core/data/Charsets */ "./lib/core/data/Charsets.js");
var Buffer_1 = __webpack_require__(/*! ./Buffer */ "./lib/Buffer.js");
var CharWidth_1 = __webpack_require__(/*! ./CharWidth */ "./lib/CharWidth.js");
var EscapeSequenceParser_1 = __webpack_require__(/*! ./EscapeSequenceParser */ "./lib/EscapeSequenceParser.js");
var Lifecycle_1 = __webpack_require__(/*! ./common/Lifecycle */ "./lib/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! ./common/TypedArrayUtils */ "./lib/common/TypedArrayUtils.js");
var TextDecoder_1 = __webpack_require__(/*! ./core/input/TextDecoder */ "./lib/core/input/TextDecoder.js");
var BufferLine_1 = __webpack_require__(/*! ./BufferLine */ "./lib/BufferLine.js");
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };
var DECRQSS = (function () {
    function DECRQSS(_terminal) {
        this._terminal = _terminal;
        this._data = new Uint32Array(0);
    }
    DECRQSS.prototype.hook = function (collect, params, flag) {
        this._data = new Uint32Array(0);
    };
    DECRQSS.prototype.put = function (data, start, end) {
        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));
    };
    DECRQSS.prototype.unhook = function () {
        var data = TextDecoder_1.utf32ToString(this._data);
        this._data = new Uint32Array(0);
        switch (data) {
            case '"q':
                return this._terminal.handler(EscapeSequences_1.C0.ESC + "P1$r0\"q" + EscapeSequences_1.C0.ESC + "\\");
            case '"p':
                return this._terminal.handler(EscapeSequences_1.C0.ESC + "P1$r61\"p" + EscapeSequences_1.C0.ESC + "\\");
            case 'r':
                var pt = '' + (this._terminal.buffer.scrollTop + 1) +
                    ';' + (this._terminal.buffer.scrollBottom + 1) + 'r';
                return this._terminal.handler(EscapeSequences_1.C0.ESC + "P1$r" + pt + EscapeSequences_1.C0.ESC + "\\");
            case 'm':
                return this._terminal.handler(EscapeSequences_1.C0.ESC + "P1$r0m" + EscapeSequences_1.C0.ESC + "\\");
            case ' q':
                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };
                var style = STYLES[this._terminal.getOption('cursorStyle')];
                style -= this._terminal.getOption('cursorBlink');
                return this._terminal.handler(EscapeSequences_1.C0.ESC + "P1$r" + style + " q" + EscapeSequences_1.C0.ESC + "\\");
            default:
                this._terminal.error('Unknown DCS $q %s', data);
                this._terminal.handler(EscapeSequences_1.C0.ESC + "P0$r" + EscapeSequences_1.C0.ESC + "\\");
        }
    };
    return DECRQSS;
}());
var InputHandler = (function (_super) {
    __extends(InputHandler, _super);
    function InputHandler(_terminal, _parser) {
        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._parser = _parser;
        _this._parseBuffer = new Uint32Array(4096);
        _this._stringDecoder = new TextDecoder_1.StringToUtf32();
        _this._workCell = new BufferLine_1.CellData();
        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();
        _this._onData = new EventEmitter2_1.EventEmitter2();
        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();
        _this._onScroll = new EventEmitter2_1.EventEmitter2();
        _this.register(_this._parser);
        _this._parser.setCsiHandlerFallback(function (collect, params, flag) {
            _this._terminal.error('Unknown CSI code: ', { collect: collect, params: params, flag: String.fromCharCode(flag) });
        });
        _this._parser.setEscHandlerFallback(function (collect, flag) {
            _this._terminal.error('Unknown ESC code: ', { collect: collect, flag: String.fromCharCode(flag) });
        });
        _this._parser.setExecuteHandlerFallback(function (code) {
            _this._terminal.error('Unknown EXECUTE code: ', { code: code });
        });
        _this._parser.setOscHandlerFallback(function (identifier, data) {
            _this._terminal.error('Unknown OSC code: ', { identifier: identifier, data: data });
        });
        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });
        _this._parser.setCsiHandler('@', function (params, collect) { return _this.insertChars(params); });
        _this._parser.setCsiHandler('A', function (params, collect) { return _this.cursorUp(params); });
        _this._parser.setCsiHandler('B', function (params, collect) { return _this.cursorDown(params); });
        _this._parser.setCsiHandler('C', function (params, collect) { return _this.cursorForward(params); });
        _this._parser.setCsiHandler('D', function (params, collect) { return _this.cursorBackward(params); });
        _this._parser.setCsiHandler('E', function (params, collect) { return _this.cursorNextLine(params); });
        _this._parser.setCsiHandler('F', function (params, collect) { return _this.cursorPrecedingLine(params); });
        _this._parser.setCsiHandler('G', function (params, collect) { return _this.cursorCharAbsolute(params); });
        _this._parser.setCsiHandler('H', function (params, collect) { return _this.cursorPosition(params); });
        _this._parser.setCsiHandler('I', function (params, collect) { return _this.cursorForwardTab(params); });
        _this._parser.setCsiHandler('J', function (params, collect) { return _this.eraseInDisplay(params); });
        _this._parser.setCsiHandler('K', function (params, collect) { return _this.eraseInLine(params); });
        _this._parser.setCsiHandler('L', function (params, collect) { return _this.insertLines(params); });
        _this._parser.setCsiHandler('M', function (params, collect) { return _this.deleteLines(params); });
        _this._parser.setCsiHandler('P', function (params, collect) { return _this.deleteChars(params); });
        _this._parser.setCsiHandler('S', function (params, collect) { return _this.scrollUp(params); });
        _this._parser.setCsiHandler('T', function (params, collect) { return _this.scrollDown(params, collect); });
        _this._parser.setCsiHandler('X', function (params, collect) { return _this.eraseChars(params); });
        _this._parser.setCsiHandler('Z', function (params, collect) { return _this.cursorBackwardTab(params); });
        _this._parser.setCsiHandler('`', function (params, collect) { return _this.charPosAbsolute(params); });
        _this._parser.setCsiHandler('a', function (params, collect) { return _this.hPositionRelative(params); });
        _this._parser.setCsiHandler('b', function (params, collect) { return _this.repeatPrecedingCharacter(params); });
        _this._parser.setCsiHandler('c', function (params, collect) { return _this.sendDeviceAttributes(params, collect); });
        _this._parser.setCsiHandler('d', function (params, collect) { return _this.linePosAbsolute(params); });
        _this._parser.setCsiHandler('e', function (params, collect) { return _this.vPositionRelative(params); });
        _this._parser.setCsiHandler('f', function (params, collect) { return _this.hVPosition(params); });
        _this._parser.setCsiHandler('g', function (params, collect) { return _this.tabClear(params); });
        _this._parser.setCsiHandler('h', function (params, collect) { return _this.setMode(params, collect); });
        _this._parser.setCsiHandler('l', function (params, collect) { return _this.resetMode(params, collect); });
        _this._parser.setCsiHandler('m', function (params, collect) { return _this.charAttributes(params); });
        _this._parser.setCsiHandler('n', function (params, collect) { return _this.deviceStatus(params, collect); });
        _this._parser.setCsiHandler('p', function (params, collect) { return _this.softReset(params, collect); });
        _this._parser.setCsiHandler('q', function (params, collect) { return _this.setCursorStyle(params, collect); });
        _this._parser.setCsiHandler('r', function (params, collect) { return _this.setScrollRegion(params, collect); });
        _this._parser.setCsiHandler('s', function (params, collect) { return _this.saveCursor(params); });
        _this._parser.setCsiHandler('u', function (params, collect) { return _this.restoreCursor(params); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });
        _this._parser.setOscHandler(0, function (data) { return _this.setTitle(data); });
        _this._parser.setOscHandler(2, function (data) { return _this.setTitle(data); });
        _this._parser.setEscHandler('7', function () { return _this.saveCursor([]); });
        _this._parser.setEscHandler('8', function () { return _this.restoreCursor([]); });
        _this._parser.setEscHandler('D', function () { return _this.index(); });
        _this._parser.setEscHandler('E', function () { return _this.nextLine(); });
        _this._parser.setEscHandler('H', function () { return _this.tabSet(); });
        _this._parser.setEscHandler('M', function () { return _this.reverseIndex(); });
        _this._parser.setEscHandler('=', function () { return _this.keypadApplicationMode(); });
        _this._parser.setEscHandler('>', function () { return _this.keypadNumericMode(); });
        _this._parser.setEscHandler('c', function () { return _this.reset(); });
        _this._parser.setEscHandler('n', function () { return _this.setgLevel(2); });
        _this._parser.setEscHandler('o', function () { return _this.setgLevel(3); });
        _this._parser.setEscHandler('|', function () { return _this.setgLevel(3); });
        _this._parser.setEscHandler('}', function () { return _this.setgLevel(2); });
        _this._parser.setEscHandler('~', function () { return _this.setgLevel(1); });
        _this._parser.setEscHandler('%@', function () { return _this.selectDefaultCharset(); });
        _this._parser.setEscHandler('%G', function () { return _this.selectDefaultCharset(); });
        var _loop_1 = function (flag) {
            this_1._parser.setEscHandler('(' + flag, function () { return _this.selectCharset('(' + flag); });
            this_1._parser.setEscHandler(')' + flag, function () { return _this.selectCharset(')' + flag); });
            this_1._parser.setEscHandler('*' + flag, function () { return _this.selectCharset('*' + flag); });
            this_1._parser.setEscHandler('+' + flag, function () { return _this.selectCharset('+' + flag); });
            this_1._parser.setEscHandler('-' + flag, function () { return _this.selectCharset('-' + flag); });
            this_1._parser.setEscHandler('.' + flag, function () { return _this.selectCharset('.' + flag); });
            this_1._parser.setEscHandler('/' + flag, function () { return _this.selectCharset('/' + flag); });
        };
        var this_1 = this;
        for (var flag in Charsets_1.CHARSETS) {
            _loop_1(flag);
        }
        _this._parser.setErrorHandler(function (state) {
            _this._terminal.error('Parsing error: ', state);
            return state;
        });
        _this._parser.setDcsHandler('$q', new DECRQSS(_this._terminal));
        return _this;
    }
    Object.defineProperty(InputHandler.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: true,
        configurable: true
    });
    InputHandler.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._terminal = null;
    };
    InputHandler.prototype.parse = function (data) {
        if (!this._terminal) {
            return;
        }
        var buffer = this._terminal.buffer;
        var cursorStartX = buffer.x;
        var cursorStartY = buffer.y;
        if (this._terminal.debug) {
            this._terminal.log('data: ' + data);
        }
        if (this._parseBuffer.length < data.length) {
            this._parseBuffer = new Uint32Array(data.length);
        }
        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));
        buffer = this._terminal.buffer;
        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {
            this._onCursorMove.fire();
        }
    };
    InputHandler.prototype.print = function (data, start, end) {
        var code;
        var chWidth;
        var buffer = this._terminal.buffer;
        var charset = this._terminal.charset;
        var screenReaderMode = this._terminal.options.screenReaderMode;
        var cols = this._terminal.cols;
        var wraparoundMode = this._terminal.wraparoundMode;
        var insertMode = this._terminal.insertMode;
        var curAttr = this._terminal.curAttrData;
        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);
        this._terminal.updateRange(buffer.y);
        for (var pos = start; pos < end; ++pos) {
            code = data[pos];
            chWidth = CharWidth_1.wcwidth(code);
            if (code < 127 && charset) {
                var ch = charset[String.fromCharCode(code)];
                if (ch) {
                    code = ch.charCodeAt(0);
                }
            }
            if (screenReaderMode) {
                this._terminal.emit('a11y.char', TextDecoder_1.stringFromCodePoint(code));
            }
            if (!chWidth && buffer.x) {
                if (!bufferRow.getWidth(buffer.x - 1)) {
                    bufferRow.addCodepointToCell(buffer.x - 2, code);
                }
                else {
                    bufferRow.addCodepointToCell(buffer.x - 1, code);
                }
                continue;
            }
            if (buffer.x + chWidth - 1 >= cols) {
                if (wraparoundMode) {
                    buffer.x = 0;
                    buffer.y++;
                    if (buffer.y > buffer.scrollBottom) {
                        buffer.y--;
                        this._terminal.scroll(true);
                    }
                    else {
                        buffer.lines.get(buffer.y).isWrapped = true;
                    }
                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);
                }
                else {
                    if (chWidth === 2) {
                        continue;
                    }
                }
            }
            if (insertMode) {
                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));
                if (bufferRow.getWidth(cols - 1) === 2) {
                    bufferRow.setCellFromCodePoint(cols - 1, Buffer_1.NULL_CELL_CODE, Buffer_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);
                }
            }
            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);
            if (chWidth > 0) {
                while (--chWidth) {
                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);
                }
            }
        }
        this._terminal.updateRange(buffer.y);
    };
    InputHandler.prototype.addCsiHandler = function (flag, callback) {
        return this._parser.addCsiHandler(flag, callback);
    };
    InputHandler.prototype.addOscHandler = function (ident, callback) {
        return this._parser.addOscHandler(ident, callback);
    };
    InputHandler.prototype.bell = function () {
        this._terminal.bell();
    };
    InputHandler.prototype.lineFeed = function () {
        var buffer = this._terminal.buffer;
        if (this._terminal.options.convertEol) {
            buffer.x = 0;
        }
        buffer.y++;
        if (buffer.y > buffer.scrollBottom) {
            buffer.y--;
            this._terminal.scroll();
        }
        if (buffer.x >= this._terminal.cols) {
            buffer.x--;
        }
        this._onLineFeed.fire();
    };
    InputHandler.prototype.carriageReturn = function () {
        this._terminal.buffer.x = 0;
    };
    InputHandler.prototype.backspace = function () {
        if (this._terminal.buffer.x > 0) {
            this._terminal.buffer.x--;
        }
    };
    InputHandler.prototype.tab = function () {
        var originalX = this._terminal.buffer.x;
        this._terminal.buffer.x = this._terminal.buffer.nextStop();
        if (this._terminal.options.screenReaderMode) {
            this._terminal.emit('a11y.tab', this._terminal.buffer.x - originalX);
        }
    };
    InputHandler.prototype.shiftOut = function () {
        this._terminal.setgLevel(1);
    };
    InputHandler.prototype.shiftIn = function () {
        this._terminal.setgLevel(0);
    };
    InputHandler.prototype.insertChars = function (params) {
        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));
        this._terminal.updateRange(this._terminal.buffer.y);
    };
    InputHandler.prototype.cursorUp = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.y -= param;
        if (this._terminal.buffer.y < 0) {
            this._terminal.buffer.y = 0;
        }
    };
    InputHandler.prototype.cursorDown = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.y += param;
        if (this._terminal.buffer.y >= this._terminal.rows) {
            this._terminal.buffer.y = this._terminal.rows - 1;
        }
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x--;
        }
    };
    InputHandler.prototype.cursorForward = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.x += param;
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x = this._terminal.cols - 1;
        }
    };
    InputHandler.prototype.cursorBackward = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x--;
        }
        this._terminal.buffer.x -= param;
        if (this._terminal.buffer.x < 0) {
            this._terminal.buffer.x = 0;
        }
    };
    InputHandler.prototype.cursorNextLine = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.y += param;
        if (this._terminal.buffer.y >= this._terminal.rows) {
            this._terminal.buffer.y = this._terminal.rows - 1;
        }
        this._terminal.buffer.x = 0;
    };
    InputHandler.prototype.cursorPrecedingLine = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.y -= param;
        if (this._terminal.buffer.y < 0) {
            this._terminal.buffer.y = 0;
        }
        this._terminal.buffer.x = 0;
    };
    InputHandler.prototype.cursorCharAbsolute = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.x = param - 1;
    };
    InputHandler.prototype.cursorPosition = function (params) {
        var col;
        var row = params[0] - 1;
        if (params.length >= 2) {
            col = params[1] - 1;
        }
        else {
            col = 0;
        }
        if (row < 0) {
            row = 0;
        }
        else if (row >= this._terminal.rows) {
            row = this._terminal.rows - 1;
        }
        if (col < 0) {
            col = 0;
        }
        else if (col >= this._terminal.cols) {
            col = this._terminal.cols - 1;
        }
        this._terminal.buffer.x = col;
        this._terminal.buffer.y = row;
    };
    InputHandler.prototype.cursorForwardTab = function (params) {
        var param = params[0] || 1;
        while (param--) {
            this._terminal.buffer.x = this._terminal.buffer.nextStop();
        }
    };
    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {
        if (clearWrap === void 0) { clearWrap = false; }
        var line = this._terminal.buffer.lines.get(this._terminal.buffer.ybase + y);
        line.replaceCells(start, end, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));
        if (clearWrap) {
            line.isWrapped = false;
        }
    };
    InputHandler.prototype._resetBufferLine = function (y) {
        this._eraseInBufferLine(y, 0, this._terminal.cols, true);
    };
    InputHandler.prototype.eraseInDisplay = function (params) {
        var j;
        switch (params[0]) {
            case 0:
                j = this._terminal.buffer.y;
                this._terminal.updateRange(j);
                this._eraseInBufferLine(j++, this._terminal.buffer.x, this._terminal.cols, this._terminal.buffer.x === 0);
                for (; j < this._terminal.rows; j++) {
                    this._resetBufferLine(j);
                }
                this._terminal.updateRange(j);
                break;
            case 1:
                j = this._terminal.buffer.y;
                this._terminal.updateRange(j);
                this._eraseInBufferLine(j, 0, this._terminal.buffer.x + 1, true);
                if (this._terminal.buffer.x + 1 >= this._terminal.cols) {
                    this._terminal.buffer.lines.get(j + 1).isWrapped = false;
                }
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._terminal.updateRange(0);
                break;
            case 2:
                j = this._terminal.rows;
                this._terminal.updateRange(j - 1);
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._terminal.updateRange(0);
                break;
            case 3:
                var scrollBackSize = this._terminal.buffer.lines.length - this._terminal.rows;
                if (scrollBackSize > 0) {
                    this._terminal.buffer.lines.trimStart(scrollBackSize);
                    this._terminal.buffer.ybase = Math.max(this._terminal.buffer.ybase - scrollBackSize, 0);
                    this._terminal.buffer.ydisp = Math.max(this._terminal.buffer.ydisp - scrollBackSize, 0);
                    this._onScroll.fire(0);
                }
                break;
        }
    };
    InputHandler.prototype.eraseInLine = function (params) {
        switch (params[0]) {
            case 0:
                this._eraseInBufferLine(this._terminal.buffer.y, this._terminal.buffer.x, this._terminal.cols);
                break;
            case 1:
                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.buffer.x + 1);
                break;
            case 2:
                this._eraseInBufferLine(this._terminal.buffer.y, 0, this._terminal.cols);
                break;
        }
        this._terminal.updateRange(this._terminal.buffer.y);
    };
    InputHandler.prototype.insertLines = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        var buffer = this._terminal.buffer;
        var row = buffer.y + buffer.ybase;
        var scrollBottomRowsOffset = this._terminal.rows - 1 - buffer.scrollBottom;
        var scrollBottomAbsolute = this._terminal.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;
        while (param--) {
            buffer.lines.splice(scrollBottomAbsolute - 1, 1);
            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));
        }
        this._terminal.updateRange(buffer.y);
        this._terminal.updateRange(buffer.scrollBottom);
    };
    InputHandler.prototype.deleteLines = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        var buffer = this._terminal.buffer;
        var row = buffer.y + buffer.ybase;
        var j;
        j = this._terminal.rows - 1 - buffer.scrollBottom;
        j = this._terminal.rows - 1 + buffer.ybase - j;
        while (param--) {
            buffer.lines.splice(row, 1);
            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));
        }
        this._terminal.updateRange(buffer.y);
        this._terminal.updateRange(buffer.scrollBottom);
    };
    InputHandler.prototype.deleteChars = function (params) {
        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x, params[0] || 1, this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));
        this._terminal.updateRange(this._terminal.buffer.y);
    };
    InputHandler.prototype.scrollUp = function (params) {
        var param = params[0] || 1;
        var buffer = this._terminal.buffer;
        while (param--) {
            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);
            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(Buffer_1.DEFAULT_ATTR_DATA));
        }
        this._terminal.updateRange(buffer.scrollTop);
        this._terminal.updateRange(buffer.scrollBottom);
    };
    InputHandler.prototype.scrollDown = function (params, collect) {
        if (params.length < 2 && !collect) {
            var param = params[0] || 1;
            var buffer = this._terminal.buffer;
            while (param--) {
                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);
                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(Buffer_1.DEFAULT_ATTR_DATA));
            }
            this._terminal.updateRange(buffer.scrollTop);
            this._terminal.updateRange(buffer.scrollBottom);
        }
    };
    InputHandler.prototype.eraseChars = function (params) {
        this._terminal.buffer.lines.get(this._terminal.buffer.y + this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x, this._terminal.buffer.x + (params[0] || 1), this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));
    };
    InputHandler.prototype.cursorBackwardTab = function (params) {
        var param = params[0] || 1;
        var buffer = this._terminal.buffer;
        while (param--) {
            buffer.x = buffer.prevStop();
        }
    };
    InputHandler.prototype.charPosAbsolute = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.x = param - 1;
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x = this._terminal.cols - 1;
        }
    };
    InputHandler.prototype.hPositionRelative = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.x += param;
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x = this._terminal.cols - 1;
        }
    };
    InputHandler.prototype.repeatPrecedingCharacter = function (params) {
        var buffer = this._terminal.buffer;
        var line = buffer.lines.get(buffer.ybase + buffer.y);
        line.loadCell(buffer.x - 1, this._workCell);
        line.replaceCells(buffer.x, buffer.x + (params[0] || 1), (this._workCell.content !== undefined) ? this._workCell : buffer.getNullCell(Buffer_1.DEFAULT_ATTR_DATA));
    };
    InputHandler.prototype.sendDeviceAttributes = function (params, collect) {
        if (params[0] > 0) {
            return;
        }
        if (!collect) {
            if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {
                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?1;2c');
            }
            else if (this._terminal.is('linux')) {
                this._terminal.handler(EscapeSequences_1.C0.ESC + '[?6c');
            }
        }
        else if (collect === '>') {
            if (this._terminal.is('xterm')) {
                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>0;276;0c');
            }
            else if (this._terminal.is('rxvt-unicode')) {
                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>85;95;0c');
            }
            else if (this._terminal.is('linux')) {
                this._terminal.handler(params[0] + 'c');
            }
            else if (this._terminal.is('screen')) {
                this._terminal.handler(EscapeSequences_1.C0.ESC + '[>83;40003;0c');
            }
        }
    };
    InputHandler.prototype.linePosAbsolute = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.y = param - 1;
        if (this._terminal.buffer.y >= this._terminal.rows) {
            this._terminal.buffer.y = this._terminal.rows - 1;
        }
    };
    InputHandler.prototype.vPositionRelative = function (params) {
        var param = params[0];
        if (param < 1) {
            param = 1;
        }
        this._terminal.buffer.y += param;
        if (this._terminal.buffer.y >= this._terminal.rows) {
            this._terminal.buffer.y = this._terminal.rows - 1;
        }
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x--;
        }
    };
    InputHandler.prototype.hVPosition = function (params) {
        if (params[0] < 1)
            params[0] = 1;
        if (params[1] < 1)
            params[1] = 1;
        this._terminal.buffer.y = params[0] - 1;
        if (this._terminal.buffer.y >= this._terminal.rows) {
            this._terminal.buffer.y = this._terminal.rows - 1;
        }
        this._terminal.buffer.x = params[1] - 1;
        if (this._terminal.buffer.x >= this._terminal.cols) {
            this._terminal.buffer.x = this._terminal.cols - 1;
        }
    };
    InputHandler.prototype.tabClear = function (params) {
        var param = params[0];
        if (param <= 0) {
            delete this._terminal.buffer.tabs[this._terminal.buffer.x];
        }
        else if (param === 3) {
            this._terminal.buffer.tabs = {};
        }
    };
    InputHandler.prototype.setMode = function (params, collect) {
        if (params.length > 1) {
            for (var i = 0; i < params.length; i++) {
                this.setMode([params[i]]);
            }
            return;
        }
        if (!collect) {
            switch (params[0]) {
                case 4:
                    this._terminal.insertMode = true;
                    break;
                case 20:
                    break;
            }
        }
        else if (collect === '?') {
            switch (params[0]) {
                case 1:
                    this._terminal.applicationCursor = true;
                    break;
                case 2:
                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);
                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);
                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);
                    break;
                case 3:
                    this._terminal.savedCols = this._terminal.cols;
                    this._terminal.resize(132, this._terminal.rows);
                    break;
                case 6:
                    this._terminal.originMode = true;
                    break;
                case 7:
                    this._terminal.wraparoundMode = true;
                    break;
                case 12:
                    break;
                case 66:
                    this._terminal.log('Serial port requested application keypad.');
                    this._terminal.applicationKeypad = true;
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    break;
                case 9:
                case 1000:
                case 1002:
                case 1003:
                    this._terminal.x10Mouse = params[0] === 9;
                    this._terminal.vt200Mouse = params[0] === 1000;
                    this._terminal.normalMouse = params[0] > 1000;
                    this._terminal.mouseEvents = true;
                    if (this._terminal.element) {
                        this._terminal.element.classList.add('enable-mouse-events');
                    }
                    if (this._terminal.selectionManager) {
                        this._terminal.selectionManager.disable();
                    }
                    this._terminal.log('Binding to mouse events.');
                    break;
                case 1004:
                    this._terminal.sendFocus = true;
                    break;
                case 1005:
                    this._terminal.utfMouse = true;
                    break;
                case 1006:
                    this._terminal.sgrMouse = true;
                    break;
                case 1015:
                    this._terminal.urxvtMouse = true;
                    break;
                case 25:
                    this._terminal.cursorHidden = false;
                    break;
                case 1048:
                    this.saveCursor(params);
                    break;
                case 1049:
                    this.saveCursor(params);
                case 47:
                case 1047:
                    this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());
                    this._terminal.refresh(0, this._terminal.rows - 1);
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    this._terminal.showCursor();
                    break;
                case 2004:
                    this._terminal.bracketedPasteMode = true;
                    break;
            }
        }
    };
    InputHandler.prototype.resetMode = function (params, collect) {
        if (params.length > 1) {
            for (var i = 0; i < params.length; i++) {
                this.resetMode([params[i]]);
            }
            return;
        }
        if (!collect) {
            switch (params[0]) {
                case 4:
                    this._terminal.insertMode = false;
                    break;
                case 20:
                    break;
            }
        }
        else if (collect === '?') {
            switch (params[0]) {
                case 1:
                    this._terminal.applicationCursor = false;
                    break;
                case 3:
                    if (this._terminal.cols === 132 && this._terminal.savedCols) {
                        this._terminal.resize(this._terminal.savedCols, this._terminal.rows);
                    }
                    delete this._terminal.savedCols;
                    break;
                case 6:
                    this._terminal.originMode = false;
                    break;
                case 7:
                    this._terminal.wraparoundMode = false;
                    break;
                case 12:
                    break;
                case 66:
                    this._terminal.log('Switching back to normal keypad.');
                    this._terminal.applicationKeypad = false;
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    break;
                case 9:
                case 1000:
                case 1002:
                case 1003:
                    this._terminal.x10Mouse = false;
                    this._terminal.vt200Mouse = false;
                    this._terminal.normalMouse = false;
                    this._terminal.mouseEvents = false;
                    if (this._terminal.element) {
                        this._terminal.element.classList.remove('enable-mouse-events');
                    }
                    if (this._terminal.selectionManager) {
                        this._terminal.selectionManager.enable();
                    }
                    break;
                case 1004:
                    this._terminal.sendFocus = false;
                    break;
                case 1005:
                    this._terminal.utfMouse = false;
                    break;
                case 1006:
                    this._terminal.sgrMouse = false;
                    break;
                case 1015:
                    this._terminal.urxvtMouse = false;
                    break;
                case 25:
                    this._terminal.cursorHidden = true;
                    break;
                case 1048:
                    this.restoreCursor(params);
                    break;
                case 1049:
                case 47:
                case 1047:
                    this._terminal.buffers.activateNormalBuffer();
                    if (params[0] === 1049) {
                        this.restoreCursor(params);
                    }
                    this._terminal.refresh(0, this._terminal.rows - 1);
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    this._terminal.showCursor();
                    break;
                case 2004:
                    this._terminal.bracketedPasteMode = false;
                    break;
            }
        }
    };
    InputHandler.prototype.charAttributes = function (params) {
        if (params.length === 1 && params[0] === 0) {
            this._terminal.curAttrData.fg = Buffer_1.DEFAULT_ATTR_DATA.fg;
            this._terminal.curAttrData.bg = Buffer_1.DEFAULT_ATTR_DATA.bg;
            return;
        }
        var l = params.length;
        var p;
        var attr = this._terminal.curAttrData;
        for (var i = 0; i < l; i++) {
            p = params[i];
            if (p >= 30 && p <= 37) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 30);
            }
            else if (p >= 40 && p <= 47) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 40);
            }
            else if (p >= 90 && p <= 97) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 90) | 8;
            }
            else if (p >= 100 && p <= 107) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 100) | 8;
            }
            else if (p === 0) {
                attr.fg = Buffer_1.DEFAULT_ATTR_DATA.fg;
                attr.bg = Buffer_1.DEFAULT_ATTR_DATA.bg;
            }
            else if (p === 1) {
                attr.fg |= 134217728;
            }
            else if (p === 3) {
                attr.bg |= 67108864;
            }
            else if (p === 4) {
                attr.fg |= 268435456;
            }
            else if (p === 5) {
                attr.fg |= 536870912;
            }
            else if (p === 7) {
                attr.fg |= 67108864;
            }
            else if (p === 8) {
                attr.fg |= 1073741824;
            }
            else if (p === 2) {
                attr.bg |= 134217728;
            }
            else if (p === 22) {
                attr.fg &= ~134217728;
                attr.bg &= ~134217728;
            }
            else if (p === 23) {
                attr.bg &= ~67108864;
            }
            else if (p === 24) {
                attr.fg &= ~268435456;
            }
            else if (p === 25) {
                attr.fg &= ~536870912;
            }
            else if (p === 27) {
                attr.fg &= ~67108864;
            }
            else if (p === 28) {
                attr.fg &= ~1073741824;
            }
            else if (p === 39) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= Buffer_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
            }
            else if (p === 49) {
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= Buffer_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else if (p === 38) {
                if (params[i + 1] === 2) {
                    i += 2;
                    attr.fg |= 50331648;
                    attr.fg &= ~16777215;
                    attr.fg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);
                    i += 2;
                }
                else if (params[i + 1] === 5) {
                    i += 2;
                    p = params[i] & 0xff;
                    attr.fg &= ~255;
                    attr.fg |= 33554432 | p;
                }
            }
            else if (p === 48) {
                if (params[i + 1] === 2) {
                    i += 2;
                    attr.bg |= 50331648;
                    attr.bg &= ~16777215;
                    attr.bg |= BufferLine_1.AttributeData.fromColorRGB([params[i], params[i + 1], params[i + 2]]);
                    i += 2;
                }
                else if (params[i + 1] === 5) {
                    i += 2;
                    p = params[i] & 0xff;
                    attr.bg &= ~255;
                    attr.bg |= 33554432 | p;
                }
            }
            else if (p === 100) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= Buffer_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= Buffer_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else {
                this._terminal.error('Unknown SGR attribute: %d.', p);
            }
        }
    };
    InputHandler.prototype.deviceStatus = function (params, collect) {
        if (!collect) {
            switch (params[0]) {
                case 5:
                    this._onData.fire(EscapeSequences_1.C0.ESC + "[0n");
                    break;
                case 6:
                    var y = this._terminal.buffer.y + 1;
                    var x = this._terminal.buffer.x + 1;
                    this._onData.fire(EscapeSequences_1.C0.ESC + "[" + y + ";" + x + "R");
                    break;
            }
        }
        else if (collect === '?') {
            switch (params[0]) {
                case 6:
                    var y = this._terminal.buffer.y + 1;
                    var x = this._terminal.buffer.x + 1;
                    this._onData.fire(EscapeSequences_1.C0.ESC + "[?" + y + ";" + x + "R");
                    break;
                case 15:
                    break;
                case 25:
                    break;
                case 26:
                    break;
                case 53:
                    break;
            }
        }
    };
    InputHandler.prototype.softReset = function (params, collect) {
        if (collect === '!') {
            this._terminal.cursorHidden = false;
            this._terminal.insertMode = false;
            this._terminal.originMode = false;
            this._terminal.wraparoundMode = true;
            this._terminal.applicationKeypad = false;
            if (this._terminal.viewport) {
                this._terminal.viewport.syncScrollArea();
            }
            this._terminal.applicationCursor = false;
            this._terminal.buffer.scrollTop = 0;
            this._terminal.buffer.scrollBottom = this._terminal.rows - 1;
            this._terminal.curAttrData = Buffer_1.DEFAULT_ATTR_DATA;
            this._terminal.buffer.x = this._terminal.buffer.y = 0;
            this._terminal.charset = null;
            this._terminal.glevel = 0;
            this._terminal.charsets = [null];
        }
    };
    InputHandler.prototype.setCursorStyle = function (params, collect) {
        if (collect === ' ') {
            var param = params[0] < 1 ? 1 : params[0];
            switch (param) {
                case 1:
                case 2:
                    this._terminal.setOption('cursorStyle', 'block');
                    break;
                case 3:
                case 4:
                    this._terminal.setOption('cursorStyle', 'underline');
                    break;
                case 5:
                case 6:
                    this._terminal.setOption('cursorStyle', 'bar');
                    break;
            }
            var isBlinking = param % 2 === 1;
            this._terminal.setOption('cursorBlink', isBlinking);
        }
    };
    InputHandler.prototype.setScrollRegion = function (params, collect) {
        if (collect) {
            return;
        }
        this._terminal.buffer.scrollTop = (params[0] || 1) - 1;
        this._terminal.buffer.scrollBottom = (params[1] && params[1] <= this._terminal.rows ? params[1] : this._terminal.rows) - 1;
        this._terminal.buffer.x = 0;
        this._terminal.buffer.y = 0;
    };
    InputHandler.prototype.saveCursor = function (params) {
        this._terminal.buffer.savedX = this._terminal.buffer.x;
        this._terminal.buffer.savedY = this._terminal.buffer.y;
        this._terminal.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;
        this._terminal.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;
    };
    InputHandler.prototype.restoreCursor = function (params) {
        this._terminal.buffer.x = this._terminal.buffer.savedX || 0;
        this._terminal.buffer.y = this._terminal.buffer.savedY || 0;
        this._terminal.curAttrData.fg = this._terminal.buffer.savedCurAttrData.fg;
        this._terminal.curAttrData.bg = this._terminal.buffer.savedCurAttrData.bg;
    };
    InputHandler.prototype.setTitle = function (data) {
        this._terminal.handleTitle(data);
    };
    InputHandler.prototype.nextLine = function () {
        this._terminal.buffer.x = 0;
        this.index();
    };
    InputHandler.prototype.keypadApplicationMode = function () {
        this._terminal.log('Serial port requested application keypad.');
        this._terminal.applicationKeypad = true;
        if (this._terminal.viewport) {
            this._terminal.viewport.syncScrollArea();
        }
    };
    InputHandler.prototype.keypadNumericMode = function () {
        this._terminal.log('Switching back to normal keypad.');
        this._terminal.applicationKeypad = false;
        if (this._terminal.viewport) {
            this._terminal.viewport.syncScrollArea();
        }
    };
    InputHandler.prototype.selectDefaultCharset = function () {
        this._terminal.setgLevel(0);
        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
    };
    InputHandler.prototype.selectCharset = function (collectAndFlag) {
        if (collectAndFlag.length !== 2) {
            this.selectDefaultCharset();
            return;
        }
        if (collectAndFlag[0] === '/') {
            return;
        }
        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);
        return;
    };
    InputHandler.prototype.index = function () {
        this._terminal.index();
    };
    InputHandler.prototype.tabSet = function () {
        this._terminal.tabSet();
    };
    InputHandler.prototype.reverseIndex = function () {
        this._terminal.reverseIndex();
    };
    InputHandler.prototype.reset = function () {
        this._parser.reset();
        this._terminal.reset();
    };
    InputHandler.prototype.setgLevel = function (level) {
        this._terminal.setgLevel(level);
    };
    return InputHandler;
}(Lifecycle_1.Disposable));
exports.InputHandler = InputHandler;


/***/ }),

/***/ "./lib/Linkifier.js":
/*!**************************!*\
  !*** ./lib/Linkifier.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MouseZoneManager_1 = __webpack_require__(/*! ./MouseZoneManager */ "./lib/MouseZoneManager.js");
var CharWidth_1 = __webpack_require__(/*! ./CharWidth */ "./lib/CharWidth.js");
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var Linkifier = (function () {
    function Linkifier(_terminal) {
        this._terminal = _terminal;
        this._linkMatchers = [];
        this._nextLinkMatcherId = 0;
        this._onLinkHover = new EventEmitter2_1.EventEmitter2();
        this._onLinkLeave = new EventEmitter2_1.EventEmitter2();
        this._onLinkTooltip = new EventEmitter2_1.EventEmitter2();
        this._rowsToLinkify = {
            start: null,
            end: null
        };
    }
    Object.defineProperty(Linkifier.prototype, "onLinkHover", {
        get: function () { return this._onLinkHover.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkLeave", {
        get: function () { return this._onLinkLeave.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkTooltip", {
        get: function () { return this._onLinkTooltip.event; },
        enumerable: true,
        configurable: true
    });
    Linkifier.prototype.attachToDom = function (mouseZoneManager) {
        this._mouseZoneManager = mouseZoneManager;
    };
    Linkifier.prototype.linkifyRows = function (start, end) {
        var _this = this;
        if (!this._mouseZoneManager) {
            return;
        }
        if (this._rowsToLinkify.start === null) {
            this._rowsToLinkify.start = start;
            this._rowsToLinkify.end = end;
        }
        else {
            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);
            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);
        }
        this._mouseZoneManager.clearAll(start, end);
        if (this._rowsTimeoutId) {
            clearTimeout(this._rowsTimeoutId);
        }
        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier.TIME_BEFORE_LINKIFY);
    };
    Linkifier.prototype._linkifyRows = function () {
        this._rowsTimeoutId = null;
        var buffer = this._terminal.buffer;
        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;
        if (absoluteRowIndexStart >= buffer.lines.length) {
            return;
        }
        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._terminal.rows) + 1;
        var overscanLineLimit = Math.ceil(Linkifier.OVERSCAN_CHAR_LIMIT / this._terminal.cols);
        var iterator = this._terminal.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);
        while (iterator.hasNext()) {
            var lineData = iterator.next();
            for (var i = 0; i < this._linkMatchers.length; i++) {
                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);
            }
        }
        this._rowsToLinkify.start = null;
        this._rowsToLinkify.end = null;
    };
    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {
        if (options === void 0) { options = {}; }
        if (!handler) {
            throw new Error('handler must be defined');
        }
        var matcher = {
            id: this._nextLinkMatcherId++,
            regex: regex,
            handler: handler,
            matchIndex: options.matchIndex,
            validationCallback: options.validationCallback,
            hoverTooltipCallback: options.tooltipCallback,
            hoverLeaveCallback: options.leaveCallback,
            willLinkActivate: options.willLinkActivate,
            priority: options.priority || 0
        };
        this._addLinkMatcherToList(matcher);
        return matcher.id;
    };
    Linkifier.prototype._addLinkMatcherToList = function (matcher) {
        if (this._linkMatchers.length === 0) {
            this._linkMatchers.push(matcher);
            return;
        }
        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {
            if (matcher.priority <= this._linkMatchers[i].priority) {
                this._linkMatchers.splice(i + 1, 0, matcher);
                return;
            }
        }
        this._linkMatchers.splice(0, 0, matcher);
    };
    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {
        for (var i = 0; i < this._linkMatchers.length; i++) {
            if (this._linkMatchers[i].id === matcherId) {
                this._linkMatchers.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {
        var _this = this;
        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');
        var match;
        var stringIndex = -1;
        var _loop_1 = function () {
            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];
            if (!uri) {
                if (this_1._terminal.debug) {
                    console.log({ match: match, matcher: matcher });
                    throw new Error('match found without corresponding matchIndex');
                }
                return "break";
            }
            stringIndex = text.indexOf(uri, stringIndex + 1);
            rex.lastIndex = stringIndex + uri.length;
            if (stringIndex < 0) {
                return "break";
            }
            var bufferIndex = this_1._terminal.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);
            if (bufferIndex[0] < 0) {
                return "break";
            }
            var line = this_1._terminal.buffer.lines.get(bufferIndex[0]);
            var attr = line.getFg(bufferIndex[1]);
            var fg;
            if (attr) {
                fg = (attr >> 9) & 0x1ff;
            }
            if (matcher.validationCallback) {
                matcher.validationCallback(uri, function (isValid) {
                    if (_this._rowsTimeoutId) {
                        return;
                    }
                    if (isValid) {
                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._terminal.buffer.ydisp, uri, matcher, fg);
                    }
                });
            }
            else {
                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._terminal.buffer.ydisp, uri, matcher, fg);
            }
        };
        var this_1 = this;
        while ((match = rex.exec(text)) !== null) {
            var state_1 = _loop_1();
            if (state_1 === "break")
                break;
        }
    };
    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {
        var _this = this;
        var width = CharWidth_1.getStringCellWidth(uri);
        var x1 = x % this._terminal.cols;
        var y1 = y + Math.floor(x / this._terminal.cols);
        var x2 = (x1 + width) % this._terminal.cols;
        var y2 = y1 + Math.floor((x1 + width) / this._terminal.cols);
        if (x2 === 0) {
            x2 = this._terminal.cols;
            y2--;
        }
        this._mouseZoneManager.add(new MouseZoneManager_1.MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {
            if (matcher.handler) {
                return matcher.handler(e, uri);
            }
            window.open(uri, '_blank');
        }, function () {
            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._terminal.element.classList.add('xterm-cursor-pointer');
        }, function (e) {
            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            if (matcher.hoverTooltipCallback) {
                matcher.hoverTooltipCallback(e, uri);
            }
        }, function () {
            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._terminal.element.classList.remove('xterm-cursor-pointer');
            if (matcher.hoverLeaveCallback) {
                matcher.hoverLeaveCallback();
            }
        }, function (e) {
            if (matcher.willLinkActivate) {
                return matcher.willLinkActivate(e, uri);
            }
            return true;
        }));
    };
    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {
        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._terminal.cols, fg: fg };
    };
    Linkifier.TIME_BEFORE_LINKIFY = 200;
    Linkifier.OVERSCAN_CHAR_LIMIT = 2000;
    return Linkifier;
}());
exports.Linkifier = Linkifier;


/***/ }),

/***/ "./lib/MouseHelper.js":
/*!****************************!*\
  !*** ./lib/MouseHelper.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MouseHelper = (function () {
    function MouseHelper(_renderer) {
        this._renderer = _renderer;
    }
    MouseHelper.prototype.setRenderer = function (renderer) {
        this._renderer = renderer;
    };
    MouseHelper.getCoordsRelativeToElement = function (event, element) {
        var rect = element.getBoundingClientRect();
        return [event.clientX - rect.left, event.clientY - rect.top];
    };
    MouseHelper.prototype.getCoords = function (event, element, charMeasure, colCount, rowCount, isSelection) {
        if (!charMeasure.width || !charMeasure.height) {
            return null;
        }
        var coords = MouseHelper.getCoordsRelativeToElement(event, element);
        if (!coords) {
            return null;
        }
        coords[0] = Math.ceil((coords[0] + (isSelection ? this._renderer.dimensions.actualCellWidth / 2 : 0)) / this._renderer.dimensions.actualCellWidth);
        coords[1] = Math.ceil(coords[1] / this._renderer.dimensions.actualCellHeight);
        coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));
        coords[1] = Math.min(Math.max(coords[1], 1), rowCount);
        return coords;
    };
    MouseHelper.prototype.getRawByteCoords = function (event, element, charMeasure, colCount, rowCount) {
        var coords = this.getCoords(event, element, charMeasure, colCount, rowCount);
        var x = coords[0];
        var y = coords[1];
        x += 32;
        y += 32;
        return { x: x, y: y };
    };
    return MouseHelper;
}());
exports.MouseHelper = MouseHelper;


/***/ }),

/***/ "./lib/MouseZoneManager.js":
/*!*********************************!*\
  !*** ./lib/MouseZoneManager.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! ./common/Lifecycle */ "./lib/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! ./ui/Lifecycle */ "./lib/ui/Lifecycle.js");
var HOVER_DURATION = 500;
var MouseZoneManager = (function (_super) {
    __extends(MouseZoneManager, _super);
    function MouseZoneManager(_terminal) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._zones = [];
        _this._areZonesActive = false;
        _this._tooltipTimeout = null;
        _this._currentZone = null;
        _this._lastHoverCoords = [null, null];
        _this.register(Lifecycle_2.addDisposableDomListener(_this._terminal.element, 'mousedown', function (e) { return _this._onMouseDown(e); }));
        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };
        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };
        _this._clickListener = function (e) { return _this._onClick(e); };
        return _this;
    }
    MouseZoneManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._deactivate();
    };
    MouseZoneManager.prototype.add = function (zone) {
        this._zones.push(zone);
        if (this._zones.length === 1) {
            this._activate();
        }
    };
    MouseZoneManager.prototype.clearAll = function (start, end) {
        if (this._zones.length === 0) {
            return;
        }
        if (!end) {
            start = 0;
            end = this._terminal.rows - 1;
        }
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if ((zone.y1 > start && zone.y1 <= end + 1) ||
                (zone.y2 > start && zone.y2 <= end + 1) ||
                (zone.y1 < start && zone.y2 > end + 1)) {
                if (this._currentZone && this._currentZone === zone) {
                    this._currentZone.leaveCallback();
                    this._currentZone = null;
                }
                this._zones.splice(i--, 1);
            }
        }
        if (this._zones.length === 0) {
            this._deactivate();
        }
    };
    MouseZoneManager.prototype._activate = function () {
        if (!this._areZonesActive) {
            this._areZonesActive = true;
            this._terminal.element.addEventListener('mousemove', this._mouseMoveListener);
            this._terminal.element.addEventListener('mouseleave', this._mouseLeaveListener);
            this._terminal.element.addEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._deactivate = function () {
        if (this._areZonesActive) {
            this._areZonesActive = false;
            this._terminal.element.removeEventListener('mousemove', this._mouseMoveListener);
            this._terminal.element.removeEventListener('mouseleave', this._mouseLeaveListener);
            this._terminal.element.removeEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._onMouseMove = function (e) {
        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {
            this._onHover(e);
            this._lastHoverCoords = [e.pageX, e.pageY];
        }
    };
    MouseZoneManager.prototype._onHover = function (e) {
        var _this = this;
        var zone = this._findZoneEventAt(e);
        if (zone === this._currentZone) {
            return;
        }
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = null;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
        if (!zone) {
            return;
        }
        this._currentZone = zone;
        if (zone.hoverCallback) {
            zone.hoverCallback(e);
        }
        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);
    };
    MouseZoneManager.prototype._onTooltip = function (e) {
        this._tooltipTimeout = null;
        var zone = this._findZoneEventAt(e);
        if (zone && zone.tooltipCallback) {
            zone.tooltipCallback(e);
        }
    };
    MouseZoneManager.prototype._onMouseDown = function (e) {
        this._initialSelectionLength = this._terminal.getSelection().length;
        if (!this._areZonesActive) {
            return;
        }
        var zone = this._findZoneEventAt(e);
        if (zone) {
            if (zone.willLinkActivate(e)) {
                e.preventDefault();
                e.stopImmediatePropagation();
            }
        }
    };
    MouseZoneManager.prototype._onMouseLeave = function (e) {
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = null;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
    };
    MouseZoneManager.prototype._onClick = function (e) {
        var zone = this._findZoneEventAt(e);
        var currentSelectionLength = this._terminal.getSelection().length;
        if (zone && currentSelectionLength === this._initialSelectionLength) {
            zone.clickCallback(e);
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    };
    MouseZoneManager.prototype._findZoneEventAt = function (e) {
        var coords = this._terminal.mouseHelper.getCoords(e, this._terminal.screenElement, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows);
        if (!coords) {
            return null;
        }
        var x = coords[0];
        var y = coords[1];
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if (zone.y1 === zone.y2) {
                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {
                    return zone;
                }
            }
            else {
                if ((y === zone.y1 && x >= zone.x1) ||
                    (y === zone.y2 && x < zone.x2) ||
                    (y > zone.y1 && y < zone.y2)) {
                    return zone;
                }
            }
        }
        return null;
    };
    return MouseZoneManager;
}(Lifecycle_1.Disposable));
exports.MouseZoneManager = MouseZoneManager;
var MouseZone = (function () {
    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {
        this.x1 = x1;
        this.y1 = y1;
        this.x2 = x2;
        this.y2 = y2;
        this.clickCallback = clickCallback;
        this.hoverCallback = hoverCallback;
        this.tooltipCallback = tooltipCallback;
        this.leaveCallback = leaveCallback;
        this.willLinkActivate = willLinkActivate;
    }
    return MouseZone;
}());
exports.MouseZone = MouseZone;


/***/ }),

/***/ "./lib/SelectionManager.js":
/*!*********************************!*\
  !*** ./lib/SelectionManager.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MouseHelper_1 = __webpack_require__(/*! ./MouseHelper */ "./lib/MouseHelper.js");
var Browser = __webpack_require__(/*! ./common/Platform */ "./lib/common/Platform.js");
var SelectionModel_1 = __webpack_require__(/*! ./SelectionModel */ "./lib/SelectionModel.js");
var AltClickHandler_1 = __webpack_require__(/*! ./handlers/AltClickHandler */ "./lib/handlers/AltClickHandler.js");
var BufferLine_1 = __webpack_require__(/*! ./BufferLine */ "./lib/BufferLine.js");
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var DRAG_SCROLL_MAX_THRESHOLD = 50;
var DRAG_SCROLL_MAX_SPEED = 15;
var DRAG_SCROLL_INTERVAL = 50;
var ALT_CLICK_MOVE_CURSOR_TIME = 500;
var WORD_SEPARATORS = ' ()[]{}\'"';
var NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);
var ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');
var SelectionManager = (function () {
    function SelectionManager(_terminal, _charMeasure) {
        this._terminal = _terminal;
        this._charMeasure = _charMeasure;
        this._enabled = true;
        this._workCell = new BufferLine_1.CellData();
        this._onLinuxMouseSelection = new EventEmitter2_1.EventEmitter2();
        this._onRedrawRequest = new EventEmitter2_1.EventEmitter2();
        this._onSelectionChange = new EventEmitter2_1.EventEmitter2();
        this._initListeners();
        this.enable();
        this._model = new SelectionModel_1.SelectionModel(_terminal);
        this._activeSelectionMode = 0;
    }
    Object.defineProperty(SelectionManager.prototype, "onLinuxMouseSelection", {
        get: function () { return this._onLinuxMouseSelection.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionManager.prototype, "onRedrawRequest", {
        get: function () { return this._onRedrawRequest.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionManager.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: true,
        configurable: true
    });
    SelectionManager.prototype.dispose = function () {
        this._removeMouseDownListeners();
    };
    Object.defineProperty(SelectionManager.prototype, "_buffer", {
        get: function () {
            return this._terminal.buffers.active;
        },
        enumerable: true,
        configurable: true
    });
    SelectionManager.prototype._initListeners = function () {
        var _this = this;
        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };
        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };
        this.initBuffersListeners();
    };
    SelectionManager.prototype.initBuffersListeners = function () {
        var _this = this;
        this._trimListener = this._terminal.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
        this._terminal.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });
    };
    SelectionManager.prototype.disable = function () {
        this.clearSelection();
        this._enabled = false;
    };
    SelectionManager.prototype.enable = function () {
        this._enabled = true;
    };
    Object.defineProperty(SelectionManager.prototype, "selectionStart", {
        get: function () { return this._model.finalSelectionStart; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionManager.prototype, "selectionEnd", {
        get: function () { return this._model.finalSelectionEnd; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionManager.prototype, "hasSelection", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return false;
            }
            return start[0] !== end[0] || start[1] !== end[1];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionManager.prototype, "selectionText", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return '';
            }
            var result = [];
            if (this._activeSelectionMode === 3) {
                if (start[0] === end[0]) {
                    return '';
                }
                for (var i = start[1]; i <= end[1]; i++) {
                    var lineText = this._buffer.translateBufferLineToString(i, true, start[0], end[0]);
                    result.push(lineText);
                }
            }
            else {
                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;
                result.push(this._buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));
                for (var i = start[1] + 1; i <= end[1] - 1; i++) {
                    var bufferLine = this._buffer.lines.get(i);
                    var lineText = this._buffer.translateBufferLineToString(i, true);
                    if (bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
                if (start[1] !== end[1]) {
                    var bufferLine = this._buffer.lines.get(end[1]);
                    var lineText = this._buffer.translateBufferLineToString(end[1], true, 0, end[0]);
                    if (bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
            }
            var formattedResult = result.map(function (line) {
                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');
            }).join(Browser.isMSWindows ? '\r\n' : '\n');
            return formattedResult;
        },
        enumerable: true,
        configurable: true
    });
    SelectionManager.prototype.clearSelection = function () {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this.refresh();
    };
    SelectionManager.prototype.refresh = function (isLinuxMouseSelection) {
        var _this = this;
        if (!this._refreshAnimationFrame) {
            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });
        }
        if (Browser.isLinux && isLinuxMouseSelection) {
            var selectionText = this.selectionText;
            if (selectionText.length) {
                this._onLinuxMouseSelection.fire(this.selectionText);
            }
        }
    };
    SelectionManager.prototype._refresh = function () {
        this._refreshAnimationFrame = null;
        this._onRedrawRequest.fire({
            start: this._model.finalSelectionStart,
            end: this._model.finalSelectionEnd,
            columnSelectMode: this._activeSelectionMode === 3
        });
    };
    SelectionManager.prototype.isClickInSelection = function (event) {
        var coords = this._getMouseBufferCoords(event);
        var start = this._model.finalSelectionStart;
        var end = this._model.finalSelectionEnd;
        if (!start || !end) {
            return false;
        }
        return this._areCoordsInSelection(coords, start, end);
    };
    SelectionManager.prototype._areCoordsInSelection = function (coords, start, end) {
        return (coords[1] > start[1] && coords[1] < end[1]) ||
            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);
    };
    SelectionManager.prototype.selectWordAtCursor = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._selectWordAt(coords, false);
            this._model.selectionEnd = null;
            this.refresh(true);
        }
    };
    SelectionManager.prototype.selectAll = function () {
        this._model.isSelectAllActive = true;
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionManager.prototype.selectLines = function (start, end) {
        this._model.clearSelection();
        start = Math.max(start, 0);
        end = Math.min(end, this._terminal.buffer.lines.length - 1);
        this._model.selectionStart = [0, start];
        this._model.selectionEnd = [this._terminal.cols, end];
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionManager.prototype._onTrim = function (amount) {
        var needsRefresh = this._model.onTrim(amount);
        if (needsRefresh) {
            this.refresh();
        }
    };
    SelectionManager.prototype._getMouseBufferCoords = function (event) {
        var coords = this._terminal.mouseHelper.getCoords(event, this._terminal.screenElement, this._charMeasure, this._terminal.cols, this._terminal.rows, true);
        if (!coords) {
            return null;
        }
        coords[0]--;
        coords[1]--;
        coords[1] += this._terminal.buffer.ydisp;
        return coords;
    };
    SelectionManager.prototype._getMouseEventScrollAmount = function (event) {
        var offset = MouseHelper_1.MouseHelper.getCoordsRelativeToElement(event, this._terminal.screenElement)[1];
        var terminalHeight = this._terminal.rows * Math.ceil(this._charMeasure.height * this._terminal.options.lineHeight);
        if (offset >= 0 && offset <= terminalHeight) {
            return 0;
        }
        if (offset > terminalHeight) {
            offset -= terminalHeight;
        }
        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);
        offset /= DRAG_SCROLL_MAX_THRESHOLD;
        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));
    };
    SelectionManager.prototype.shouldForceSelection = function (event) {
        if (Browser.isMac) {
            return event.altKey && this._terminal.options.macOptionClickForcesSelection;
        }
        return event.shiftKey;
    };
    SelectionManager.prototype.onMouseDown = function (event) {
        this._mouseDownTimeStamp = event.timeStamp;
        if (event.button === 2 && this.hasSelection) {
            return;
        }
        if (event.button !== 0) {
            return;
        }
        if (!this._enabled) {
            if (!this.shouldForceSelection(event)) {
                return;
            }
            event.stopPropagation();
        }
        event.preventDefault();
        this._dragScrollAmount = 0;
        if (this._enabled && event.shiftKey) {
            this._onIncrementalClick(event);
        }
        else {
            if (event.detail === 1) {
                this._onSingleClick(event);
            }
            else if (event.detail === 2) {
                this._onDoubleClick(event);
            }
            else if (event.detail === 3) {
                this._onTripleClick(event);
            }
        }
        this._addMouseDownListeners();
        this.refresh(true);
    };
    SelectionManager.prototype._addMouseDownListeners = function () {
        var _this = this;
        this._terminal.element.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);
        this._terminal.element.ownerDocument.addEventListener('mouseup', this._mouseUpListener);
        this._dragScrollIntervalTimer = setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);
    };
    SelectionManager.prototype._removeMouseDownListeners = function () {
        if (this._terminal.element.ownerDocument) {
            this._terminal.element.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);
            this._terminal.element.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);
        }
        clearInterval(this._dragScrollIntervalTimer);
        this._dragScrollIntervalTimer = null;
    };
    SelectionManager.prototype._onIncrementalClick = function (event) {
        if (this._model.selectionStart) {
            this._model.selectionEnd = this._getMouseBufferCoords(event);
        }
    };
    SelectionManager.prototype._onSingleClick = function (event) {
        this._model.selectionStartLength = 0;
        this._model.isSelectAllActive = false;
        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;
        this._model.selectionStart = this._getMouseBufferCoords(event);
        if (!this._model.selectionStart) {
            return;
        }
        this._model.selectionEnd = null;
        var line = this._buffer.lines.get(this._model.selectionStart[1]);
        if (!line) {
            return;
        }
        if (line.length >= this._model.selectionStart[0]) {
            return;
        }
        if (line.hasWidth(this._model.selectionStart[0]) === 0) {
            this._model.selectionStart[0]++;
        }
    };
    SelectionManager.prototype._onDoubleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 1;
            this._selectWordAt(coords, true);
        }
    };
    SelectionManager.prototype._onTripleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 2;
            this._selectLineAt(coords[1]);
        }
    };
    SelectionManager.prototype.shouldColumnSelect = function (event) {
        return event.altKey && !(Browser.isMac && this._terminal.options.macOptionClickForcesSelection);
    };
    SelectionManager.prototype._onMouseMove = function (event) {
        event.stopImmediatePropagation();
        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;
        this._model.selectionEnd = this._getMouseBufferCoords(event);
        if (!this._model.selectionEnd) {
            this.refresh(true);
            return;
        }
        if (this._activeSelectionMode === 2) {
            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {
                this._model.selectionEnd[0] = 0;
            }
            else {
                this._model.selectionEnd[0] = this._terminal.cols;
            }
        }
        else if (this._activeSelectionMode === 1) {
            this._selectToWordAt(this._model.selectionEnd);
        }
        this._dragScrollAmount = this._getMouseEventScrollAmount(event);
        if (this._activeSelectionMode !== 3) {
            if (this._dragScrollAmount > 0) {
                this._model.selectionEnd[0] = this._terminal.cols;
            }
            else if (this._dragScrollAmount < 0) {
                this._model.selectionEnd[0] = 0;
            }
        }
        if (this._model.selectionEnd[1] < this._buffer.lines.length) {
            if (this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0]) === 0) {
                this._model.selectionEnd[0]++;
            }
        }
        if (!previousSelectionEnd ||
            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||
            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {
            this.refresh(true);
        }
    };
    SelectionManager.prototype._dragScroll = function () {
        if (this._dragScrollAmount) {
            this._terminal.scrollLines(this._dragScrollAmount, false);
            if (this._dragScrollAmount > 0) {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = this._terminal.cols;
                }
                this._model.selectionEnd[1] = Math.min(this._terminal.buffer.ydisp + this._terminal.rows, this._terminal.buffer.lines.length - 1);
            }
            else {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = 0;
                }
                this._model.selectionEnd[1] = this._terminal.buffer.ydisp;
            }
            this.refresh();
        }
    };
    SelectionManager.prototype._onMouseUp = function (event) {
        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;
        this._removeMouseDownListeners();
        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {
            (new AltClickHandler_1.AltClickHandler(event, this._terminal)).move();
        }
        else if (this.hasSelection) {
            this._onSelectionChange.fire();
        }
    };
    SelectionManager.prototype._onBufferActivate = function (e) {
        var _this = this;
        this.clearSelection();
        if (this._trimListener) {
            this._trimListener.dispose();
        }
        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
    };
    SelectionManager.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {
        var charIndex = coords[0];
        for (var i = 0; coords[0] >= i; i++) {
            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;
            if (this._workCell.getWidth() === 0) {
                charIndex--;
            }
            else if (length_1 > 1 && coords[0] !== i) {
                charIndex += length_1 - 1;
            }
        }
        return charIndex;
    };
    SelectionManager.prototype.setSelection = function (col, row, length) {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this._model.selectionStart = [col, row];
        this._model.selectionStartLength = length;
        this.refresh();
    };
    SelectionManager.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {
        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }
        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }
        if (coords[0] >= this._terminal.cols) {
            return null;
        }
        var bufferLine = this._buffer.lines.get(coords[1]);
        if (!bufferLine) {
            return null;
        }
        var line = this._buffer.translateBufferLineToString(coords[1], false);
        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);
        var endIndex = startIndex;
        var charOffset = coords[0] - startIndex;
        var leftWideCharCount = 0;
        var rightWideCharCount = 0;
        var leftLongCharOffset = 0;
        var rightLongCharOffset = 0;
        if (line.charAt(startIndex) === ' ') {
            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {
                startIndex--;
            }
            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {
                endIndex++;
            }
        }
        else {
            var startCol = coords[0];
            var endCol = coords[0];
            if (bufferLine.getWidth(startCol) === 0) {
                leftWideCharCount++;
                startCol--;
            }
            if (bufferLine.getWidth(endCol) === 2) {
                rightWideCharCount++;
                endCol++;
            }
            var length_2 = bufferLine.getString(endCol).length;
            if (length_2 > 1) {
                rightLongCharOffset += length_2 - 1;
                endIndex += length_2 - 1;
            }
            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {
                bufferLine.loadCell(startCol - 1, this._workCell);
                var length_3 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 0) {
                    leftWideCharCount++;
                    startCol--;
                }
                else if (length_3 > 1) {
                    leftLongCharOffset += length_3 - 1;
                    startIndex -= length_3 - 1;
                }
                startIndex--;
                startCol--;
            }
            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {
                bufferLine.loadCell(endCol + 1, this._workCell);
                var length_4 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 2) {
                    rightWideCharCount++;
                    endCol++;
                }
                else if (length_4 > 1) {
                    rightLongCharOffset += length_4 - 1;
                    endIndex += length_4 - 1;
                }
                endIndex++;
                endCol++;
            }
        }
        endIndex++;
        var start = startIndex
            + charOffset
            - leftWideCharCount
            + leftLongCharOffset;
        var length = Math.min(this._terminal.cols, endIndex
            - startIndex
            + leftWideCharCount
            + rightWideCharCount
            - leftLongCharOffset
            - rightLongCharOffset);
        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {
            return null;
        }
        if (followWrappedLinesAbove) {
            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {
                var previousBufferLine = this._buffer.lines.get(coords[1] - 1);
                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {
                    var previousLineWordPosition = this._getWordAt([this._terminal.cols - 1, coords[1] - 1], false, true, false);
                    if (previousLineWordPosition) {
                        var offset = this._terminal.cols - previousLineWordPosition.start;
                        start -= offset;
                        length += offset;
                    }
                }
            }
        }
        if (followWrappedLinesBelow) {
            if (start + length === this._terminal.cols && bufferLine.getCodePoint(this._terminal.cols - 1) !== 32) {
                var nextBufferLine = this._buffer.lines.get(coords[1] + 1);
                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {
                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);
                    if (nextLineWordPosition) {
                        length += nextLineWordPosition.length;
                    }
                }
            }
        }
        return { start: start, length: length };
    };
    SelectionManager.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {
        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);
        if (wordPosition) {
            while (wordPosition.start < 0) {
                wordPosition.start += this._terminal.cols;
                coords[1]--;
            }
            this._model.selectionStart = [wordPosition.start, coords[1]];
            this._model.selectionStartLength = wordPosition.length;
        }
    };
    SelectionManager.prototype._selectToWordAt = function (coords) {
        var wordPosition = this._getWordAt(coords, true);
        if (wordPosition) {
            var endRow = coords[1];
            while (wordPosition.start < 0) {
                wordPosition.start += this._terminal.cols;
                endRow--;
            }
            if (!this._model.areSelectionValuesReversed()) {
                while (wordPosition.start + wordPosition.length > this._terminal.cols) {
                    wordPosition.length -= this._terminal.cols;
                    endRow++;
                }
            }
            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];
        }
    };
    SelectionManager.prototype._isCharWordSeparator = function (cell) {
        if (cell.getWidth() === 0) {
            return false;
        }
        return WORD_SEPARATORS.indexOf(cell.getChars()) >= 0;
    };
    SelectionManager.prototype._selectLineAt = function (line) {
        var wrappedRange = this._buffer.getWrappedRangeForLine(line);
        this._model.selectionStart = [0, wrappedRange.first];
        this._model.selectionEnd = [this._terminal.cols, wrappedRange.last];
        this._model.selectionStartLength = 0;
    };
    return SelectionManager;
}());
exports.SelectionManager = SelectionManager;


/***/ }),

/***/ "./lib/SelectionModel.js":
/*!*******************************!*\
  !*** ./lib/SelectionModel.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SelectionModel = (function () {
    function SelectionModel(_terminal) {
        this._terminal = _terminal;
        this.clearSelection();
    }
    SelectionModel.prototype.clearSelection = function () {
        this.selectionStart = null;
        this.selectionEnd = null;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    };
    Object.defineProperty(SelectionModel.prototype, "finalSelectionStart", {
        get: function () {
            if (this.isSelectAllActive) {
                return [0, 0];
            }
            if (!this.selectionEnd || !this.selectionStart) {
                return this.selectionStart;
            }
            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionModel.prototype, "finalSelectionEnd", {
        get: function () {
            if (this.isSelectAllActive) {
                return [this._terminal.cols, this._terminal.buffer.ybase + this._terminal.rows - 1];
            }
            if (!this.selectionStart) {
                return null;
            }
            if (!this.selectionEnd || this.areSelectionValuesReversed()) {
                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;
                if (startPlusLength > this._terminal.cols) {
                    return [startPlusLength % this._terminal.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._terminal.cols)];
                }
                return [startPlusLength, this.selectionStart[1]];
            }
            if (this.selectionStartLength) {
                if (this.selectionEnd[1] === this.selectionStart[1]) {
                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];
                }
            }
            return this.selectionEnd;
        },
        enumerable: true,
        configurable: true
    });
    SelectionModel.prototype.areSelectionValuesReversed = function () {
        var start = this.selectionStart;
        var end = this.selectionEnd;
        if (!start || !end) {
            return false;
        }
        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);
    };
    SelectionModel.prototype.onTrim = function (amount) {
        if (this.selectionStart) {
            this.selectionStart[1] -= amount;
        }
        if (this.selectionEnd) {
            this.selectionEnd[1] -= amount;
        }
        if (this.selectionEnd && this.selectionEnd[1] < 0) {
            this.clearSelection();
            return true;
        }
        if (this.selectionStart && this.selectionStart[1] < 0) {
            this.selectionStart[1] = 0;
        }
        return false;
    };
    return SelectionModel;
}());
exports.SelectionModel = SelectionModel;


/***/ }),

/***/ "./lib/SoundManager.js":
/*!*****************************!*\
  !*** ./lib/SoundManager.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';
var SoundManager = (function () {
    function SoundManager(_terminal) {
        this._terminal = _terminal;
    }
    Object.defineProperty(SoundManager, "audioContext", {
        get: function () {
            if (!SoundManager._audioContext) {
                var audioContextCtor = window.AudioContext || window.webkitAudioContext;
                if (!audioContextCtor) {
                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');
                    return null;
                }
                SoundManager._audioContext = new audioContextCtor();
            }
            return SoundManager._audioContext;
        },
        enumerable: true,
        configurable: true
    });
    SoundManager.prototype.playBellSound = function () {
        var ctx = SoundManager.audioContext;
        if (!ctx) {
            return;
        }
        var bellAudioSource = ctx.createBufferSource();
        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)), function (buffer) {
            bellAudioSource.buffer = buffer;
            bellAudioSource.connect(ctx.destination);
            bellAudioSource.start(0);
        });
    };
    SoundManager.prototype._base64ToArrayBuffer = function (base64) {
        var binaryString = window.atob(base64);
        var len = binaryString.length;
        var bytes = new Uint8Array(len);
        for (var i = 0; i < len; i++) {
            bytes[i] = binaryString.charCodeAt(i);
        }
        return bytes.buffer;
    };
    SoundManager.prototype._removeMimeType = function (dataURI) {
        var splitUri = dataURI.split(',');
        return splitUri[1];
    };
    return SoundManager;
}());
exports.SoundManager = SoundManager;


/***/ }),

/***/ "./lib/Strings.js":
/*!************************!*\
  !*** ./lib/Strings.js ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.blankLine = 'Blank line';
exports.promptLabel = 'Terminal input';
exports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';


/***/ }),

/***/ "./lib/Terminal.js":
/*!*************************!*\
  !*** ./lib/Terminal.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BufferSet_1 = __webpack_require__(/*! ./BufferSet */ "./lib/BufferSet.js");
var Buffer_1 = __webpack_require__(/*! ./Buffer */ "./lib/Buffer.js");
var CompositionHelper_1 = __webpack_require__(/*! ./CompositionHelper */ "./lib/CompositionHelper.js");
var EventEmitter_1 = __webpack_require__(/*! ./common/EventEmitter */ "./lib/common/EventEmitter.js");
var Viewport_1 = __webpack_require__(/*! ./Viewport */ "./lib/Viewport.js");
var Clipboard_1 = __webpack_require__(/*! ./Clipboard */ "./lib/Clipboard.js");
var EscapeSequences_1 = __webpack_require__(/*! ./common/data/EscapeSequences */ "./lib/common/data/EscapeSequences.js");
var InputHandler_1 = __webpack_require__(/*! ./InputHandler */ "./lib/InputHandler.js");
var Renderer_1 = __webpack_require__(/*! ./renderer/Renderer */ "./lib/renderer/Renderer.js");
var Linkifier_1 = __webpack_require__(/*! ./Linkifier */ "./lib/Linkifier.js");
var SelectionManager_1 = __webpack_require__(/*! ./SelectionManager */ "./lib/SelectionManager.js");
var CharMeasure_1 = __webpack_require__(/*! ./CharMeasure */ "./lib/CharMeasure.js");
var Browser = __webpack_require__(/*! ./common/Platform */ "./lib/common/Platform.js");
var Lifecycle_1 = __webpack_require__(/*! ./ui/Lifecycle */ "./lib/ui/Lifecycle.js");
var Strings = __webpack_require__(/*! ./Strings */ "./lib/Strings.js");
var MouseHelper_1 = __webpack_require__(/*! ./MouseHelper */ "./lib/MouseHelper.js");
var SoundManager_1 = __webpack_require__(/*! ./SoundManager */ "./lib/SoundManager.js");
var MouseZoneManager_1 = __webpack_require__(/*! ./MouseZoneManager */ "./lib/MouseZoneManager.js");
var AccessibilityManager_1 = __webpack_require__(/*! ./AccessibilityManager */ "./lib/AccessibilityManager.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! ./ui/ScreenDprMonitor */ "./lib/ui/ScreenDprMonitor.js");
var CharAtlasCache_1 = __webpack_require__(/*! ./renderer/atlas/CharAtlasCache */ "./lib/renderer/atlas/CharAtlasCache.js");
var DomRenderer_1 = __webpack_require__(/*! ./renderer/dom/DomRenderer */ "./lib/renderer/dom/DomRenderer.js");
var Keyboard_1 = __webpack_require__(/*! ./core/input/Keyboard */ "./lib/core/input/Keyboard.js");
var Clone_1 = __webpack_require__(/*! ./common/Clone */ "./lib/common/Clone.js");
var EventEmitter2_1 = __webpack_require__(/*! ./common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var WindowsMode_1 = __webpack_require__(/*! ./WindowsMode */ "./lib/WindowsMode.js");
var document = (typeof window !== 'undefined') ? window.document : null;
var WRITE_BUFFER_PAUSE_THRESHOLD = 5;
var WRITE_TIMEOUT_MS = 12;
var MINIMUM_COLS = 2;
var MINIMUM_ROWS = 1;
var CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];
var DEFAULT_OPTIONS = {
    cols: 80,
    rows: 24,
    convertEol: false,
    termName: 'xterm',
    cursorBlink: false,
    cursorStyle: 'block',
    bellSound: SoundManager_1.DEFAULT_BELL_SOUND,
    bellStyle: 'none',
    drawBoldTextInBrightColors: true,
    enableBold: true,
    experimentalCharAtlas: 'static',
    fontFamily: 'courier-new, courier, monospace',
    fontSize: 15,
    fontWeight: 'normal',
    fontWeightBold: 'bold',
    lineHeight: 1.0,
    letterSpacing: 0,
    scrollback: 1000,
    screenKeys: false,
    screenReaderMode: false,
    debug: false,
    macOptionIsMeta: false,
    macOptionClickForcesSelection: false,
    cancelEvents: false,
    disableStdin: false,
    useFlowControl: false,
    allowTransparency: false,
    tabStopWidth: 8,
    theme: null,
    rightClickSelectsWord: Browser.isMac,
    rendererType: 'canvas',
    windowsMode: false
};
var Terminal = (function (_super) {
    __extends(Terminal, _super);
    function Terminal(options) {
        if (options === void 0) { options = {}; }
        var _this = _super.call(this) || this;
        _this.browser = Browser;
        _this._blankLine = null;
        _this._onCursorMove = new EventEmitter2_1.EventEmitter2();
        _this._onData = new EventEmitter2_1.EventEmitter2();
        _this._onKey = new EventEmitter2_1.EventEmitter2();
        _this._onLineFeed = new EventEmitter2_1.EventEmitter2();
        _this._onRender = new EventEmitter2_1.EventEmitter2();
        _this._onResize = new EventEmitter2_1.EventEmitter2();
        _this._onScroll = new EventEmitter2_1.EventEmitter2();
        _this._onSelectionChange = new EventEmitter2_1.EventEmitter2();
        _this._onTitleChange = new EventEmitter2_1.EventEmitter2();
        _this.options = Clone_1.clone(options);
        _this._setup();
        _this.onCursorMove(function () { return _this.emit('cursormove'); });
        _this.onData(function (e) { return _this.emit('data', e); });
        _this.onKey(function (e) { return _this.emit('key', e.key, e.domEvent); });
        _this.onLineFeed(function () { return _this.emit('linefeed'); });
        _this.onRender(function (e) { return _this.emit('refresh', e); });
        _this.onResize(function (e) { return _this.emit('resize', e); });
        _this.onSelectionChange(function () { return _this.emit('selection'); });
        _this.onScroll(function (e) { return _this.emit('scroll', e); });
        _this.onTitleChange(function (e) { return _this.emit('title', e); });
        return _this;
    }
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._onKey.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._onResize.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._onTitleChange.event; },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        if (this._windowsMode) {
            this._windowsMode.dispose();
            this._windowsMode = undefined;
        }
        this._customKeyEventHandler = null;
        CharAtlasCache_1.removeTerminalFromCache(this);
        this.handler = function () { };
        this.write = function () { };
        if (this.element && this.element.parentNode) {
            this.element.parentNode.removeChild(this.element);
        }
    };
    Terminal.prototype.destroy = function () {
        this.dispose();
    };
    Terminal.prototype._setup = function () {
        var _this = this;
        Object.keys(DEFAULT_OPTIONS).forEach(function (key) {
            if (_this.options[key] === null || _this.options[key] === undefined) {
                _this.options[key] = DEFAULT_OPTIONS[key];
            }
        });
        this._parent = document ? document.body : null;
        this.cols = Math.max(this.options.cols, MINIMUM_COLS);
        this.rows = Math.max(this.options.rows, MINIMUM_ROWS);
        if (this.options.handler) {
            this.onData(this.options.handler);
        }
        this.cursorState = 0;
        this.cursorHidden = false;
        this._customKeyEventHandler = null;
        this.applicationKeypad = false;
        this.applicationCursor = false;
        this.originMode = false;
        this.insertMode = false;
        this.wraparoundMode = true;
        this.bracketedPasteMode = false;
        this.charset = null;
        this.gcharset = null;
        this.glevel = 0;
        this.charsets = [null];
        this.curAttrData = Buffer_1.DEFAULT_ATTR_DATA.clone();
        this._eraseAttrData = Buffer_1.DEFAULT_ATTR_DATA.clone();
        this.params = [];
        this.currentParam = 0;
        this.writeBuffer = [];
        this._writeInProgress = false;
        this._xoffSentToCatchUp = false;
        this._userScrolling = false;
        this._inputHandler = new InputHandler_1.InputHandler(this);
        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });
        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });
        this.register(this._inputHandler);
        this.renderer = this.renderer || null;
        this.selectionManager = this.selectionManager || null;
        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this);
        this._mouseZoneManager = this._mouseZoneManager || null;
        this.soundManager = this.soundManager || new SoundManager_1.SoundManager(this);
        this.buffers = new BufferSet_1.BufferSet(this);
        if (this.selectionManager) {
            this.selectionManager.clearSelection();
            this.selectionManager.initBuffersListeners();
        }
        if (this.options.windowsMode) {
            this._windowsMode = WindowsMode_1.applyWindowsMode(this);
        }
    };
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () {
            return this.buffers.active;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.eraseAttrData = function () {
        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);
        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;
        return this._eraseAttrData;
    };
    Terminal.prototype.focus = function () {
        if (this.textarea) {
            this.textarea.focus({ preventScroll: true });
        }
    };
    Object.defineProperty(Terminal.prototype, "isFocused", {
        get: function () {
            return document.activeElement === this.textarea && document.hasFocus();
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.getOption = function (key) {
        if (!(key in DEFAULT_OPTIONS)) {
            throw new Error('No option with key "' + key + '"');
        }
        return this.options[key];
    };
    Terminal.prototype.setOption = function (key, value) {
        if (!(key in DEFAULT_OPTIONS)) {
            throw new Error('No option with key "' + key + '"');
        }
        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {
            console.error("Option \"" + key + "\" can only be set in the constructor");
        }
        if (this.options[key] === value) {
            return;
        }
        switch (key) {
            case 'bellStyle':
                if (!value) {
                    value = 'none';
                }
                break;
            case 'cursorStyle':
                if (!value) {
                    value = 'block';
                }
                break;
            case 'fontWeight':
                if (!value) {
                    value = 'normal';
                }
                break;
            case 'fontWeightBold':
                if (!value) {
                    value = 'bold';
                }
                break;
            case 'lineHeight':
                if (value < 1) {
                    console.warn(key + " cannot be less than 1, value: " + value);
                    return;
                }
            case 'rendererType':
                if (!value) {
                    value = 'canvas';
                }
                break;
            case 'tabStopWidth':
                if (value < 1) {
                    console.warn(key + " cannot be less than 1, value: " + value);
                    return;
                }
                break;
            case 'theme':
                if (this.renderer) {
                    this._setTheme(value);
                    return;
                }
                break;
            case 'scrollback':
                value = Math.min(value, Buffer_1.MAX_BUFFER_SIZE);
                if (value < 0) {
                    console.warn(key + " cannot be less than 0, value: " + value);
                    return;
                }
                if (this.options[key] !== value) {
                    var newBufferLength = this.rows + value;
                    if (this.buffer.lines.length > newBufferLength) {
                        var amountToTrim = this.buffer.lines.length - newBufferLength;
                        var needsRefresh = (this.buffer.ydisp - amountToTrim < 0);
                        this.buffer.lines.trimStart(amountToTrim);
                        this.buffer.ybase = Math.max(this.buffer.ybase - amountToTrim, 0);
                        this.buffer.ydisp = Math.max(this.buffer.ydisp - amountToTrim, 0);
                        if (needsRefresh) {
                            this.refresh(0, this.rows - 1);
                        }
                    }
                }
                break;
        }
        this.options[key] = value;
        switch (key) {
            case 'fontFamily':
            case 'fontSize':
                if (this.renderer) {
                    this.renderer.clear();
                    this.charMeasure.measure(this.options);
                }
                break;
            case 'drawBoldTextInBrightColors':
            case 'experimentalCharAtlas':
            case 'enableBold':
            case 'letterSpacing':
            case 'lineHeight':
            case 'fontWeight':
            case 'fontWeightBold':
                if (this.renderer) {
                    this.renderer.clear();
                    this.renderer.onResize(this.cols, this.rows);
                    this.refresh(0, this.rows - 1);
                }
                break;
            case 'rendererType':
                if (this.renderer) {
                    this.unregister(this.renderer);
                    this.renderer.dispose();
                    this.renderer = null;
                }
                this._setupRenderer();
                this.renderer.onCharSizeChanged();
                if (this._theme) {
                    this.renderer.setTheme(this._theme);
                }
                this.mouseHelper.setRenderer(this.renderer);
                break;
            case 'scrollback':
                this.buffers.resize(this.cols, this.rows);
                if (this.viewport) {
                    this.viewport.syncScrollArea();
                }
                break;
            case 'screenReaderMode':
                if (value) {
                    if (!this._accessibilityManager) {
                        this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this);
                    }
                }
                else {
                    if (this._accessibilityManager) {
                        this._accessibilityManager.dispose();
                        this._accessibilityManager = null;
                    }
                }
                break;
            case 'tabStopWidth':
                this.buffers.setupTabStops();
                break;
            case 'windowsMode':
                if (value) {
                    if (!this._windowsMode) {
                        this._windowsMode = WindowsMode_1.applyWindowsMode(this);
                    }
                }
                else {
                    if (this._windowsMode) {
                        this._windowsMode.dispose();
                        this._windowsMode = undefined;
                    }
                }
                break;
        }
        if (this.renderer) {
            this.renderer.onOptionsChanged();
        }
    };
    Terminal.prototype._onTextAreaFocus = function (ev) {
        if (this.sendFocus) {
            this.handler(EscapeSequences_1.C0.ESC + '[I');
        }
        this.updateCursorStyle(ev);
        this.element.classList.add('focus');
        this.showCursor();
        this.emit('focus');
    };
    Terminal.prototype.blur = function () {
        return this.textarea.blur();
    };
    Terminal.prototype._onTextAreaBlur = function () {
        this.textarea.value = '';
        this.refresh(this.buffer.y, this.buffer.y);
        if (this.sendFocus) {
            this.handler(EscapeSequences_1.C0.ESC + '[O');
        }
        this.element.classList.remove('focus');
        this.emit('blur');
    };
    Terminal.prototype._initGlobal = function () {
        var _this = this;
        this._bindKeys();
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {
            if (!_this.hasSelection()) {
                return;
            }
            Clipboard_1.copyHandler(event, _this, _this.selectionManager);
        }));
        var pasteHandlerWrapper = function (event) { return Clipboard_1.pasteHandler(event, _this); };
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));
        if (Browser.isFirefox) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {
                if (event.button === 2) {
                    Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);
                }
            }));
        }
        else {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {
                Clipboard_1.rightClickHandler(event, _this, _this.selectionManager, _this.options.rightClickSelectsWord);
            }));
        }
        if (Browser.isLinux) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {
                if (event.button === 1) {
                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this);
                }
            }));
        }
    };
    Terminal.prototype._bindKeys = function () {
        var _this = this;
        var self = this;
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keydown', function (ev) {
            if (document.activeElement !== this) {
                return;
            }
            self._keyDown(ev);
        }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keypress', function (ev) {
            if (document.activeElement !== this) {
                return;
            }
            self._keyPress(ev);
        }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'keyup', function (ev) {
            if (!wasModifierKeyOnlyEvent(ev)) {
                _this.focus();
            }
            self._keyUp(ev);
        }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));
        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));
        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));
    };
    Terminal.prototype.open = function (parent) {
        var _this = this;
        this._parent = parent || this._parent;
        if (!this._parent) {
            throw new Error('Terminal requires a parent element.');
        }
        this._context = this._parent.ownerDocument.defaultView;
        this._document = this._parent.ownerDocument;
        this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        this._screenDprMonitor.setListener(function () { return _this.emit('dprchange', window.devicePixelRatio); });
        this.register(this._screenDprMonitor);
        this.element = this._document.createElement('div');
        this.element.dir = 'ltr';
        this.element.classList.add('terminal');
        this.element.classList.add('xterm');
        this.element.setAttribute('tabindex', '0');
        this._parent.appendChild(this.element);
        var fragment = document.createDocumentFragment();
        this._viewportElement = document.createElement('div');
        this._viewportElement.classList.add('xterm-viewport');
        fragment.appendChild(this._viewportElement);
        this._viewportScrollArea = document.createElement('div');
        this._viewportScrollArea.classList.add('xterm-scroll-area');
        this._viewportElement.appendChild(this._viewportScrollArea);
        this.screenElement = document.createElement('div');
        this.screenElement.classList.add('xterm-screen');
        this._helperContainer = document.createElement('div');
        this._helperContainer.classList.add('xterm-helpers');
        this.screenElement.appendChild(this._helperContainer);
        fragment.appendChild(this.screenElement);
        this._mouseZoneManager = new MouseZoneManager_1.MouseZoneManager(this);
        this.register(this._mouseZoneManager);
        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));
        this.linkifier.attachToDom(this._mouseZoneManager);
        this.textarea = document.createElement('textarea');
        this.textarea.classList.add('xterm-helper-textarea');
        this.textarea.setAttribute('aria-label', Strings.promptLabel);
        this.textarea.setAttribute('aria-multiline', 'false');
        this.textarea.setAttribute('autocorrect', 'off');
        this.textarea.setAttribute('autocapitalize', 'off');
        this.textarea.setAttribute('spellcheck', 'false');
        this.textarea.tabIndex = 0;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));
        this._helperContainer.appendChild(this.textarea);
        this._compositionView = document.createElement('div');
        this._compositionView.classList.add('composition-view');
        this._compositionHelper = new CompositionHelper_1.CompositionHelper(this.textarea, this._compositionView, this);
        this._helperContainer.appendChild(this._compositionView);
        this.charMeasure = new CharMeasure_1.CharMeasure(document, this._helperContainer);
        this.element.appendChild(fragment);
        this._setupRenderer();
        this._theme = this.options.theme;
        this.options.theme = null;
        this.viewport = new Viewport_1.Viewport(this, this._viewportElement, this._viewportScrollArea, this.charMeasure);
        this.viewport.onThemeChanged(this.renderer.colorManager.colors);
        this.register(this.viewport);
        this.register(this.onCursorMove(function () { return _this.renderer.onCursorMove(); }));
        this.register(this.onResize(function () { return _this.renderer.onResize(_this.cols, _this.rows); }));
        this.register(this.addDisposableListener('blur', function () { return _this.renderer.onBlur(); }));
        this.register(this.addDisposableListener('focus', function () { return _this.renderer.onFocus(); }));
        this.register(this.addDisposableListener('dprchange', function () { return _this.renderer.onWindowResize(window.devicePixelRatio); }));
        this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this.renderer.onWindowResize(window.devicePixelRatio); }));
        this.register(this.charMeasure.onCharSizeChanged(function () { return _this.renderer.onCharSizeChanged(); }));
        this.register(this.renderer.onCanvasResize(function () { return _this.viewport.syncScrollArea(); }));
        this.selectionManager = new SelectionManager_1.SelectionManager(this, this.charMeasure);
        this.register(this.selectionManager.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this.selectionManager.onMouseDown(e); }));
        this.register(this.selectionManager.onRedrawRequest(function (e) { return _this.renderer.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));
        this.register(this.selectionManager.onLinuxMouseSelection(function (text) {
            _this.textarea.value = text;
            _this.textarea.focus();
            _this.textarea.select();
        }));
        this.register(this.onScroll(function () {
            _this.viewport.syncScrollArea();
            _this.selectionManager.refresh();
        }));
        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this.selectionManager.refresh(); }));
        this.mouseHelper = new MouseHelper_1.MouseHelper(this.renderer);
        this.element.classList.toggle('enable-mouse-events', this.mouseEvents);
        if (this.mouseEvents) {
            this.selectionManager.disable();
        }
        else {
            this.selectionManager.enable();
        }
        if (this.options.screenReaderMode) {
            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this);
        }
        this.charMeasure.measure(this.options);
        this.refresh(0, this.rows - 1);
        this._initGlobal();
        this.bindMouse();
    };
    Terminal.prototype._setupRenderer = function () {
        var _this = this;
        switch (this.options.rendererType) {
            case 'canvas':
                this.renderer = new Renderer_1.Renderer(this, this.options.theme);
                break;
            case 'dom':
                this.renderer = new DomRenderer_1.DomRenderer(this, this.options.theme);
                break;
            default: throw new Error("Unrecognized rendererType \"" + this.options.rendererType + "\"");
        }
        this.renderer.onRender(function (e) { return _this._onRender.fire(e); });
        this.register(this.renderer);
    };
    Terminal.prototype._setTheme = function (theme) {
        this._theme = theme;
        var colors = this.renderer.setTheme(theme);
        if (this.viewport) {
            this.viewport.onThemeChanged(colors);
        }
    };
    Terminal.prototype.bindMouse = function () {
        var _this = this;
        var el = this.element;
        var self = this;
        var pressed = 32;
        function sendButton(ev) {
            var button;
            var pos;
            button = getButton(ev);
            pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);
            if (!pos)
                return;
            sendEvent(button, pos);
            switch (ev.overrideType || ev.type) {
                case 'mousedown':
                    pressed = button;
                    break;
                case 'mouseup':
                    pressed = 32;
                    break;
                case 'wheel':
                    break;
            }
        }
        function sendMove(ev) {
            var button = pressed;
            var pos = self.mouseHelper.getRawByteCoords(ev, self.screenElement, self.charMeasure, self.cols, self.rows);
            if (!pos)
                return;
            button += 32;
            sendEvent(button, pos);
        }
        function encode(data, ch) {
            if (!self.utfMouse) {
                if (ch === 255) {
                    data.push(0);
                    return;
                }
                if (ch > 127)
                    ch = 127;
                data.push(ch);
            }
            else {
                if (ch > 2047) {
                    data.push(2047);
                    return;
                }
                data.push(ch);
            }
        }
        function sendEvent(button, pos) {
            if (self._vt300Mouse) {
                button &= 3;
                pos.x -= 32;
                pos.y -= 32;
                var data_1 = EscapeSequences_1.C0.ESC + '[24';
                if (button === 0)
                    data_1 += '1';
                else if (button === 1)
                    data_1 += '3';
                else if (button === 2)
                    data_1 += '5';
                else if (button === 3)
                    return;
                else
                    data_1 += '0';
                data_1 += '~[' + pos.x + ',' + pos.y + ']\r';
                self.handler(data_1);
                return;
            }
            if (self._decLocator) {
                button &= 3;
                pos.x -= 32;
                pos.y -= 32;
                if (button === 0)
                    button = 2;
                else if (button === 1)
                    button = 4;
                else if (button === 2)
                    button = 6;
                else if (button === 3)
                    button = 3;
                self.handler(EscapeSequences_1.C0.ESC + '['
                    + button
                    + ';'
                    + (button === 3 ? 4 : 0)
                    + ';'
                    + pos.y
                    + ';'
                    + pos.x
                    + ';'
                    + pos.page || 0
                    + '&w');
                return;
            }
            if (self.urxvtMouse) {
                pos.x -= 32;
                pos.y -= 32;
                pos.x++;
                pos.y++;
                self.handler(EscapeSequences_1.C0.ESC + '[' + button + ';' + pos.x + ';' + pos.y + 'M');
                return;
            }
            if (self.sgrMouse) {
                pos.x -= 32;
                pos.y -= 32;
                self.handler(EscapeSequences_1.C0.ESC + '[<'
                    + (((button & 3) === 3 ? button & ~3 : button) - 32)
                    + ';'
                    + pos.x
                    + ';'
                    + pos.y
                    + ((button & 3) === 3 ? 'm' : 'M'));
                return;
            }
            var data = [];
            encode(data, button);
            encode(data, pos.x);
            encode(data, pos.y);
            self.handler(EscapeSequences_1.C0.ESC + '[M' + String.fromCharCode.apply(String, data));
        }
        function getButton(ev) {
            var button;
            var shift;
            var meta;
            var ctrl;
            var mod;
            switch (ev.overrideType || ev.type) {
                case 'mousedown':
                    button = ev.button !== null && ev.button !== undefined
                        ? +ev.button
                        : ev.which !== null && ev.which !== undefined
                            ? ev.which - 1
                            : null;
                    if (Browser.isMSIE) {
                        button = button === 1 ? 0 : button === 4 ? 1 : button;
                    }
                    break;
                case 'mouseup':
                    button = 3;
                    break;
                case 'DOMMouseScroll':
                    button = ev.detail < 0
                        ? 64
                        : 65;
                    break;
                case 'wheel':
                    button = ev.deltaY < 0
                        ? 64
                        : 65;
                    break;
            }
            shift = ev.shiftKey ? 4 : 0;
            meta = ev.metaKey ? 8 : 0;
            ctrl = ev.ctrlKey ? 16 : 0;
            mod = shift | meta | ctrl;
            if (self.vt200Mouse) {
                mod &= ctrl;
            }
            else if (!self.normalMouse) {
                mod = 0;
            }
            button = (32 + (mod << 2)) + button;
            return button;
        }
        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {
            ev.preventDefault();
            _this.focus();
            if (!_this.mouseEvents || _this.selectionManager.shouldForceSelection(ev)) {
                return;
            }
            sendButton(ev);
            if (_this.vt200Mouse) {
                ev.overrideType = 'mouseup';
                sendButton(ev);
                return _this.cancel(ev);
            }
            var moveHandler;
            if (_this.normalMouse) {
                moveHandler = function (event) {
                    if (!_this.normalMouse) {
                        return;
                    }
                    sendMove(event);
                };
                _this._document.addEventListener('mousemove', moveHandler);
            }
            var handler = function (ev) {
                if (_this.normalMouse && !_this.x10Mouse) {
                    sendButton(ev);
                }
                if (moveHandler) {
                    _this._document.removeEventListener('mousemove', moveHandler);
                    moveHandler = null;
                }
                _this._document.removeEventListener('mouseup', handler);
                return _this.cancel(ev);
            };
            _this._document.addEventListener('mouseup', handler);
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (!_this.mouseEvents) {
                if (!_this.buffer.hasScrollback) {
                    var amount = _this.viewport.getLinesScrolled(ev);
                    if (amount === 0) {
                        return;
                    }
                    var sequence = EscapeSequences_1.C0.ESC + (_this.applicationCursor ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');
                    var data = '';
                    for (var i = 0; i < Math.abs(amount); i++) {
                        data += sequence;
                    }
                    _this.handler(data);
                }
                return;
            }
            if (_this.x10Mouse || _this._vt300Mouse || _this._decLocator)
                return;
            sendButton(ev);
            ev.preventDefault();
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (_this.mouseEvents)
                return;
            _this.viewport.onWheel(ev);
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {
            if (_this.mouseEvents)
                return;
            _this.viewport.onTouchStart(ev);
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {
            if (_this.mouseEvents)
                return;
            _this.viewport.onTouchMove(ev);
            return _this.cancel(ev);
        }));
    };
    Terminal.prototype.refresh = function (start, end) {
        if (this.renderer) {
            this.renderer.refreshRows(start, end);
        }
    };
    Terminal.prototype._queueLinkification = function (start, end) {
        if (this.linkifier) {
            this.linkifier.linkifyRows(start, end);
        }
    };
    Terminal.prototype.updateCursorStyle = function (ev) {
        if (this.selectionManager && this.selectionManager.shouldColumnSelect(ev)) {
            this.element.classList.add('column-select');
        }
        else {
            this.element.classList.remove('column-select');
        }
    };
    Terminal.prototype.showCursor = function () {
        if (!this.cursorState) {
            this.cursorState = 1;
            this.refresh(this.buffer.y, this.buffer.y);
        }
    };
    Terminal.prototype.scroll = function (isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        var newLine;
        newLine = this._blankLine;
        var eraseAttr = this.eraseAttrData();
        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {
            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);
            this._blankLine = newLine;
        }
        newLine.isWrapped = isWrapped;
        var topRow = this.buffer.ybase + this.buffer.scrollTop;
        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;
        if (this.buffer.scrollTop === 0) {
            var willBufferBeTrimmed = this.buffer.lines.isFull;
            if (bottomRow === this.buffer.lines.length - 1) {
                if (willBufferBeTrimmed) {
                    this.buffer.lines.recycle().copyFrom(newLine);
                }
                else {
                    this.buffer.lines.push(newLine.clone());
                }
            }
            else {
                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());
            }
            if (!willBufferBeTrimmed) {
                this.buffer.ybase++;
                if (!this._userScrolling) {
                    this.buffer.ydisp++;
                }
            }
            else {
                if (this._userScrolling) {
                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);
                }
            }
        }
        else {
            var scrollRegionHeight = bottomRow - topRow + 1;
            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);
            this.buffer.lines.set(bottomRow, newLine.clone());
        }
        if (!this._userScrolling) {
            this.buffer.ydisp = this.buffer.ybase;
        }
        this.updateRange(this.buffer.scrollTop);
        this.updateRange(this.buffer.scrollBottom);
        this._onScroll.fire(this.buffer.ydisp);
    };
    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {
        if (disp < 0) {
            if (this.buffer.ydisp === 0) {
                return;
            }
            this._userScrolling = true;
        }
        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {
            this._userScrolling = false;
        }
        var oldYdisp = this.buffer.ydisp;
        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);
        if (oldYdisp === this.buffer.ydisp) {
            return;
        }
        if (!suppressScrollEvent) {
            this._onScroll.fire(this.buffer.ydisp);
        }
        this.refresh(0, this.rows - 1);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this.scrollLines(pageCount * (this.rows - 1));
    };
    Terminal.prototype.scrollToTop = function () {
        this.scrollLines(-this.buffer.ydisp);
    };
    Terminal.prototype.scrollToBottom = function () {
        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);
    };
    Terminal.prototype.scrollToLine = function (line) {
        var scrollAmount = line - this.buffer.ydisp;
        if (scrollAmount !== 0) {
            this.scrollLines(scrollAmount);
        }
    };
    Terminal.prototype.write = function (data) {
        var _this = this;
        if (this._isDisposed) {
            return;
        }
        if (!data) {
            return;
        }
        this.writeBuffer.push(data);
        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {
            this.handler(EscapeSequences_1.C0.DC3);
            this._xoffSentToCatchUp = true;
        }
        if (!this._writeInProgress && this.writeBuffer.length > 0) {
            this._writeInProgress = true;
            setTimeout(function () {
                _this._innerWrite();
            });
        }
    };
    Terminal.prototype._innerWrite = function (bufferOffset) {
        var _this = this;
        if (bufferOffset === void 0) { bufferOffset = 0; }
        if (this._isDisposed) {
            this.writeBuffer = [];
        }
        var startTime = Date.now();
        while (this.writeBuffer.length > bufferOffset) {
            var data = this.writeBuffer[bufferOffset];
            bufferOffset++;
            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {
                this.handler(EscapeSequences_1.C0.DC1);
                this._xoffSentToCatchUp = false;
            }
            this._refreshStart = this.buffer.y;
            this._refreshEnd = this.buffer.y;
            this._inputHandler.parse(data);
            this.updateRange(this.buffer.y);
            this.refresh(this._refreshStart, this._refreshEnd);
            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {
                break;
            }
        }
        if (this.writeBuffer.length > bufferOffset) {
            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);
        }
        else {
            this._writeInProgress = false;
            this.writeBuffer = [];
        }
    };
    Terminal.prototype.writeln = function (data) {
        this.write(data + '\r\n');
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._customKeyEventHandler = customKeyEventHandler;
    };
    Terminal.prototype.addCsiHandler = function (flag, callback) {
        return this._inputHandler.addCsiHandler(flag, callback);
    };
    Terminal.prototype.addOscHandler = function (ident, callback) {
        return this._inputHandler.addOscHandler(ident, callback);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);
        this.refresh(0, this.rows - 1);
        return matcherId;
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        if (this.linkifier.deregisterLinkMatcher(matcherId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        var joinerId = this.renderer.registerCharacterJoiner(handler);
        this.refresh(0, this.rows - 1);
        return joinerId;
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        if (this.renderer.deregisterCharacterJoiner(joinerId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () {
            return this.buffer.markers;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.addMarker = function (cursorYOffset) {
        if (this.buffer !== this.buffers.normal) {
            return;
        }
        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this.selectionManager ? this.selectionManager.hasSelection : false;
    };
    Terminal.prototype.getSelection = function () {
        return this.selectionManager ? this.selectionManager.selectionText : '';
    };
    Terminal.prototype.clearSelection = function () {
        if (this.selectionManager) {
            this.selectionManager.clearSelection();
        }
    };
    Terminal.prototype.selectAll = function () {
        if (this.selectionManager) {
            this.selectionManager.selectAll();
        }
    };
    Terminal.prototype.selectLines = function (start, end) {
        if (this.selectionManager) {
            this.selectionManager.selectLines(start, end);
        }
    };
    Terminal.prototype._keyDown = function (event) {
        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {
            return false;
        }
        if (!this._compositionHelper.keydown(event)) {
            if (this.buffer.ybase !== this.buffer.ydisp) {
                this.scrollToBottom();
            }
            return false;
        }
        var result = Keyboard_1.evaluateKeyboardEvent(event, this.applicationCursor, this.browser.isMac, this.options.macOptionIsMeta);
        this.updateCursorStyle(event);
        if (result.type === 3 || result.type === 2) {
            var scrollCount = this.rows - 1;
            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);
            return this.cancel(event, true);
        }
        if (result.type === 1) {
            this.selectAll();
        }
        if (this._isThirdLevelShift(this.browser, event)) {
            return true;
        }
        if (result.cancel) {
            this.cancel(event, true);
        }
        if (!result.key) {
            return true;
        }
        this.emit('keydown', event);
        this._onKey.fire({ key: result.key, domEvent: event });
        this.showCursor();
        this.handler(result.key);
        return this.cancel(event, true);
    };
    Terminal.prototype._isThirdLevelShift = function (browser, ev) {
        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||
            (browser.isMSWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);
        if (ev.type === 'keypress') {
            return thirdLevelKey;
        }
        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);
    };
    Terminal.prototype.setgLevel = function (g) {
        this.glevel = g;
        this.charset = this.charsets[g];
    };
    Terminal.prototype.setgCharset = function (g, charset) {
        this.charsets[g] = charset;
        if (this.glevel === g) {
            this.charset = charset;
        }
    };
    Terminal.prototype._keyUp = function (ev) {
        this.updateCursorStyle(ev);
    };
    Terminal.prototype._keyPress = function (ev) {
        var key;
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return false;
        }
        this.cancel(ev);
        if (ev.charCode) {
            key = ev.charCode;
        }
        else if (ev.which === null || ev.which === undefined) {
            key = ev.keyCode;
        }
        else if (ev.which !== 0 && ev.charCode !== 0) {
            key = ev.which;
        }
        else {
            return false;
        }
        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {
            return false;
        }
        key = String.fromCharCode(key);
        this.emit('keypress', key, ev);
        this._onKey.fire({ key: key, domEvent: ev });
        this.showCursor();
        this.handler(key);
        return true;
    };
    Terminal.prototype.bell = function () {
        var _this = this;
        this.emit('bell');
        if (this._soundBell()) {
            this.soundManager.playBellSound();
        }
        if (this._visualBell()) {
            this.element.classList.add('visual-bell-active');
            clearTimeout(this._visualBellTimer);
            this._visualBellTimer = window.setTimeout(function () {
                _this.element.classList.remove('visual-bell-active');
            }, 200);
        }
    };
    Terminal.prototype.log = function (text, data) {
        if (!this.options.debug)
            return;
        if (!this._context.console || !this._context.console.log)
            return;
        this._context.console.log(text, data);
    };
    Terminal.prototype.error = function (text, data) {
        if (!this.options.debug)
            return;
        if (!this._context.console || !this._context.console.error)
            return;
        this._context.console.error(text, data);
    };
    Terminal.prototype.resize = function (x, y) {
        if (isNaN(x) || isNaN(y)) {
            return;
        }
        if (x === this.cols && y === this.rows) {
            if (this.charMeasure && (!this.charMeasure.width || !this.charMeasure.height)) {
                this.charMeasure.measure(this.options);
            }
            return;
        }
        if (x < MINIMUM_COLS)
            x = MINIMUM_COLS;
        if (y < MINIMUM_ROWS)
            y = MINIMUM_ROWS;
        this.buffers.resize(x, y);
        this.cols = x;
        this.rows = y;
        this.buffers.setupTabStops(this.cols);
        if (this.charMeasure) {
            this.charMeasure.measure(this.options);
        }
        this.refresh(0, this.rows - 1);
        this._onResize.fire({ cols: x, rows: y });
    };
    Terminal.prototype.updateRange = function (y) {
        if (y < this._refreshStart)
            this._refreshStart = y;
        if (y > this._refreshEnd)
            this._refreshEnd = y;
    };
    Terminal.prototype.maxRange = function () {
        this._refreshStart = 0;
        this._refreshEnd = this.rows - 1;
    };
    Terminal.prototype.clear = function () {
        if (this.buffer.ybase === 0 && this.buffer.y === 0) {
            return;
        }
        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));
        this.buffer.lines.length = 1;
        this.buffer.ydisp = 0;
        this.buffer.ybase = 0;
        this.buffer.y = 0;
        for (var i = 1; i < this.rows; i++) {
            this.buffer.lines.push(this.buffer.getBlankLine(Buffer_1.DEFAULT_ATTR_DATA));
        }
        this.refresh(0, this.rows - 1);
        this._onScroll.fire(this.buffer.ydisp);
    };
    Terminal.prototype.is = function (term) {
        return (this.options.termName + '').indexOf(term) === 0;
    };
    Terminal.prototype.handler = function (data) {
        if (this.options.disableStdin) {
            return;
        }
        if (this.selectionManager && this.selectionManager.hasSelection) {
            this.selectionManager.clearSelection();
        }
        if (this.buffer.ybase !== this.buffer.ydisp) {
            this.scrollToBottom();
        }
        this._onData.fire(data);
    };
    Terminal.prototype.handleTitle = function (title) {
        this._onTitleChange.fire(title);
    };
    Terminal.prototype.index = function () {
        this.buffer.y++;
        if (this.buffer.y > this.buffer.scrollBottom) {
            this.buffer.y--;
            this.scroll();
        }
        if (this.buffer.x >= this.cols) {
            this.buffer.x--;
        }
    };
    Terminal.prototype.reverseIndex = function () {
        if (this.buffer.y === this.buffer.scrollTop) {
            var scrollRegionHeight = this.buffer.scrollBottom - this.buffer.scrollTop;
            this.buffer.lines.shiftElements(this.buffer.y + this.buffer.ybase, scrollRegionHeight, 1);
            this.buffer.lines.set(this.buffer.y + this.buffer.ybase, this.buffer.getBlankLine(this.eraseAttrData()));
            this.updateRange(this.buffer.scrollTop);
            this.updateRange(this.buffer.scrollBottom);
        }
        else {
            this.buffer.y--;
        }
    };
    Terminal.prototype.reset = function () {
        this.options.rows = this.rows;
        this.options.cols = this.cols;
        var customKeyEventHandler = this._customKeyEventHandler;
        var inputHandler = this._inputHandler;
        var cursorState = this.cursorState;
        this._setup();
        this._customKeyEventHandler = customKeyEventHandler;
        this._inputHandler = inputHandler;
        this.cursorState = cursorState;
        this.refresh(0, this.rows - 1);
        if (this.viewport) {
            this.viewport.syncScrollArea();
        }
    };
    Terminal.prototype.tabSet = function () {
        this.buffer.tabs[this.buffer.x] = true;
    };
    Terminal.prototype.cancel = function (ev, force) {
        if (!this.options.cancelEvents && !force) {
            return;
        }
        ev.preventDefault();
        ev.stopPropagation();
        return false;
    };
    Terminal.prototype._visualBell = function () {
        return false;
    };
    Terminal.prototype._soundBell = function () {
        return this.options.bellStyle === 'sound';
    };
    return Terminal;
}(EventEmitter_1.EventEmitter));
exports.Terminal = Terminal;
function wasModifierKeyOnlyEvent(ev) {
    return ev.keyCode === 16 ||
        ev.keyCode === 17 ||
        ev.keyCode === 18;
}


/***/ }),

/***/ "./lib/Viewport.js":
/*!*************************!*\
  !*** ./lib/Viewport.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! ./common/Lifecycle */ "./lib/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! ./ui/Lifecycle */ "./lib/ui/Lifecycle.js");
var FALLBACK_SCROLL_BAR_WIDTH = 15;
var Viewport = (function (_super) {
    __extends(Viewport, _super);
    function Viewport(_terminal, _viewportElement, _scrollArea, _charMeasure) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._viewportElement = _viewportElement;
        _this._scrollArea = _scrollArea;
        _this._charMeasure = _charMeasure;
        _this.scrollBarWidth = 0;
        _this._currentRowHeight = 0;
        _this._lastRecordedBufferLength = 0;
        _this._lastRecordedViewportHeight = 0;
        _this._lastRecordedBufferHeight = 0;
        _this._lastScrollTop = 0;
        _this._wheelPartialScroll = 0;
        _this._refreshAnimationFrame = null;
        _this._ignoreNextScrollEvent = false;
        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));
        setTimeout(function () { return _this.syncScrollArea(); }, 0);
        return _this;
    }
    Viewport.prototype.onThemeChanged = function (colors) {
        this._viewportElement.style.backgroundColor = colors.background.css;
    };
    Viewport.prototype._refresh = function () {
        var _this = this;
        if (this._refreshAnimationFrame === null) {
            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });
        }
    };
    Viewport.prototype._innerRefresh = function () {
        if (this._charMeasure.height > 0) {
            this._currentRowHeight = this._terminal.renderer.dimensions.scaledCellHeight / window.devicePixelRatio;
            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;
            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._terminal.renderer.dimensions.canvasHeight);
            if (this._lastRecordedBufferHeight !== newBufferHeight) {
                this._lastRecordedBufferHeight = newBufferHeight;
                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';
            }
        }
        var scrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;
        if (this._viewportElement.scrollTop !== scrollTop) {
            this._ignoreNextScrollEvent = true;
            this._viewportElement.scrollTop = scrollTop;
        }
        this._refreshAnimationFrame = null;
    };
    Viewport.prototype.syncScrollArea = function () {
        if (this._lastRecordedBufferLength !== this._terminal.buffer.lines.length) {
            this._lastRecordedBufferLength = this._terminal.buffer.lines.length;
            this._refresh();
            return;
        }
        if (this._lastRecordedViewportHeight !== this._terminal.renderer.dimensions.canvasHeight) {
            this._refresh();
            return;
        }
        var newScrollTop = this._terminal.buffer.ydisp * this._currentRowHeight;
        if (this._lastScrollTop !== newScrollTop) {
            this._refresh();
            return;
        }
        if (this._lastScrollTop !== this._viewportElement.scrollTop) {
            this._refresh();
            return;
        }
        if (this._terminal.renderer.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {
            this._refresh();
            return;
        }
    };
    Viewport.prototype._onScroll = function (ev) {
        this._lastScrollTop = this._viewportElement.scrollTop;
        if (!this._viewportElement.offsetParent) {
            return;
        }
        if (this._ignoreNextScrollEvent) {
            this._ignoreNextScrollEvent = false;
            return;
        }
        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);
        var diff = newRow - this._terminal.buffer.ydisp;
        this._terminal.scrollLines(diff, true);
    };
    Viewport.prototype.onWheel = function (ev) {
        var amount = this._getPixelsScrolled(ev);
        if (amount === 0) {
            return;
        }
        this._viewportElement.scrollTop += amount;
        ev.preventDefault();
    };
    Viewport.prototype._getPixelsScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = ev.deltaY;
        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {
            amount *= this._currentRowHeight;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._currentRowHeight * this._terminal.rows;
        }
        return amount;
    };
    Viewport.prototype.getLinesScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = ev.deltaY;
        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {
            amount /= this._currentRowHeight + 0.0;
            this._wheelPartialScroll += amount;
            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);
            this._wheelPartialScroll %= 1;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._terminal.rows;
        }
        return amount;
    };
    Viewport.prototype.onTouchStart = function (ev) {
        this._lastTouchY = ev.touches[0].pageY;
    };
    Viewport.prototype.onTouchMove = function (ev) {
        var deltaY = this._lastTouchY - ev.touches[0].pageY;
        this._lastTouchY = ev.touches[0].pageY;
        if (deltaY === 0) {
            return;
        }
        this._viewportElement.scrollTop += deltaY;
        ev.preventDefault();
    };
    return Viewport;
}(Lifecycle_1.Disposable));
exports.Viewport = Viewport;


/***/ }),

/***/ "./lib/WindowsMode.js":
/*!****************************!*\
  !*** ./lib/WindowsMode.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! ./Buffer */ "./lib/Buffer.js");
function applyWindowsMode(terminal) {
    return terminal.onLineFeed(function () {
        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);
        var lastChar = line.get(terminal.cols - 1);
        if (lastChar[Buffer_1.CHAR_DATA_CODE_INDEX] !== Buffer_1.NULL_CELL_CODE && lastChar[Buffer_1.CHAR_DATA_CODE_INDEX] !== Buffer_1.WHITESPACE_CELL_CODE) {
            var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);
            nextLine.isWrapped = true;
        }
    });
}
exports.applyWindowsMode = applyWindowsMode;


/***/ }),

/***/ "./lib/addons/attach/attach.js":
/*!*************************************!*\
  !*** ./lib/addons/attach/attach.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function attach(term, socket, bidirectional, buffered) {
    var addonTerminal = term;
    bidirectional = (typeof bidirectional === 'undefined') ? true : bidirectional;
    addonTerminal.__socket = socket;
    addonTerminal.__flushBuffer = function () {
        addonTerminal.write(addonTerminal.__attachSocketBuffer);
        addonTerminal.__attachSocketBuffer = null;
    };
    addonTerminal.__pushToBuffer = function (data) {
        if (addonTerminal.__attachSocketBuffer) {
            addonTerminal.__attachSocketBuffer += data;
        }
        else {
            addonTerminal.__attachSocketBuffer = data;
            setTimeout(addonTerminal.__flushBuffer, 10);
        }
    };
    var myTextDecoder;
    addonTerminal.__getMessage = function (ev) {
        var str;
        if (typeof ev.data === 'object') {
            if (!myTextDecoder) {
                myTextDecoder = new TextDecoder();
            }
            if (ev.data instanceof ArrayBuffer) {
                str = myTextDecoder.decode(ev.data);
                displayData(str);
            }
            else {
                var fileReader_1 = new FileReader();
                fileReader_1.addEventListener('load', function () {
                    str = myTextDecoder.decode(fileReader_1.result);
                    displayData(str);
                });
                fileReader_1.readAsArrayBuffer(ev.data);
            }
        }
        else if (typeof ev.data === 'string') {
            displayData(ev.data);
        }
        else {
            throw Error("Cannot handle \"" + typeof ev.data + "\" websocket message.");
        }
    };
    function displayData(str, data) {
        if (buffered) {
            addonTerminal.__pushToBuffer(str || data);
        }
        else {
            addonTerminal.write(str || data);
        }
    }
    addonTerminal.__sendData = function (data) {
        if (socket.readyState !== 1) {
            return;
        }
        socket.send(data);
    };
    addonTerminal._core.register(addSocketListener(socket, 'message', addonTerminal.__getMessage));
    if (bidirectional) {
        addonTerminal.__dataListener = addonTerminal.onData(addonTerminal.__sendData);
        addonTerminal._core.register(addonTerminal.__dataListener);
    }
    addonTerminal._core.register(addSocketListener(socket, 'close', function () { return detach(addonTerminal, socket); }));
    addonTerminal._core.register(addSocketListener(socket, 'error', function () { return detach(addonTerminal, socket); }));
}
exports.attach = attach;
function addSocketListener(socket, type, handler) {
    socket.addEventListener(type, handler);
    return {
        dispose: function () {
            if (!handler) {
                return;
            }
            socket.removeEventListener(type, handler);
            handler = null;
        }
    };
}
function detach(term, socket) {
    var addonTerminal = term;
    addonTerminal.__dataListener.dispose();
    addonTerminal.__dataListener = undefined;
    socket = (typeof socket === 'undefined') ? addonTerminal.__socket : socket;
    if (socket) {
        socket.removeEventListener('message', addonTerminal.__getMessage);
    }
    delete addonTerminal.__socket;
}
exports.detach = detach;
function apply(terminalConstructor) {
    terminalConstructor.prototype.attach = function (socket, bidirectional, buffered) {
        attach(this, socket, bidirectional, buffered);
    };
    terminalConstructor.prototype.detach = function (socket) {
        detach(this, socket);
    };
}
exports.apply = apply;


/***/ }),

/***/ "./lib/addons/fit/fit.js":
/*!*******************************!*\
  !*** ./lib/addons/fit/fit.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function proposeGeometry(term) {
    if (!term.element.parentElement) {
        return null;
    }
    var parentElementStyle = window.getComputedStyle(term.element.parentElement);
    var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));
    var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));
    var elementStyle = window.getComputedStyle(term.element);
    var elementPadding = {
        top: parseInt(elementStyle.getPropertyValue('padding-top')),
        bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),
        right: parseInt(elementStyle.getPropertyValue('padding-right')),
        left: parseInt(elementStyle.getPropertyValue('padding-left'))
    };
    var elementPaddingVer = elementPadding.top + elementPadding.bottom;
    var elementPaddingHor = elementPadding.right + elementPadding.left;
    var availableHeight = parentElementHeight - elementPaddingVer;
    var availableWidth = parentElementWidth - elementPaddingHor - term._core.viewport.scrollBarWidth;
    var geometry = {
        cols: Math.floor(availableWidth / term._core.renderer.dimensions.actualCellWidth),
        rows: Math.floor(availableHeight / term._core.renderer.dimensions.actualCellHeight)
    };
    return geometry;
}
exports.proposeGeometry = proposeGeometry;
function fit(term) {
    var geometry = proposeGeometry(term);
    if (geometry) {
        if (term.rows !== geometry.rows || term.cols !== geometry.cols) {
            term._core.renderer.clear();
            term.resize(geometry.cols, geometry.rows);
        }
    }
}
exports.fit = fit;
function apply(terminalConstructor) {
    terminalConstructor.prototype.proposeGeometry = function () {
        return proposeGeometry(this);
    };
    terminalConstructor.prototype.fit = function () {
        fit(this);
    };
}
exports.apply = apply;


/***/ }),

/***/ "./lib/addons/fullscreen/fullscreen.js":
/*!*********************************************!*\
  !*** ./lib/addons/fullscreen/fullscreen.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function toggleFullScreen(term, fullscreen) {
    var fn;
    if (typeof fullscreen === 'undefined') {
        fn = (term.element.classList.contains('fullscreen')) ?
            term.element.classList.remove : term.element.classList.add;
    }
    else if (!fullscreen) {
        fn = term.element.classList.remove;
    }
    else {
        fn = term.element.classList.add;
    }
    fn = fn.bind(term.element.classList);
    fn('fullscreen');
}
exports.toggleFullScreen = toggleFullScreen;
function apply(terminalConstructor) {
    terminalConstructor.prototype.toggleFullScreen = function (fullscreen) {
        toggleFullScreen(this, fullscreen);
    };
}
exports.apply = apply;


/***/ }),

/***/ "./lib/addons/search/SearchHelper.js":
/*!*******************************************!*\
  !*** ./lib/addons/search/SearchHelper.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var NON_WORD_CHARACTERS = ' ~!@#$%^&*()+`-=[]{}|\;:"\',./<>?';
var LINES_CACHE_TIME_TO_LIVE = 15 * 1000;
var SearchHelper = (function () {
    function SearchHelper(_terminal) {
        this._terminal = _terminal;
        this._linesCache = null;
        this._linesCacheTimeoutId = 0;
        this._destroyLinesCache = this._destroyLinesCache.bind(this);
    }
    SearchHelper.prototype.findNext = function (term, searchOptions) {
        var selectionManager = this._terminal._core.selectionManager;
        var incremental = searchOptions.incremental;
        var result;
        if (!term || term.length === 0) {
            selectionManager.clearSelection();
            return false;
        }
        var startCol = 0;
        var startRow = this._terminal._core.buffer.ydisp;
        if (selectionManager.selectionEnd) {
            if (this._terminal.getSelection().length !== 0) {
                startRow = incremental ? selectionManager.selectionStart[1] : selectionManager.selectionEnd[1];
                startCol = incremental ? selectionManager.selectionStart[0] : selectionManager.selectionEnd[0];
            }
        }
        this._initLinesCache();
        var findingRow = startRow;
        var cumulativeCols = startCol;
        while (this._terminal._core.buffer.lines.get(findingRow).isWrapped) {
            findingRow--;
            cumulativeCols += this._terminal.cols;
        }
        result = this._findInLine(term, findingRow, cumulativeCols, searchOptions);
        if (!result) {
            for (var y = startRow + 1; y < this._terminal._core.buffer.ybase + this._terminal.rows; y++) {
                result = this._findInLine(term, y, 0, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        if (!result) {
            for (var y = 0; y < findingRow; y++) {
                result = this._findInLine(term, y, 0, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        return this._selectResult(result);
    };
    SearchHelper.prototype.findPrevious = function (term, searchOptions) {
        var selectionManager = this._terminal._core.selectionManager;
        var result;
        if (!term || term.length === 0) {
            selectionManager.clearSelection();
            return false;
        }
        var isReverseSearch = true;
        var startRow = this._terminal._core.buffer.ydisp + this._terminal.rows - 1;
        var startCol = this._terminal.cols;
        if (selectionManager.selectionStart) {
            if (this._terminal.getSelection().length !== 0) {
                startRow = selectionManager.selectionStart[1];
                startCol = selectionManager.selectionStart[0];
            }
        }
        this._initLinesCache();
        result = this._findInLine(term, startRow, startCol, searchOptions, isReverseSearch);
        if (!result) {
            var cumulativeCols = this._terminal.cols;
            if (this._terminal._core.buffer.lines.get(startRow).isWrapped) {
                cumulativeCols += startCol;
            }
            for (var y = startRow - 1; y >= 0; y--) {
                result = this._findInLine(term, y, cumulativeCols, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
                if (this._terminal._core.buffer.lines.get(y).isWrapped) {
                    cumulativeCols += this._terminal.cols;
                }
                else {
                    cumulativeCols = this._terminal.cols;
                }
            }
        }
        if (!result) {
            var searchFrom = this._terminal._core.buffer.ybase + this._terminal.rows - 1;
            var cumulativeCols = this._terminal.cols;
            for (var y = searchFrom; y >= startRow; y--) {
                result = this._findInLine(term, y, cumulativeCols, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
                if (this._terminal._core.buffer.lines.get(y).isWrapped) {
                    cumulativeCols += this._terminal.cols;
                }
                else {
                    cumulativeCols = this._terminal.cols;
                }
            }
        }
        return this._selectResult(result);
    };
    SearchHelper.prototype._initLinesCache = function () {
        var _this = this;
        if (!this._linesCache) {
            this._linesCache = new Array(this._terminal._core.buffer.length);
            this._cursorMoveListener = this._terminal.onCursorMove(function () { return _this._destroyLinesCache(); });
            this._resizeListener = this._terminal.onResize(function () { return _this._destroyLinesCache(); });
        }
        window.clearTimeout(this._linesCacheTimeoutId);
        this._linesCacheTimeoutId = window.setTimeout(function () { return _this._destroyLinesCache(); }, LINES_CACHE_TIME_TO_LIVE);
    };
    SearchHelper.prototype._destroyLinesCache = function () {
        this._linesCache = null;
        if (this._cursorMoveListener) {
            this._cursorMoveListener.dispose();
            this._cursorMoveListener = undefined;
        }
        if (this._resizeListener) {
            this._resizeListener.dispose();
            this._resizeListener = undefined;
        }
        if (this._linesCacheTimeoutId) {
            window.clearTimeout(this._linesCacheTimeoutId);
            this._linesCacheTimeoutId = 0;
        }
    };
    SearchHelper.prototype._isWholeWord = function (searchIndex, line, term) {
        return (((searchIndex === 0) || (NON_WORD_CHARACTERS.indexOf(line[searchIndex - 1]) !== -1)) &&
            (((searchIndex + term.length) === line.length) || (NON_WORD_CHARACTERS.indexOf(line[searchIndex + term.length]) !== -1)));
    };
    SearchHelper.prototype._findInLine = function (term, row, col, searchOptions, isReverseSearch) {
        if (searchOptions === void 0) { searchOptions = {}; }
        if (isReverseSearch === void 0) { isReverseSearch = false; }
        if (this._terminal._core.buffer.lines.get(row).isWrapped) {
            return;
        }
        var stringLine = this._linesCache ? this._linesCache[row] : void 0;
        if (stringLine === void 0) {
            stringLine = this.translateBufferLineToStringWithWrap(row, true);
            if (this._linesCache) {
                this._linesCache[row] = stringLine;
            }
        }
        var searchTerm = searchOptions.caseSensitive ? term : term.toLowerCase();
        var searchStringLine = searchOptions.caseSensitive ? stringLine : stringLine.toLowerCase();
        var resultIndex = -1;
        if (searchOptions.regex) {
            var searchRegex = RegExp(searchTerm, 'g');
            var foundTerm = void 0;
            if (isReverseSearch) {
                while (foundTerm = searchRegex.exec(searchStringLine.slice(0, col))) {
                    resultIndex = searchRegex.lastIndex - foundTerm[0].length;
                    term = foundTerm[0];
                    searchRegex.lastIndex -= (term.length - 1);
                }
            }
            else {
                foundTerm = searchRegex.exec(searchStringLine.slice(col));
                if (foundTerm && foundTerm[0].length > 0) {
                    resultIndex = col + (searchRegex.lastIndex - foundTerm[0].length);
                    term = foundTerm[0];
                }
            }
        }
        else {
            if (isReverseSearch) {
                if (col - searchTerm.length >= 0) {
                    resultIndex = searchStringLine.lastIndexOf(searchTerm, col - searchTerm.length);
                }
            }
            else {
                resultIndex = searchStringLine.indexOf(searchTerm, col);
            }
        }
        if (resultIndex >= 0) {
            if (resultIndex >= this._terminal.cols) {
                row += Math.floor(resultIndex / this._terminal.cols);
                resultIndex = resultIndex % this._terminal.cols;
            }
            if (searchOptions.wholeWord && !this._isWholeWord(resultIndex, searchStringLine, term)) {
                return;
            }
            var line = this._terminal._core.buffer.lines.get(row);
            for (var i = 0; i < resultIndex; i++) {
                var charData = line.get(i);
                var char = charData[1];
                if (char.length > 1) {
                    resultIndex -= char.length - 1;
                }
                var charWidth = charData[2];
                if (charWidth === 0) {
                    resultIndex++;
                }
            }
            return {
                term: term,
                col: resultIndex,
                row: row
            };
        }
    };
    SearchHelper.prototype.translateBufferLineToStringWithWrap = function (lineIndex, trimRight) {
        var lineString = '';
        var lineWrapsToNext;
        do {
            var nextLine = this._terminal._core.buffer.lines.get(lineIndex + 1);
            lineWrapsToNext = nextLine ? nextLine.isWrapped : false;
            lineString += this._terminal._core.buffer.translateBufferLineToString(lineIndex, !lineWrapsToNext && trimRight).substring(0, this._terminal.cols);
            lineIndex++;
        } while (lineWrapsToNext);
        return lineString;
    };
    SearchHelper.prototype._selectResult = function (result) {
        if (!result) {
            this._terminal.clearSelection();
            return false;
        }
        this._terminal._core.selectionManager.setSelection(result.col, result.row, result.term.length);
        this._terminal.scrollLines(result.row - this._terminal._core.buffer.ydisp);
        return true;
    };
    return SearchHelper;
}());
exports.SearchHelper = SearchHelper;


/***/ }),

/***/ "./lib/addons/search/search.js":
/*!*************************************!*\
  !*** ./lib/addons/search/search.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SearchHelper_1 = __webpack_require__(/*! ./SearchHelper */ "./lib/addons/search/SearchHelper.js");
function findNext(terminal, term, searchOptions) {
    if (searchOptions === void 0) { searchOptions = {}; }
    var addonTerminal = terminal;
    if (!addonTerminal.__searchHelper) {
        addonTerminal.__searchHelper = new SearchHelper_1.SearchHelper(addonTerminal);
    }
    return addonTerminal.__searchHelper.findNext(term, searchOptions);
}
exports.findNext = findNext;
function findPrevious(terminal, term, searchOptions) {
    var addonTerminal = terminal;
    if (!addonTerminal.__searchHelper) {
        addonTerminal.__searchHelper = new SearchHelper_1.SearchHelper(addonTerminal);
    }
    return addonTerminal.__searchHelper.findPrevious(term, searchOptions);
}
exports.findPrevious = findPrevious;
function apply(terminalConstructor) {
    terminalConstructor.prototype.findNext = function (term, searchOptions) {
        return findNext(this, term, searchOptions);
    };
    terminalConstructor.prototype.findPrevious = function (term, searchOptions) {
        return findPrevious(this, term, searchOptions);
    };
}
exports.apply = apply;


/***/ }),

/***/ "./lib/addons/webLinks/webLinks.js":
/*!*****************************************!*\
  !*** ./lib/addons/webLinks/webLinks.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var protocolClause = '(https?:\\/\\/)';
var domainCharacterSet = '[\\da-z\\.-]+';
var negatedDomainCharacterSet = '[^\\da-z\\.-]+';
var domainBodyClause = '(' + domainCharacterSet + ')';
var tldClause = '([a-z\\.]{2,6})';
var ipClause = '((\\d{1,3}\\.){3}\\d{1,3})';
var localHostClause = '(localhost)';
var portClause = '(:\\d{1,5})';
var hostClause = '((' + domainBodyClause + '\\.' + tldClause + ')|' + ipClause + '|' + localHostClause + ')' + portClause + '?';
var pathCharacterSet = '(\\/[\\/\\w\\.\\-%~:]*)*([^:"\'\\s])';
var pathClause = '(' + pathCharacterSet + ')?';
var queryStringHashFragmentCharacterSet = '[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&\'*+,:;~\\=\\.\\-]*';
var queryStringClause = '(\\?' + queryStringHashFragmentCharacterSet + ')?';
var hashFragmentClause = '(#' + queryStringHashFragmentCharacterSet + ')?';
var negatedPathCharacterSet = '[^\\/\\w\\.\\-%]+';
var bodyClause = hostClause + pathClause + queryStringClause + hashFragmentClause;
var start = '(?:^|' + negatedDomainCharacterSet + ')(';
var end = ')($|' + negatedPathCharacterSet + ')';
var strictUrlRegex = new RegExp(start + protocolClause + bodyClause + end);
function handleLink(event, uri) {
    window.open(uri, '_blank');
}
function webLinksInit(term, handler, options) {
    if (handler === void 0) { handler = handleLink; }
    if (options === void 0) { options = {}; }
    options.matchIndex = 1;
    term.registerLinkMatcher(strictUrlRegex, handler, options);
}
exports.webLinksInit = webLinksInit;
function apply(terminalConstructor) {
    terminalConstructor.prototype.webLinksInit = function (handler, options) {
        webLinksInit(this, handler, options);
    };
}
exports.apply = apply;


/***/ }),

/***/ "./lib/common/CircularList.js":
/*!************************************!*\
  !*** ./lib/common/CircularList.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter2_1 = __webpack_require__(/*! ./EventEmitter2 */ "./lib/common/EventEmitter2.js");
var CircularList = (function () {
    function CircularList(_maxLength) {
        this._maxLength = _maxLength;
        this.onDeleteEmitter = new EventEmitter2_1.EventEmitter2();
        this.onInsertEmitter = new EventEmitter2_1.EventEmitter2();
        this.onTrimEmitter = new EventEmitter2_1.EventEmitter2();
        this._array = new Array(this._maxLength);
        this._startIndex = 0;
        this._length = 0;
    }
    Object.defineProperty(CircularList.prototype, "onDelete", {
        get: function () { return this.onDeleteEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onInsert", {
        get: function () { return this.onInsertEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onTrim", {
        get: function () { return this.onTrimEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "maxLength", {
        get: function () {
            return this._maxLength;
        },
        set: function (newMaxLength) {
            if (this._maxLength === newMaxLength) {
                return;
            }
            var newArray = new Array(newMaxLength);
            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {
                newArray[i] = this._array[this._getCyclicIndex(i)];
            }
            this._array = newArray;
            this._maxLength = newMaxLength;
            this._startIndex = 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "length", {
        get: function () {
            return this._length;
        },
        set: function (newLength) {
            if (newLength > this._length) {
                for (var i = this._length; i < newLength; i++) {
                    this._array[i] = undefined;
                }
            }
            this._length = newLength;
        },
        enumerable: true,
        configurable: true
    });
    CircularList.prototype.get = function (index) {
        return this._array[this._getCyclicIndex(index)];
    };
    CircularList.prototype.set = function (index, value) {
        this._array[this._getCyclicIndex(index)] = value;
    };
    CircularList.prototype.push = function (value) {
        this._array[this._getCyclicIndex(this._length)] = value;
        if (this._length === this._maxLength) {
            this._startIndex = ++this._startIndex % this._maxLength;
            this.onTrimEmitter.fire(1);
        }
        else {
            this._length++;
        }
    };
    CircularList.prototype.recycle = function () {
        if (this._length !== this._maxLength) {
            throw new Error('Can only recycle when the buffer is full');
        }
        this._startIndex = ++this._startIndex % this._maxLength;
        this.onTrimEmitter.fire(1);
        return this._array[this._getCyclicIndex(this._length - 1)];
    };
    Object.defineProperty(CircularList.prototype, "isFull", {
        get: function () {
            return this._length === this._maxLength;
        },
        enumerable: true,
        configurable: true
    });
    CircularList.prototype.pop = function () {
        return this._array[this._getCyclicIndex(this._length-- - 1)];
    };
    CircularList.prototype.splice = function (start, deleteCount) {
        var items = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            items[_i - 2] = arguments[_i];
        }
        if (deleteCount) {
            for (var i = start; i < this._length - deleteCount; i++) {
                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];
            }
            this._length -= deleteCount;
        }
        for (var i = this._length - 1; i >= start; i--) {
            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];
        }
        for (var i = 0; i < items.length; i++) {
            this._array[this._getCyclicIndex(start + i)] = items[i];
        }
        if (this._length + items.length > this._maxLength) {
            var countToTrim = (this._length + items.length) - this._maxLength;
            this._startIndex += countToTrim;
            this._length = this._maxLength;
            this.onTrimEmitter.fire(countToTrim);
        }
        else {
            this._length += items.length;
        }
    };
    CircularList.prototype.trimStart = function (count) {
        if (count > this._length) {
            count = this._length;
        }
        this._startIndex += count;
        this._length -= count;
        this.onTrimEmitter.fire(count);
    };
    CircularList.prototype.shiftElements = function (start, count, offset) {
        if (count <= 0) {
            return;
        }
        if (start < 0 || start >= this._length) {
            throw new Error('start argument out of range');
        }
        if (start + offset < 0) {
            throw new Error('Cannot shift elements in list beyond index 0');
        }
        if (offset > 0) {
            for (var i = count - 1; i >= 0; i--) {
                this.set(start + i + offset, this.get(start + i));
            }
            var expandListBy = (start + count + offset) - this._length;
            if (expandListBy > 0) {
                this._length += expandListBy;
                while (this._length > this._maxLength) {
                    this._length--;
                    this._startIndex++;
                    this.onTrimEmitter.fire(1);
                }
            }
        }
        else {
            for (var i = 0; i < count; i++) {
                this.set(start + i + offset, this.get(start + i));
            }
        }
    };
    CircularList.prototype._getCyclicIndex = function (index) {
        return (this._startIndex + index) % this._maxLength;
    };
    return CircularList;
}());
exports.CircularList = CircularList;


/***/ }),

/***/ "./lib/common/Clone.js":
/*!*****************************!*\
  !*** ./lib/common/Clone.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function clone(val, depth) {
    if (depth === void 0) { depth = 5; }
    if (typeof val !== 'object') {
        return val;
    }
    if (val === null) {
        return null;
    }
    var clonedObject = Array.isArray(val) ? [] : {};
    for (var key in val) {
        clonedObject[key] = depth <= 1 ? val[key] : clone(val[key], depth - 1);
    }
    return clonedObject;
}
exports.clone = clone;


/***/ }),

/***/ "./lib/common/EventEmitter.js":
/*!************************************!*\
  !*** ./lib/common/EventEmitter.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! ./Lifecycle */ "./lib/common/Lifecycle.js");
var EventEmitter = (function (_super) {
    __extends(EventEmitter, _super);
    function EventEmitter() {
        var _this = _super.call(this) || this;
        _this._events = _this._events || {};
        return _this;
    }
    EventEmitter.prototype.on = function (type, listener) {
        this._events[type] = this._events[type] || [];
        this._events[type].push(listener);
    };
    EventEmitter.prototype.addDisposableListener = function (type, handler) {
        var _this = this;
        this.on(type, handler);
        var disposed = false;
        return {
            dispose: function () {
                if (disposed) {
                    return;
                }
                _this.off(type, handler);
                disposed = true;
            }
        };
    };
    EventEmitter.prototype.off = function (type, listener) {
        if (!this._events[type]) {
            return;
        }
        var obj = this._events[type];
        var i = obj.length;
        while (i--) {
            if (obj[i] === listener) {
                obj.splice(i, 1);
                return;
            }
        }
    };
    EventEmitter.prototype.removeAllListeners = function (type) {
        if (this._events[type]) {
            delete this._events[type];
        }
    };
    EventEmitter.prototype.emit = function (type) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        if (!this._events[type]) {
            return;
        }
        var obj = this._events[type];
        for (var i = 0; i < obj.length; i++) {
            obj[i].apply(this, args);
        }
    };
    EventEmitter.prototype.emitMayRemoveListeners = function (type) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        if (!this._events[type]) {
            return;
        }
        var obj = this._events[type];
        var length = obj.length;
        for (var i = 0; i < obj.length; i++) {
            obj[i].apply(this, args);
            i -= length - obj.length;
            length = obj.length;
        }
    };
    EventEmitter.prototype.listeners = function (type) {
        return this._events[type] || [];
    };
    EventEmitter.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._events = {};
    };
    return EventEmitter;
}(Lifecycle_1.Disposable));
exports.EventEmitter = EventEmitter;


/***/ }),

/***/ "./lib/common/EventEmitter2.js":
/*!*************************************!*\
  !*** ./lib/common/EventEmitter2.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter2 = (function () {
    function EventEmitter2() {
        this._listeners = [];
    }
    Object.defineProperty(EventEmitter2.prototype, "event", {
        get: function () {
            var _this = this;
            if (!this._event) {
                this._event = function (listener) {
                    _this._listeners.push(listener);
                    var disposable = {
                        dispose: function () {
                            for (var i = 0; i < _this._listeners.length; i++) {
                                if (_this._listeners[i] === listener) {
                                    _this._listeners.splice(i, 1);
                                    return;
                                }
                            }
                        }
                    };
                    return disposable;
                };
            }
            return this._event;
        },
        enumerable: true,
        configurable: true
    });
    EventEmitter2.prototype.fire = function (data) {
        var queue = [];
        for (var i = 0; i < this._listeners.length; i++) {
            queue.push(this._listeners[i]);
        }
        for (var i = 0; i < queue.length; i++) {
            queue[i].call(undefined, data);
        }
    };
    return EventEmitter2;
}());
exports.EventEmitter2 = EventEmitter2;


/***/ }),

/***/ "./lib/common/Lifecycle.js":
/*!*********************************!*\
  !*** ./lib/common/Lifecycle.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Disposable = (function () {
    function Disposable() {
        this._disposables = [];
        this._isDisposed = false;
    }
    Disposable.prototype.dispose = function () {
        this._isDisposed = true;
        this._disposables.forEach(function (d) { return d.dispose(); });
        this._disposables.length = 0;
    };
    Disposable.prototype.register = function (d) {
        this._disposables.push(d);
    };
    Disposable.prototype.unregister = function (d) {
        var index = this._disposables.indexOf(d);
        if (index !== -1) {
            this._disposables.splice(index, 1);
        }
    };
    return Disposable;
}());
exports.Disposable = Disposable;


/***/ }),

/***/ "./lib/common/Platform.js":
/*!********************************!*\
  !*** ./lib/common/Platform.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var isNode = (typeof navigator === 'undefined') ? true : false;
var userAgent = (isNode) ? 'node' : navigator.userAgent;
var platform = (isNode) ? 'node' : navigator.platform;
exports.isFirefox = !!~userAgent.indexOf('Firefox');
exports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);
exports.isMSIE = !!~userAgent.indexOf('MSIE') || !!~userAgent.indexOf('Trident');
exports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);
exports.isIpad = platform === 'iPad';
exports.isIphone = platform === 'iPhone';
exports.isMSWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);
exports.isLinux = platform.indexOf('Linux') >= 0;
function contains(arr, el) {
    return arr.indexOf(el) >= 0;
}


/***/ }),

/***/ "./lib/common/TypedArrayUtils.js":
/*!***************************************!*\
  !*** ./lib/common/TypedArrayUtils.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function fill(array, value, start, end) {
    if (array.fill) {
        return array.fill(value, start, end);
    }
    return fillFallback(array, value, start, end);
}
exports.fill = fill;
function fillFallback(array, value, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start >= array.length) {
        return array;
    }
    start = (array.length + start) % array.length;
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    for (var i = start; i < end; ++i) {
        array[i] = value;
    }
    return array;
}
exports.fillFallback = fillFallback;
function concat(a, b) {
    var result = new a.constructor(a.length + b.length);
    result.set(a);
    result.set(b, a.length);
    return result;
}
exports.concat = concat;


/***/ }),

/***/ "./lib/common/data/EscapeSequences.js":
/*!********************************************!*\
  !*** ./lib/common/data/EscapeSequences.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var C0;
(function (C0) {
    C0.NUL = '\x00';
    C0.SOH = '\x01';
    C0.STX = '\x02';
    C0.ETX = '\x03';
    C0.EOT = '\x04';
    C0.ENQ = '\x05';
    C0.ACK = '\x06';
    C0.BEL = '\x07';
    C0.BS = '\x08';
    C0.HT = '\x09';
    C0.LF = '\x0a';
    C0.VT = '\x0b';
    C0.FF = '\x0c';
    C0.CR = '\x0d';
    C0.SO = '\x0e';
    C0.SI = '\x0f';
    C0.DLE = '\x10';
    C0.DC1 = '\x11';
    C0.DC2 = '\x12';
    C0.DC3 = '\x13';
    C0.DC4 = '\x14';
    C0.NAK = '\x15';
    C0.SYN = '\x16';
    C0.ETB = '\x17';
    C0.CAN = '\x18';
    C0.EM = '\x19';
    C0.SUB = '\x1a';
    C0.ESC = '\x1b';
    C0.FS = '\x1c';
    C0.GS = '\x1d';
    C0.RS = '\x1e';
    C0.US = '\x1f';
    C0.SP = '\x20';
    C0.DEL = '\x7f';
})(C0 = exports.C0 || (exports.C0 = {}));
var C1;
(function (C1) {
    C1.PAD = '\x80';
    C1.HOP = '\x81';
    C1.BPH = '\x82';
    C1.NBH = '\x83';
    C1.IND = '\x84';
    C1.NEL = '\x85';
    C1.SSA = '\x86';
    C1.ESA = '\x87';
    C1.HTS = '\x88';
    C1.HTJ = '\x89';
    C1.VTS = '\x8a';
    C1.PLD = '\x8b';
    C1.PLU = '\x8c';
    C1.RI = '\x8d';
    C1.SS2 = '\x8e';
    C1.SS3 = '\x8f';
    C1.DCS = '\x90';
    C1.PU1 = '\x91';
    C1.PU2 = '\x92';
    C1.STS = '\x93';
    C1.CCH = '\x94';
    C1.MW = '\x95';
    C1.SPA = '\x96';
    C1.EPA = '\x97';
    C1.SOS = '\x98';
    C1.SGCI = '\x99';
    C1.SCI = '\x9a';
    C1.CSI = '\x9b';
    C1.ST = '\x9c';
    C1.OSC = '\x9d';
    C1.PM = '\x9e';
    C1.APC = '\x9f';
})(C1 = exports.C1 || (exports.C1 = {}));


/***/ }),

/***/ "./lib/core/data/Charsets.js":
/*!***********************************!*\
  !*** ./lib/core/data/Charsets.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CHARSETS = {};
exports.DEFAULT_CHARSET = exports.CHARSETS['B'];
exports.CHARSETS['0'] = {
    '`': '\u25c6',
    'a': '\u2592',
    'b': '\u0009',
    'c': '\u000c',
    'd': '\u000d',
    'e': '\u000a',
    'f': '\u00b0',
    'g': '\u00b1',
    'h': '\u2424',
    'i': '\u000b',
    'j': '\u2518',
    'k': '\u2510',
    'l': '\u250c',
    'm': '\u2514',
    'n': '\u253c',
    'o': '\u23ba',
    'p': '\u23bb',
    'q': '\u2500',
    'r': '\u23bc',
    's': '\u23bd',
    't': '\u251c',
    'u': '\u2524',
    'v': '\u2534',
    'w': '\u252c',
    'x': '\u2502',
    'y': '\u2264',
    'z': '\u2265',
    '{': '\u03c0',
    '|': '\u2260',
    '}': '\u00a3',
    '~': '\u00b7'
};
exports.CHARSETS['A'] = {
    '#': ''
};
exports.CHARSETS['B'] = null;
exports.CHARSETS['4'] = {
    '#': '',
    '@': '',
    '[': 'ij',
    '\\': '',
    ']': '|',
    '{': '',
    '|': 'f',
    '}': '',
    '~': ''
};
exports.CHARSETS['C'] =
    exports.CHARSETS['5'] = {
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['R'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['Q'] = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['K'] = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['Y'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['E'] =
    exports.CHARSETS['6'] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['Z'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': ''
};
exports.CHARSETS['H'] =
    exports.CHARSETS['7'] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['='] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '_': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};


/***/ }),

/***/ "./lib/core/input/Keyboard.js":
/*!************************************!*\
  !*** ./lib/core/input/Keyboard.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! ../../common/data/EscapeSequences */ "./lib/common/data/EscapeSequences.js");
var KEYCODE_KEY_MAPPINGS = {
    48: ['0', ')'],
    49: ['1', '!'],
    50: ['2', '@'],
    51: ['3', '#'],
    52: ['4', '$'],
    53: ['5', '%'],
    54: ['6', '^'],
    55: ['7', '&'],
    56: ['8', '*'],
    57: ['9', '('],
    186: [';', ':'],
    187: ['=', '+'],
    188: [',', '<'],
    189: ['-', '_'],
    190: ['.', '>'],
    191: ['/', '?'],
    192: ['`', '~'],
    219: ['[', '{'],
    220: ['\\', '|'],
    221: [']', '}'],
    222: ['\'', '"']
};
function evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {
    var result = {
        type: 0,
        cancel: false,
        key: undefined
    };
    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);
    switch (ev.keyCode) {
        case 0:
            if (ev.key === 'UIKeyInputUpArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OA';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[A';
                }
            }
            else if (ev.key === 'UIKeyInputLeftArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OD';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[D';
                }
            }
            else if (ev.key === 'UIKeyInputRightArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OC';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[C';
                }
            }
            else if (ev.key === 'UIKeyInputDownArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OB';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[B';
                }
            }
            break;
        case 8:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.BS;
                break;
            }
            else if (ev.altKey) {
                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;
                break;
            }
            result.key = EscapeSequences_1.C0.DEL;
            break;
        case 9:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.ESC + '[Z';
                break;
            }
            result.key = EscapeSequences_1.C0.HT;
            result.cancel = true;
            break;
        case 13:
            result.key = EscapeSequences_1.C0.CR;
            result.cancel = true;
            break;
        case 27:
            result.key = EscapeSequences_1.C0.ESC;
            result.cancel = true;
            break;
        case 37:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {
                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OD';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[D';
            }
            break;
        case 39:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {
                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OC';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[C';
            }
            break;
        case 38:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OA';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[A';
            }
            break;
        case 40:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OB';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[B';
            }
            break;
        case 45:
            if (!ev.shiftKey && !ev.ctrlKey) {
                result.key = EscapeSequences_1.C0.ESC + '[2~';
            }
            break;
        case 46:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[3~';
            }
            break;
        case 36:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OH';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[H';
            }
            break;
        case 35:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OF';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[F';
            }
            break;
        case 33:
            if (ev.shiftKey) {
                result.type = 2;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[5~';
            }
            break;
        case 34:
            if (ev.shiftKey) {
                result.type = 3;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[6~';
            }
            break;
        case 112:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OP';
            }
            break;
        case 113:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OQ';
            }
            break;
        case 114:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OR';
            }
            break;
        case 115:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OS';
            }
            break;
        case 116:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[15~';
            }
            break;
        case 117:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[17~';
            }
            break;
        case 118:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[18~';
            }
            break;
        case 119:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[19~';
            }
            break;
        case 120:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[20~';
            }
            break;
        case 121:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[21~';
            }
            break;
        case 122:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[23~';
            }
            break;
        case 123:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[24~';
            }
            break;
        default:
            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {
                if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    result.key = String.fromCharCode(ev.keyCode - 64);
                }
                else if (ev.keyCode === 32) {
                    result.key = String.fromCharCode(0);
                }
                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {
                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);
                }
                else if (ev.keyCode === 56) {
                    result.key = String.fromCharCode(127);
                }
                else if (ev.keyCode === 219) {
                    result.key = String.fromCharCode(27);
                }
                else if (ev.keyCode === 220) {
                    result.key = String.fromCharCode(28);
                }
                else if (ev.keyCode === 221) {
                    result.key = String.fromCharCode(29);
                }
            }
            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {
                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];
                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];
                if (key) {
                    result.key = EscapeSequences_1.C0.ESC + key;
                }
                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;
                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);
                }
            }
            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {
                if (ev.keyCode === 65) {
                    result.type = 1;
                }
            }
            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {
                result.key = ev.key;
            }
            else if (ev.key && ev.ctrlKey) {
                if (ev.key === '_') {
                    result.key = EscapeSequences_1.C0.US;
                }
            }
            break;
    }
    return result;
}
exports.evaluateKeyboardEvent = evaluateKeyboardEvent;


/***/ }),

/***/ "./lib/core/input/TextDecoder.js":
/*!***************************************!*\
  !*** ./lib/core/input/TextDecoder.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var StringToUtf32 = (function () {
    function StringToUtf32() {
        this._interim = 0;
    }
    StringToUtf32.prototype.clear = function () {
        this._interim = 0;
    };
    StringToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var startPos = 0;
        if (this._interim) {
            var second = input.charCodeAt(startPos++);
            if (0xDC00 <= second && second <= 0xDFFF) {
                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                target[size++] = this._interim;
                target[size++] = second;
            }
            this._interim = 0;
        }
        for (var i = startPos; i < length; ++i) {
            var code = input.charCodeAt(i);
            if (0xD800 <= code && code <= 0xDBFF) {
                if (++i >= length) {
                    this._interim = code;
                    return size;
                }
                var second = input.charCodeAt(i);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
                }
                else {
                    target[size++] = code;
                    target[size++] = second;
                }
                continue;
            }
            target[size++] = code;
        }
        return size;
    };
    return StringToUtf32;
}());
exports.StringToUtf32 = StringToUtf32;
function stringFromCodePoint(codePoint) {
    if (codePoint > 0xFFFF) {
        codePoint -= 0x10000;
        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);
    }
    return String.fromCharCode(codePoint);
}
exports.stringFromCodePoint = stringFromCodePoint;
function utf32ToString(data, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = data.length; }
    var result = '';
    for (var i = start; i < end; ++i) {
        var codepoint = data[i];
        if (codepoint > 0xFFFF) {
            codepoint -= 0x10000;
            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);
        }
        else {
            result += String.fromCharCode(codepoint);
        }
    }
    return result;
}
exports.utf32ToString = utf32ToString;


/***/ }),

/***/ "./lib/handlers/AltClickHandler.js":
/*!*****************************************!*\
  !*** ./lib/handlers/AltClickHandler.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! ../common/data/EscapeSequences */ "./lib/common/data/EscapeSequences.js");
var AltClickHandler = (function () {
    function AltClickHandler(_mouseEvent, _terminal) {
        var _a;
        this._mouseEvent = _mouseEvent;
        this._terminal = _terminal;
        this._lines = this._terminal.buffer.lines;
        this._startCol = this._terminal.buffer.x;
        this._startRow = this._terminal.buffer.y;
        var coordinates = this._terminal.mouseHelper.getCoords(this._mouseEvent, this._terminal.element, this._terminal.charMeasure, this._terminal.cols, this._terminal.rows, false);
        if (coordinates) {
            _a = coordinates.map(function (coordinate) {
                return coordinate - 1;
            }), this._endCol = _a[0], this._endRow = _a[1];
        }
    }
    AltClickHandler.prototype.move = function () {
        if (this._mouseEvent.altKey && this._endCol !== undefined && this._endRow !== undefined) {
            this._terminal.handler(this._arrowSequences());
        }
    };
    AltClickHandler.prototype._arrowSequences = function () {
        if (!this._terminal.buffer.hasScrollback) {
            return this._resetStartingRow() + this._moveToRequestedRow() + this._moveToRequestedCol();
        }
        return this._moveHorizontallyOnly();
    };
    AltClickHandler.prototype._resetStartingRow = function () {
        if (this._moveToRequestedRow().length === 0) {
            return '';
        }
        return repeat(this._bufferLine(this._startCol, this._startRow, this._startCol, this._startRow - this._wrappedRowsForRow(this._startRow), false).length, this._sequence("D"));
    };
    AltClickHandler.prototype._moveToRequestedRow = function () {
        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);
        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);
        var rowsToMove = Math.abs(startRow - endRow) - this._wrappedRowsCount();
        return repeat(rowsToMove, this._sequence(this._verticalDirection()));
    };
    AltClickHandler.prototype._moveToRequestedCol = function () {
        var startRow;
        if (this._moveToRequestedRow().length > 0) {
            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);
        }
        else {
            startRow = this._startRow;
        }
        var endRow = this._endRow;
        var direction = this._horizontalDirection();
        return repeat(this._bufferLine(this._startCol, startRow, this._endCol, endRow, direction === "C").length, this._sequence(direction));
    };
    AltClickHandler.prototype._moveHorizontallyOnly = function () {
        var direction = this._horizontalDirection();
        return repeat(Math.abs(this._startCol - this._endCol), this._sequence(direction));
    };
    AltClickHandler.prototype._wrappedRowsCount = function () {
        var wrappedRows = 0;
        var startRow = this._startRow - this._wrappedRowsForRow(this._startRow);
        var endRow = this._endRow - this._wrappedRowsForRow(this._endRow);
        for (var i = 0; i < Math.abs(startRow - endRow); i++) {
            var direction = this._verticalDirection() === "A" ? -1 : 1;
            if (this._lines.get(startRow + (direction * i)).isWrapped) {
                wrappedRows++;
            }
        }
        return wrappedRows;
    };
    AltClickHandler.prototype._wrappedRowsForRow = function (currentRow) {
        var rowCount = 0;
        var lineWraps = this._lines.get(currentRow).isWrapped;
        while (lineWraps && currentRow >= 0 && currentRow < this._terminal.rows) {
            rowCount++;
            currentRow--;
            lineWraps = this._lines.get(currentRow).isWrapped;
        }
        return rowCount;
    };
    AltClickHandler.prototype._horizontalDirection = function () {
        var startRow;
        if (this._moveToRequestedRow().length > 0) {
            startRow = this._endRow - this._wrappedRowsForRow(this._endRow);
        }
        else {
            startRow = this._startRow;
        }
        if ((this._startCol < this._endCol &&
            startRow <= this._endRow) ||
            (this._startCol >= this._endCol &&
                startRow < this._endRow)) {
            return "C";
        }
        return "D";
    };
    AltClickHandler.prototype._verticalDirection = function () {
        if (this._startRow > this._endRow) {
            return "A";
        }
        return "B";
    };
    AltClickHandler.prototype._bufferLine = function (startCol, startRow, endCol, endRow, forward) {
        var currentCol = startCol;
        var currentRow = startRow;
        var bufferStr = '';
        while (currentCol !== endCol || currentRow !== endRow) {
            currentCol += forward ? 1 : -1;
            if (forward && currentCol > this._terminal.cols - 1) {
                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
                currentCol = 0;
                startCol = 0;
                currentRow++;
            }
            else if (!forward && currentCol < 0) {
                bufferStr += this._terminal.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);
                currentCol = this._terminal.cols - 1;
                startCol = currentCol;
                currentRow--;
            }
        }
        return bufferStr + this._terminal.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
    };
    AltClickHandler.prototype._sequence = function (direction) {
        var mod = this._terminal.applicationCursor ? 'O' : '[';
        return EscapeSequences_1.C0.ESC + mod + direction;
    };
    return AltClickHandler;
}());
exports.AltClickHandler = AltClickHandler;
function repeat(count, str) {
    count = Math.floor(count);
    var rpt = '';
    for (var i = 0; i < count; i++) {
        rpt += str;
    }
    return rpt;
}


/***/ }),

/***/ "./lib/public/Terminal.js":
/*!********************************!*\
  !*** ./lib/public/Terminal.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Terminal_1 = __webpack_require__(/*! ../Terminal */ "./lib/Terminal.js");
var Strings = __webpack_require__(/*! ../Strings */ "./lib/Strings.js");
var Terminal = (function () {
    function Terminal(options) {
        this._core = new Terminal_1.Terminal(options);
    }
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._core.onCursorMove; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._core.onLineFeed; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._core.onSelectionChange; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._core.onData; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._core.onTitleChange; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._core.onScroll; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._core.onKey; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._core.onRender; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._core.onResize; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "element", {
        get: function () { return this._core.element; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "textarea", {
        get: function () { return this._core.textarea; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "rows", {
        get: function () { return this._core.rows; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "cols", {
        get: function () { return this._core.cols; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () { return this._core.markers; },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.blur = function () {
        this._core.blur();
    };
    Terminal.prototype.focus = function () {
        this._core.focus();
    };
    Terminal.prototype.on = function (type, listener) {
        this._core.on(type, listener);
    };
    Terminal.prototype.off = function (type, listener) {
        this._core.off(type, listener);
    };
    Terminal.prototype.emit = function (type, data) {
        this._core.emit(type, data);
    };
    Terminal.prototype.addDisposableListener = function (type, handler) {
        return this._core.addDisposableListener(type, handler);
    };
    Terminal.prototype.resize = function (columns, rows) {
        this._core.resize(columns, rows);
    };
    Terminal.prototype.writeln = function (data) {
        this._core.writeln(data);
    };
    Terminal.prototype.open = function (parent) {
        this._core.open(parent);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._core.attachCustomKeyEventHandler(customKeyEventHandler);
    };
    Terminal.prototype.addCsiHandler = function (flag, callback) {
        return this._core.addCsiHandler(flag, callback);
    };
    Terminal.prototype.addOscHandler = function (ident, callback) {
        return this._core.addOscHandler(ident, callback);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        return this._core.registerLinkMatcher(regex, handler, options);
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        this._core.deregisterLinkMatcher(matcherId);
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        return this._core.registerCharacterJoiner(handler);
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        this._core.deregisterCharacterJoiner(joinerId);
    };
    Terminal.prototype.addMarker = function (cursorYOffset) {
        return this._core.addMarker(cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._core.hasSelection();
    };
    Terminal.prototype.getSelection = function () {
        return this._core.getSelection();
    };
    Terminal.prototype.clearSelection = function () {
        this._core.clearSelection();
    };
    Terminal.prototype.selectAll = function () {
        this._core.selectAll();
    };
    Terminal.prototype.selectLines = function (start, end) {
        this._core.selectLines(start, end);
    };
    Terminal.prototype.dispose = function () {
        this._core.dispose();
    };
    Terminal.prototype.destroy = function () {
        this._core.destroy();
    };
    Terminal.prototype.scrollLines = function (amount) {
        this._core.scrollLines(amount);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this._core.scrollPages(pageCount);
    };
    Terminal.prototype.scrollToTop = function () {
        this._core.scrollToTop();
    };
    Terminal.prototype.scrollToBottom = function () {
        this._core.scrollToBottom();
    };
    Terminal.prototype.scrollToLine = function (line) {
        this._core.scrollToLine(line);
    };
    Terminal.prototype.clear = function () {
        this._core.clear();
    };
    Terminal.prototype.write = function (data) {
        this._core.write(data);
    };
    Terminal.prototype.getOption = function (key) {
        return this._core.getOption(key);
    };
    Terminal.prototype.setOption = function (key, value) {
        this._core.setOption(key, value);
    };
    Terminal.prototype.refresh = function (start, end) {
        this._core.refresh(start, end);
    };
    Terminal.prototype.reset = function () {
        this._core.reset();
    };
    Terminal.applyAddon = function (addon) {
        addon.apply(Terminal);
    };
    Object.defineProperty(Terminal, "strings", {
        get: function () {
            return Strings;
        },
        enumerable: true,
        configurable: true
    });
    return Terminal;
}());
exports.Terminal = Terminal;


/***/ }),

/***/ "./lib/renderer/BaseRenderLayer.js":
/*!*****************************************!*\
  !*** ./lib/renderer/BaseRenderLayer.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Types_1 = __webpack_require__(/*! ./atlas/Types */ "./lib/renderer/atlas/Types.js");
var CharAtlasCache_1 = __webpack_require__(/*! ./atlas/CharAtlasCache */ "./lib/renderer/atlas/CharAtlasCache.js");
var BufferLine_1 = __webpack_require__(/*! ../BufferLine */ "./lib/BufferLine.js");
var Buffer_1 = __webpack_require__(/*! ../Buffer */ "./lib/Buffer.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! ./CharacterJoinerRegistry */ "./lib/renderer/CharacterJoinerRegistry.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._currentGlyphIdentifier = {
            chars: '',
            code: 0,
            bg: 0,
            fg: 0,
            bold: false,
            dim: false,
            italic: false
        };
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        this._container.removeChild(this._canvas);
        if (this._charAtlas) {
            this._charAtlas.dispose();
        }
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = this._canvas.getContext('2d', { alpha: this._alpha });
        if (!this._alpha) {
            this.clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };
    BaseRenderLayer.prototype.onBlur = function (terminal) { };
    BaseRenderLayer.prototype.onFocus = function (terminal) { };
    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };
    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.onThemeChanged = function (terminal, colorSet) {
        this._refreshCharAtlas(terminal, colorSet);
    };
    BaseRenderLayer.prototype.setTransparency = function (terminal, alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(terminal, this._colors);
        this.onGridChanged(terminal, 0, terminal.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (terminal, dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this.clearAll();
        }
        this._refreshCharAtlas(terminal, this._colors);
    };
    BaseRenderLayer.prototype.fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype.fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype.fillLeftLineAtCell = function (x, y) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype.strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype.clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype.clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype.fillCharTrueColor = function (terminal, cell, x, y) {
        this._ctx.font = this._getFont(terminal, false, false);
        this._ctx.textBaseline = 'middle';
        this._clipRow(terminal, y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
    };
    BaseRenderLayer.prototype.drawChars = function (terminal, cell, x, y) {
        if (cell.isFgRGB() || cell.isBgRGB() || cell instanceof CharacterJoinerRegistry_1.JoinedCellData) {
            this._drawUncachedChars(terminal, cell, x, y);
            return;
        }
        var fg;
        var bg;
        if (cell.isInverse()) {
            fg = (cell.isBgDefault()) ? Types_1.INVERTED_DEFAULT_COLOR : cell.getBgColor();
            bg = (cell.isFgDefault()) ? Types_1.INVERTED_DEFAULT_COLOR : cell.getFgColor();
        }
        else {
            bg = (cell.isBgDefault()) ? Types_1.DEFAULT_COLOR : cell.getBgColor();
            fg = (cell.isFgDefault()) ? Types_1.DEFAULT_COLOR : cell.getFgColor();
        }
        var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Types_1.INVERTED_DEFAULT_COLOR;
        fg += drawInBrightColor ? 8 : 0;
        this._currentGlyphIdentifier.chars = cell.getChars() || Buffer_1.WHITESPACE_CELL_CHAR;
        this._currentGlyphIdentifier.code = cell.getCode() || Buffer_1.WHITESPACE_CELL_CODE;
        this._currentGlyphIdentifier.bg = bg;
        this._currentGlyphIdentifier.fg = fg;
        this._currentGlyphIdentifier.bold = cell.isBold() && terminal.options.enableBold;
        this._currentGlyphIdentifier.dim = !!cell.isDim();
        this._currentGlyphIdentifier.italic = !!cell.isItalic();
        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);
        if (!atlasDidDraw) {
            this._drawUncachedChars(terminal, cell, x, y);
        }
    };
    BaseRenderLayer.prototype._drawUncachedChars = function (terminal, cell, x, y) {
        this._ctx.save();
        this._ctx.font = this._getFont(terminal, cell.isBold() && terminal.options.enableBold, !!cell.isItalic());
        this._ctx.textBaseline = 'middle';
        if (cell.isInverse()) {
            if (cell.isBgDefault()) {
                this._ctx.fillStyle = this._colors.background.css;
            }
            else if (cell.isBgRGB()) {
                this._ctx.fillStyle = "rgb(" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else {
                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;
            }
        }
        else {
            if (cell.isFgDefault()) {
                this._ctx.fillStyle = this._colors.foreground.css;
            }
            else if (cell.isFgRGB()) {
                this._ctx.fillStyle = "rgb(" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
            }
            else {
                var fg = cell.getFgColor();
                if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                    fg += 8;
                }
                this._ctx.fillStyle = this._colors.ansi[fg].css;
            }
        }
        this._clipRow(terminal, y);
        if (cell.isDim()) {
            this._ctx.globalAlpha = Types_1.DIM_OPACITY;
        }
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
        this._ctx.restore();
    };
    BaseRenderLayer.prototype._clipRow = function (terminal, y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {
        var fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + terminal.options.fontSize * window.devicePixelRatio + "px " + terminal.options.fontFamily;
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./lib/renderer/CharacterJoinerRegistry.js":
/*!*************************************************!*\
  !*** ./lib/renderer/CharacterJoinerRegistry.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BufferLine_1 = __webpack_require__(/*! ../BufferLine */ "./lib/BufferLine.js");
var Buffer_1 = __webpack_require__(/*! ../Buffer */ "./lib/Buffer.js");
var JoinedCellData = (function (_super) {
    __extends(JoinedCellData, _super);
    function JoinedCellData(firstCell, chars, width) {
        var _this = _super.call(this) || this;
        _this.content = 0;
        _this.combinedData = '';
        _this.fg = firstCell.fg;
        _this.bg = firstCell.bg;
        _this.combinedData = chars;
        _this._width = width;
        return _this;
    }
    JoinedCellData.prototype.isCombined = function () {
        return 2097152;
    };
    JoinedCellData.prototype.getWidth = function () {
        return this._width;
    };
    JoinedCellData.prototype.getChars = function () {
        return this.combinedData;
    };
    JoinedCellData.prototype.getCode = function () {
        return 0x1FFFFF;
    };
    JoinedCellData.prototype.setFromCharData = function (value) {
        throw new Error('not implemented');
    };
    JoinedCellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return JoinedCellData;
}(BufferLine_1.AttributeData));
exports.JoinedCellData = JoinedCellData;
var CharacterJoinerRegistry = (function () {
    function CharacterJoinerRegistry(_terminal) {
        this._terminal = _terminal;
        this._characterJoiners = [];
        this._nextCharacterJoinerId = 0;
        this._workCell = new BufferLine_1.CellData();
    }
    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {
        var joiner = {
            id: this._nextCharacterJoinerId++,
            handler: handler
        };
        this._characterJoiners.push(joiner);
        return joiner.id;
    };
    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {
        for (var i = 0; i < this._characterJoiners.length; i++) {
            if (this._characterJoiners[i].id === joinerId) {
                this._characterJoiners.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {
        if (this._characterJoiners.length === 0) {
            return [];
        }
        var line = this._terminal.buffer.lines.get(row);
        if (line.length === 0) {
            return [];
        }
        var ranges = [];
        var lineStr = line.translateToString(true);
        var rangeStartColumn = 0;
        var currentStringIndex = 0;
        var rangeStartStringIndex = 0;
        var rangeAttrFG = line.getFg(0);
        var rangeAttrBG = line.getBg(0);
        for (var x = 0; x < line.getTrimmedLength(); x++) {
            line.loadCell(x, this._workCell);
            if (this._workCell.getWidth() === 0) {
                continue;
            }
            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {
                if (x - rangeStartColumn > 1) {
                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
                    for (var i = 0; i < joinedRanges.length; i++) {
                        ranges.push(joinedRanges[i]);
                    }
                }
                rangeStartColumn = x;
                rangeStartStringIndex = currentStringIndex;
                rangeAttrFG = this._workCell.fg;
                rangeAttrBG = this._workCell.bg;
            }
            currentStringIndex += this._workCell.getChars().length || Buffer_1.WHITESPACE_CELL_CHAR.length;
        }
        if (this._terminal.cols - rangeStartColumn > 1) {
            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
            for (var i = 0; i < joinedRanges.length; i++) {
                ranges.push(joinedRanges[i]);
            }
        }
        return ranges;
    };
    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {
        var text = line.substring(startIndex, endIndex);
        var joinedRanges = this._characterJoiners[0].handler(text);
        for (var i = 1; i < this._characterJoiners.length; i++) {
            var joinerRanges = this._characterJoiners[i].handler(text);
            for (var j = 0; j < joinerRanges.length; j++) {
                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);
            }
        }
        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);
        return joinedRanges;
    };
    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {
        var currentRangeIndex = 0;
        var currentRangeStarted = false;
        var currentStringIndex = 0;
        var currentRange = ranges[currentRangeIndex];
        if (!currentRange) {
            return;
        }
        for (var x = startCol; x < this._terminal.cols; x++) {
            var width = line.getWidth(x);
            var length_1 = line.getString(x).length || Buffer_1.WHITESPACE_CELL_CHAR.length;
            if (width === 0) {
                continue;
            }
            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {
                currentRange[0] = x;
                currentRangeStarted = true;
            }
            if (currentRange[1] <= currentStringIndex) {
                currentRange[1] = x;
                currentRange = ranges[++currentRangeIndex];
                if (!currentRange) {
                    break;
                }
                if (currentRange[0] <= currentStringIndex) {
                    currentRange[0] = x;
                    currentRangeStarted = true;
                }
                else {
                    currentRangeStarted = false;
                }
            }
            currentStringIndex += length_1;
        }
        if (currentRange) {
            currentRange[1] = this._terminal.cols;
        }
    };
    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {
        var inRange = false;
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (!inRange) {
                if (newRange[1] <= range[0]) {
                    ranges.splice(i, 0, newRange);
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    return ranges;
                }
                if (newRange[0] < range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    inRange = true;
                }
                continue;
            }
            else {
                if (newRange[1] <= range[0]) {
                    ranges[i - 1][1] = newRange[1];
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);
                    ranges.splice(i, 1);
                    inRange = false;
                    return ranges;
                }
                ranges.splice(i, 1);
                i--;
            }
        }
        if (inRange) {
            ranges[ranges.length - 1][1] = newRange[1];
        }
        else {
            ranges.push(newRange);
        }
        return ranges;
    };
    return CharacterJoinerRegistry;
}());
exports.CharacterJoinerRegistry = CharacterJoinerRegistry;


/***/ }),

/***/ "./lib/renderer/ColorManager.js":
/*!**************************************!*\
  !*** ./lib/renderer/ColorManager.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DEFAULT_FOREGROUND = fromHex('#ffffff');
var DEFAULT_BACKGROUND = fromHex('#000000');
var DEFAULT_CURSOR = fromHex('#ffffff');
var DEFAULT_CURSOR_ACCENT = fromHex('#000000');
var DEFAULT_SELECTION = {
    css: 'rgba(255, 255, 255, 0.3)',
    rgba: 0xFFFFFF77
};
exports.DEFAULT_ANSI_COLORS = (function () {
    var colors = [
        fromHex('#2e3436'),
        fromHex('#cc0000'),
        fromHex('#4e9a06'),
        fromHex('#c4a000'),
        fromHex('#3465a4'),
        fromHex('#75507b'),
        fromHex('#06989a'),
        fromHex('#d3d7cf'),
        fromHex('#555753'),
        fromHex('#ef2929'),
        fromHex('#8ae234'),
        fromHex('#fce94f'),
        fromHex('#729fcf'),
        fromHex('#ad7fa8'),
        fromHex('#34e2e2'),
        fromHex('#eeeeec')
    ];
    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];
    for (var i = 0; i < 216; i++) {
        var r = v[(i / 36) % 6 | 0];
        var g = v[(i / 6) % 6 | 0];
        var b = v[i % 6];
        colors.push({
            css: "#" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),
            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0
        });
    }
    for (var i = 0; i < 24; i++) {
        var c = 8 + i * 10;
        var ch = toPaddedHex(c);
        colors.push({
            css: "#" + ch + ch + ch,
            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0
        });
    }
    return colors;
})();
function fromHex(css) {
    return {
        css: css,
        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF
    };
}
function toPaddedHex(c) {
    var s = c.toString(16);
    return s.length < 2 ? '0' + s : s;
}
var ColorManager = (function () {
    function ColorManager(document, allowTransparency) {
        this.allowTransparency = allowTransparency;
        var canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        this._ctx = canvas.getContext('2d');
        this._ctx.globalCompositeOperation = 'copy';
        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);
        this.colors = {
            foreground: DEFAULT_FOREGROUND,
            background: DEFAULT_BACKGROUND,
            cursor: DEFAULT_CURSOR,
            cursorAccent: DEFAULT_CURSOR_ACCENT,
            selection: DEFAULT_SELECTION,
            ansi: exports.DEFAULT_ANSI_COLORS.slice()
        };
    }
    ColorManager.prototype.setTheme = function (theme) {
        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);
        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);
        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);
        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);
        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);
        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);
        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);
        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);
        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);
        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);
        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);
        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);
        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);
        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);
        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);
        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);
        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);
        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);
        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);
        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);
        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);
    };
    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {
        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }
        if (!css) {
            return fallback;
        }
        this._ctx.fillStyle = this._litmusColor;
        this._ctx.fillStyle = css;
        if (typeof this._ctx.fillStyle !== 'string') {
            console.warn("Color: " + css + " is invalid using fallback " + fallback.css);
            return fallback;
        }
        this._ctx.fillRect(0, 0, 1, 1);
        var data = this._ctx.getImageData(0, 0, 1, 1).data;
        if (!allowTransparency && data[3] !== 0xFF) {
            console.warn("Color: " + css + " is using transparency, but allowTransparency is false. " +
                ("Using fallback " + fallback.css + "."));
            return fallback;
        }
        return {
            css: css,
            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0
        };
    };
    return ColorManager;
}());
exports.ColorManager = ColorManager;


/***/ }),

/***/ "./lib/renderer/CursorRenderLayer.js":
/*!*******************************************!*\
  !*** ./lib/renderer/CursorRenderLayer.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./lib/renderer/BaseRenderLayer.js");
var BufferLine_1 = __webpack_require__(/*! ../BufferLine */ "./lib/BufferLine.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;
        _this._cell = new BufferLine_1.CellData();
        _this._state = {
            x: null,
            y: null,
            isFocused: null,
            style: null,
            width: null
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = {
            x: null,
            y: null,
            isFocused: null,
            style: null,
            width: null
        };
    };
    CursorRenderLayer.prototype.reset = function (terminal) {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this._cursorBlinkStateManager = null;
            this.onOptionsChanged(terminal);
        }
    };
    CursorRenderLayer.prototype.onBlur = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        terminal.refresh(terminal.buffer.y, terminal.buffer.y);
    };
    CursorRenderLayer.prototype.onFocus = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume(terminal);
        }
        else {
            terminal.refresh(terminal.buffer.y, terminal.buffer.y);
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {
        var _this = this;
        if (terminal.options.cursorBlink) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {
                    _this._render(terminal, true);
                });
            }
        }
        else {
            if (this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager.dispose();
                this._cursorBlinkStateManager = null;
            }
            terminal.refresh(terminal.buffer.y, terminal.buffer.y);
        }
    };
    CursorRenderLayer.prototype.onCursorMove = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(terminal, false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {
        if (!terminal.cursorState || terminal.cursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = terminal.buffer.ybase + terminal.buffer.y;
        var viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {
            this._clearCursor();
            return;
        }
        terminal.buffer.lines.get(cursorY).loadCell(terminal.buffer.x, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!terminal.isFocused) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            this._renderBlurCursor(terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);
            this._ctx.restore();
            this._state.x = terminal.buffer.x;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = terminal.options.cursorStyle;
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === terminal.buffer.x &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === terminal.isFocused &&
                this._state.style === terminal.options.cursorStyle &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[terminal.options.cursorStyle || 'block'](terminal, terminal.buffer.x, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = terminal.buffer.x;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = terminal.options.cursorStyle;
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this.clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: null,
                y: null,
                isFocused: null,
                style: null,
                width: null
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this.fillLeftLineAtCell(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this.fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this.fillCharTrueColor(terminal, cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this.fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this.strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(terminal, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (terminal.isFocused) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: true,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = null;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = null;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = null;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = null;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = null;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = null;
            });
            _this._blinkInterval = setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = null;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = null;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = null;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = null;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = null;
        }
    };
    CursorBlinkStateManager.prototype.resume = function (terminal) {
        this._animationTimeRestarted = null;
        this._restartInterval();
        this.restartBlinkAnimation(terminal);
    };
    return CursorBlinkStateManager;
}());


/***/ }),

/***/ "./lib/renderer/GridCache.js":
/*!***********************************!*\
  !*** ./lib/renderer/GridCache.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GridCache = (function () {
    function GridCache() {
        this.cache = [];
    }
    GridCache.prototype.resize = function (width, height) {
        for (var x = 0; x < width; x++) {
            if (this.cache.length <= x) {
                this.cache.push([]);
            }
            for (var y = this.cache[x].length; y < height; y++) {
                this.cache[x].push(null);
            }
            this.cache[x].length = height;
        }
        this.cache.length = width;
    };
    GridCache.prototype.clear = function () {
        for (var x = 0; x < this.cache.length; x++) {
            for (var y = 0; y < this.cache[x].length; y++) {
                this.cache[x][y] = null;
            }
        }
    };
    return GridCache;
}());
exports.GridCache = GridCache;


/***/ }),

/***/ "./lib/renderer/LinkRenderLayer.js":
/*!*****************************************!*\
  !*** ./lib/renderer/LinkRenderLayer.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./lib/renderer/BaseRenderLayer.js");
var Types_1 = __webpack_require__(/*! ./atlas/Types */ "./lib/renderer/atlas/Types.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ./atlas/CharAtlasUtils */ "./lib/renderer/atlas/CharAtlasUtils.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, terminal) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;
        _this._state = null;
        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = null;
    };
    LinkRenderLayer.prototype.reset = function (terminal) {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this.clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this.clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this.clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = null;
        }
    };
    LinkRenderLayer.prototype._onLinkHover = function (e) {
        if (e.fg === Types_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this.fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this.fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this.fillBottomLineAtCells(0, y, e.cols);
            }
            this.fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onLinkLeave = function (e) {
        this._clearCurrentLink();
    };
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./lib/renderer/Renderer.js":
/*!**********************************!*\
  !*** ./lib/renderer/Renderer.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var TextRenderLayer_1 = __webpack_require__(/*! ./TextRenderLayer */ "./lib/renderer/TextRenderLayer.js");
var SelectionRenderLayer_1 = __webpack_require__(/*! ./SelectionRenderLayer */ "./lib/renderer/SelectionRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! ./CursorRenderLayer */ "./lib/renderer/CursorRenderLayer.js");
var ColorManager_1 = __webpack_require__(/*! ./ColorManager */ "./lib/renderer/ColorManager.js");
var LinkRenderLayer_1 = __webpack_require__(/*! ./LinkRenderLayer */ "./lib/renderer/LinkRenderLayer.js");
var RenderDebouncer_1 = __webpack_require__(/*! ../ui/RenderDebouncer */ "./lib/ui/RenderDebouncer.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! ../ui/ScreenDprMonitor */ "./lib/ui/ScreenDprMonitor.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! ../renderer/CharacterJoinerRegistry */ "./lib/renderer/CharacterJoinerRegistry.js");
var EventEmitter2_1 = __webpack_require__(/*! ../common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var Lifecycle_1 = __webpack_require__(/*! ../common/Lifecycle */ "./lib/common/Lifecycle.js");
var Renderer = (function (_super) {
    __extends(Renderer, _super);
    function Renderer(_terminal, theme) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._isPaused = false;
        _this._needsFullRefresh = false;
        _this._onCanvasResize = new EventEmitter2_1.EventEmitter2();
        _this._onRender = new EventEmitter2_1.EventEmitter2();
        var allowTransparency = _this._terminal.options.allowTransparency;
        _this.colorManager = new ColorManager_1.ColorManager(document, allowTransparency);
        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(_terminal);
        if (theme) {
            _this.colorManager.setTheme(theme);
        }
        _this._renderLayers = [
            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this.colorManager.colors, _this._characterJoinerRegistry, allowTransparency),
            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this.colorManager.colors),
            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this.colorManager.colors, _this._terminal),
            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this.colorManager.colors)
        ];
        _this.dimensions = {
            scaledCharWidth: null,
            scaledCharHeight: null,
            scaledCellWidth: null,
            scaledCellHeight: null,
            scaledCharLeft: null,
            scaledCharTop: null,
            scaledCanvasWidth: null,
            scaledCanvasHeight: null,
            canvasWidth: null,
            canvasHeight: null,
            actualCellWidth: null,
            actualCellHeight: null
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this.onOptionsChanged();
        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this._screenDprMonitor.setListener(function () { return _this.onWindowResize(window.devicePixelRatio); });
        _this.register(_this._screenDprMonitor);
        if ('IntersectionObserver' in window) {
            var observer_1 = new IntersectionObserver(function (e) { return _this.onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });
            observer_1.observe(_this._terminal.element);
            _this.register({ dispose: function () { return observer_1.disconnect(); } });
        }
        return _this;
    }
    Object.defineProperty(Renderer.prototype, "onCanvasResize", {
        get: function () { return this._onCanvasResize.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Renderer.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    Renderer.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._renderLayers.forEach(function (l) { return l.dispose(); });
    };
    Renderer.prototype.onIntersectionChange = function (entry) {
        this._isPaused = entry.intersectionRatio === 0;
        if (!this._isPaused && this._needsFullRefresh) {
            this._terminal.refresh(0, this._terminal.rows - 1);
            this._needsFullRefresh = false;
        }
    };
    Renderer.prototype.onWindowResize = function (devicePixelRatio) {
        if (this._devicePixelRatio !== devicePixelRatio) {
            this._devicePixelRatio = devicePixelRatio;
            this.onResize(this._terminal.cols, this._terminal.rows);
        }
    };
    Renderer.prototype.setTheme = function (theme) {
        var _this = this;
        this.colorManager.setTheme(theme);
        this._renderLayers.forEach(function (l) {
            l.onThemeChanged(_this._terminal, _this.colorManager.colors);
            l.reset(_this._terminal);
        });
        if (this._isPaused) {
            this._needsFullRefresh = true;
        }
        else {
            this._terminal.refresh(0, this._terminal.rows - 1);
        }
        return this.colorManager.colors;
    };
    Renderer.prototype.onResize = function (cols, rows) {
        var _this = this;
        this._updateDimensions();
        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });
        if (this._isPaused) {
            this._needsFullRefresh = true;
        }
        else {
            this._terminal.refresh(0, this._terminal.rows - 1);
        }
        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + "px";
        this._onCanvasResize.fire({
            width: this.dimensions.canvasWidth,
            height: this.dimensions.canvasHeight
        });
    };
    Renderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._terminal.cols, this._terminal.rows);
    };
    Renderer.prototype.onBlur = function () {
        var _this = this;
        this._runOperation(function (l) { return l.onBlur(_this._terminal); });
    };
    Renderer.prototype.onFocus = function () {
        var _this = this;
        this._runOperation(function (l) { return l.onFocus(_this._terminal); });
    };
    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        var _this = this;
        if (columnSelectMode === void 0) { columnSelectMode = false; }
        this._runOperation(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });
    };
    Renderer.prototype.onCursorMove = function () {
        var _this = this;
        this._runOperation(function (l) { return l.onCursorMove(_this._terminal); });
    };
    Renderer.prototype.onOptionsChanged = function () {
        var _this = this;
        this.colorManager.allowTransparency = this._terminal.options.allowTransparency;
        this._runOperation(function (l) { return l.onOptionsChanged(_this._terminal); });
    };
    Renderer.prototype.clear = function () {
        var _this = this;
        this._runOperation(function (l) { return l.reset(_this._terminal); });
    };
    Renderer.prototype._runOperation = function (operation) {
        if (this._isPaused) {
            this._needsFullRefresh = true;
        }
        else {
            this._renderLayers.forEach(function (l) { return operation(l); });
        }
    };
    Renderer.prototype.refreshRows = function (start, end) {
        if (this._isPaused) {
            this._needsFullRefresh = true;
            return;
        }
        this._renderDebouncer.refresh(start, end, this._terminal.rows);
    };
    Renderer.prototype._renderRows = function (start, end) {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });
        this._onRender.fire({ start: start, end: end });
    };
    Renderer.prototype._updateDimensions = function () {
        if (!this._terminal.charMeasure.width || !this._terminal.charMeasure.height) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);
        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);
        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);
        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;
    };
    Renderer.prototype.registerCharacterJoiner = function (handler) {
        return this._characterJoinerRegistry.registerCharacterJoiner(handler);
    };
    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {
        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);
    };
    return Renderer;
}(Lifecycle_1.Disposable));
exports.Renderer = Renderer;


/***/ }),

/***/ "./lib/renderer/SelectionRenderLayer.js":
/*!**********************************************!*\
  !*** ./lib/renderer/SelectionRenderLayer.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./lib/renderer/BaseRenderLayer.js");
var SelectionRenderLayer = (function (_super) {
    __extends(SelectionRenderLayer, _super);
    function SelectionRenderLayer(container, zIndex, colors) {
        var _this = _super.call(this, container, 'selection', zIndex, true, colors) || this;
        _this._clearState();
        return _this;
    }
    SelectionRenderLayer.prototype._clearState = function () {
        this._state = {
            start: null,
            end: null,
            columnSelectMode: null,
            ydisp: null
        };
    };
    SelectionRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._clearState();
    };
    SelectionRenderLayer.prototype.reset = function (terminal) {
        if (this._state.start && this._state.end) {
            this._clearState();
            this.clearAll();
        }
    };
    SelectionRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {
        if (!this._didStateChange(start, end, columnSelectMode, terminal.buffer.ydisp)) {
            return;
        }
        this.clearAll();
        if (!start || !end) {
            this._clearState();
            return;
        }
        var viewportStartRow = start[1] - terminal.buffer.ydisp;
        var viewportEndRow = end[1] - terminal.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);
        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {
            return;
        }
        this._ctx.fillStyle = this._colors.selection.css;
        if (columnSelectMode) {
            var startCol = start[0];
            var width = end[0] - startCol;
            var height = viewportCappedEndRow - viewportCappedStartRow + 1;
            this.fillCells(startCol, viewportCappedStartRow, width, height);
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : terminal.cols;
            this.fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);
            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);
            this.fillCells(0, viewportCappedStartRow + 1, terminal.cols, middleRowsCount);
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : terminal.cols;
                this.fillCells(0, viewportCappedEndRow, endCol, 1);
            }
        }
        this._state.start = [start[0], start[1]];
        this._state.end = [end[0], end[1]];
        this._state.columnSelectMode = columnSelectMode;
        this._state.ydisp = terminal.buffer.ydisp;
    };
    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {
        return !this._areCoordinatesEqual(start, this._state.start) ||
            !this._areCoordinatesEqual(end, this._state.end) ||
            columnSelectMode !== this._state.columnSelectMode ||
            ydisp !== this._state.ydisp;
    };
    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {
        if (!coord1 || !coord2) {
            return false;
        }
        return coord1[0] === coord2[0] && coord1[1] === coord2[1];
    };
    return SelectionRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.SelectionRenderLayer = SelectionRenderLayer;


/***/ }),

/***/ "./lib/renderer/TextRenderLayer.js":
/*!*****************************************!*\
  !*** ./lib/renderer/TextRenderLayer.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! ../Buffer */ "./lib/Buffer.js");
var GridCache_1 = __webpack_require__(/*! ./GridCache */ "./lib/renderer/GridCache.js");
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./lib/renderer/BaseRenderLayer.js");
var BufferLine_1 = __webpack_require__(/*! ../BufferLine */ "./lib/BufferLine.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! ./CharacterJoinerRegistry */ "./lib/renderer/CharacterJoinerRegistry.js");
var TextRenderLayer = (function (_super) {
    __extends(TextRenderLayer, _super);
    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha) {
        var _this = _super.call(this, container, 'text', zIndex, alpha, colors) || this;
        _this._characterOverlapCache = {};
        _this._workCell = new BufferLine_1.CellData();
        _this._state = new GridCache_1.GridCache();
        _this._characterJoinerRegistry = characterJoinerRegistry;
        return _this;
    }
    TextRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        var terminalFont = this._getFont(terminal, false, false);
        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {
            this._characterWidth = dim.scaledCharWidth;
            this._characterFont = terminalFont;
            this._characterOverlapCache = {};
        }
        this._state.clear();
        this._state.resize(terminal.cols, terminal.rows);
    };
    TextRenderLayer.prototype.reset = function (terminal) {
        this._state.clear();
        this.clearAll();
    };
    TextRenderLayer.prototype._forEachCell = function (terminal, firstRow, lastRow, joinerRegistry, callback) {
        for (var y = firstRow; y <= lastRow; y++) {
            var row = y + terminal.buffer.ydisp;
            var line = terminal.buffer.lines.get(row);
            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];
            for (var x = 0; x < terminal.cols; x++) {
                line.loadCell(x, this._workCell);
                var cell = this._workCell;
                var isJoined = false;
                var lastCharX = x;
                if (cell.getWidth() === 0) {
                    continue;
                }
                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {
                    isJoined = true;
                    var range = joinedRanges.shift();
                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);
                    lastCharX = range[1] - 1;
                }
                if (!isJoined && this._isOverlapping(cell)) {
                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === Buffer_1.NULL_CELL_CODE) {
                        cell.content &= ~12582912;
                        cell.content |= 2 << 22;
                    }
                }
                callback(cell, x, y);
                x = lastCharX;
            }
        }
    };
    TextRenderLayer.prototype._drawBackground = function (terminal, firstRow, lastRow) {
        var _this = this;
        var ctx = this._ctx;
        var cols = terminal.cols;
        var startX = 0;
        var startY = 0;
        var prevFillStyle = null;
        ctx.save();
        this._forEachCell(terminal, firstRow, lastRow, null, function (cell, x, y) {
            var nextFillStyle = null;
            if (cell.isInverse()) {
                if (cell.isFgDefault()) {
                    nextFillStyle = _this._colors.foreground.css;
                }
                else if (cell.isFgRGB()) {
                    nextFillStyle = "rgb(" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                }
                else {
                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;
                }
            }
            else if (cell.isBgRGB()) {
                nextFillStyle = "rgb(" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else if (cell.isBgPalette()) {
                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;
            }
            if (prevFillStyle === null) {
                startX = x;
                startY = y;
            }
            if (y !== startY) {
                ctx.fillStyle = prevFillStyle;
                _this.fillCells(startX, startY, cols - startX, 1);
                startX = x;
                startY = y;
            }
            else if (prevFillStyle !== nextFillStyle) {
                ctx.fillStyle = prevFillStyle;
                _this.fillCells(startX, startY, x - startX, 1);
                startX = x;
                startY = y;
            }
            prevFillStyle = nextFillStyle;
        });
        if (prevFillStyle !== null) {
            ctx.fillStyle = prevFillStyle;
            this.fillCells(startX, startY, cols - startX, 1);
        }
        ctx.restore();
    };
    TextRenderLayer.prototype._drawForeground = function (terminal, firstRow, lastRow) {
        var _this = this;
        this._forEachCell(terminal, firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {
            if (cell.isInvisible()) {
                return;
            }
            if (cell.isUnderline()) {
                _this._ctx.save();
                if (cell.isInverse()) {
                    if (cell.isBgDefault()) {
                        _this._ctx.fillStyle = _this._colors.background.css;
                    }
                    else if (cell.isBgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + BufferLine_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
                    }
                    else {
                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;
                    }
                }
                else {
                    if (cell.isFgDefault()) {
                        _this._ctx.fillStyle = _this._colors.foreground.css;
                    }
                    else if (cell.isFgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + BufferLine_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                    }
                    else {
                        var fg = cell.getFgColor();
                        if (terminal.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                            fg += 8;
                        }
                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;
                    }
                }
                _this.fillBottomLineAtCells(x, y, cell.getWidth());
                _this._ctx.restore();
            }
            _this.drawChars(terminal, cell, x, y);
        });
    };
    TextRenderLayer.prototype.onGridChanged = function (terminal, firstRow, lastRow) {
        if (this._state.cache.length === 0) {
            return;
        }
        if (this._charAtlas) {
            this._charAtlas.beginFrame();
        }
        this.clearCells(0, firstRow, terminal.cols, lastRow - firstRow + 1);
        this._drawBackground(terminal, firstRow, lastRow);
        this._drawForeground(terminal, firstRow, lastRow);
    };
    TextRenderLayer.prototype.onOptionsChanged = function (terminal) {
        this.setTransparency(terminal, terminal.options.allowTransparency);
    };
    TextRenderLayer.prototype._isOverlapping = function (cell) {
        if (cell.getWidth() !== 1) {
            return false;
        }
        if (cell.getCode() < 256) {
            return false;
        }
        var chars = cell.getChars();
        if (this._characterOverlapCache.hasOwnProperty(chars)) {
            return this._characterOverlapCache[chars];
        }
        this._ctx.save();
        this._ctx.font = this._characterFont;
        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;
        this._ctx.restore();
        this._characterOverlapCache[chars] = overlaps;
        return overlaps;
    };
    return TextRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.TextRenderLayer = TextRenderLayer;


/***/ }),

/***/ "./lib/renderer/atlas/BaseCharAtlas.js":
/*!*********************************************!*\
  !*** ./lib/renderer/atlas/BaseCharAtlas.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BaseCharAtlas = (function () {
    function BaseCharAtlas() {
        this._didWarmUp = false;
    }
    BaseCharAtlas.prototype.dispose = function () { };
    BaseCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    BaseCharAtlas.prototype._doWarmUp = function () { };
    BaseCharAtlas.prototype.beginFrame = function () { };
    return BaseCharAtlas;
}());
exports.default = BaseCharAtlas;


/***/ }),

/***/ "./lib/renderer/atlas/CharAtlasCache.js":
/*!**********************************************!*\
  !*** ./lib/renderer/atlas/CharAtlasCache.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasUtils_1 = __webpack_require__(/*! ./CharAtlasUtils */ "./lib/renderer/atlas/CharAtlasUtils.js");
var DynamicCharAtlas_1 = __webpack_require__(/*! ./DynamicCharAtlas */ "./lib/renderer/atlas/DynamicCharAtlas.js");
var NoneCharAtlas_1 = __webpack_require__(/*! ./NoneCharAtlas */ "./lib/renderer/atlas/NoneCharAtlas.js");
var StaticCharAtlas_1 = __webpack_require__(/*! ./StaticCharAtlas */ "./lib/renderer/atlas/StaticCharAtlas.js");
var charAtlasImplementations = {
    'none': NoneCharAtlas_1.default,
    'static': StaticCharAtlas_1.default,
    'dynamic': DynamicCharAtlas_1.default
};
var charAtlasCache = [];
function acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(terminal);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(terminal);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new charAtlasImplementations[terminal.options.experimentalCharAtlas](document, newConfig),
        config: newConfig,
        ownedBy: [terminal]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(terminal) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(terminal);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./lib/renderer/atlas/CharAtlasGenerator.js":
/*!**************************************************!*\
  !*** ./lib/renderer/atlas/CharAtlasGenerator.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Platform_1 = __webpack_require__(/*! ../../common/Platform */ "./lib/common/Platform.js");
var Types_1 = __webpack_require__(/*! ./Types */ "./lib/renderer/atlas/Types.js");
function generateStaticCharAtlasTexture(context, canvasFactory, config) {
    var cellWidth = config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;
    var cellHeight = config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;
    var canvas = canvasFactory(255 * cellWidth, (2 + 16 + 16) * cellHeight);
    var ctx = canvas.getContext('2d', { alpha: config.allowTransparency });
    ctx.fillStyle = config.colors.background.css;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.save();
    ctx.fillStyle = config.colors.foreground.css;
    ctx.font = getFont(config.fontWeight, config);
    ctx.textBaseline = 'middle';
    for (var i = 0; i < 256; i++) {
        ctx.save();
        ctx.beginPath();
        ctx.rect(i * cellWidth, 0, cellWidth, cellHeight);
        ctx.clip();
        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight / 2);
        ctx.restore();
    }
    ctx.save();
    ctx.font = getFont(config.fontWeightBold, config);
    for (var i = 0; i < 256; i++) {
        ctx.save();
        ctx.beginPath();
        ctx.rect(i * cellWidth, cellHeight, cellWidth, cellHeight);
        ctx.clip();
        ctx.fillText(String.fromCharCode(i), i * cellWidth, cellHeight * 1.5);
        ctx.restore();
    }
    ctx.restore();
    ctx.font = getFont(config.fontWeight, config);
    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {
        var y = (colorIndex + 2) * cellHeight;
        for (var i = 0; i < 256; i++) {
            ctx.save();
            ctx.beginPath();
            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);
            ctx.clip();
            ctx.fillStyle = config.colors.ansi[colorIndex].css;
            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);
            ctx.restore();
        }
    }
    ctx.font = getFont(config.fontWeightBold, config);
    for (var colorIndex = 0; colorIndex < 16; colorIndex++) {
        var y = (colorIndex + 2 + 16) * cellHeight;
        for (var i = 0; i < 256; i++) {
            ctx.save();
            ctx.beginPath();
            ctx.rect(i * cellWidth, y, cellWidth, cellHeight);
            ctx.clip();
            ctx.fillStyle = config.colors.ansi[colorIndex].css;
            ctx.fillText(String.fromCharCode(i), i * cellWidth, y + cellHeight / 2);
            ctx.restore();
        }
    }
    ctx.restore();
    if (!('createImageBitmap' in context) || Platform_1.isFirefox || Platform_1.isSafari) {
        return canvas;
    }
    var charAtlasImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    clearColor(charAtlasImageData, config.colors.background);
    return context.createImageBitmap(charAtlasImageData);
}
exports.generateStaticCharAtlasTexture = generateStaticCharAtlasTexture;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}
exports.clearColor = clearColor;
function getFont(fontWeight, config) {
    return fontWeight + " " + config.fontSize * config.devicePixelRatio + "px " + config.fontFamily;
}


/***/ }),

/***/ "./lib/renderer/atlas/CharAtlasUtils.js":
/*!**********************************************!*\
  !*** ./lib/renderer/atlas/CharAtlasUtils.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Types_1 = __webpack_require__(/*! ./Types */ "./lib/renderer/atlas/Types.js");
function generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: null,
        cursorAccent: null,
        selection: null,
        ansi: colors.ansi.slice(0, 16)
    };
    return {
        type: terminal.options.experimentalCharAtlas,
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: terminal.options.fontFamily,
        fontSize: terminal.options.fontSize,
        fontWeight: terminal.options.fontWeight,
        fontWeightBold: terminal.options.fontWeightBold,
        allowTransparency: terminal.options.allowTransparency,
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.type === b.type &&
        a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return colorCode < Types_1.DEFAULT_COLOR;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./lib/renderer/atlas/DynamicCharAtlas.js":
/*!************************************************!*\
  !*** ./lib/renderer/atlas/DynamicCharAtlas.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Types_1 = __webpack_require__(/*! ./Types */ "./lib/renderer/atlas/Types.js");
var BaseCharAtlas_1 = __webpack_require__(/*! ./BaseCharAtlas */ "./lib/renderer/atlas/BaseCharAtlas.js");
var ColorManager_1 = __webpack_require__(/*! ../ColorManager */ "./lib/renderer/ColorManager.js");
var CharAtlasGenerator_1 = __webpack_require__(/*! ./CharAtlasGenerator */ "./lib/renderer/atlas/CharAtlasGenerator.js");
var LRUMap_1 = __webpack_require__(/*! ./LRUMap */ "./lib/renderer/atlas/LRUMap.js");
var Platform_1 = __webpack_require__(/*! ../../common/Platform */ "./lib/common/Platform.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var FRAME_CACHE_DRAW_LIMIT = 100;
var GLYPH_BITMAP_COMMIT_DELAY = 100;
function getGlyphCacheKey(glyph) {
    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);
}
exports.getGlyphCacheKey = getGlyphCacheKey;
var DynamicCharAtlas = (function (_super) {
    __extends(DynamicCharAtlas, _super);
    function DynamicCharAtlas(document, _config) {
        var _this = _super.call(this) || this;
        _this._config = _config;
        _this._drawToCacheCount = 0;
        _this._glyphsWaitingOnBitmap = [];
        _this._bitmapCommitTimeout = null;
        _this._bitmap = null;
        _this._cacheCanvas = document.createElement('canvas');
        _this._cacheCanvas.width = TEXTURE_WIDTH;
        _this._cacheCanvas.height = TEXTURE_HEIGHT;
        _this._cacheCtx = _this._cacheCanvas.getContext('2d', { alpha: true });
        var tmpCanvas = document.createElement('canvas');
        tmpCanvas.width = _this._config.scaledCharWidth;
        tmpCanvas.height = _this._config.scaledCharHeight;
        _this._tmpCtx = tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency });
        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);
        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);
        var capacity = _this._width * _this._height;
        _this._cacheMap = new LRUMap_1.default(capacity);
        _this._cacheMap.prealloc(capacity);
        return _this;
    }
    DynamicCharAtlas.prototype.dispose = function () {
        if (this._bitmapCommitTimeout !== null) {
            window.clearTimeout(this._bitmapCommitTimeout);
            this._bitmapCommitTimeout = null;
        }
    };
    DynamicCharAtlas.prototype.beginFrame = function () {
        this._drawToCacheCount = 0;
    };
    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        if (glyph.code === 32) {
            return true;
        }
        if (!this._canCache(glyph)) {
            return false;
        }
        var glyphKey = getGlyphCacheKey(glyph);
        var cacheValue = this._cacheMap.get(glyphKey);
        if (cacheValue !== null && cacheValue !== undefined) {
            this._drawFromCache(ctx, cacheValue, x, y);
            return true;
        }
        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {
            var index = void 0;
            if (this._cacheMap.size < this._cacheMap.capacity) {
                index = this._cacheMap.size;
            }
            else {
                index = this._cacheMap.peek().index;
            }
            var cacheValue_1 = this._drawToCache(glyph, index);
            this._cacheMap.set(glyphKey, cacheValue_1);
            this._drawFromCache(ctx, cacheValue_1, x, y);
            return true;
        }
        return false;
    };
    DynamicCharAtlas.prototype._canCache = function (glyph) {
        return glyph.code < 256;
    };
    DynamicCharAtlas.prototype._toCoordinateX = function (index) {
        return (index % this._width) * this._config.scaledCharWidth;
    };
    DynamicCharAtlas.prototype._toCoordinateY = function (index) {
        return Math.floor(index / this._width) * this._config.scaledCharHeight;
    };
    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {
        if (cacheValue.isEmpty) {
            return;
        }
        var cacheX = this._toCoordinateX(cacheValue.index);
        var cacheY = this._toCoordinateY(cacheValue.index);
        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);
    };
    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx < this._config.colors.ansi.length) {
            return this._config.colors.ansi[idx];
        }
        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];
    };
    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        else if (glyph.bg === Types_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.foreground;
        }
        else if (glyph.bg < 256) {
            return this._getColorFromAnsiIndex(glyph.bg);
        }
        return this._config.colors.background;
    };
    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {
        if (glyph.fg === Types_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.background;
        }
        else if (glyph.fg < 256) {
            return this._getColorFromAnsiIndex(glyph.fg);
        }
        return this._config.colors.foreground;
    };
    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {
        this._drawToCacheCount++;
        this._tmpCtx.save();
        var backgroundColor = this._getBackgroundColor(glyph);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = glyph.italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'middle';
        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;
        if (glyph.dim) {
            this._tmpCtx.globalAlpha = Types_1.DIM_OPACITY;
        }
        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        var isEmpty = false;
        if (!this._config.allowTransparency) {
            isEmpty = CharAtlasGenerator_1.clearColor(imageData, backgroundColor);
        }
        var x = this._toCoordinateX(index);
        var y = this._toCoordinateY(index);
        this._cacheCtx.putImageData(imageData, x, y);
        var cacheValue = {
            index: index,
            isEmpty: isEmpty,
            inBitmap: false
        };
        this._addGlyphToBitmap(cacheValue);
        return cacheValue;
    };
    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {
        var _this = this;
        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {
            return;
        }
        this._glyphsWaitingOnBitmap.push(cacheValue);
        if (this._bitmapCommitTimeout !== null) {
            return;
        }
        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);
    };
    DynamicCharAtlas.prototype._generateBitmap = function () {
        var _this = this;
        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;
        this._glyphsWaitingOnBitmap = [];
        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {
            _this._bitmap = bitmap;
            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {
                var value = glyphsMovingToBitmap[i];
                value.inBitmap = true;
            }
        });
        this._bitmapCommitTimeout = null;
    };
    return DynamicCharAtlas;
}(BaseCharAtlas_1.default));
exports.default = DynamicCharAtlas;


/***/ }),

/***/ "./lib/renderer/atlas/LRUMap.js":
/*!**************************************!*\
  !*** ./lib/renderer/atlas/LRUMap.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LRUMap = (function () {
    function LRUMap(capacity) {
        this.capacity = capacity;
        this._map = {};
        this._head = null;
        this._tail = null;
        this._nodePool = [];
        this.size = 0;
    }
    LRUMap.prototype._unlinkNode = function (node) {
        var prev = node.prev;
        var next = node.next;
        if (node === this._head) {
            this._head = next;
        }
        if (node === this._tail) {
            this._tail = prev;
        }
        if (prev !== null) {
            prev.next = next;
        }
        if (next !== null) {
            next.prev = prev;
        }
    };
    LRUMap.prototype._appendNode = function (node) {
        var tail = this._tail;
        if (tail !== null) {
            tail.next = node;
        }
        node.prev = tail;
        node.next = null;
        this._tail = node;
        if (this._head === null) {
            this._head = node;
        }
    };
    LRUMap.prototype.prealloc = function (count) {
        var nodePool = this._nodePool;
        for (var i = 0; i < count; i++) {
            nodePool.push({
                prev: null,
                next: null,
                key: null,
                value: null
            });
        }
    };
    LRUMap.prototype.get = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            this._unlinkNode(node);
            this._appendNode(node);
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peekValue = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peek = function () {
        var head = this._head;
        return head === null ? null : head.value;
    };
    LRUMap.prototype.set = function (key, value) {
        var node = this._map[key];
        if (node !== undefined) {
            node = this._map[key];
            this._unlinkNode(node);
            node.value = value;
        }
        else if (this.size >= this.capacity) {
            node = this._head;
            this._unlinkNode(node);
            delete this._map[node.key];
            node.key = key;
            node.value = value;
            this._map[key] = node;
        }
        else {
            var nodePool = this._nodePool;
            if (nodePool.length > 0) {
                node = nodePool.pop();
                node.key = key;
                node.value = value;
            }
            else {
                node = {
                    prev: null,
                    next: null,
                    key: key,
                    value: value
                };
            }
            this._map[key] = node;
            this.size++;
        }
        this._appendNode(node);
    };
    return LRUMap;
}());
exports.default = LRUMap;


/***/ }),

/***/ "./lib/renderer/atlas/NoneCharAtlas.js":
/*!*********************************************!*\
  !*** ./lib/renderer/atlas/NoneCharAtlas.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseCharAtlas_1 = __webpack_require__(/*! ./BaseCharAtlas */ "./lib/renderer/atlas/BaseCharAtlas.js");
var NoneCharAtlas = (function (_super) {
    __extends(NoneCharAtlas, _super);
    function NoneCharAtlas(document, config) {
        return _super.call(this) || this;
    }
    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        return false;
    };
    return NoneCharAtlas;
}(BaseCharAtlas_1.default));
exports.default = NoneCharAtlas;


/***/ }),

/***/ "./lib/renderer/atlas/StaticCharAtlas.js":
/*!***********************************************!*\
  !*** ./lib/renderer/atlas/StaticCharAtlas.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Types_1 = __webpack_require__(/*! ./Types */ "./lib/renderer/atlas/Types.js");
var CharAtlasGenerator_1 = __webpack_require__(/*! ./CharAtlasGenerator */ "./lib/renderer/atlas/CharAtlasGenerator.js");
var BaseCharAtlas_1 = __webpack_require__(/*! ./BaseCharAtlas */ "./lib/renderer/atlas/BaseCharAtlas.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ./CharAtlasUtils */ "./lib/renderer/atlas/CharAtlasUtils.js");
var StaticCharAtlas = (function (_super) {
    __extends(StaticCharAtlas, _super);
    function StaticCharAtlas(_document, _config) {
        var _this = _super.call(this) || this;
        _this._document = _document;
        _this._config = _config;
        _this._canvasFactory = function (width, height) {
            var canvas = _this._document.createElement('canvas');
            canvas.width = width;
            canvas.height = height;
            return canvas;
        };
        return _this;
    }
    StaticCharAtlas.prototype._doWarmUp = function () {
        var _this = this;
        var result = CharAtlasGenerator_1.generateStaticCharAtlasTexture(window, this._canvasFactory, this._config);
        if (result instanceof HTMLCanvasElement) {
            this._texture = result;
        }
        else {
            result.then(function (texture) {
                _this._texture = texture;
            });
        }
    };
    StaticCharAtlas.prototype._isCached = function (glyph, colorIndex) {
        var isAscii = glyph.code < 256;
        var isBasicColor = glyph.fg < 16;
        var isDefaultColor = glyph.fg === Types_1.DEFAULT_COLOR;
        var isDefaultBackground = glyph.bg === Types_1.DEFAULT_COLOR;
        return isAscii && (isBasicColor || isDefaultColor) && isDefaultBackground && !glyph.italic;
    };
    StaticCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        if (this._texture === null || this._texture === undefined) {
            return false;
        }
        var colorIndex = 0;
        if (CharAtlasUtils_1.is256Color(glyph.fg)) {
            colorIndex = 2 + glyph.fg + (glyph.bold ? 16 : 0);
        }
        else if (glyph.fg === Types_1.DEFAULT_COLOR) {
            if (glyph.bold) {
                colorIndex = 1;
            }
        }
        if (!this._isCached(glyph, colorIndex)) {
            return false;
        }
        ctx.save();
        var charAtlasCellWidth = this._config.scaledCharWidth + Types_1.CHAR_ATLAS_CELL_SPACING;
        var charAtlasCellHeight = this._config.scaledCharHeight + Types_1.CHAR_ATLAS_CELL_SPACING;
        if (glyph.dim) {
            ctx.globalAlpha = Types_1.DIM_OPACITY;
        }
        ctx.drawImage(this._texture, glyph.code * charAtlasCellWidth, colorIndex * charAtlasCellHeight, charAtlasCellWidth, this._config.scaledCharHeight, x, y, charAtlasCellWidth, this._config.scaledCharHeight);
        ctx.restore();
        return true;
    };
    return StaticCharAtlas;
}(BaseCharAtlas_1.default));
exports.default = StaticCharAtlas;


/***/ }),

/***/ "./lib/renderer/atlas/Types.js":
/*!*************************************!*\
  !*** ./lib/renderer/atlas/Types.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.DEFAULT_COLOR = 256;
exports.INVERTED_DEFAULT_COLOR = 257;
exports.DIM_OPACITY = 0.5;
exports.CHAR_ATLAS_CELL_SPACING = 1;


/***/ }),

/***/ "./lib/renderer/dom/DomRenderer.js":
/*!*****************************************!*\
  !*** ./lib/renderer/dom/DomRenderer.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ColorManager_1 = __webpack_require__(/*! ../ColorManager */ "./lib/renderer/ColorManager.js");
var RenderDebouncer_1 = __webpack_require__(/*! ../../ui/RenderDebouncer */ "./lib/ui/RenderDebouncer.js");
var DomRendererRowFactory_1 = __webpack_require__(/*! ./DomRendererRowFactory */ "./lib/renderer/dom/DomRendererRowFactory.js");
var Types_1 = __webpack_require__(/*! ../atlas/Types */ "./lib/renderer/atlas/Types.js");
var EventEmitter2_1 = __webpack_require__(/*! ../../common/EventEmitter2 */ "./lib/common/EventEmitter2.js");
var Lifecycle_1 = __webpack_require__(/*! ../../common/Lifecycle */ "./lib/common/Lifecycle.js");
var TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';
var ROW_CONTAINER_CLASS = 'xterm-rows';
var FG_CLASS_PREFIX = 'xterm-fg-';
var BG_CLASS_PREFIX = 'xterm-bg-';
var FOCUS_CLASS = 'xterm-focus';
var SELECTION_CLASS = 'xterm-selection';
var nextTerminalId = 1;
var DomRenderer = (function (_super) {
    __extends(DomRenderer, _super);
    function DomRenderer(_terminal, theme) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._terminalClass = nextTerminalId++;
        _this._rowElements = [];
        _this._onCanvasResize = new EventEmitter2_1.EventEmitter2();
        _this._onRender = new EventEmitter2_1.EventEmitter2();
        var allowTransparency = _this._terminal.options.allowTransparency;
        _this.colorManager = new ColorManager_1.ColorManager(document, allowTransparency);
        _this.setTheme(theme);
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);
        _this._rowContainer.style.lineHeight = 'normal';
        _this._rowContainer.setAttribute('aria-hidden', 'true');
        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);
        _this._selectionContainer = document.createElement('div');
        _this._selectionContainer.classList.add(SELECTION_CLASS);
        _this._selectionContainer.setAttribute('aria-hidden', 'true');
        _this.dimensions = {
            scaledCharWidth: null,
            scaledCharHeight: null,
            scaledCellWidth: null,
            scaledCellHeight: null,
            scaledCharLeft: null,
            scaledCharTop: null,
            scaledCanvasWidth: null,
            scaledCanvasHeight: null,
            canvasWidth: null,
            canvasHeight: null,
            actualCellWidth: null,
            actualCellHeight: null
        };
        _this._updateDimensions();
        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));
        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(_terminal.options, document);
        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);
        _this._terminal.screenElement.appendChild(_this._rowContainer);
        _this._terminal.screenElement.appendChild(_this._selectionContainer);
        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    Object.defineProperty(DomRenderer.prototype, "onCanvasResize", {
        get: function () { return this._onCanvasResize.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DomRenderer.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    DomRenderer.prototype.dispose = function () {
        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);
        this._terminal.screenElement.removeChild(this._rowContainer);
        this._terminal.screenElement.removeChild(this._selectionContainer);
        this._terminal.screenElement.removeChild(this._themeStyleElement);
        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);
        _super.prototype.dispose.call(this);
    };
    DomRenderer.prototype._updateDimensions = function () {
        var _this = this;
        this.dimensions.scaledCharWidth = Math.floor(this._terminal.charMeasure.width * window.devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._terminal.charMeasure.height * window.devicePixelRatio);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);
        this.dimensions.scaledCharLeft = 0;
        this.dimensions.scaledCharTop = 0;
        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;
        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;
        this._rowElements.forEach(function (element) {
            element.style.width = _this.dimensions.canvasWidth + "px";
            element.style.height = _this.dimensions.actualCellHeight + "px";
            element.style.lineHeight = _this.dimensions.actualCellHeight + "px";
            element.style.overflow = 'hidden';
        });
        if (!this._dimensionsStyleElement) {
            this._dimensionsStyleElement = document.createElement('style');
            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " span {" +
            " display: inline-block;" +
            " height: 100%;" +
            " vertical-align: top;" +
            (" width: " + this.dimensions.actualCellWidth + "px") +
            "}";
        this._dimensionsStyleElement.innerHTML = styles;
        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;
        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    DomRenderer.prototype.setTheme = function (theme) {
        var _this = this;
        if (theme) {
            this.colorManager.setTheme(theme);
        }
        if (!this._themeStyleElement) {
            this._themeStyleElement = document.createElement('style');
            this._terminal.screenElement.appendChild(this._themeStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " {" +
            (" color: " + this.colorManager.colors.foreground.css + ";") +
            (" background-color: " + this.colorManager.colors.background.css + ";") +
            (" font-family: " + this._terminal.getOption('fontFamily') + ";") +
            (" font-size: " + this._terminal.getOption('fontSize') + "px;") +
            "}";
        styles +=
            this._terminalSelector + " span:not(." + DomRendererRowFactory_1.BOLD_CLASS + ") {" +
                (" font-weight: " + this._terminal.options.fontWeight + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.BOLD_CLASS + " {") +
                (" font-weight: " + this._terminal.options.fontWeightBold + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.ITALIC_CLASS + " {") +
                " font-style: italic;" +
                "}";
        styles +=
            "@keyframes blink {" +
                " 0% { opacity: 1.0; }" +
                " 50% { opacity: 0.0; }" +
                " 100% { opacity: 1.0; }" +
                "}";
        styles +=
            this._terminalSelector + " ." + ROW_CONTAINER_CLASS + ":not(." + FOCUS_CLASS + ") ." + DomRendererRowFactory_1.CURSOR_CLASS + " {" +
                (" outline: 1px solid " + this.colorManager.colors.cursor.css + ";") +
                " outline-offset: -1px;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + " {") +
                " animation: blink 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                (" background-color: " + this.colorManager.colors.cursor.css + ";") +
                (" color: " + this.colorManager.colors.cursorAccent.css + ";") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + " {") +
                (" box-shadow: 1px 0 0 " + this.colorManager.colors.cursor.css + " inset;") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + " {") +
                (" box-shadow: 0 -1px 0 " + this.colorManager.colors.cursor.css + " inset;") +
                "}";
        styles +=
            this._terminalSelector + " ." + SELECTION_CLASS + " {" +
                " position: absolute;" +
                " top: 0;" +
                " left: 0;" +
                " z-index: 1;" +
                " pointer-events: none;" +
                "}" +
                (this._terminalSelector + " ." + SELECTION_CLASS + " div {") +
                " position: absolute;" +
                (" background-color: " + this.colorManager.colors.selection.css + ";") +
                "}";
        this.colorManager.colors.ansi.forEach(function (c, i) {
            styles +=
                _this._terminalSelector + " ." + FG_CLASS_PREFIX + i + " { color: " + c.css + "; }" +
                    (_this._terminalSelector + " ." + BG_CLASS_PREFIX + i + " { background-color: " + c.css + "; }");
        });
        styles +=
            this._terminalSelector + " ." + FG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + " { color: " + this.colorManager.colors.background.css + "; }" +
                (this._terminalSelector + " ." + BG_CLASS_PREFIX + Types_1.INVERTED_DEFAULT_COLOR + " { background-color: " + this.colorManager.colors.foreground.css + "; }");
        this._themeStyleElement.innerHTML = styles;
        return this.colorManager.colors;
    };
    DomRenderer.prototype.onWindowResize = function (devicePixelRatio) {
        this._updateDimensions();
    };
    DomRenderer.prototype._refreshRowElements = function (cols, rows) {
        for (var i = this._rowElements.length; i <= rows; i++) {
            var row = document.createElement('div');
            this._rowContainer.appendChild(row);
            this._rowElements.push(row);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
    };
    DomRenderer.prototype.onResize = function (cols, rows) {
        this._refreshRowElements(cols, rows);
        this._updateDimensions();
        this._onCanvasResize.fire({
            width: this.dimensions.canvasWidth,
            height: this.dimensions.canvasHeight
        });
    };
    DomRenderer.prototype.onCharSizeChanged = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype.onBlur = function () {
        this._rowContainer.classList.remove(FOCUS_CLASS);
    };
    DomRenderer.prototype.onFocus = function () {
        this._rowContainer.classList.add(FOCUS_CLASS);
    };
    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        while (this._selectionContainer.children.length) {
            this._selectionContainer.removeChild(this._selectionContainer.children[0]);
        }
        if (!start || !end) {
            return;
        }
        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;
        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);
        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {
            return;
        }
        var documentFragment = document.createDocumentFragment();
        if (columnSelectMode) {
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));
            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;
                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));
            }
        }
        this._selectionContainer.appendChild(documentFragment);
    };
    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {
        if (rowCount === void 0) { rowCount = 1; }
        var element = document.createElement('div');
        element.style.height = rowCount * this.dimensions.actualCellHeight + "px";
        element.style.top = row * this.dimensions.actualCellHeight + "px";
        element.style.left = colStart * this.dimensions.actualCellWidth + "px";
        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + "px";
        return element;
    };
    DomRenderer.prototype.onCursorMove = function () {
    };
    DomRenderer.prototype.onOptionsChanged = function () {
        this._updateDimensions();
        this.setTheme(undefined);
        this._terminal.refresh(0, this._terminal.rows - 1);
    };
    DomRenderer.prototype.clear = function () {
        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });
    };
    DomRenderer.prototype.refreshRows = function (start, end) {
        this._renderDebouncer.refresh(start, end, this._terminal.rows);
    };
    DomRenderer.prototype._renderRows = function (start, end) {
        var terminal = this._terminal;
        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;
        var cursorX = this._terminal.buffer.x;
        var cursorBlink = this._terminal.options.cursorBlink;
        for (var y = start; y <= end; y++) {
            var rowElement = this._rowElements[y];
            rowElement.innerHTML = '';
            var row = y + terminal.buffer.ydisp;
            var lineData = terminal.buffer.lines.get(row);
            var cursorStyle = terminal.options.cursorStyle;
            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));
        }
        this._onRender.fire({ start: start, end: end });
    };
    Object.defineProperty(DomRenderer.prototype, "_terminalSelector", {
        get: function () {
            return "." + TERMINAL_CLASS_PREFIX + this._terminalClass;
        },
        enumerable: true,
        configurable: true
    });
    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };
    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };
    DomRenderer.prototype._onLinkHover = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);
    };
    DomRenderer.prototype._onLinkLeave = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);
    };
    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {
        while (x !== x2 || y !== y2) {
            var row = this._rowElements[y];
            if (!row) {
                return;
            }
            var span = row.children[x];
            if (span) {
                span.style.textDecoration = enabled ? 'underline' : 'none';
            }
            if (++x >= cols) {
                x = 0;
                y++;
            }
        }
    };
    return DomRenderer;
}(Lifecycle_1.Disposable));
exports.DomRenderer = DomRenderer;


/***/ }),

/***/ "./lib/renderer/dom/DomRendererRowFactory.js":
/*!***************************************************!*\
  !*** ./lib/renderer/dom/DomRendererRowFactory.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! ../../Buffer */ "./lib/Buffer.js");
var Types_1 = __webpack_require__(/*! ../atlas/Types */ "./lib/renderer/atlas/Types.js");
var BufferLine_1 = __webpack_require__(/*! ../../BufferLine */ "./lib/BufferLine.js");
exports.BOLD_CLASS = 'xterm-bold';
exports.DIM_CLASS = 'xterm-dim';
exports.ITALIC_CLASS = 'xterm-italic';
exports.UNDERLINE_CLASS = 'xterm-underline';
exports.CURSOR_CLASS = 'xterm-cursor';
exports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';
exports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';
exports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';
exports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';
var DomRendererRowFactory = (function () {
    function DomRendererRowFactory(_terminalOptions, _document) {
        this._terminalOptions = _terminalOptions;
        this._document = _document;
        this._workCell = new BufferLine_1.CellData();
    }
    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {
        var fragment = this._document.createDocumentFragment();
        var lineLength = 0;
        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {
            if (lineData.loadCell(x, this._workCell).getCode() !== Buffer_1.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {
                lineLength = x + 1;
                break;
            }
        }
        for (var x = 0; x < lineLength; x++) {
            lineData.loadCell(x, this._workCell);
            var width = this._workCell.getWidth();
            if (width === 0) {
                continue;
            }
            var charElement = this._document.createElement('span');
            if (width > 1) {
                charElement.style.width = cellWidth * width + "px";
            }
            if (isCursorRow && x === cursorX) {
                charElement.classList.add(exports.CURSOR_CLASS);
                if (cursorBlink) {
                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);
                }
                switch (cursorStyle) {
                    case 'bar':
                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);
                        break;
                    case 'underline':
                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);
                        break;
                    default:
                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);
                        break;
                }
            }
            if (this._workCell.isBold() && this._terminalOptions.enableBold) {
                charElement.classList.add(exports.BOLD_CLASS);
            }
            if (this._workCell.isItalic()) {
                charElement.classList.add(exports.ITALIC_CLASS);
            }
            if (this._workCell.isDim()) {
                charElement.classList.add(exports.DIM_CLASS);
            }
            if (this._workCell.isUnderline()) {
                charElement.classList.add(exports.UNDERLINE_CLASS);
            }
            charElement.textContent = this._workCell.getChars() || Buffer_1.WHITESPACE_CELL_CHAR;
            var swapColor = this._workCell.isInverse();
            if (this._workCell.isFgRGB()) {
                var style = charElement.getAttribute('style') || '';
                style += (swapColor ? 'background-' : '') + "color:rgb(" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + ");";
                charElement.setAttribute('style', style);
            }
            else if (this._workCell.isFgPalette()) {
                var fg = this._workCell.getFgColor();
                if (this._workCell.isBold() && fg < 8 && !swapColor &&
                    this._terminalOptions.enableBold && this._terminalOptions.drawBoldTextInBrightColors) {
                    fg += 8;
                }
                charElement.classList.add("xterm-" + (swapColor ? 'b' : 'f') + "g-" + fg);
            }
            else if (swapColor) {
                charElement.classList.add("xterm-bg-" + Types_1.INVERTED_DEFAULT_COLOR);
            }
            if (this._workCell.isBgRGB()) {
                var style = charElement.getAttribute('style') || '';
                style += (swapColor ? '' : 'background-') + "color:rgb(" + (BufferLine_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + ");";
                charElement.setAttribute('style', style);
            }
            else if (this._workCell.isBgPalette()) {
                charElement.classList.add("xterm-" + (swapColor ? 'f' : 'b') + "g-" + this._workCell.getBgColor());
            }
            else if (swapColor) {
                charElement.classList.add("xterm-fg-" + Types_1.INVERTED_DEFAULT_COLOR);
            }
            fragment.appendChild(charElement);
        }
        return fragment;
    };
    return DomRendererRowFactory;
}());
exports.DomRendererRowFactory = DomRendererRowFactory;


/***/ }),

/***/ "./lib/ui/Lifecycle.js":
/*!*****************************!*\
  !*** ./lib/ui/Lifecycle.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function addDisposableDomListener(node, type, handler, useCapture) {
    node.addEventListener(type, handler, useCapture);
    return {
        dispose: function () {
            if (!handler) {
                return;
            }
            node.removeEventListener(type, handler, useCapture);
        }
    };
}
exports.addDisposableDomListener = addDisposableDomListener;


/***/ }),

/***/ "./lib/ui/RenderDebouncer.js":
/*!***********************************!*\
  !*** ./lib/ui/RenderDebouncer.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var RenderDebouncer = (function () {
    function RenderDebouncer(_renderCallback) {
        this._renderCallback = _renderCallback;
    }
    RenderDebouncer.prototype.dispose = function () {
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {
        var _this = this;
        this._rowCount = rowCount;
        rowStart = rowStart !== undefined ? rowStart : 0;
        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;
        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;
        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;
        if (this._animationFrame) {
            return;
        }
        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });
    };
    RenderDebouncer.prototype._innerRefresh = function () {
        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {
            return;
        }
        this._rowStart = Math.max(this._rowStart, 0);
        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);
        this._renderCallback(this._rowStart, this._rowEnd);
        this._rowStart = undefined;
        this._rowEnd = undefined;
        this._animationFrame = undefined;
    };
    return RenderDebouncer;
}());
exports.RenderDebouncer = RenderDebouncer;


/***/ }),

/***/ "./lib/ui/ScreenDprMonitor.js":
/*!************************************!*\
  !*** ./lib/ui/ScreenDprMonitor.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! ../common/Lifecycle */ "./lib/common/Lifecycle.js");
var ScreenDprMonitor = (function (_super) {
    __extends(ScreenDprMonitor, _super);
    function ScreenDprMonitor() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._currentDevicePixelRatio = window.devicePixelRatio;
        return _this;
    }
    ScreenDprMonitor.prototype.setListener = function (listener) {
        var _this = this;
        if (this._listener) {
            this.clearListener();
        }
        this._listener = listener;
        this._outerListener = function () {
            if (!_this._listener) {
                return;
            }
            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);
            _this._updateDpr();
        };
        this._updateDpr();
    };
    ScreenDprMonitor.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this.clearListener();
    };
    ScreenDprMonitor.prototype._updateDpr = function () {
        if (!this._resolutionMediaMatchList || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._currentDevicePixelRatio = window.devicePixelRatio;
        this._resolutionMediaMatchList = window.matchMedia("screen and (resolution: " + window.devicePixelRatio + "dppx)");
        this._resolutionMediaMatchList.addListener(this._outerListener);
    };
    ScreenDprMonitor.prototype.clearListener = function () {
        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._resolutionMediaMatchList = undefined;
        this._listener = undefined;
        this._outerListener = undefined;
    };
    return ScreenDprMonitor;
}(Lifecycle_1.Disposable));
exports.ScreenDprMonitor = ScreenDprMonitor;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZGVtby9jbGllbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FjY2Vzc2liaWxpdHlNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9CdWZmZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0J1ZmZlckxpbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0J1ZmZlclJlZmxvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQnVmZmVyU2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9DaGFyTWVhc3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ2hhcldpZHRoLnRzIiwid2VicGFjazovLy8uL3NyYy9DbGlwYm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvc2l0aW9uSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9Fc2NhcGVTZXF1ZW5jZVBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9MaW5raWZpZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01vdXNlSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9Nb3VzZVpvbmVNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9TZWxlY3Rpb25NYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9TZWxlY3Rpb25Nb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvU291bmRNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9TdHJpbmdzLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXJtaW5hbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvVmlld3BvcnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1dpbmRvd3NNb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy9hZGRvbnMvYXR0YWNoL2F0dGFjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWRkb25zL2ZpdC9maXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkZG9ucy9mdWxsc2NyZWVuL2Z1bGxzY3JlZW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FkZG9ucy9zZWFyY2gvU2VhcmNoSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hZGRvbnMvc2VhcmNoL3NlYXJjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWRkb25zL3dlYkxpbmtzL3dlYkxpbmtzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vQ2lyY3VsYXJMaXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vQ2xvbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9FdmVudEVtaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9FdmVudEVtaXR0ZXIyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vTGlmZWN5Y2xlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vUGxhdGZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9UeXBlZEFycmF5VXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9kYXRhL0NoYXJzZXRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2lucHV0L0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2lucHV0L1RleHREZWNvZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9oYW5kbGVycy9BbHRDbGlja0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3B1YmxpYy9UZXJtaW5hbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9DaGFyYWN0ZXJKb2luZXJSZWdpc3RyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvQ29sb3JNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9DdXJzb3JSZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvR3JpZENhY2hlLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9MaW5rUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcmVyL1JlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9TZWxlY3Rpb25SZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvVGV4dFJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9hdGxhcy9CYXNlQ2hhckF0bGFzLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNDYWNoZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzR2VuZXJhdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvYXRsYXMvRHluYW1pY0NoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvYXRsYXMvTFJVTWFwLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9hdGxhcy9Ob25lQ2hhckF0bGFzLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9hdGxhcy9TdGF0aWNDaGFyQXRsYXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcmVyL2F0bGFzL1R5cGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcmVyL2RvbS9Eb21SZW5kZXJlclJvd0ZhY3RvcnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VpL0xpZmVjeWNsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdWkvUmVuZGVyRGVib3VuY2VyLnRzIiwid2VicGFjazov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QUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7S0FDckQsQ0FBQztJQUNGLElBQU0sY0FBYyxHQUFHO1FBQ3JCLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENB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QUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7QUFDNUIsQ0FBQyxFQXJFZ0IsRUFBRSxHQUFGLFVBQUUsS0FBRixVQUFFLFFBcUVsQjtBQU1ELElBQWlCLEVBQUUsQ0FpRWxCO0FBakVELFdBQWlCLEVBQUU7SUFFSixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFHLE1BQU0sQ0FBQztJQUVaLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUcsTUFBTSxDQUFDO0lBRVosTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsT0FBSSxHQUFHLE1BQU0sQ0FBQztJQUVkLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFHLE1BQU0sQ0FBQztJQUVaLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUcsTUFBTSxDQUFDO0lBRVosTUFBRyxHQUFHLE1BQU0sQ0FBQztBQUM1QixDQUFDLEVBakVnQixFQUFFLEdBQUYsVUFBRSxLQUFGLFVBQUUsUUFpRWxCOzs7Ozs7Ozs7Ozs7Ozs7QUN6SVksZ0JBQVEsR0FBdUMsRUFBRSxDQUFDO0FBS2xELHVCQUFlLEdBQW9CLGdCQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFZOUQsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0NBQ2QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFNRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztBQU9yQixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxJQUFJO0lBQ1QsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDO0lBQ2IsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztRQUNkLEdBQUcsRUFBRSxHQUFHO1FBQ1IsSUFBSSxFQUFFLEdBQUc7UUFDVCxHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztLQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUM7SUFDYixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO1FBQ2QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLElBQUksRUFBRSxHQUFHO1FBQ1QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUM7SUFDYixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO1FBQ2QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLElBQUksRUFBRSxHQUFHO1FBQ1QsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7S0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLElBQUksRUFBRSxHQUFHO0lBQ1QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQ3RQRiw2SEFBdUQ7QUFHdkQsSUFBTSxvQkFBb0IsR0FBdUM7SUFFL0QsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUNkLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7SUFDZCxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQ2QsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUNkLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7SUFDZCxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO0lBQ2QsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUNkLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7SUFDZCxFQUFFLEVBQUUs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QyxDQUFDO1FBQzdCLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNWLEdBQUcsRUFBRSxNQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBRztZQUUzRCxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1NBQ3RELENBQUMsQ0FBQztLQUNKO0lBR0QsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMzQixJQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNyQixJQUFNLEVBQUUsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNWLEdBQUcsRUFBRSxNQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBSTtZQUN2QixJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1NBQ3RELENBQUMsQ0FBQztLQUNKO0lBRUQsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUVMLFNBQVMsT0FBTyxDQUFDLEdBQVc7SUFDMUIsT0FBTztRQUNMLEdBQUc7UUFDSCxJQUFJLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUk7S0FDN0MsQ0FBQztBQUNKLENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FBQyxDQUFTO0lBQzVCLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDekIsT0FBTyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BDLENBQUM7QUFLRDtJQUtFLHNCQUFZLFFBQWtCLEVBQVMsaUJBQTBCO1FBQTFCLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBUztRQUMvRCxJQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLHdCQUF3QixHQUFHLE1BQU0sQ0FBQztRQUM1QyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLE1BQU0sR0FBRztZQUNaLFVBQVUsRUFBRSxrQkFBa0I7WUFDOUIsVUFBVSxFQUFFLGtCQUFrQjtZQUM5QixNQUFNLEVBQUUsY0FBYztZQUN0QixZQUFZLEVBQUUscUJBQXFCO1lBQ25DLFNBQVMsRUFBRSxpQkFBaUI7WUFDNUIsSUFBSSxFQUFFLDJCQUFtQixDQUFDLEtBQUssRUFBRTtTQUNsQyxDQUFDO0lBQ0osQ0FBQztJQU9NLCtCQUFRLEdBQWYsVUFBZ0IsS0FBYTtRQUMzQixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztRQUNoRixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztRQUNoRixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzFFLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxxQkFBcUIsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM3RixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDbkYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLDJCQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLDJCQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEYsSUFBSSxDQUFDLE1B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bnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9kZW1vL2NsaWVudC50c1wiKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogVGhpcyBmaWxlIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgYnJvd3NlcmlmeS5cbiAqL1xuXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy94dGVybS5kLnRzXCIvPlxuXG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJy4uL2xpYi9wdWJsaWMvVGVybWluYWwnO1xuaW1wb3J0ICogYXMgYXR0YWNoIGZyb20gJy4uL2xpYi9hZGRvbnMvYXR0YWNoL2F0dGFjaCc7XG5pbXBvcnQgKiBhcyBmaXQgZnJvbSAnLi4vbGliL2FkZG9ucy9maXQvZml0JztcbmltcG9ydCAqIGFzIGZ1bGxzY3JlZW4gZnJvbSAnLi4vbGliL2FkZG9ucy9mdWxsc2NyZWVuL2Z1bGxzY3JlZW4nO1xuaW1wb3J0ICogYXMgc2VhcmNoIGZyb20gJy4uL2xpYi9hZGRvbnMvc2VhcmNoL3NlYXJjaCc7XG5pbXBvcnQgKiBhcyB3ZWJMaW5rcyBmcm9tICcuLi9saWIvYWRkb25zL3dlYkxpbmtzL3dlYkxpbmtzJztcbmltcG9ydCB7IElTZWFyY2hPcHRpb25zIH0gZnJvbSAnLi4vbGliL2FkZG9ucy9zZWFyY2gvSW50ZXJmYWNlcyc7XG5cbi8vIFB1bGxpbmcgaW4gdGhlIG1vZHVsZSdzIHR5cGVzIHJlbGllcyBvbiB0aGUgPHJlZmVyZW5jZT4gYWJvdmUsIGl0J3MgbG9va3MgYVxuLy8gbGl0dGxlIHdlaXJkIGhlcmUgYXMgd2UncmUgaW1wb3J0aW5nIFwidGhpc1wiIG1vZHVsZVxuaW1wb3J0IHsgVGVybWluYWwgYXMgVGVybWluYWxUeXBlLCBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElXaW5kb3dXaXRoVGVybWluYWwgZXh0ZW5kcyBXaW5kb3cge1xuICB0ZXJtOiBUZXJtaW5hbFR5cGU7XG59XG5kZWNsYXJlIGxldCB3aW5kb3c6IElXaW5kb3dXaXRoVGVybWluYWw7XG5cblRlcm1pbmFsLmFwcGx5QWRkb24oYXR0YWNoKTtcblRlcm1pbmFsLmFwcGx5QWRkb24oZml0KTtcblRlcm1pbmFsLmFwcGx5QWRkb24oZnVsbHNjcmVlbik7XG5UZXJtaW5hbC5hcHBseUFkZG9uKHNlYXJjaCk7XG5UZXJtaW5hbC5hcHBseUFkZG9uKHdlYkxpbmtzKTtcblxuXG5sZXQgdGVybTtcbmxldCBwcm90b2NvbDtcbmxldCBzb2NrZXRVUkw7XG5sZXQgc29ja2V0O1xubGV0IHBpZDtcblxuY29uc3QgdGVybWluYWxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVybWluYWwtY29udGFpbmVyJyk7XG5jb25zdCBhY3Rpb25FbGVtZW50cyA9IHtcbiAgZmluZE5leHQ6IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaW5kLW5leHQnKSxcbiAgZmluZFByZXZpb3VzOiA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmluZC1wcmV2aW91cycpXG59O1xuY29uc3QgcGFkZGluZ0VsZW1lbnQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFkZGluZycpO1xuXG5mdW5jdGlvbiBzZXRQYWRkaW5nKCk6IHZvaWQge1xuICB0ZXJtLmVsZW1lbnQuc3R5bGUucGFkZGluZyA9IHBhcnNlSW50KHBhZGRpbmdFbGVtZW50LnZhbHVlLCAxMCkudG9TdHJpbmcoKSArICdweCc7XG4gIHRlcm0uZml0KCk7XG59XG5cbmZ1bmN0aW9uIGdldFNlYXJjaE9wdGlvbnMoKTogSVNlYXJjaE9wdGlvbnMge1xuICByZXR1cm4ge1xuICAgIHJlZ2V4OiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2V4JykgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCxcbiAgICB3aG9sZVdvcmQ6IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2hvbGUtd29yZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQsXG4gICAgY2FzZVNlbnNpdGl2ZTogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXNlLXNlbnNpdGl2ZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWRcbiAgfTtcbn1cblxuY3JlYXRlVGVybWluYWwoKTtcblxuY29uc3QgZGlzcG9zZVJlY3JlYXRlQnV0dG9uSGFuZGxlciA9ICgpID0+IHtcbiAgLy8gSWYgdGhlIHRlcm1pbmFsIGV4aXN0cyBkaXNwb3NlIG9mIGl0LCBvdGhlcndpc2UgcmVjcmVhdGUgaXRcbiAgaWYgKHRlcm0pIHtcbiAgICB0ZXJtLmRpc3Bvc2UoKTtcbiAgICB0ZXJtID0gbnVsbDtcbiAgICB3aW5kb3cudGVybSA9IG51bGw7XG4gICAgc29ja2V0ID0gbnVsbDtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcG9zZScpLmlubmVySFRNTCA9ICdSZWNyZWF0ZSBUZXJtaW5hbCc7XG4gIH1cbiAgZWxzZSB7XG4gICAgY3JlYXRlVGVybWluYWwoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzcG9zZScpLmlubmVySFRNTCA9ICdEaXNwb3NlIHRlcm1pbmFsJztcbiAgfVxufTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3Bvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRpc3Bvc2VSZWNyZWF0ZUJ1dHRvbkhhbmRsZXIpO1xuXG5mdW5jdGlvbiBjcmVhdGVUZXJtaW5hbCgpOiB2b2lkIHtcbiAgY29uc3QgdXJsUHJlZml4ID0gJ1VSTFBSRUZJWCc7XG4gIC8vIENsZWFuIHRlcm1pbmFsXG4gIHdoaWxlICh0ZXJtaW5hbENvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICB0ZXJtaW5hbENvbnRhaW5lci5yZW1vdmVDaGlsZCh0ZXJtaW5hbENvbnRhaW5lci5jaGlsZHJlblswXSk7XG4gIH1cbiAgY29uc3QgaXNXaW5kb3dzID0gWydXaW5kb3dzJywgJ1dpbjE2JywgJ1dpbjMyJywgJ1dpbkNFJ10uaW5kZXhPZihuYXZpZ2F0b3IucGxhdGZvcm0pID49IDA7XG4gIHRlcm0gPSBuZXcgVGVybWluYWwoe1xuICAgIHdpbmRvd3NNb2RlOiBpc1dpbmRvd3NcbiAgfSBhcyBJVGVybWluYWxPcHRpb25zKTtcbiAgd2luZG93LnRlcm0gPSB0ZXJtOyAgLy8gRXhwb3NlIGB0ZXJtYCB0byB3aW5kb3cgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xuICB0ZXJtLm9uUmVzaXplKChzaXplOiB7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0pID0+IHtcbiAgICBpZiAoIXBpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb2xzID0gc2l6ZS5jb2xzO1xuICAgIGNvbnN0IHJvd3MgPSBzaXplLnJvd3M7XG4gICAgY29uc3QgdXJsID0gdXJsUHJlZml4ICsgJy90ZXJtaW5hbHMvJyArIHBpZCArICcvc2l6ZT9jb2xzPScgKyBjb2xzICsgJyZyb3dzPScgKyByb3dzO1xuXG4gICAgZmV0Y2godXJsLCB7bWV0aG9kOiAnUE9TVCd9KTtcbiAgfSk7XG4gIHByb3RvY29sID0gKGxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JykgPyAnd3NzOi8vJyA6ICd3czovLyc7XG4gIHNvY2tldFVSTCA9IHByb3RvY29sICsgbG9jYXRpb24uaG9zdG5hbWUgKyAoKGxvY2F0aW9uLnBvcnQpID8gKCc6JyArIGxvY2F0aW9uLnBvcnQpIDogJycpICsgdXJsUHJlZml4ICsgJy90ZXJtaW5hbHMvJztcblxuICB0ZXJtLm9wZW4odGVybWluYWxDb250YWluZXIpO1xuXG4gIHRlcm0ud2ViTGlua3NJbml0KCk7XG4gIHRlcm0uZml0KCk7XG4gIHRlcm0uZm9jdXMoKTtcblxuICBhZGREb21MaXN0ZW5lcihwYWRkaW5nRWxlbWVudCwgJ2NoYW5nZScsIHNldFBhZGRpbmcpO1xuXG4gIGFkZERvbUxpc3RlbmVyKGFjdGlvbkVsZW1lbnRzLmZpbmROZXh0LCAna2V5dXAnLCAoZSkgPT4ge1xuICAgIGNvbnN0IHNlYXJjaE9wdGlvbnMgPSBnZXRTZWFyY2hPcHRpb25zKCk7XG4gICAgc2VhcmNoT3B0aW9ucy5pbmNyZW1lbnRhbCA9IGUua2V5ICE9PSBgRW50ZXJgO1xuICAgIHRlcm0uZmluZE5leHQoYWN0aW9uRWxlbWVudHMuZmluZE5leHQudmFsdWUsIHNlYXJjaE9wdGlvbnMpO1xuICB9KTtcblxuICBhZGREb21MaXN0ZW5lcihhY3Rpb25FbGVtZW50cy5maW5kUHJldmlvdXMsICdrZXl1cCcsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBgRW50ZXJgKSB7XG4gICAgICB0ZXJtLmZpbmRQcmV2aW91cyhhY3Rpb25FbGVtZW50cy5maW5kUHJldmlvdXMudmFsdWUsIGdldFNlYXJjaE9wdGlvbnMoKSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBmaXQgaXMgY2FsbGVkIHdpdGhpbiBhIHNldFRpbWVvdXQsIGNvbHMgYW5kIHJvd3MgbmVlZCB0aGlzLlxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpbml0T3B0aW9ucyh0ZXJtKTtcbiAgICAvLyBUT0RPOiBDbGVhbiB0aGlzIHVwLCBvcHQtY29scy9yb3dzIGRvZXNuJ3QgZXhpc3QgYW55bW9yZVxuICAgICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LWNvbHNgKSkudmFsdWUgPSB0ZXJtLmNvbHM7XG4gICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtcm93c2ApKS52YWx1ZSA9IHRlcm0ucm93cztcbiAgICBwYWRkaW5nRWxlbWVudC52YWx1ZSA9ICcwJztcblxuICAgIC8vIFNldCB0ZXJtaW5hbCBzaXplIGFnYWluIHRvIHNldCB0aGUgc3BlY2lmaWMgZGltZW5zaW9ucyBvbiB0aGUgZGVtb1xuICAgIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuXG4gICAgZmV0Y2godXJsUHJlZml4ICsgJy90ZXJtaW5hbHM/Y29scz0nICsgdGVybS5jb2xzICsgJyZyb3dzPScgKyB0ZXJtLnJvd3MsIHttZXRob2Q6ICdQT1NUJ30pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmVzLnRleHQoKS50aGVuKChwcm9jZXNzSWQpID0+IHtcbiAgICAgICAgcGlkID0gcHJvY2Vzc0lkO1xuICAgICAgICBzb2NrZXRVUkwgKz0gcHJvY2Vzc0lkO1xuICAgICAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHNvY2tldFVSTCk7XG4gICAgICAgIHNvY2tldC5vbm9wZW4gPSBydW5SZWFsVGVybWluYWw7XG4gICAgICAgIHNvY2tldC5vbmNsb3NlID0gcnVuRmFrZVRlcm1pbmFsO1xuICAgICAgICBzb2NrZXQub25lcnJvciA9IHJ1bkZha2VUZXJtaW5hbDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9LCAwKTtcbn1cblxuZnVuY3Rpb24gcnVuUmVhbFRlcm1pbmFsKCk6IHZvaWQge1xuICB0ZXJtLmF0dGFjaChzb2NrZXQpO1xuICB0ZXJtLl9pbml0aWFsaXplZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIHJ1bkZha2VUZXJtaW5hbCgpOiB2b2lkIHtcbiAgaWYgKHRlcm0uX2luaXRpYWxpemVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdGVybS5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gIHRlcm0ucHJvbXB0ID0gKCkgPT4ge1xuICAgIHRlcm0ud3JpdGUoJ1xcclxcbiQgJyk7XG4gIH07XG5cbiAgdGVybS53cml0ZWxuKCctLSBZb2xvIFh0ZXJtIC0tJyk7XG4gIHRlcm0ud3JpdGVsbignUHJvYmxlbWUgZGUgY29ubmVjdGlvbiBhdSBzZXJ2ZXVyOiBUZW1wcyBkZSBjb25uZWN0aW9uIHRyb3AgbG9uZy4uLicpO1xuICB0ZXJtLndyaXRlbG4oJ3ZldWlsbGV6IHJlY2hhcmdlciBsYSBwYWdlLicpO1xuICB0ZXJtLndyaXRlbG4oJycpO1xuICB0ZXJtLnByb21wdCgpO1xuXG4gIHRlcm0ub25LZXkoKGU6IHsga2V5OiBzdHJpbmcsIGRvbUV2ZW50OiBLZXlib2FyZEV2ZW50IH0pID0+IHtcbiAgICBjb25zdCBldiA9IGUuZG9tRXZlbnQ7XG4gICAgY29uc3QgcHJpbnRhYmxlID0gIWV2LmFsdEtleSAmJiAhZXYuY3RybEtleSAmJiAhZXYubWV0YUtleTtcblxuICAgIGlmIChldi5rZXlDb2RlID09PSAxMykge1xuICAgICAgdGVybS5wcm9tcHQoKTtcbiAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDgpIHtcbiAgICAgLy8gRG8gbm90IGRlbGV0ZSB0aGUgcHJvbXB0XG4gICAgICBpZiAodGVybS5fY29yZS5idWZmZXIueCA+IDIpIHtcbiAgICAgICAgdGVybS53cml0ZSgnXFxiIFxcYicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJpbnRhYmxlKSB7XG4gICAgICB0ZXJtLndyaXRlKGUua2V5KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBpbml0T3B0aW9ucyh0ZXJtOiBUZXJtaW5hbFR5cGUpOiB2b2lkIHtcbiAgY29uc3QgYmxhY2tsaXN0ZWRPcHRpb25zID0gW1xuICAgIC8vIEludGVybmFsIG9ubHkgb3B0aW9uc1xuICAgICdjYW5jZWxFdmVudHMnLFxuICAgICdjb252ZXJ0RW9sJyxcbiAgICAnZGVidWcnLFxuICAgICdoYW5kbGVyJyxcbiAgICAnc2NyZWVuS2V5cycsXG4gICAgJ3Rlcm1OYW1lJyxcbiAgICAndXNlRmxvd0NvbnRyb2wnLFxuICAgIC8vIENvbXBsZXggb3B0aW9uXG4gICAgJ3RoZW1lJ1xuICBdO1xuICBjb25zdCBzdHJpbmdPcHRpb25zID0ge1xuICAgIGJlbGxTb3VuZDogbnVsbCxcbiAgICBiZWxsU3R5bGU6IFsnbm9uZScsICdzb3VuZCddLFxuICAgIGN1cnNvclN0eWxlOiBbJ2Jsb2NrJywgJ3VuZGVybGluZScsICdiYXInXSxcbiAgICBleHBlcmltZW50YWxDaGFyQXRsYXM6IFsnbm9uZScsICdzdGF0aWMnLCAnZHluYW1pYyddLFxuICAgIGZvbnRGYW1pbHk6IG51bGwsXG4gICAgZm9udFdlaWdodDogWydub3JtYWwnLCAnYm9sZCcsICcxMDAnLCAnMjAwJywgJzMwMCcsICc0MDAnLCAnNTAwJywgJzYwMCcsICc3MDAnLCAnODAwJywgJzkwMCddLFxuICAgIGZvbnRXZWlnaHRCb2xkOiBbJ25vcm1hbCcsICdib2xkJywgJzEwMCcsICcyMDAnLCAnMzAwJywgJzQwMCcsICc1MDAnLCAnNjAwJywgJzcwMCcsICc4MDAnLCAnOTAwJ10sXG4gICAgcmVuZGVyZXJUeXBlOiBbJ2RvbScsICdjYW52YXMnXVxuICB9O1xuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmtleXMoKDxhbnk+dGVybSkuX2NvcmUub3B0aW9ucyk7XG4gIGNvbnN0IGJvb2xlYW5PcHRpb25zID0gW107XG4gIGNvbnN0IG51bWJlck9wdGlvbnMgPSBbXTtcbiAgb3B0aW9ucy5maWx0ZXIobyA9PiBibGFja2xpc3RlZE9wdGlvbnMuaW5kZXhPZihvKSA9PT0gLTEpLmZvckVhY2gobyA9PiB7XG4gICAgc3dpdGNoICh0eXBlb2YgdGVybS5nZXRPcHRpb24obykpIHtcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAvLyBib29sZWFuT3B0aW9ucy5wdXNoKG8pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIGlmICggKG8gPT09ICdjb2xzJykgfHwgKG8gPT09ICdyb3dzJykgfHwgKG8gPT09ICdmb250U2l6ZScpKSB7XG4gICAgICAgICAgbnVtYmVyT3B0aW9ucy5wdXNoKG8pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoc3RyaW5nT3B0aW9ucykuaW5kZXhPZihvKSA9PT0gLTEpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFVucmVjb2duaXplZCBvcHRpb246IFwiJHtvfVwiYCk7XG4gICAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGxldCBodG1sID0gJyc7XG4gIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJvcHRpb24tZ3JvdXBcIj4nO1xuXG5cbiAgYm9vbGVhbk9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwib3B0aW9uXCI+PGxhYmVsPjxpbnB1dCBpZD1cIm9wdC0ke299XCIgdHlwZT1cImNoZWNrYm94XCIgJHt0ZXJtLmdldE9wdGlvbihvKSA/ICdjaGVja2VkJyA6ICcnfS8+ICR7b308L2xhYmVsPjwvZGl2PmA7XG4gIH0pO1xuICBodG1sICs9ICc8L2Rpdj48ZGl2IGNsYXNzPVwib3B0aW9uLWdyb3VwXCI+JztcbiAgbnVtYmVyT3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8aW5wdXQgaWQ9XCJvcHQtJHtvfVwiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIiR7dGVybS5nZXRPcHRpb24obyl9XCIgc3RlcD1cIiR7byA9PT0gJ2xpbmVIZWlnaHQnID8gJzAuMScgOiAnMSd9XCIvPjwvbGFiZWw+PC9kaXY+YDtcbiAgfSk7XG5cbiAgLypcbiAgaHRtbCArPSAnPC9kaXY+PGRpdiBjbGFzcz1cIm9wdGlvbi1ncm91cFwiPic7XG4gIE9iamVjdC5rZXlzKHN0cmluZ09wdGlvbnMpLmZvckVhY2gobyA9PiB7XG4gICAgaWYgKHN0cmluZ09wdGlvbnNbb10pIHtcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8c2VsZWN0IGlkPVwib3B0LSR7b31cIj4ke3N0cmluZ09wdGlvbnNbb10ubWFwKHYgPT4gYDxvcHRpb24gJHt0ZXJtLmdldE9wdGlvbihvKSA9PT0gdiA/ICdzZWxlY3RlZCcgOiAnJ30+JHt2fTwvb3B0aW9uPmApLmpvaW4oJycpfTwvc2VsZWN0PjwvbGFiZWw+PC9kaXY+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cIm9wdGlvblwiPjxsYWJlbD4ke299IDxpbnB1dCBpZD1cIm9wdC0ke299XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiR7dGVybS5nZXRPcHRpb24obyl9XCIvPjwvbGFiZWw+PC9kaXY+YDtcbiAgICB9XG4gIH0pO1xuKi9cblxuICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcHRpb25zLWNvbnRhaW5lcicpO1xuICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDtcblxuICAvLyBBdHRhY2ggbGlzdGVuZXJzXG5cbiAgYm9vbGVhbk9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBjb25zdCBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtJHtvfWApO1xuICAgIGFkZERvbUxpc3RlbmVyKGlucHV0LCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2NoYW5nZScsIG8sIGlucHV0LmNoZWNrZWQpO1xuICAgICAgdGVybS5zZXRPcHRpb24obywgaW5wdXQuY2hlY2tlZCk7XG4gICAgfSk7XG4gIH0pO1xuICBudW1iZXJPcHRpb25zLmZvckVhY2gobyA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgb3B0LSR7b31gKTtcbiAgICBhZGREb21MaXN0ZW5lcihpbnB1dCwgJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2UnLCBvLCBpbnB1dC52YWx1ZSk7XG4gICAgICBpZiAobyA9PT0gJ2NvbHMnIHx8IG8gPT09ICdyb3dzJykge1xuICAgICAgICB1cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRlcm0uc2V0T3B0aW9uKG8sIG8gPT09ICdsaW5lSGVpZ2h0JyA/IHBhcnNlRmxvYXQoaW5wdXQudmFsdWUpIDogcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICAvKlxuICBPYmplY3Qua2V5cyhzdHJpbmdPcHRpb25zKS5mb3JFYWNoKG8gPT4ge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC0ke299YCk7XG4gICAgYWRkRG9tTGlzdGVuZXIoaW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY2hhbmdlJywgbywgaW5wdXQudmFsdWUpO1xuICAgICAgdGVybS5zZXRPcHRpb24obywgaW5wdXQudmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbiAgKi9cblxuXG5cbn1cblxuZnVuY3Rpb24gYWRkRG9tTGlzdGVuZXIoZWxlbWVudDogSFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgaGFuZGxlcjogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkpOiB2b2lkIHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICB0ZXJtLl9jb3JlLnJlZ2lzdGVyKHsgZGlzcG9zZTogKCkgPT4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gIGNvbnN0IGNvbHMgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1jb2xzYCkpLnZhbHVlLCAxMCk7XG4gIGNvbnN0IHJvd3MgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1yb3dzYCkpLnZhbHVlLCAxMCk7XG4gIGNvbnN0IHdpZHRoID0gKGNvbHMgKiB0ZXJtLl9jb3JlLnJlbmRlcmVyLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoICsgdGVybS5fY29yZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aCkudG9TdHJpbmcoKSArICdweCc7XG4gIGNvbnN0IGhlaWdodCA9IChyb3dzICogdGVybS5fY29yZS5yZW5kZXJlci5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQpLnRvU3RyaW5nKCkgKyAncHgnO1xuICB0ZXJtaW5hbENvbnRhaW5lci5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICB0ZXJtaW5hbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gIHRlcm0uZml0KCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCAqIGFzIFN0cmluZ3MgZnJvbSAnLi9TdHJpbmdzJztcbmltcG9ydCB7IElUZXJtaW5hbCwgSUJ1ZmZlciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgaXNNYWMgfSBmcm9tICcuL2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBSZW5kZXJEZWJvdW5jZXIgfSBmcm9tICcuL3VpL1JlbmRlckRlYm91bmNlcic7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICcuL3VpL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi9jb21tb24vTGlmZWN5Y2xlJztcblxuY29uc3QgTUFYX1JPV1NfVE9fUkVBRCA9IDIwO1xuXG5jb25zdCBlbnVtIEJvdW5kYXJ5UG9zaXRpb24ge1xuICBUT1AsXG4gIEJPVFRPTVxufVxuXG5leHBvcnQgY2xhc3MgQWNjZXNzaWJpbGl0eU1hbmFnZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfYWNjZXNzaWJpbGl0eVRyZWVSb290OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93RWxlbWVudHM6IEhUTUxFbGVtZW50W107XG4gIHByaXZhdGUgX2xpdmVSZWdpb246IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9saXZlUmVnaW9uTGluZUNvdW50OiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX3JlbmRlclJvd3NEZWJvdW5jZXI6IFJlbmRlckRlYm91bmNlcjtcblxuICBwcml2YXRlIF90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXI6IChlOiBGb2N1c0V2ZW50KSA9PiB2b2lkO1xuICBwcml2YXRlIF9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXI6IChlOiBGb2N1c0V2ZW50KSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUaGlzIHF1ZXVlIGhhcyBhIGNoYXJhY3RlciBwdXNoZWQgdG8gaXQgZm9yIGtleXMgdGhhdCBhcmUgcHJlc3NlZCwgaWYgdGhlXG4gICAqIG5leHQgY2hhcmFjdGVyIGFkZGVkIHRvIHRoZSB0ZXJtaW5hbCBpcyBlcXVhbCB0byB0aGUga2V5IGNoYXIgdGhlbiBpdCBpc1xuICAgKiBub3QgYW5ub3VuY2VkIChhZGRlZCB0byBsaXZlIHJlZ2lvbikgYmVjYXVzZSBpdCBoYXMgYWxyZWFkeSBiZWVuIGFubm91bmNlZFxuICAgKiBieSB0aGUgdGV4dGFyZWEgZXZlbnQgKHdoaWNoIGNhbm5vdCBiZSBjYW5jZWxlZCkuIFRoZXJlIGFyZSBzb21lIHJhY2VcbiAgICogY29uZGl0aW9uIGNhc2VzIGlmIHRoZXJlIGlzIHR5cGluZyB3aGlsZSBkYXRhIGlzIHN0cmVhbWluZywgYnV0IHRoaXMgY292ZXJzXG4gICAqIHRoZSBtYWluIGNhc2Ugb2YgdHlwaW5nIGludG8gdGhlIHByb21wdCBhbmQgaW5wdXR0aW5nIHRoZSBhbnN3ZXIgdG8gYVxuICAgKiBxdWVzdGlvbiAoWS9OLCBldGMuKS5cbiAgICovXG4gIHByaXZhdGUgX2NoYXJzVG9Db25zdW1lOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3Rlcm1pbmFsOiBJVGVybWluYWwpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5jbGFzc0xpc3QuYWRkKCd4dGVybS1hY2Nlc3NpYmlsaXR5Jyk7XG5cbiAgICB0aGlzLl9yb3dDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgneHRlcm0tYWNjZXNzaWJpbGl0eS10cmVlJyk7XG4gICAgdGhpcy5fcm93RWxlbWVudHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3Rlcm1pbmFsLnJvd3M7IGkrKykge1xuICAgICAgdGhpcy5fcm93RWxlbWVudHNbaV0gPSB0aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb3dFbGVtZW50c1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyID0gZSA9PiB0aGlzLl9vbkJvdW5kYXJ5Rm9jdXMoZSwgQm91bmRhcnlQb3NpdGlvbi5UT1ApO1xuICAgIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Cb3VuZGFyeUZvY3VzKGUsIEJvdW5kYXJ5UG9zaXRpb24uQk9UVE9NKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG4gICAgdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMV0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuXG4gICAgdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX3Jvd0NvbnRhaW5lcik7XG5cbiAgICB0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyID0gbmV3IFJlbmRlckRlYm91bmNlcih0aGlzLl9yZW5kZXJSb3dzLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dzKCk7XG5cbiAgICB0aGlzLl9saXZlUmVnaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fbGl2ZVJlZ2lvbi5jbGFzc0xpc3QuYWRkKCdsaXZlLXJlZ2lvbicpO1xuICAgIHRoaXMuX2xpdmVSZWdpb24uc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAnYXNzZXJ0aXZlJyk7XG4gICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX2xpdmVSZWdpb24pO1xuXG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVzaXplKGUgPT4gdGhpcy5fb25SZXNpemUoZS5yb3dzKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25SZW5kZXIoZSA9PiB0aGlzLl9yZWZyZXNoUm93cyhlLnN0YXJ0LCBlLmVuZCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uU2Nyb2xsKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzKCkpKTtcbiAgICAvLyBMaW5lIGZlZWQgaXMgYW4gaXNzdWUgYXMgdGhlIHByb21wdCB3b24ndCBiZSByZWFkIG91dCBhZnRlciBhIGNvbW1hbmQgaXMgcnVuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5hZGREaXNwb3NhYmxlTGlzdGVuZXIoJ2ExMXkuY2hhcicsIChjaGFyKSA9PiB0aGlzLl9vbkNoYXIoY2hhcikpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uTGluZUZlZWQoKCkgPT4gdGhpcy5fb25DaGFyKCdcXG4nKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKCdhMTF5LnRhYicsIHNwYWNlQ291bnQgPT4gdGhpcy5fb25UYWIoc3BhY2VDb3VudCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uS2V5KGUgPT4gdGhpcy5fb25LZXkoZS5rZXkpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5hZGREaXNwb3NhYmxlTGlzdGVuZXIoJ2JsdXInLCAoKSA9PiB0aGlzLl9jbGVhckxpdmVSZWdpb24oKSkpO1xuICAgIC8vIFRPRE86IE1heWJlIHJlbmRlcmVyIHNob3VsZCBmaXJlIGFuIGV2ZW50IG9uIHRlcm1pbmFsIHdoZW4gdGhlIGNoYXJhY3RlcnMgY2hhbmdlIGFuZCB0aGF0XG4gICAgLy8gICAgICAgc2hvdWxkIGJlIGxpc3RlbmVkIHRvIGluc3RlYWQ/IFRoYXQgd291bGQgbWVhbiB0aGF0IHRoZSBvcmRlciBvZiBldmVudHMgYXJlIGFsd2F5c1xuICAgIC8vICAgICAgIGd1YXJlbnRlZWRcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLmFkZERpc3Bvc2FibGVMaXN0ZW5lcignZHByY2hhbmdlJywgKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLnJlbmRlcmVyLm9uQ2FudmFzUmVzaXplKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpKSk7XG4gICAgLy8gVGhpcyBzaG91bGRuJ3QgYmUgbmVlZGVkIG9uIG1vZGVybiBicm93c2VycyBidXQgaXMgcHJlc2VudCBpbiBjYXNlIHRoZVxuICAgIC8vIG1lZGlhIHF1ZXJ5IHRoYXQgZHJpdmVzIHRoZSBkcHJjaGFuZ2UgZXZlbnQgaXNuJ3Qgc3VwcG9ydGVkXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIod2luZG93LCAncmVzaXplJywgKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCk7XG4gICAgdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgX29uQm91bmRhcnlGb2N1cyhlOiBGb2N1c0V2ZW50LCBwb3NpdGlvbjogQm91bmRhcnlQb3NpdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IGJvdW5kYXJ5RWxlbWVudCA9IDxIVE1MRWxlbWVudD5lLnRhcmdldDtcbiAgICBjb25zdCBiZWZvcmVCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1twb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAxIDogdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMl07XG5cbiAgICAvLyBEb24ndCBzY3JvbGwgaWYgdGhlIGJ1ZmZlciB0b3AgaGFzIHJlYWNoZWQgdGhlIGVuZCBpbiB0aGF0IGRpcmVjdGlvblxuICAgIGNvbnN0IHBvc0luU2V0ID0gYm91bmRhcnlFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1wb3NpbnNldCcpO1xuICAgIGNvbnN0IGxhc3RSb3dQb3MgPSBwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAnMScgOiBgJHt0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RofWA7XG4gICAgaWYgKHBvc0luU2V0ID09PSBsYXN0Um93UG9zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2Nyb2xsIHdoZW4gdGhlIGxhc3QgZm9jdXNlZCBpdGVtIHdhcyBub3QgdGhlIHNlY29uZCByb3cgKGZvY3VzIGlzIGdvaW5nIHRoZSBvdGhlclxuICAgIC8vIGRpcmVjdGlvbilcbiAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ICE9PSBiZWZvcmVCb3VuZGFyeUVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgb2xkIGJvdW5kYXJ5IGVsZW1lbnQgZnJvbSBhcnJheVxuICAgIGxldCB0b3BCb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGxldCBib3R0b21Cb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGlmIChwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1ApIHtcbiAgICAgIHRvcEJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpITtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChib3R0b21Cb3VuZGFyeUVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b3BCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50cy5zaGlmdCgpITtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0b3BCb3VuZGFyeUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgZnJvbSBvbGQgYm91bmRhcnkgZWxlbWVudHNcbiAgICB0b3BCb3VuZGFyeUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBBZGQgbmV3IGVsZW1lbnQgdG8gYXJyYXkvRE9NXG4gICAgaWYgKHBvc2l0aW9uID09PSBCb3VuZGFyeVBvc2l0aW9uLlRPUCkge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMudW5zaGlmdChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBuZXdFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMucHVzaChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIHRvIG5ldyBib3VuZGFyeSBlbGVtZW50c1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAxXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBTY3JvbGwgdXBcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcyhwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAtMSA6IDEpO1xuXG4gICAgLy8gRm9jdXMgbmV3IGJvdW5kYXJ5IGJlZm9yZSBlbGVtZW50XG4gICAgdGhpcy5fcm93RWxlbWVudHNbcG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gMSA6IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDJdLmZvY3VzKCk7XG5cbiAgICAvLyBQcmV2ZW50IHRoZSBzdGFuZGFyZCBiZWhhdmlvclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25SZXNpemUocm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGJvdHRvbSBib3VuZGFyeSBsaXN0ZW5lclxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIC8vIEdyb3cgcm93cyBhcyByZXF1aXJlZFxuICAgIGZvciAobGV0IGkgPSB0aGlzLl9yb3dDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgdGhpcy5fdGVybWluYWwucm93czsgaSsrKSB7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50c1tpXSA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gICAgLy8gU2hyaW5rIHJvd3MgYXMgcmVxdWlyZWRcbiAgICB3aGlsZSAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID4gcm93cykge1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpISk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGJvdHRvbSBib3VuZGFyeSBsaXN0ZW5lclxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdGl0ZW0nKTtcbiAgICBlbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnMoZWxlbWVudCk7XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9vblRhYihzcGFjZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwYWNlQ291bnQ7IGkrKykge1xuICAgICAgdGhpcy5fb25DaGFyKCcgJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25DaGFyKGNoYXI6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50IDwgTUFYX1JPV1NfVE9fUkVBRCArIDEpIHtcbiAgICAgIGlmICh0aGlzLl9jaGFyc1RvQ29uc3VtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIEhhdmUgdGhlIHNjcmVlbiByZWFkZXIgaWdub3JlIHRoZSBjaGFyIGlmIGl0IHdhcyBqdXN0IGlucHV0XG4gICAgICAgIGNvbnN0IHNoaWZ0ZWRDaGFyID0gdGhpcy5fY2hhcnNUb0NvbnN1bWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKHNoaWZ0ZWRDaGFyICE9PSBjaGFyKSB7XG4gICAgICAgICAgdGhpcy5fYW5ub3VuY2VDaGFyYWN0ZXIoY2hhcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Fubm91bmNlQ2hhcmFjdGVyKGNoYXIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ1xcbicpIHtcbiAgICAgICAgdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCsrO1xuICAgICAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCA9PT0gTUFYX1JPV1NfVE9fUkVBRCArIDEpIHtcbiAgICAgICAgICB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50ICs9IFN0cmluZ3MudG9vTXVjaE91dHB1dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGRldGFjaC9hdHRhY2ggb24gbWFjIGFzIG90aGVyd2lzZSBtZXNzYWdlcyBjYW4gZ28gdW5hY2NvdW5jZWRcbiAgICAgIGlmIChpc01hYykge1xuICAgICAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCAmJiB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50Lmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHRoaXMuX2xpdmVSZWdpb24pO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJMaXZlUmVnaW9uKCk6IHZvaWQge1xuICAgIHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQgPSAnJztcbiAgICB0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50ID0gMDtcblxuICAgIC8vIE9ubHkgZGV0YWNoL2F0dGFjaCBvbiBtYWMgYXMgb3RoZXJ3aXNlIG1lc3NhZ2VzIGNhbiBnbyB1bmFjY291bmNlZFxuICAgIGlmIChpc01hYykge1xuICAgICAgaWYgKHRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSkge1xuICAgICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QucmVtb3ZlQ2hpbGQodGhpcy5fbGl2ZVJlZ2lvbik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25LZXkoa2V5Q2hhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJMaXZlUmVnaW9uKCk7XG4gICAgdGhpcy5fY2hhcnNUb0NvbnN1bWUucHVzaChrZXlDaGFyKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dzKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyLnJlZnJlc2goc3RhcnQsIGVuZCwgdGhpcy5fdGVybWluYWwucm93cyk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgYnVmZmVyOiBJQnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuICAgIGNvbnN0IHNldFNpemUgPSBidWZmZXIubGluZXMubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XG4gICAgICBjb25zdCBsaW5lRGF0YSA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYnVmZmVyLnlkaXNwICsgaSwgdHJ1ZSk7XG4gICAgICBjb25zdCBwb3NJblNldCA9IChidWZmZXIueWRpc3AgKyBpICsgMSkudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1tpXTtcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBsaW5lRGF0YS5sZW5ndGggPT09IDAgPyBTdHJpbmdzLmJsYW5rTGluZSA6IGxpbmVEYXRhO1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcG9zaW5zZXQnLCBwb3NJblNldCk7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1zZXRzaXplJywgc2V0U2l6ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaFJvd3NEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGVybWluYWwucmVuZGVyZXIuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggIT09IHRoaXMuX3Rlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHRoaXMuX29uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3Rlcm1pbmFsLnJvd3M7IGkrKykge1xuICAgICAgdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnModGhpcy5fcm93RWxlbWVudHNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dEaW1lbnNpb25zKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLl90ZXJtaW5hbC5yZW5kZXJlci5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICB9XG5cbiAgcHJpdmF0ZSBfYW5ub3VuY2VDaGFyYWN0ZXIoY2hhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGNoYXIgPT09ICcgJykge1xuICAgICAgLy8gQWx3YXlzIHVzZSBuYnNwIGZvciBzcGFjZXMgaW4gb3JkZXIgdG8gcHJlc2VydmUgdGhlIHNwYWNlIGJldHdlZW4gY2hhcmFjdGVycyBpblxuICAgICAgLy8gdm9pY2VvdmVyJ3MgY2FwdGlvbiB3aW5kb3dcbiAgICAgIHRoaXMuX2xpdmVSZWdpb24uaW5uZXJIVE1MICs9ICcmbmJzcDsnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50ICs9IGNoYXI7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENpcmN1bGFyTGlzdCwgSUluc2VydEV2ZW50IH0gZnJvbSAnLi9jb21tb24vQ2lyY3VsYXJMaXN0JztcbmltcG9ydCB7IElUZXJtaW5hbCwgSUJ1ZmZlciwgSUJ1ZmZlckxpbmUsIEJ1ZmZlckluZGV4LCBJQnVmZmVyU3RyaW5nSXRlcmF0b3IsIElCdWZmZXJTdHJpbmdJdGVyYXRvclJlc3VsdCwgSUNlbGxEYXRhLCBJQXR0cmlidXRlRGF0YSB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgSU1hcmtlciB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IEJ1ZmZlckxpbmUsIENlbGxEYXRhLCBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnLi9CdWZmZXJMaW5lJztcbmltcG9ydCB7IHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0LCByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQsIHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUsIHJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3RocywgZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoIH0gZnJvbSAnLi9CdWZmZXJSZWZsb3cnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0xPUiB9IGZyb20gJy4vcmVuZGVyZXIvYXRsYXMvVHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyMiwgSUV2ZW50IH0gZnJvbSAnLi9jb21tb24vRXZlbnRFbWl0dGVyMic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi4vbGliL2NvbW1vbi9MaWZlY3ljbGUnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSID0gKDAgPDwgMTgpIHwgKERFRkFVTFRfQ09MT1IgPDwgOSkgfCAoMjU2IDw8IDApO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSX0RBVEEgPSBuZXcgQXR0cmlidXRlRGF0YSgpO1xuXG5leHBvcnQgY29uc3QgQ0hBUl9EQVRBX0FUVFJfSU5ERVggPSAwO1xuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9DSEFSX0lOREVYID0gMTtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfV0lEVEhfSU5ERVggPSAyO1xuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9DT0RFX0lOREVYID0gMztcbmV4cG9ydCBjb25zdCBNQVhfQlVGRkVSX1NJWkUgPSA0Mjk0OTY3Mjk1OyAvLyAyXjMyIC0gMVxuXG4vKipcbiAqIE51bGwgY2VsbCAtIGEgcmVhbCBlbXB0eSBjZWxsIChjb250YWluaW5nIG5vdGhpbmcpLlxuICogTm90ZSB0aGF0IGNvZGUgc2hvdWxkIGFsd2F5cyBiZSAwIGZvciBhIG51bGwgY2VsbCBhc1xuICogc2V2ZXJhbCB0ZXN0IGNvbmRpdGlvbiBvZiB0aGUgYnVmZmVyIGxpbmUgcmVseSBvbiB0aGlzLlxuICovXG5leHBvcnQgY29uc3QgTlVMTF9DRUxMX0NIQVIgPSAnJztcbmV4cG9ydCBjb25zdCBOVUxMX0NFTExfV0lEVEggPSAxO1xuZXhwb3J0IGNvbnN0IE5VTExfQ0VMTF9DT0RFID0gMDtcblxuLyoqXG4gKiBXaGl0ZXNwYWNlIGNlbGwuXG4gKiBUaGlzIGlzIG1lYW50IGFzIGEgcmVwbGFjZW1lbnQgZm9yIGVtcHR5IGNlbGxzIHdoZW4gbmVlZGVkXG4gKiBkdXJpbmcgcmVuZGVyaW5nIGxpbmVzIHRvIHByZXNlcnZlIGNvcnJlY3QgYWxpZ21lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBXSElURVNQQUNFX0NFTExfQ0hBUiA9ICcgJztcbmV4cG9ydCBjb25zdCBXSElURVNQQUNFX0NFTExfV0lEVEggPSAxO1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9DT0RFID0gMzI7XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIGEgdGVybWluYWwgYnVmZmVyIChhbiBpbnRlcm5hbCBzdGF0ZSBvZiB0aGUgdGVybWluYWwpLCB3aGVyZSB0aGVcbiAqIGZvbGxvd2luZyBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgKGluIGhpZ2gtbGV2ZWwpOlxuICogICAtIHRleHQgY29udGVudCBvZiB0aGlzIHBhcnRpY3VsYXIgYnVmZmVyXG4gKiAgIC0gY3Vyc29yIHBvc2l0aW9uXG4gKiAgIC0gc2Nyb2xsIHBvc2l0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXIgaW1wbGVtZW50cyBJQnVmZmVyIHtcbiAgcHVibGljIGxpbmVzOiBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+O1xuICBwdWJsaWMgeWRpc3A6IG51bWJlcjtcbiAgcHVibGljIHliYXNlOiBudW1iZXI7XG4gIHB1YmxpYyB5OiBudW1iZXI7XG4gIHB1YmxpYyB4OiBudW1iZXI7XG4gIHB1YmxpYyBzY3JvbGxCb3R0b206IG51bWJlcjtcbiAgcHVibGljIHNjcm9sbFRvcDogbnVtYmVyO1xuICBwdWJsaWMgdGFiczogYW55O1xuICBwdWJsaWMgc2F2ZWRZOiBudW1iZXI7XG4gIHB1YmxpYyBzYXZlZFg6IG51bWJlcjtcbiAgcHVibGljIHNhdmVkQ3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICBwdWJsaWMgbWFya2VyczogTWFya2VyW10gPSBbXTtcbiAgcHJpdmF0ZSBfbnVsbENlbGw6IElDZWxsRGF0YSA9IENlbGxEYXRhLmZyb21DaGFyRGF0YShbMCwgTlVMTF9DRUxMX0NIQVIsIE5VTExfQ0VMTF9XSURUSCwgTlVMTF9DRUxMX0NPREVdKTtcbiAgcHJpdmF0ZSBfd2hpdGVzcGFjZUNlbGw6IElDZWxsRGF0YSA9IENlbGxEYXRhLmZyb21DaGFyRGF0YShbMCwgV0hJVEVTUEFDRV9DRUxMX0NIQVIsIFdISVRFU1BBQ0VfQ0VMTF9XSURUSCwgV0hJVEVTUEFDRV9DRUxMX0NPREVdKTtcbiAgcHJpdmF0ZSBfY29sczogbnVtYmVyO1xuICBwcml2YXRlIF9yb3dzOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBCdWZmZXIuXG4gICAqIEBwYXJhbSBfdGVybWluYWwgVGhlIHRlcm1pbmFsIHRoZSBCdWZmZXIgd2lsbCBiZWxvbmcgdG8uXG4gICAqIEBwYXJhbSBfaGFzU2Nyb2xsYmFjayBXaGV0aGVyIHRoZSBidWZmZXIgc2hvdWxkIHJlc3BlY3QgdGhlIHNjcm9sbGJhY2sgb2ZcbiAgICogdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGVybWluYWw6IElUZXJtaW5hbCxcbiAgICBwcml2YXRlIF9oYXNTY3JvbGxiYWNrOiBib29sZWFuXG4gICkge1xuICAgIHRoaXMuX2NvbHMgPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXROdWxsQ2VsbChhdHRyPzogSUF0dHJpYnV0ZURhdGEpOiBJQ2VsbERhdGEge1xuICAgIGlmIChhdHRyKSB7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5mZyA9IGF0dHIuZmc7XG4gICAgICB0aGlzLl9udWxsQ2VsbC5iZyA9IGF0dHIuYmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX251bGxDZWxsLmZnID0gMDtcbiAgICAgIHRoaXMuX251bGxDZWxsLmJnID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX251bGxDZWxsO1xuICB9XG5cbiAgcHVibGljIGdldFdoaXRlc3BhY2VDZWxsKGF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgaWYgKGF0dHIpIHtcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmZnID0gYXR0ci5mZztcbiAgICAgIHRoaXMuX3doaXRlc3BhY2VDZWxsLmJnID0gYXR0ci5iZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZmcgPSAwO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmcgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fd2hpdGVzcGFjZUNlbGw7XG4gIH1cblxuICBwdWJsaWMgZ2V0QmxhbmtMaW5lKGF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ/OiBib29sZWFuKTogSUJ1ZmZlckxpbmUge1xuICAgIHJldHVybiBuZXcgQnVmZmVyTGluZSh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLmdldE51bGxDZWxsKGF0dHIpLCBpc1dyYXBwZWQpO1xuICB9XG5cbiAgcHVibGljIGdldCBoYXNTY3JvbGxiYWNrKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYXNTY3JvbGxiYWNrICYmIHRoaXMubGluZXMubWF4TGVuZ3RoID4gdGhpcy5fcm93cztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNDdXJzb3JJblZpZXdwb3J0KCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFic29sdXRlWSA9IHRoaXMueWJhc2UgKyB0aGlzLnk7XG4gICAgY29uc3QgcmVsYXRpdmVZID0gYWJzb2x1dGVZIC0gdGhpcy55ZGlzcDtcbiAgICByZXR1cm4gKHJlbGF0aXZlWSA+PSAwICYmIHJlbGF0aXZlWSA8IHRoaXMuX3Jvd3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvcnJlY3QgYnVmZmVyIGxlbmd0aCBiYXNlZCBvbiB0aGUgcm93cyBwcm92aWRlZCwgdGhlIHRlcm1pbmFsJ3NcbiAgICogc2Nyb2xsYmFjayBhbmQgd2hldGhlciB0aGlzIGJ1ZmZlciBpcyBmbGFnZ2VkIHRvIGhhdmUgc2Nyb2xsYmFjayBvciBub3QuXG4gICAqIEBwYXJhbSByb3dzIFRoZSB0ZXJtaW5hbCByb3dzIHRvIHVzZSBpbiB0aGUgY2FsY3VsYXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHJvd3M6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9oYXNTY3JvbGxiYWNrKSB7XG4gICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBjb25zdCBjb3JyZWN0QnVmZmVyTGVuZ3RoID0gcm93cyArIHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMuc2Nyb2xsYmFjaztcblxuICAgIHJldHVybiBjb3JyZWN0QnVmZmVyTGVuZ3RoID4gTUFYX0JVRkZFUl9TSVpFID8gTUFYX0JVRkZFUl9TSVpFIDogY29ycmVjdEJ1ZmZlckxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyB0aGUgYnVmZmVyJ3Mgdmlld3BvcnQgd2l0aCBibGFuayBsaW5lcy5cbiAgICovXG4gIHB1YmxpYyBmaWxsVmlld3BvcnRSb3dzKGZpbGxBdHRyPzogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlmIChmaWxsQXR0ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZpbGxBdHRyID0gREVGQVVMVF9BVFRSX0RBVEE7XG4gICAgICB9XG4gICAgICBsZXQgaSA9IHRoaXMuX3Jvd3M7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIHRoaXMubGluZXMucHVzaCh0aGlzLmdldEJsYW5rTGluZShmaWxsQXR0cikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGJ1ZmZlciB0byBpdCdzIGluaXRpYWwgc3RhdGUsIGRpc2NhcmRpbmcgYWxsIHByZXZpb3VzIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy55ZGlzcCA9IDA7XG4gICAgdGhpcy55YmFzZSA9IDA7XG4gICAgdGhpcy55ID0gMDtcbiAgICB0aGlzLnggPSAwO1xuICAgIHRoaXMubGluZXMgPSBuZXcgQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPih0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHRoaXMuX3Jvd3MpKTtcbiAgICB0aGlzLnNjcm9sbFRvcCA9IDA7XG4gICAgdGhpcy5zY3JvbGxCb3R0b20gPSB0aGlzLl9yb3dzIC0gMTtcbiAgICB0aGlzLnNldHVwVGFiU3RvcHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSBidWZmZXIsIGFkanVzdGluZyBpdHMgZGF0YSBhY2NvcmRpbmdseS5cbiAgICogQHBhcmFtIG5ld0NvbHMgVGhlIG5ldyBudW1iZXIgb2YgY29sdW1ucy5cbiAgICogQHBhcmFtIG5ld1Jvd3MgVGhlIG5ldyBudW1iZXIgb2Ygcm93cy5cbiAgICovXG4gIHB1YmxpYyByZXNpemUobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBzdG9yZSByZWZlcmVuY2UgdG8gbnVsbCBjZWxsIHdpdGggZGVmYXVsdCBhdHRyc1xuICAgIGNvbnN0IG51bGxDZWxsID0gdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSk7XG5cbiAgICAvLyBJbmNyZWFzZSBtYXggbGVuZ3RoIGlmIG5lZWRlZCBiZWZvcmUgYWRqdXN0bWVudHMgdG8gYWxsb3cgc3BhY2UgdG8gZmlsbFxuICAgIC8vIGFzIHJlcXVpcmVkLlxuICAgIGNvbnN0IG5ld01heExlbmd0aCA9IHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgobmV3Um93cyk7XG4gICAgaWYgKG5ld01heExlbmd0aCA+IHRoaXMubGluZXMubWF4TGVuZ3RoKSB7XG4gICAgICB0aGlzLmxpbmVzLm1heExlbmd0aCA9IG5ld01heExlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBUaGUgZm9sbG93aW5nIGFkanVzdG1lbnRzIHNob3VsZCBvbmx5IGhhcHBlbiBpZiB0aGUgYnVmZmVyIGhhcyBiZWVuXG4gICAgLy8gaW5pdGlhbGl6ZWQvZmlsbGVkLlxuICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIERlYWwgd2l0aCBjb2x1bW5zIGluY3JlYXNpbmcgKHJlZHVjaW5nIG5lZWRzIHRvIGhhcHBlbiBhZnRlciByZWZsb3cpXG4gICAgICBpZiAodGhpcy5fY29scyA8IG5ld0NvbHMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5saW5lcy5nZXQoaSkucmVzaXplKG5ld0NvbHMsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXNpemUgcm93cyBpbiBib3RoIGRpcmVjdGlvbnMgYXMgbmVlZGVkXG4gICAgICBsZXQgYWRkVG9ZID0gMDtcbiAgICAgIGlmICh0aGlzLl9yb3dzIDwgbmV3Um93cykge1xuICAgICAgICBmb3IgKGxldCB5ID0gdGhpcy5fcm93czsgeSA8IG5ld1Jvd3M7IHkrKykge1xuICAgICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA8IG5ld1Jvd3MgKyB0aGlzLnliYXNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy55YmFzZSA+IDAgJiYgdGhpcy5saW5lcy5sZW5ndGggPD0gdGhpcy55YmFzZSArIHRoaXMueSArIGFkZFRvWSArIDEpIHtcbiAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgcm9vbSBhYm92ZSB0aGUgYnVmZmVyIGFuZCB0aGVyZSBhcmUgbm8gZW1wdHkgZWxlbWVudHMgYmVsb3cgdGhlIGxpbmUsXG4gICAgICAgICAgICAgIC8vIHNjcm9sbCB1cFxuICAgICAgICAgICAgICB0aGlzLnliYXNlLS07XG4gICAgICAgICAgICAgIGFkZFRvWSsrO1xuICAgICAgICAgICAgICBpZiAodGhpcy55ZGlzcCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBWaWV3cG9ydCBpcyBhdCB0aGUgdG9wIG9mIHRoZSBidWZmZXIsIG11c3QgaW5jcmVhc2UgZG93bndhcmRzXG4gICAgICAgICAgICAgICAgdGhpcy55ZGlzcC0tO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBBZGQgYSBibGFuayBsaW5lIGlmIHRoZXJlIGlzIG5vIGJ1ZmZlciBsZWZ0IGF0IHRoZSB0b3AgdG8gc2Nyb2xsIHRvLCBvciBpZiB0aGVyZVxuICAgICAgICAgICAgICAvLyBhcmUgYmxhbmsgbGluZXMgYWZ0ZXIgdGhlIGN1cnNvclxuICAgICAgICAgICAgICB0aGlzLmxpbmVzLnB1c2gobmV3IEJ1ZmZlckxpbmUobmV3Q29scywgbnVsbENlbGwpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vICh0aGlzLl9yb3dzID49IG5ld1Jvd3MpXG4gICAgICAgIGZvciAobGV0IHkgPSB0aGlzLl9yb3dzOyB5ID4gbmV3Um93czsgeS0tKSB7XG4gICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gbmV3Um93cyArIHRoaXMueWJhc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA+IHRoaXMueWJhc2UgKyB0aGlzLnkgKyAxKSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBsaW5lIGlzIGEgYmxhbmsgbGluZSBiZWxvdyB0aGUgY3Vyc29yLCByZW1vdmUgaXRcbiAgICAgICAgICAgICAgdGhpcy5saW5lcy5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBsaW5lIGlzIHRoZSBjdXJzb3IsIHNjcm9sbCBkb3duXG4gICAgICAgICAgICAgIHRoaXMueWJhc2UrKztcbiAgICAgICAgICAgICAgdGhpcy55ZGlzcCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZWR1Y2UgbWF4IGxlbmd0aCBpZiBuZWVkZWQgYWZ0ZXIgYWRqdXN0bWVudHMsIHRoaXMgaXMgZG9uZSBhZnRlciBhcyBpdFxuICAgICAgLy8gd291bGQgb3RoZXJ3aXNlIGN1dCBkYXRhIGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgYnVmZmVyLlxuICAgICAgaWYgKG5ld01heExlbmd0aCA8IHRoaXMubGluZXMubWF4TGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaW0gZnJvbSB0aGUgdG9wIG9mIHRoZSBidWZmZXIgYW5kIGFkanVzdCB5YmFzZSBhbmQgeWRpc3AuXG4gICAgICAgIGNvbnN0IGFtb3VudFRvVHJpbSA9IHRoaXMubGluZXMubGVuZ3RoIC0gbmV3TWF4TGVuZ3RoO1xuICAgICAgICBpZiAoYW1vdW50VG9UcmltID4gMCkge1xuICAgICAgICAgIHRoaXMubGluZXMudHJpbVN0YXJ0KGFtb3VudFRvVHJpbSk7XG4gICAgICAgICAgdGhpcy55YmFzZSA9IE1hdGgubWF4KHRoaXMueWJhc2UgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICAgIHRoaXMueWRpc3AgPSBNYXRoLm1heCh0aGlzLnlkaXNwIC0gYW1vdW50VG9UcmltLCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpbmVzLm1heExlbmd0aCA9IG5ld01heExlbmd0aDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGN1cnNvciBzdGF5cyBvbiBzY3JlZW5cbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgbmV3Q29scyAtIDEpO1xuICAgICAgdGhpcy55ID0gTWF0aC5taW4odGhpcy55LCBuZXdSb3dzIC0gMSk7XG4gICAgICBpZiAoYWRkVG9ZKSB7XG4gICAgICAgIHRoaXMueSArPSBhZGRUb1k7XG4gICAgICB9XG4gICAgICB0aGlzLnNhdmVkWSA9IE1hdGgubWluKHRoaXMuc2F2ZWRZLCBuZXdSb3dzIC0gMSk7XG4gICAgICB0aGlzLnNhdmVkWCA9IE1hdGgubWluKHRoaXMuc2F2ZWRYLCBuZXdDb2xzIC0gMSk7XG5cbiAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbEJvdHRvbSA9IG5ld1Jvd3MgLSAxO1xuXG4gICAgaWYgKHRoaXMuX2lzUmVmbG93RW5hYmxlZCkge1xuICAgICAgdGhpcy5fcmVmbG93KG5ld0NvbHMsIG5ld1Jvd3MpO1xuXG4gICAgICAvLyBUcmltIHRoZSBlbmQgb2YgdGhlIGxpbmUgb2ZmIGlmIGNvbHMgc2hydW5rXG4gICAgICBpZiAodGhpcy5fY29scyA+IG5ld0NvbHMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5saW5lcy5nZXQoaSkucmVzaXplKG5ld0NvbHMsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NvbHMgPSBuZXdDb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSBuZXdSb3dzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2lzUmVmbG93RW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiAhdGhpcy5fdGVybWluYWwub3B0aW9ucy53aW5kb3dzTW9kZTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvdyhuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jb2xzID09PSBuZXdDb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHJvd3MsIGlnbm9yZSB0aGUgbGFzdCBvbmUgYXMgaXQgY2Fubm90IGJlIHdyYXBwZWRcbiAgICBpZiAobmV3Q29scyA+IHRoaXMuX2NvbHMpIHtcbiAgICAgIHRoaXMuX3JlZmxvd0xhcmdlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVmbG93U21hbGxlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dMYXJnZXIobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSByZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlKHRoaXMubGluZXMsIHRoaXMuX2NvbHMsIG5ld0NvbHMsIHRoaXMueWJhc2UgKyB0aGlzLnksIHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpKTtcbiAgICBpZiAodG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbmV3TGF5b3V0UmVzdWx0ID0gcmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0KHRoaXMubGluZXMsIHRvUmVtb3ZlKTtcbiAgICAgIHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KHRoaXMubGluZXMsIG5ld0xheW91dFJlc3VsdC5sYXlvdXQpO1xuICAgICAgdGhpcy5fcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQobmV3Q29scywgbmV3Um93cywgbmV3TGF5b3V0UmVzdWx0LmNvdW50UmVtb3ZlZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIsIGNvdW50UmVtb3ZlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbnVsbENlbGwgPSB0aGlzLmdldE51bGxDZWxsKERFRkFVTFRfQVRUUl9EQVRBKTtcbiAgICAvLyBBZGp1c3Qgdmlld3BvcnQgYmFzZWQgb24gbnVtYmVyIG9mIGl0ZW1zIHJlbW92ZWRcbiAgICBsZXQgdmlld3BvcnRBZGp1c3RtZW50cyA9IGNvdW50UmVtb3ZlZDtcbiAgICB3aGlsZSAodmlld3BvcnRBZGp1c3RtZW50cy0tID4gMCkge1xuICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDApIHtcbiAgICAgICAgaWYgKHRoaXMueSA+IDApIHtcbiAgICAgICAgICB0aGlzLnktLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPCBuZXdSb3dzKSB7XG4gICAgICAgICAgLy8gQWRkIGFuIGV4dHJhIHJvdyBhdCB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydFxuICAgICAgICAgIHRoaXMubGluZXMucHVzaChuZXcgQnVmZmVyTGluZShuZXdDb2xzLCBudWxsQ2VsbCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy55ZGlzcCA9PT0gdGhpcy55YmFzZSkge1xuICAgICAgICAgIHRoaXMueWRpc3AtLTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnliYXNlLS07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93U21hbGxlcihuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG51bGxDZWxsID0gdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSk7XG4gICAgLy8gR2F0aGVyIGFsbCBCdWZmZXJMaW5lcyB0aGF0IG5lZWQgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgQnVmZmVyIGhlcmUgc28gdGhhdCB0aGV5IGNhbiBiZVxuICAgIC8vIGJhdGNoZWQgdXAgYW5kIG9ubHkgY29tbWl0dGVkIG9uY2VcbiAgICBjb25zdCB0b0luc2VydCA9IFtdO1xuICAgIGxldCBjb3VudFRvSW5zZXJ0ID0gMDtcbiAgICAvLyBHbyBiYWNrd2FyZHMgYXMgbWFueSBsaW5lcyBtYXkgYmUgdHJpbW1lZCBhbmQgdGhpcyB3aWxsIGF2b2lkIGNvbnNpZGVyaW5nIHRoZW1cbiAgICBmb3IgKGxldCB5ID0gdGhpcy5saW5lcy5sZW5ndGggLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGlzIGxpbmUgaXMgYSBwcm9ibGVtXG4gICAgICBsZXQgbmV4dExpbmUgPSB0aGlzLmxpbmVzLmdldCh5KSBhcyBCdWZmZXJMaW5lO1xuICAgICAgaWYgKCFuZXh0TGluZS5pc1dyYXBwZWQgJiYgbmV4dExpbmUuZ2V0VHJpbW1lZExlbmd0aCgpIDw9IG5ld0NvbHMpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEdhdGhlciB3cmFwcGVkIGxpbmVzIGFuZCBhZGp1c3QgeSB0byBiZSB0aGUgc3RhcnRpbmcgbGluZVxuICAgICAgY29uc3Qgd3JhcHBlZExpbmVzOiBCdWZmZXJMaW5lW10gPSBbbmV4dExpbmVdO1xuICAgICAgd2hpbGUgKG5leHRMaW5lLmlzV3JhcHBlZCAmJiB5ID4gMCkge1xuICAgICAgICBuZXh0TGluZSA9IHRoaXMubGluZXMuZ2V0KC0teSkgYXMgQnVmZmVyTGluZTtcbiAgICAgICAgd3JhcHBlZExpbmVzLnVuc2hpZnQobmV4dExpbmUpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVzZSBsaW5lcyBjb250YWluIHRoZSBjdXJzb3IgZG9uJ3QgdG91Y2ggdGhlbSwgdGhlIHByb2dyYW0gd2lsbCBoYW5kbGUgZml4aW5nIHVwXG4gICAgICAvLyB3cmFwcGVkIGxpbmVzIHdpdGggdGhlIGN1cnNvclxuICAgICAgY29uc3QgYWJzb2x1dGVZID0gdGhpcy55YmFzZSArIHRoaXMueTtcbiAgICAgIGlmIChhYnNvbHV0ZVkgPj0geSAmJiBhYnNvbHV0ZVkgPCB5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGFzdExpbmVMZW5ndGggPSB3cmFwcGVkTGluZXNbd3JhcHBlZExpbmVzLmxlbmd0aCAtIDFdLmdldFRyaW1tZWRMZW5ndGgoKTtcbiAgICAgIGNvbnN0IGRlc3RMaW5lTGVuZ3RocyA9IHJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3Rocyh3cmFwcGVkTGluZXMsIHRoaXMuX2NvbHMsIG5ld0NvbHMpO1xuICAgICAgY29uc3QgbGluZXNUb0FkZCA9IGRlc3RMaW5lTGVuZ3Rocy5sZW5ndGggLSB3cmFwcGVkTGluZXMubGVuZ3RoO1xuICAgICAgbGV0IHRyaW1tZWRMaW5lczogbnVtYmVyO1xuICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDAgJiYgdGhpcy55ICE9PSB0aGlzLmxpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgLy8gSWYgdGhlIHRvcCBzZWN0aW9uIG9mIHRoZSBidWZmZXIgaXMgbm90IHlldCBmaWxsZWRcbiAgICAgICAgdHJpbW1lZExpbmVzID0gTWF0aC5tYXgoMCwgdGhpcy55IC0gdGhpcy5saW5lcy5tYXhMZW5ndGggKyBsaW5lc1RvQWRkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyaW1tZWRMaW5lcyA9IE1hdGgubWF4KDAsIHRoaXMubGluZXMubGVuZ3RoIC0gdGhpcy5saW5lcy5tYXhMZW5ndGggKyBsaW5lc1RvQWRkKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBuZXcgbGluZXNcbiAgICAgIGNvbnN0IG5ld0xpbmVzOiBCdWZmZXJMaW5lW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXNUb0FkZDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5ld0xpbmUgPSB0aGlzLmdldEJsYW5rTGluZShERUZBVUxUX0FUVFJfREFUQSwgdHJ1ZSkgYXMgQnVmZmVyTGluZTtcbiAgICAgICAgbmV3TGluZXMucHVzaChuZXdMaW5lKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZXdMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRvSW5zZXJ0LnB1c2goe1xuICAgICAgICAgIC8vIGNvdW50VG9JbnNlcnQgaGVyZSBnZXRzIHRoZSBhY3R1YWwgaW5kZXgsIHRha2luZyBpbnRvIGFjY291bnQgb3RoZXIgaW5zZXJ0ZWQgaXRlbXMuXG4gICAgICAgICAgLy8gdXNpbmcgdGhpcyB3ZSBjYW4gaXRlcmF0ZSB0aHJvdWdoIHRoZSBsaXN0IGZvcndhcmRzXG4gICAgICAgICAgc3RhcnQ6IHkgKyB3cmFwcGVkTGluZXMubGVuZ3RoICsgY291bnRUb0luc2VydCxcbiAgICAgICAgICBuZXdMaW5lc1xuICAgICAgICB9KTtcbiAgICAgICAgY291bnRUb0luc2VydCArPSBuZXdMaW5lcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICB3cmFwcGVkTGluZXMucHVzaCguLi5uZXdMaW5lcyk7XG5cbiAgICAgIC8vIENvcHkgYnVmZmVyIGRhdGEgdG8gbmV3IGxvY2F0aW9ucywgdGhpcyBuZWVkcyB0byBoYXBwZW4gYmFja3dhcmRzIHRvIGRvIGluLXBsYWNlXG4gICAgICBsZXQgZGVzdExpbmVJbmRleCA9IGRlc3RMaW5lTGVuZ3Rocy5sZW5ndGggLSAxOyAvLyBNYXRoLmZsb29yKGNlbGxzTmVlZGVkIC8gbmV3Q29scyk7XG4gICAgICBsZXQgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTsgLy8gY2VsbHNOZWVkZWQgJSBuZXdDb2xzO1xuICAgICAgaWYgKGRlc3RDb2wgPT09IDApIHtcbiAgICAgICAgZGVzdExpbmVJbmRleC0tO1xuICAgICAgICBkZXN0Q29sID0gZGVzdExpbmVMZW5ndGhzW2Rlc3RMaW5lSW5kZXhdO1xuICAgICAgfVxuICAgICAgbGV0IHNyY0xpbmVJbmRleCA9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSBsaW5lc1RvQWRkIC0gMTtcbiAgICAgIGxldCBzcmNDb2wgPSBsYXN0TGluZUxlbmd0aDtcbiAgICAgIHdoaWxlIChzcmNMaW5lSW5kZXggPj0gMCkge1xuICAgICAgICBjb25zdCBjZWxsc1RvQ29weSA9IE1hdGgubWluKHNyY0NvbCwgZGVzdENvbCk7XG4gICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5jb3B5Q2VsbHNGcm9tKHdyYXBwZWRMaW5lc1tzcmNMaW5lSW5kZXhdLCBzcmNDb2wgLSBjZWxsc1RvQ29weSwgZGVzdENvbCAtIGNlbGxzVG9Db3B5LCBjZWxsc1RvQ29weSwgdHJ1ZSk7XG4gICAgICAgIGRlc3RDb2wgLT0gY2VsbHNUb0NvcHk7XG4gICAgICAgIGlmIChkZXN0Q29sID09PSAwKSB7XG4gICAgICAgICAgZGVzdExpbmVJbmRleC0tO1xuICAgICAgICAgIGRlc3RDb2wgPSBkZXN0TGluZUxlbmd0aHNbZGVzdExpbmVJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgc3JjQ29sIC09IGNlbGxzVG9Db3B5O1xuICAgICAgICBpZiAoc3JjQ29sID09PSAwKSB7XG4gICAgICAgICAgc3JjTGluZUluZGV4LS07XG4gICAgICAgICAgY29uc3Qgd3JhcHBlZExpbmVzSW5kZXggPSBNYXRoLm1heChzcmNMaW5lSW5kZXgsIDApO1xuICAgICAgICAgIHNyY0NvbCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIHdyYXBwZWRMaW5lc0luZGV4LCB0aGlzLl9jb2xzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBOdWxsIG91dCB0aGUgZW5kIG9mIHRoZSBsaW5lIGVuZHMgaWYgYSB3aWRlIGNoYXJhY3RlciB3cmFwcGVkIHRvIHRoZSBmb2xsb3dpbmcgbGluZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3cmFwcGVkTGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGRlc3RMaW5lTGVuZ3Roc1tpXSA8IG5ld0NvbHMpIHtcbiAgICAgICAgICB3cmFwcGVkTGluZXNbaV0uc2V0Q2VsbChkZXN0TGluZUxlbmd0aHNbaV0sIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3Qgdmlld3BvcnQgYXMgbmVlZGVkXG4gICAgICBsZXQgdmlld3BvcnRBZGp1c3RtZW50cyA9IGxpbmVzVG9BZGQgLSB0cmltbWVkTGluZXM7XG4gICAgICB3aGlsZSAodmlld3BvcnRBZGp1c3RtZW50cy0tID4gMCkge1xuICAgICAgICBpZiAodGhpcy55YmFzZSA9PT0gMCkge1xuICAgICAgICAgIGlmICh0aGlzLnkgPCBuZXdSb3dzIC0gMSkge1xuICAgICAgICAgICAgdGhpcy55Kys7XG4gICAgICAgICAgICB0aGlzLmxpbmVzLnBvcCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnliYXNlKys7XG4gICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEVuc3VyZSB5YmFzZSBkb2VzIG5vdCBleGNlZWQgaXRzIG1heGltdW0gdmFsdWVcbiAgICAgICAgICBpZiAodGhpcy55YmFzZSA8IE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLCB0aGlzLmxpbmVzLmxlbmd0aCArIGNvdW50VG9JbnNlcnQpIC0gbmV3Um93cykge1xuICAgICAgICAgICAgaWYgKHRoaXMueWJhc2UgPT09IHRoaXMueWRpc3ApIHtcbiAgICAgICAgICAgICAgdGhpcy55ZGlzcCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlYXJyYW5nZSBsaW5lcyBpbiB0aGUgYnVmZmVyIGlmIHRoZXJlIGFyZSBhbnkgaW5zZXJ0aW9ucywgdGhpcyBpcyBkb25lIGF0IHRoZSBlbmQgcmF0aGVyXG4gICAgLy8gdGhhbiBlYXJsaWVyIHNvIHRoYXQgaXQncyBhIHNpbmdsZSBPKG4pIHBhc3MgdGhyb3VnaCB0aGUgYnVmZmVyLCBpbnN0ZWFkIG9mIE8obl4yKSBmcm9tIG1hbnlcbiAgICAvLyBjb3N0bHkgY2FsbHMgdG8gQ2lyY3VsYXJMaXN0LnNwbGljZS5cbiAgICBpZiAodG9JbnNlcnQubGVuZ3RoID4gMCkge1xuICAgICAgLy8gUmVjb3JkIGJ1ZmZlciBpbnNlcnQgZXZlbnRzIGFuZCB0aGVuIHBsYXkgdGhlbSBiYWNrIGJhY2t3YXJkcyBzbyB0aGF0IHRoZSBpbmRleGVzIGFyZVxuICAgICAgLy8gY29ycmVjdFxuICAgICAgY29uc3QgaW5zZXJ0RXZlbnRzOiBJSW5zZXJ0RXZlbnRbXSA9IFtdO1xuXG4gICAgICAvLyBSZWNvcmQgb3JpZ2luYWwgbGluZXMgc28gdGhleSBkb24ndCBnZXQgb3ZlcnJpZGRlbiB3aGVuIHdlIHJlYXJyYW5nZSB0aGUgbGlzdFxuICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3JpZ2luYWxMaW5lcy5wdXNoKHRoaXMubGluZXMuZ2V0KGkpIGFzIEJ1ZmZlckxpbmUpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lc0xlbmd0aCA9IHRoaXMubGluZXMubGVuZ3RoO1xuXG4gICAgICBsZXQgb3JpZ2luYWxMaW5lSW5kZXggPSBvcmlnaW5hbExpbmVzTGVuZ3RoIC0gMTtcbiAgICAgIGxldCBuZXh0VG9JbnNlcnRJbmRleCA9IDA7XG4gICAgICBsZXQgbmV4dFRvSW5zZXJ0ID0gdG9JbnNlcnRbbmV4dFRvSW5zZXJ0SW5kZXhdO1xuICAgICAgdGhpcy5saW5lcy5sZW5ndGggPSBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCwgdGhpcy5saW5lcy5sZW5ndGggKyBjb3VudFRvSW5zZXJ0KTtcbiAgICAgIGxldCBjb3VudEluc2VydGVkU29GYXIgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoIC0gMSwgb3JpZ2luYWxMaW5lc0xlbmd0aCArIGNvdW50VG9JbnNlcnQgLSAxKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKG5leHRUb0luc2VydCAmJiBuZXh0VG9JbnNlcnQuc3RhcnQgPiBvcmlnaW5hbExpbmVJbmRleCArIGNvdW50SW5zZXJ0ZWRTb0Zhcikge1xuICAgICAgICAgIC8vIEluc2VydCBleHRyYSBsaW5lcyBoZXJlLCBhZGp1c3RpbmcgaSBhcyBuZWVkZWRcbiAgICAgICAgICBmb3IgKGxldCBuZXh0SSA9IG5leHRUb0luc2VydC5uZXdMaW5lcy5sZW5ndGggLSAxOyBuZXh0SSA+PSAwOyBuZXh0SS0tKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVzLnNldChpLS0sIG5leHRUb0luc2VydC5uZXdMaW5lc1tuZXh0SV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpKys7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgaW5zZXJ0IGV2ZW50cyBmb3IgbGF0ZXJcbiAgICAgICAgICBpbnNlcnRFdmVudHMucHVzaCh7XG4gICAgICAgICAgICBpbmRleDogb3JpZ2luYWxMaW5lSW5kZXggKyAxLFxuICAgICAgICAgICAgYW1vdW50OiBuZXh0VG9JbnNlcnQubmV3TGluZXMubGVuZ3RoXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb3VudEluc2VydGVkU29GYXIgKz0gbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzLmxlbmd0aDtcbiAgICAgICAgICBuZXh0VG9JbnNlcnQgPSB0b0luc2VydFsrK25leHRUb0luc2VydEluZGV4XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLnNldChpLCBvcmlnaW5hbExpbmVzW29yaWdpbmFsTGluZUluZGV4LS1dKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgbWFya2Vyc1xuICAgICAgbGV0IGluc2VydENvdW50RW1pdHRlZCA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gaW5zZXJ0RXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGluc2VydEV2ZW50c1tpXS5pbmRleCArPSBpbnNlcnRDb3VudEVtaXR0ZWQ7XG4gICAgICAgIHRoaXMubGluZXMub25JbnNlcnRFbWl0dGVyLmZpcmUoaW5zZXJ0RXZlbnRzW2ldKTtcbiAgICAgICAgaW5zZXJ0Q291bnRFbWl0dGVkICs9IGluc2VydEV2ZW50c1tpXS5hbW91bnQ7XG4gICAgICB9XG4gICAgICBjb25zdCBhbW91bnRUb1RyaW0gPSBNYXRoLm1heCgwLCBvcmlnaW5hbExpbmVzTGVuZ3RoICsgY291bnRUb0luc2VydCAtIHRoaXMubGluZXMubWF4TGVuZ3RoKTtcbiAgICAgIGlmIChhbW91bnRUb1RyaW0gPiAwKSB7XG4gICAgICAgIHRoaXMubGluZXMub25UcmltRW1pdHRlci5maXJlKGFtb3VudFRvVHJpbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gcHJpdmF0ZSBfcmVmbG93U21hbGxlckdldExpbmVzTmVlZGVkKClcblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBhIHN0cmluZyBpbmRleCBiYWNrIHRvIGEgQnVmZmVySW5kZXguXG4gICAqIFRvIGdldCB0aGUgY29ycmVjdCBidWZmZXIgcG9zaXRpb24gdGhlIHN0cmluZyBtdXN0IHN0YXJ0IGF0IGBzdGFydENvbGAgMFxuICAgKiAoZGVmYXVsdCBpbiB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcpLlxuICAgKiBUaGUgbWV0aG9kIGFsc28gd29ya3Mgb24gd3JhcHBlZCBsaW5lIHN0cmluZ3MgZ2l2ZW4gcm93cyB3ZXJlIG5vdCB0cmltbWVkLlxuICAgKiBUaGUgbWV0aG9kIG9wZXJhdGVzIG9uIHRoZSBDaGFyRGF0YSBzdHJpbmcgbGVuZ3RoLCB0aGVyZSBhcmUgbm9cbiAgICogYWRkaXRpb25hbCBjb250ZW50IG9yIGJvdW5kYXJ5IGNoZWNrcy4gVGhlcmVmb3JlIHRoZSBzdHJpbmcgYW5kIHRoZSBidWZmZXJcbiAgICogc2hvdWxkIG5vdCBiZSBhbHRlcmVkIGluIGJldHdlZW4uXG4gICAqIFRPRE86IHJlc3BlY3QgdHJpbSBmbGFnIGFmdGVyIGZpeGluZyAjMTY4NVxuICAgKiBAcGFyYW0gbGluZUluZGV4IGxpbmUgaW5kZXggdGhlIHN0cmluZyB3YXMgcmV0cmlldmVkIGZyb21cbiAgICogQHBhcmFtIHN0cmluZ0luZGV4IGluZGV4IHdpdGhpbiB0aGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzdGFydENvbCBjb2x1bW4gb2Zmc2V0IHRoZSBzdHJpbmcgd2FzIHJldHJpZXZlZCBmcm9tXG4gICAqL1xuICBwdWJsaWMgc3RyaW5nSW5kZXhUb0J1ZmZlckluZGV4KGxpbmVJbmRleDogbnVtYmVyLCBzdHJpbmdJbmRleDogbnVtYmVyLCB0cmltUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZSk6IEJ1ZmZlckluZGV4IHtcbiAgICB3aGlsZSAoc3RyaW5nSW5kZXgpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmxpbmVzLmdldChsaW5lSW5kZXgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIHJldHVybiBbLTEsIC0xXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlbmd0aCA9ICh0cmltUmlnaHQpID8gbGluZS5nZXRUcmltbWVkTGVuZ3RoKCkgOiBsaW5lLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmUuZ2V0KGkpW0NIQVJfREFUQV9XSURUSF9JTkRFWF0pIHtcbiAgICAgICAgICAvLyBlbXB0eSBjZWxscyByZXBvcnQgYSBzdHJpbmcgbGVuZ3RoIG9mIDAsIGJ1dCBnZXQgcmVwbGFjZWRcbiAgICAgICAgICAvLyB3aXRoIGEgd2hpdGVzcGFjZSBpbiB0cmFuc2xhdGVUb1N0cmluZywgdGh1cyByZXBsYWNlIHdpdGggMVxuICAgICAgICAgIHN0cmluZ0luZGV4IC09IGxpbmUuZ2V0KGkpW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggfHwgMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIFtsaW5lSW5kZXgsIGldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaW5lSW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lSW5kZXgsIDBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgYSBidWZmZXIgbGluZSB0byBhIHN0cmluZywgd2l0aCBvcHRpb25hbCBzdGFydCBhbmQgZW5kIGNvbHVtbnMuXG4gICAqIFdpZGUgY2hhcmFjdGVycyB3aWxsIGNvdW50IGFzIHR3byBjb2x1bW5zIGluIHRoZSByZXN1bHRpbmcgc3RyaW5nLiBUaGlzXG4gICAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBmb3IgZ2V0dGluZyB0aGUgYWN0dWFsIHRleHQgdW5kZXJuZWF0aCB0aGUgcmF3IHNlbGVjdGlvblxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGxpbmUgVGhlIGxpbmUgYmVpbmcgdHJhbnNsYXRlZC5cbiAgICogQHBhcmFtIHRyaW1SaWdodCBXaGV0aGVyIHRvIHRyaW0gd2hpdGVzcGFjZSB0byB0aGUgcmlnaHQuXG4gICAqIEBwYXJhbSBzdGFydENvbCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gZW5kQ29sIFRoZSBjb2x1bW4gdG8gZW5kIGF0LlxuICAgKi9cbiAgcHVibGljIHRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhsaW5lSW5kZXg6IG51bWJlciwgdHJpbVJpZ2h0OiBib29sZWFuLCBzdGFydENvbDogbnVtYmVyID0gMCwgZW5kQ29sPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lcy5nZXQobGluZUluZGV4KTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJpbVJpZ2h0LCBzdGFydENvbCwgZW5kQ29sKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHk6IG51bWJlcik6IHsgZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyIH0ge1xuICAgIGxldCBmaXJzdCA9IHk7XG4gICAgbGV0IGxhc3QgPSB5O1xuICAgIC8vIFNjYW4gdXB3YXJkcyBmb3Igd3JhcHBlZCBsaW5lc1xuICAgIHdoaWxlIChmaXJzdCA+IDAgJiYgdGhpcy5saW5lcy5nZXQoZmlyc3QpLmlzV3JhcHBlZCkge1xuICAgICAgZmlyc3QtLTtcbiAgICB9XG4gICAgLy8gU2NhbiBkb3dud2FyZHMgZm9yIHdyYXBwZWQgbGluZXNcbiAgICB3aGlsZSAobGFzdCArIDEgPCB0aGlzLmxpbmVzLmxlbmd0aCAmJiB0aGlzLmxpbmVzLmdldChsYXN0ICsgMSkuaXNXcmFwcGVkKSB7XG4gICAgICBsYXN0Kys7XG4gICAgfVxuICAgIHJldHVybiB7IGZpcnN0LCBsYXN0IH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHRhYiBzdG9wcy5cbiAgICogQHBhcmFtIGkgVGhlIGluZGV4IHRvIHN0YXJ0IHNldHRpbmcgdXAgdGFiIHN0b3BzIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2V0dXBUYWJTdG9wcyhpPzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGkgIT09IG51bGwgJiYgaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXRoaXMudGFic1tpXSkge1xuICAgICAgICBpID0gdGhpcy5wcmV2U3RvcChpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50YWJzID0ge307XG4gICAgICBpID0gMDtcbiAgICB9XG5cbiAgICBmb3IgKDsgaSA8IHRoaXMuX2NvbHM7IGkgKz0gdGhpcy5fdGVybWluYWwub3B0aW9ucy50YWJTdG9wV2lkdGgpIHtcbiAgICAgIHRoaXMudGFic1tpXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgcHJldmlvdXMgdGFiIHN0b3AgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24gKGRlZmF1bHQgaXMgY3VycmVudCkuXG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiB0byBtb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIHByZXZpb3VzIHRhYiBzdG9wLlxuICAgKi9cbiAgcHVibGljIHByZXZTdG9wKHg/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICh4ID09PSBudWxsIHx8IHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgeCA9IHRoaXMueDtcbiAgICB9XG4gICAgd2hpbGUgKCF0aGlzLnRhYnNbLS14XSAmJiB4ID4gMCk7XG4gICAgcmV0dXJuIHggPj0gdGhpcy5fY29scyA/IHRoaXMuX2NvbHMgLSAxIDogeCA8IDAgPyAwIDogeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBjdXJzb3Igb25lIHRhYiBzdG9wIGZvcndhcmQgZnJvbSB0aGUgZ2l2ZW4gcG9zaXRpb24gKGRlZmF1bHQgaXMgY3VycmVudCkuXG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiB0byBtb3ZlIHRoZSBjdXJzb3Igb25lIHRhYiBzdG9wIGZvcndhcmQuXG4gICAqL1xuICBwdWJsaWMgbmV4dFN0b3AoeD86IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHggPT09IG51bGwgfHwgeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gdGhpcy54O1xuICAgIH1cbiAgICB3aGlsZSAoIXRoaXMudGFic1srK3hdICYmIHggPCB0aGlzLl9jb2xzKTtcbiAgICByZXR1cm4geCA+PSB0aGlzLl9jb2xzID8gdGhpcy5fY29scyAtIDEgOiB4IDwgMCA/IDAgOiB4O1xuICB9XG5cbiAgcHVibGljIGFkZE1hcmtlcih5OiBudW1iZXIpOiBNYXJrZXIge1xuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBNYXJrZXIoeSk7XG4gICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vblRyaW0oYW1vdW50ID0+IHtcbiAgICAgIG1hcmtlci5saW5lIC09IGFtb3VudDtcbiAgICAgIC8vIFRoZSBtYXJrZXIgc2hvdWxkIGJlIGRpc3Bvc2VkIHdoZW4gdGhlIGxpbmUgaXMgdHJpbW1lZCBmcm9tIHRoZSBidWZmZXJcbiAgICAgIGlmIChtYXJrZXIubGluZSA8IDApIHtcbiAgICAgICAgbWFya2VyLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbWFya2VyLnJlZ2lzdGVyKHRoaXMubGluZXMub25JbnNlcnQoZXZlbnQgPT4ge1xuICAgICAgaWYgKG1hcmtlci5saW5lID49IGV2ZW50LmluZGV4KSB7XG4gICAgICAgIG1hcmtlci5saW5lICs9IGV2ZW50LmFtb3VudDtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbWFya2VyLnJlZ2lzdGVyKHRoaXMubGluZXMub25EZWxldGUoZXZlbnQgPT4ge1xuICAgICAgLy8gRGVsZXRlIHRoZSBtYXJrZXIgaWYgaXQncyB3aXRoaW4gdGhlIHJhbmdlXG4gICAgICBpZiAobWFya2VyLmxpbmUgPj0gZXZlbnQuaW5kZXggJiYgbWFya2VyLmxpbmUgPCBldmVudC5pbmRleCArIGV2ZW50LmFtb3VudCkge1xuICAgICAgICBtYXJrZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBTaGlmdCB0aGUgbWFya2VyIGlmIGl0J3MgYWZ0ZXIgdGhlIGRlbGV0ZWQgcmFuZ2VcbiAgICAgIGlmIChtYXJrZXIubGluZSA+IGV2ZW50LmluZGV4KSB7XG4gICAgICAgIG1hcmtlci5saW5lIC09IGV2ZW50LmFtb3VudDtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgbWFya2VyLnJlZ2lzdGVyKG1hcmtlci5vbkRpc3Bvc2UoKCkgPT4gdGhpcy5fcmVtb3ZlTWFya2VyKG1hcmtlcikpKTtcbiAgICByZXR1cm4gbWFya2VyO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVtb3ZlTWFya2VyKG1hcmtlcjogTWFya2VyKTogdm9pZCB7XG4gICAgdGhpcy5tYXJrZXJzLnNwbGljZSh0aGlzLm1hcmtlcnMuaW5kZXhPZihtYXJrZXIpLCAxKTtcbiAgfVxuXG4gIHB1YmxpYyBpdGVyYXRvcih0cmltUmlnaHQ6IGJvb2xlYW4sIHN0YXJ0SW5kZXg/OiBudW1iZXIsIGVuZEluZGV4PzogbnVtYmVyLCBzdGFydE92ZXJzY2FuPzogbnVtYmVyLCBlbmRPdmVyc2Nhbj86IG51bWJlcik6IElCdWZmZXJTdHJpbmdJdGVyYXRvciB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXJTdHJpbmdJdGVyYXRvcih0aGlzLCB0cmltUmlnaHQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4LCBzdGFydE92ZXJzY2FuLCBlbmRPdmVyc2Nhbik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1hcmtlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJTWFya2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgX25leHRJZCA9IDE7XG5cbiAgcHJpdmF0ZSBfaWQ6IG51bWJlciA9IE1hcmtlci5fbmV4dElkKys7XG4gIHB1YmxpYyBpc0Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGdldCBpZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5faWQ7IH1cblxuICBwcml2YXRlIF9vbkRpc3Bvc2UgPSBuZXcgRXZlbnRFbWl0dGVyMjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uRGlzcG9zZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25EaXNwb3NlLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGxpbmU6IG51bWJlclxuICApIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIC8vIEVtaXQgYmVmb3JlIHN1cGVyLmRpc3Bvc2Ugc3VjaCB0aGF0IGRpc3Bvc2UgbGlzdGVuZXJzIGdldCBhIGNoYW5nZSB0byByZWFjdFxuICAgIHRoaXMuX29uRGlzcG9zZS5maXJlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRvciB0byBnZXQgdW53cmFwcGVkIGNvbnRlbnQgc3RyaW5ncyBmcm9tIHRoZSBidWZmZXIuXG4gKiBUaGUgaXRlcmF0b3IgcmV0dXJucyBhdCBsZWFzdCB0aGUgc3RyaW5nIGRhdGEgYmV0d2VlbiB0aGUgYm9yZGVyc1xuICogYHN0YXJ0SW5kZXhgIGFuZCBgZW5kSW5kZXhgIChleGNsdXNpdmUpIGFuZCB3aWxsIGV4cGFuZCB0aGUgbGluZXNcbiAqIGJ5IGBzdGFydE92ZXJzY2FuYCB0byB0aGUgdG9wIGFuZCBieSBgZW5kT3ZlcnNjYW5gIHRvIHRoZSBib3R0b20sXG4gKiBpZiBubyBuZXcgbGluZSB3YXMgZm91bmQgaW4gYmV0d2Vlbi5cbiAqIEl0IHdpbGwgbmV2ZXIgcmVhZC9yZXR1cm4gc3RyaW5nIGRhdGEgYmV5b25kIGBzdGFydEluZGV4IC0gc3RhcnRPdmVyc2NhbmBcbiAqIG9yIGBlbmRJbmRleCArIGVuZE92ZXJzY2FuYC4gVGhlcmVmb3JlIHRoZSBmaXJzdCBhbmQgbGFzdCBsaW5lIG1pZ2h0IGJlIHRydW5jYXRlZC5cbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGFsd2F5cyBnZXQgdGhlIGZ1bGwgc3RyaW5nIGZvciB0aGUgZmlyc3QgYW5kIGxhc3QgbGluZSBhcyB3ZWxsXG4gKiBieSBzZXR0aW5nIHRoZSBvdmVyc2NhbiB2YWx1ZXMgdG8gdGhlIGFjdHVhbCBidWZmZXIgbGVuZ3RoLiBUaGlzIG5vdCByZWNvbW1lbmRlZFxuICogc2luY2UgaXQgbWlnaHQgcmV0dXJuIHRoZSB3aG9sZSBidWZmZXIgd2l0aGluIGEgc2luZ2xlIHN0cmluZyBpbiBhIHdvcnN0IGNhc2Ugc2NlbmFyaW8uXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXJTdHJpbmdJdGVyYXRvciBpbXBsZW1lbnRzIElCdWZmZXJTdHJpbmdJdGVyYXRvciB7XG4gIHByaXZhdGUgX2N1cnJlbnQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvciAoXG4gICAgcHJpdmF0ZSBfYnVmZmVyOiBJQnVmZmVyLFxuICAgIHByaXZhdGUgX3RyaW1SaWdodDogYm9vbGVhbixcbiAgICBwcml2YXRlIF9zdGFydEluZGV4OiBudW1iZXIgPSAwLFxuICAgIHByaXZhdGUgX2VuZEluZGV4OiBudW1iZXIgPSBfYnVmZmVyLmxpbmVzLmxlbmd0aCxcbiAgICBwcml2YXRlIF9zdGFydE92ZXJzY2FuOiBudW1iZXIgPSAwLFxuICAgIHByaXZhdGUgX2VuZE92ZXJzY2FuOiBudW1iZXIgPSAwXG4gICkge1xuICAgIGlmICh0aGlzLl9zdGFydEluZGV4IDwgMCkge1xuICAgICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLl9lbmRJbmRleCA+IHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2VuZEluZGV4ID0gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aDtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX3N0YXJ0SW5kZXg7XG4gIH1cblxuICBwdWJsaWMgaGFzTmV4dCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudCA8IHRoaXMuX2VuZEluZGV4O1xuICB9XG5cbiAgcHVibGljIG5leHQoKTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yUmVzdWx0IHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMuX2J1ZmZlci5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHRoaXMuX2N1cnJlbnQpO1xuICAgIC8vIGxpbWl0IHNlYXJjaCB3aW5kb3cgdG8gb3ZlcnNjYW4gdmFsdWUgYXQgYm90aCBib3JkZXJzXG4gICAgaWYgKHJhbmdlLmZpcnN0IDwgdGhpcy5fc3RhcnRJbmRleCAtIHRoaXMuX3N0YXJ0T3ZlcnNjYW4pIHtcbiAgICAgIHJhbmdlLmZpcnN0ID0gdGhpcy5fc3RhcnRJbmRleCAtIHRoaXMuX3N0YXJ0T3ZlcnNjYW47XG4gICAgfVxuICAgIGlmIChyYW5nZS5sYXN0ID4gdGhpcy5fZW5kSW5kZXggKyB0aGlzLl9lbmRPdmVyc2Nhbikge1xuICAgICAgcmFuZ2UubGFzdCA9IHRoaXMuX2VuZEluZGV4ICsgdGhpcy5fZW5kT3ZlcnNjYW47XG4gICAgfVxuICAgIC8vIGxpbWl0IHRvIGN1cnJlbnQgYnVmZmVyIGxlbmd0aFxuICAgIHJhbmdlLmZpcnN0ID0gTWF0aC5tYXgocmFuZ2UuZmlyc3QsIDApO1xuICAgIHJhbmdlLmxhc3QgPSBNYXRoLm1pbihyYW5nZS5sYXN0LCB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoKTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IHJhbmdlLmZpcnN0OyBpIDw9IHJhbmdlLmxhc3Q7ICsraSkge1xuICAgICAgcmVzdWx0ICs9IHRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoaSwgdGhpcy5fdHJpbVJpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudCA9IHJhbmdlLmxhc3QgKyAxO1xuICAgIHJldHVybiB7cmFuZ2U6IHJhbmdlLCBjb250ZW50OiByZXN1bHR9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBDaGFyRGF0YSwgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgSUNvbG9yUkdCLCBJQXR0cmlidXRlRGF0YSB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgTlVMTF9DRUxMX0NPREUsIE5VTExfQ0VMTF9XSURUSCwgTlVMTF9DRUxMX0NIQVIsIENIQVJfREFUQV9DSEFSX0lOREVYLCBDSEFSX0RBVEFfV0lEVEhfSU5ERVgsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCB9IGZyb20gJy4vQnVmZmVyJztcbmltcG9ydCB7IHN0cmluZ0Zyb21Db2RlUG9pbnQgfSBmcm9tICcuL2NvcmUvaW5wdXQvVGV4dERlY29kZXInO1xuXG5cbi8qKlxuICogYnVmZmVyIG1lbW9yeSBsYXlvdXQ6XG4gKlxuICogICB8ICAgICAgICAgICAgIHVpbnQzMl90ICAgICAgICAgICAgIHwgICAgICAgIHVpbnQzMl90ICAgICAgICAgfCAgICAgICAgdWludDMyX3QgICAgICAgICB8XG4gKiAgIHwgICAgICAgICAgICAgYGNvbnRlbnRgICAgICAgICAgICAgfCAgICAgICAgICBgRkdgICAgICAgICAgICB8ICAgICAgICAgIGBCR2AgICAgICAgICAgIHxcbiAqICAgfCB3Y3dpZHRoKDIpIGNvbWIoMSkgY29kZXBvaW50KDIxKSB8IGZsYWdzKDgpIFIoOCkgRyg4KSBCKDgpIHwgZmxhZ3MoOCkgUig4KSBHKDgpIEIoOCkgfFxuICovXG5cblxuLyoqIHR5cGVkIGFycmF5IHNsb3RzIHRha2VuIGJ5IG9uZSBjZWxsICovXG5jb25zdCBDRUxMX1NJWkUgPSAzO1xuXG4vKipcbiAqIENlbGwgbWVtYmVyIGluZGljZXMuXG4gKlxuICogRGlyZWN0IGFjY2VzczpcbiAqICAgIGBjb250ZW50ID0gZGF0YVtjb2x1bW4gKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO2BcbiAqICAgIGBmZyA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5GR107YFxuICogICAgYGJnID0gZGF0YVtjb2x1bW4gKiBDRUxMX1NJWkUgKyBDZWxsLkJHXTtgXG4gKi9cbmNvbnN0IGVudW0gQ2VsbCB7XG4gIENPTlRFTlQgPSAwLFxuICBGRyA9IDEsIC8vIGN1cnJlbnRseSBzaW1wbHkgaG9sZHMgYWxsIGtub3duIGF0dHJzXG4gIEJHID0gMiAgLy8gY3VycmVudGx5IHVudXNlZFxufVxuXG4vKipcbiAqIEJpdG1hc2tzIGZvciBhY2Nlc3NpbmcgZGF0YSBpbiBgY29udGVudGAuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIENvbnRlbnQge1xuICAvKipcbiAgICogYml0IDEuLjIxICAgIGNvZGVwb2ludCwgbWF4IGFsbG93ZWQgaW4gVVRGMzIgaXMgMHgxMEZGRkYgKDIxIGJpdHMgdGFrZW4pXG4gICAqICAgICAgICAgICAgICByZWFkOiAgIGBjb2RlcG9pbnQgPSBjb250ZW50ICYgQ29udGVudC5jb2RlcG9pbnRNYXNrO2BcbiAgICogICAgICAgICAgICAgIHdyaXRlOiAgYGNvbnRlbnQgfD0gY29kZXBvaW50ICYgQ29udGVudC5jb2RlcG9pbnRNYXNrO2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQgaWYgcHJlY29uZGl0aW9uIGBjb2RlcG9pbnQgPD0gMHgxMEZGRkZgIGlzIG1ldDpcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGNvbnRlbnQgfD0gY29kZXBvaW50O2BcbiAgICovXG4gIENPREVQT0lOVF9NQVNLID0gMHgxRkZGRkYsXG5cbiAgLyoqXG4gICAqIGJpdCAyMiAgICAgICBmbGFnIGluZGljYXRpb24gd2hldGhlciBhIGNlbGwgY29udGFpbnMgY29tYmluZWQgY29udGVudFxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgaXNDb21iaW5lZCA9IGNvbnRlbnQgJiBDb250ZW50LmlzQ29tYmluZWQ7YFxuICAgKiAgICAgICAgICAgICAgc2V0OiAgICBgY29udGVudCB8PSBDb250ZW50LmlzQ29tYmluZWQ7YFxuICAgKiAgICAgICAgICAgICAgY2xlYXI6ICBgY29udGVudCAmPSB+Q29udGVudC5pc0NvbWJpbmVkO2BcbiAgICovXG4gIElTX0NPTUJJTkVEX01BU0sgPSAweDIwMDAwMCwgIC8vIDEgPDwgMjFcblxuICAvKipcbiAgICogYml0IDEuLjIyICAgIG1hc2sgdG8gY2hlY2sgd2hldGhlciBhIGNlbGwgY29udGFpbnMgYW55IHN0cmluZyBkYXRhXG4gICAqICAgICAgICAgICAgICB3ZSBuZWVkIHRvIGNoZWNrIGZvciBjb2RlcG9pbnQgYW5kIGlzQ29tYmluZWQgYml0cyB0byBzZWVcbiAgICogICAgICAgICAgICAgIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGFueXRoaW5nXG4gICAqICAgICAgICAgICAgICByZWFkOiAgIGBpc0VtcHR5ID0gIShjb250ZW50ICYgQ29udGVudC5oYXNDb250ZW50KWBcbiAgICovXG4gIEhBU19DT05URU5UX01BU0sgPSAweDNGRkZGRixcblxuICAvKipcbiAgICogYml0IDIzLi4yNCAgIHdjd2lkdGggdmFsdWUgb2YgY2VsbCwgdGFrZXMgMiBiaXRzIChyYW5nZXMgZnJvbSAwLi4yKVxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgd2lkdGggPSAoY29udGVudCAmIENvbnRlbnQud2lkdGhNYXNrKSA+PiBDb250ZW50LndpZHRoU2hpZnQ7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgaGFzV2lkdGggPSBjb250ZW50ICYgQ29udGVudC53aWR0aE1hc2s7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBhcyBsb25nIGFzIHdjd2lkdGggaXMgaGlnaGVzdCB2YWx1ZSBpbiBgY29udGVudGA6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGB3aWR0aCA9IGNvbnRlbnQgPj4gQ29udGVudC53aWR0aFNoaWZ0O2BcbiAgICogICAgICAgICAgICAgIHdyaXRlOiAgYGNvbnRlbnQgfD0gKHdpZHRoIDw8IENvbnRlbnQud2lkdGhTaGlmdCkgJiBDb250ZW50LndpZHRoTWFzaztgXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0IGlmIHByZWNvbmRpdGlvbiBgMCA8PSB3aWR0aCA8PSAzYCBpcyBtZXQ6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb250ZW50IHw9IHdpZHRoIDw8IENvbnRlbnQud2lkdGhTaGlmdDtgXG4gICAqL1xuICBXSURUSF9NQVNLID0gMHhDMDAwMDAsICAgLy8gMyA8PCAyMlxuICBXSURUSF9TSElGVCA9IDIyXG59XG5cblxuZXhwb3J0IGNvbnN0IGVudW0gQXR0cmlidXRlcyB7XG4gIC8qKlxuICAgKiBiaXQgMS4uOCAgICAgYmx1ZSBpbiBSR0IsIGNvbG9yIGluIFAyNTYgYW5kIFAxNlxuICAgKi9cbiAgQkxVRV9NQVNLID0gMHhGRixcbiAgQkxVRV9TSElGVCA9IDAsXG4gIFBDT0xPUl9NQVNLID0gMHhGRixcbiAgUENPTE9SX1NISUZUID0gMCxcblxuICAvKipcbiAgICogYml0IDkuLjE2ICAgIGdyZWVuIGluIFJHQlxuICAgKi9cbiAgR1JFRU5fTUFTSyA9IDB4RkYwMCxcbiAgR1JFRU5fU0hJRlQgPSA4LFxuXG4gIC8qKlxuICAgKiBiaXQgMTcuLjI0ICAgcmVkIGluIFJHQlxuICAgKi9cbiAgUkVEX01BU0sgPSAweEZGMDAwMCxcbiAgUkVEX1NISUZUID0gMTYsXG5cbiAgLyoqXG4gICAqIGJpdCAyNS4uMjYgICBjb2xvciBtb2RlOiBERUZBVUxUICgwKSB8IFAxNiAoMSkgfCBQMjU2ICgyKSB8IFJHQiAoMylcbiAgICovXG4gIENNX01BU0sgPSAweDMwMDAwMDAsXG4gIENNX0RFRkFVTFQgPSAwLFxuICBDTV9QMTYgPSAweDEwMDAwMDAsXG4gIENNX1AyNTYgPSAweDIwMDAwMDAsXG4gIENNX1JHQiA9IDB4MzAwMDAwMCxcblxuICAvKipcbiAgICogYml0IDEuLjI0ICBSR0Igcm9vbVxuICAgKi9cbiAgUkdCX01BU0sgPSAweEZGRkZGRlxufVxuXG5leHBvcnQgY29uc3QgZW51bSBGZ0ZsYWdzIHtcbiAgLyoqXG4gICAqIGJpdCAyNy4uMzEgKDMydGggYml0IHVudXNlZClcbiAgICovXG4gIElOVkVSU0UgPSAweDQwMDAwMDAsXG4gIEJPTEQgPSAweDgwMDAwMDAsXG4gIFVOREVSTElORSA9IDB4MTAwMDAwMDAsXG4gIEJMSU5LID0gMHgyMDAwMDAwMCxcbiAgSU5WSVNJQkxFID0gMHg0MDAwMDAwMFxufVxuXG5leHBvcnQgY29uc3QgZW51bSBCZ0ZsYWdzIHtcbiAgLyoqXG4gICAqIGJpdCAyNy4uMzIgKHVwcGVyIDQgdW51c2VkKVxuICAgKi9cbiAgSVRBTElDID0gMHg0MDAwMDAwLFxuICBESU0gPSAweDgwMDAwMDBcbn1cblxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZURhdGEgaW1wbGVtZW50cyBJQXR0cmlidXRlRGF0YSB7XG4gIHN0YXRpYyB0b0NvbG9yUkdCKHZhbHVlOiBudW1iZXIpOiBJQ29sb3JSR0Ige1xuICAgIHJldHVybiBbXG4gICAgICB2YWx1ZSA+Pj4gQXR0cmlidXRlcy5SRURfU0hJRlQgJiAyNTUsXG4gICAgICB2YWx1ZSA+Pj4gQXR0cmlidXRlcy5HUkVFTl9TSElGVCAmIDI1NSxcbiAgICAgIHZhbHVlICYgMjU1XG4gICAgXTtcbiAgfVxuICBzdGF0aWMgZnJvbUNvbG9yUkdCKHZhbHVlOiBJQ29sb3JSR0IpOiBudW1iZXIge1xuICAgIHJldHVybiAodmFsdWVbMF0gJiAyNTUpIDw8IEF0dHJpYnV0ZXMuUkVEX1NISUZUIHwgKHZhbHVlWzFdICYgMjU1KSA8PCBBdHRyaWJ1dGVzLkdSRUVOX1NISUZUIHwgdmFsdWVbMl0gJiAyNTU7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogSUF0dHJpYnV0ZURhdGEge1xuICAgIGNvbnN0IG5ld09iaiA9IG5ldyBBdHRyaWJ1dGVEYXRhKCk7XG4gICAgbmV3T2JqLmZnID0gdGhpcy5mZztcbiAgICBuZXdPYmouYmcgPSB0aGlzLmJnO1xuICAgIHJldHVybiBuZXdPYmo7XG4gIH1cblxuICAvLyBkYXRhXG4gIHB1YmxpYyBmZzogbnVtYmVyID0gMDtcbiAgcHVibGljIGJnOiBudW1iZXIgPSAwO1xuXG4gIC8vIGZsYWdzXG4gIHB1YmxpYyBpc0ludmVyc2UoKTogbnVtYmVyICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WRVJTRTsgfVxuICBwdWJsaWMgaXNCb2xkKCk6IG51bWJlciAgICAgIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLkJPTEQ7IH1cbiAgcHVibGljIGlzVW5kZXJsaW5lKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5VTkRFUkxJTkU7IH1cbiAgcHVibGljIGlzQmxpbmsoKTogbnVtYmVyICAgICB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5CTElOSzsgfVxuICBwdWJsaWMgaXNJbnZpc2libGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLklOVklTSUJMRTsgfVxuICBwdWJsaWMgaXNJdGFsaWMoKTogbnVtYmVyICAgIHsgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLklUQUxJQzsgfVxuICBwdWJsaWMgaXNEaW0oKTogbnVtYmVyICAgICAgIHsgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLkRJTTsgfVxuXG4gIC8vIGNvbG9yIG1vZGVzXG4gIHB1YmxpYyBnZXRGZ0NvbG9yTW9kZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSzsgfVxuICBwdWJsaWMgZ2V0QmdDb2xvck1vZGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0s7IH1cbiAgcHVibGljIGlzRmdSR0IoKTogYm9vbGVhbiAgICAgICB7IHJldHVybiAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUkdCOyB9XG4gIHB1YmxpYyBpc0JnUkdCKCk6IGJvb2xlYW4gICAgICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1JHQjsgfVxuICBwdWJsaWMgaXNGZ1BhbGV0dGUoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMTYgfHwgKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AyNTY7IH1cbiAgcHVibGljIGlzQmdQYWxldHRlKCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2IHx8ICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2OyB9XG4gIHB1YmxpYyBpc0ZnRGVmYXVsdCgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSAwOyB9XG4gIHB1YmxpYyBpc0JnRGVmYXVsdCgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSAwOyB9XG5cbiAgLy8gY29sb3JzXG4gIHB1YmxpYyBnZXRGZ0NvbG9yKCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6ICByZXR1cm4gdGhpcy5mZyAmIEF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmZnICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOyAgLy8gQ01fREVGQVVMVCBkZWZhdWx0cyB0byAtMVxuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0QmdDb2xvcigpOiBudW1iZXIge1xuICAgIHN3aXRjaCAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykge1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OiAgcmV0dXJuIHRoaXMuYmcgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjogICByZXR1cm4gdGhpcy5iZyAmIEF0dHJpYnV0ZXMuUkdCX01BU0s7XG4gICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsgIC8vIENNX0RFRkFVTFQgZGVmYXVsdHMgdG8gLTFcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDZWxsRGF0YSAtIHJlcHJlc2VudHMgYSBzaW5nbGUgQ2VsbCBpbiB0aGUgdGVybWluYWwgYnVmZmVyLlxuICovXG5leHBvcnQgY2xhc3MgQ2VsbERhdGEgZXh0ZW5kcyBBdHRyaWJ1dGVEYXRhIGltcGxlbWVudHMgSUNlbGxEYXRhIHtcblxuICAvKiogSGVscGVyIHRvIGNyZWF0ZSBDZWxsRGF0YSBmcm9tIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiBDZWxsRGF0YSB7XG4gICAgY29uc3Qgb2JqID0gbmV3IENlbGxEYXRhKCk7XG4gICAgb2JqLnNldEZyb21DaGFyRGF0YSh2YWx1ZSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIC8qKiBQcmltaXRpdmVzIGZyb20gdGVybWluYWwgYnVmZmVyLiAqL1xuICBwdWJsaWMgY29udGVudDogbnVtYmVyID0gMDtcbiAgcHVibGljIGZnOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgYmc6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBjb21iaW5lZERhdGE6IHN0cmluZyA9ICcnO1xuXG4gIC8qKiBXaGV0aGVyIGNlbGwgY29udGFpbnMgYSBjb21iaW5lZCBzdHJpbmcuICovXG4gIHB1YmxpYyBpc0NvbWJpbmVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSztcbiAgfVxuXG4gIC8qKiBXaWR0aCBvZiB0aGUgY2VsbC4gKi9cbiAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudCA+PiBDb250ZW50LldJRFRIX1NISUZUO1xuICB9XG5cbiAgLyoqIEpTIHN0cmluZyBvZiB0aGUgY29udGVudC4gKi9cbiAgcHVibGljIGdldENoYXJzKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuY29tYmluZWREYXRhO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykge1xuICAgICAgcmV0dXJuIHN0cmluZ0Zyb21Db2RlUG9pbnQodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2RlcG9pbnQgb2YgY2VsbFxuICAgKiBOb3RlIHRoaXMgcmV0dXJucyB0aGUgVVRGMzIgY29kZXBvaW50IG9mIHNpbmdsZSBjaGFycyxcbiAgICogaWYgY29udGVudCBpcyBhIGNvbWJpbmVkIHN0cmluZyBpdCByZXR1cm5zIHRoZSBjb2RlcG9pbnRcbiAgICogb2YgdGhlIGxhc3QgY2hhciBpbiBzdHJpbmcgdG8gYmUgaW4gbGluZSB3aXRoIGNvZGUgaW4gQ2hhckRhdGEuXG4gICAqICovXG4gIHB1YmxpYyBnZXRDb2RlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLmlzQ29tYmluZWQoKSlcbiAgICAgID8gdGhpcy5jb21iaW5lZERhdGEuY2hhckNvZGVBdCh0aGlzLmNvbWJpbmVkRGF0YS5sZW5ndGggLSAxKVxuICAgICAgOiB0aGlzLmNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICB9XG5cbiAgLyoqIFNldCBkYXRhIGZyb20gQ2hhckRhdGEgKi9cbiAgcHVibGljIHNldEZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLmZnID0gdmFsdWVbQ0hBUl9EQVRBX0FUVFJfSU5ERVhdO1xuICAgIHRoaXMuYmcgPSAwO1xuICAgIGxldCBjb21iaW5lZCA9IGZhbHNlO1xuXG4gICAgLy8gc3Vycm9nYXRlcyBhbmQgY29tYmluZWQgc3RyaW5ncyBuZWVkIHNwZWNpYWwgdHJlYXRtZW50XG4gICAgaWYgKHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggPiAyKSB7XG4gICAgICBjb21iaW5lZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoID09PSAyKSB7XG4gICAgICBjb25zdCBjb2RlID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAvLyBpZiB0aGUgMi1jaGFyIHN0cmluZyBpcyBhIHN1cnJvZ2F0ZSBjcmVhdGUgc2luZ2xlIGNvZGVwb2ludFxuICAgICAgLy8gZXZlcnl0aGluZyBlbHNlIGlzIGNvbWJpbmVkXG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMSk7XG4gICAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgICB0aGlzLmNvbnRlbnQgPSAoKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwKSB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbWJpbmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRlbnQgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKSB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH1cbiAgICBpZiAoY29tYmluZWQpIHtcbiAgICAgIHRoaXMuY29tYmluZWREYXRhID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdO1xuICAgICAgdGhpcy5jb250ZW50ID0gQ29udGVudC5JU19DT01CSU5FRF9NQVNLIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEdldCBkYXRhIGFzIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgZ2V0QXNDaGFyRGF0YSgpOiBDaGFyRGF0YSB7XG4gICAgcmV0dXJuIFt0aGlzLmZnLCB0aGlzLmdldENoYXJzKCksIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRDb2RlKCldO1xuICB9XG59XG5cblxuLyoqXG4gKiBUeXBlZCBhcnJheSBiYXNlZCBidWZmZXJsaW5lIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRoZXJlIGFyZSAyIHdheXMgdG8gaW5zZXJ0IGRhdGEgaW50byB0aGUgY2VsbCBidWZmZXI6XG4gKiAtIGBzZXRDZWxsRnJvbUNvZGVwb2ludGAgKyBgYWRkQ29kZXBvaW50VG9DZWxsYFxuICogICBVc2UgdGhlc2UgZm9yIGRhdGEgdGhhdCBpcyBhbHJlYWR5IFVURjMyLlxuICogICBVc2VkIGR1cmluZyBub3JtYWwgaW5wdXQgaW4gYElucHV0SGFuZGxlcmAgZm9yIGZhc3RlciBidWZmZXIgYWNjZXNzLlxuICogLSBgc2V0Q2VsbGBcbiAqICAgVGhpcyBtZXRob2QgdGFrZXMgYSBDZWxsRGF0YSBvYmplY3QgYW5kIHN0b3JlcyB0aGUgZGF0YSBpbiB0aGUgYnVmZmVyLlxuICogICBVc2UgYENlbGxEYXRhLmZyb21DaGFyRGF0YWAgdG8gY3JlYXRlIHRoZSBDZWxsRGF0YSBvYmplY3QgKGUuZy4gZnJvbSBKUyBzdHJpbmcpLlxuICpcbiAqIFRvIHJldHJpZXZlIGRhdGEgZnJvbSB0aGUgYnVmZmVyIHVzZSBlaXRoZXIgb25lIG9mIHRoZSBwcmltaXRpdmUgbWV0aG9kc1xuICogKGlmIG9ubHkgb25lIHBhcnRpY3VsYXIgdmFsdWUgaXMgbmVlZGVkKSBvciBgbG9hZENlbGxgLiBGb3IgYGxvYWRDZWxsYCBpbiBhIGxvb3BcbiAqIG1lbW9yeSBhbGxvY3MgLyBHQyBwcmVzc3VyZSBjYW4gYmUgZ3JlYXRseSByZWR1Y2VkIGJ5IHJldXNpbmcgdGhlIENlbGxEYXRhIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlckxpbmUgaW1wbGVtZW50cyBJQnVmZmVyTGluZSB7XG4gIHByb3RlY3RlZCBfZGF0YTogVWludDMyQXJyYXkgfCBudWxsID0gbnVsbDtcbiAgcHJvdGVjdGVkIF9jb21iaW5lZDoge1tpbmRleDogbnVtYmVyXTogc3RyaW5nfSA9IHt9O1xuICBwdWJsaWMgbGVuZ3RoOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29sczogbnVtYmVyLCBmaWxsQ2VsbERhdGE/OiBJQ2VsbERhdGEsIHB1YmxpYyBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmIChjb2xzKSB7XG4gICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KGNvbHMgKiBDRUxMX1NJWkUpO1xuICAgICAgY29uc3QgY2VsbCA9IGZpbGxDZWxsRGF0YSB8fCBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFXSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHM7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgY2VsbCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gY29scztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2VsbCBkYXRhIENoYXJEYXRhLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogQ2hhckRhdGEge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBjb25zdCBjcCA9IGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10sXG4gICAgICAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSylcbiAgICAgICAgPyB0aGlzLl9jb21iaW5lZFtpbmRleF1cbiAgICAgICAgOiAoY3ApID8gc3RyaW5nRnJvbUNvZGVQb2ludChjcCkgOiAnJyxcbiAgICAgIGNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVCxcbiAgICAgIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKVxuICAgICAgICA/IHRoaXMuX2NvbWJpbmVkW2luZGV4XS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2luZGV4XS5sZW5ndGggLSAxKVxuICAgICAgICA6IGNwXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY2VsbCBkYXRhIGZyb20gQ2hhckRhdGEuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBwdWJsaWMgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSA9IHZhbHVlW0NIQVJfREFUQV9BVFRSX0lOREVYXTtcbiAgICBpZiAodmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IHZhbHVlWzFdO1xuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBpbmRleCB8IENvbnRlbnQuSVNfQ09NQklORURfTUFTSyB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHByaW1pdGl2ZSBnZXR0ZXJzXG4gICAqIHVzZSB0aGVzZSB3aGVuIG9ubHkgb25lIHZhbHVlIGlzIG5lZWRlZCwgb3RoZXJ3aXNlIHVzZSBgbG9hZENlbGxgXG4gICAqL1xuICBwdWJsaWMgZ2V0V2lkdGgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID4+IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gIH1cblxuICAvKiogVGVzdCB3aGV0aGVyIGNvbnRlbnQgaGFzIHdpZHRoLiAqL1xuICBwdWJsaWMgaGFzV2lkdGgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5XSURUSF9NQVNLO1xuICB9XG5cbiAgLyoqIEdldCBGRyBjZWxsIGNvbXBvbmVudC4gKi9cbiAgcHVibGljIGdldEZnKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR107XG4gIH1cblxuICAvKiogR2V0IEJHIGNlbGwgY29tcG9uZW50LiAqL1xuICBwdWJsaWMgZ2V0QmcoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IHdoZXRoZXIgY29udGFpbnMgYW55IGNoYXJzLlxuICAgKiBCYXNpY2FsbHkgYW4gZW1wdHkgaGFzIG5vIGNvbnRlbnQsIGJ1dCBvdGhlciBjZWxscyBtaWdodCBkaWZmZXIgaW4gRkcvQkdcbiAgICogZnJvbSByZWFsIGVtcHR5IGNlbGxzLlxuICAgKiAqL1xuICBwdWJsaWMgaGFzQ29udGVudChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LkhBU19DT05URU5UX01BU0s7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvZGVwb2ludCBvZiB0aGUgY2VsbC5cbiAgICogVG8gYmUgaW4gbGluZSB3aXRoIGBjb2RlYCBpbiBDaGFyRGF0YSB0aGlzIGVpdGhlciByZXR1cm5zXG4gICAqIGEgc2luZ2xlIFVURjMyIGNvZGVwb2ludCBvciB0aGUgbGFzdCBjb2RlcG9pbnQgb2YgYSBjb21iaW5lZCBzdHJpbmcuXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29kZVBvaW50KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbWJpbmVkW2luZGV4XS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2luZGV4XS5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICB9XG5cbiAgLyoqIFRlc3Qgd2hldGhlciB0aGUgY2VsbCBjb250YWlucyBhIGNvbWJpbmVkIHN0cmluZy4gKi9cbiAgcHVibGljIGlzQ29tYmluZWQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIHN0cmluZyBjb250ZW50IG9mIHRoZSBjZWxsLiAqL1xuICBwdWJsaWMgZ2V0U3RyaW5nKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbWJpbmVkW2luZGV4XTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICByZXR1cm4gc3RyaW5nRnJvbUNvZGVQb2ludChjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSyk7XG4gICAgfVxuICAgIC8vIHJldHVybiBlbXB0eSBzdHJpbmcgZm9yIGVtcHR5IGNlbGxzXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgZGF0YSBhdCBgaW5kZXhgIGludG8gYGNlbGxgLiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGNlbGxzIGluIGEgd2F5IHRoYXQncyBtb3JlIGZyaWVuZGx5XG4gICAqIHRvIEdDIGFzIGl0IHNpZ25pZmljYW50bHkgcmVkdWNlZCB0aGUgYW1vdW50IG9mIG5ldyBvYmplY3RzL3JlZmVyZW5jZXMgbmVlZGVkLlxuICAgKi9cbiAgcHVibGljIGxvYWRDZWxsKGluZGV4OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IGluZGV4ICogQ0VMTF9TSVpFO1xuICAgIGNlbGwuY29udGVudCA9IHRoaXMuX2RhdGFbc3RhcnRJbmRleCArIENlbGwuQ09OVEVOVF07XG4gICAgY2VsbC5mZyA9IHRoaXMuX2RhdGFbc3RhcnRJbmRleCArIENlbGwuRkddO1xuICAgIGNlbGwuYmcgPSB0aGlzLl9kYXRhW3N0YXJ0SW5kZXggKyBDZWxsLkJHXTtcbiAgICBpZiAoY2VsbC5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICBjZWxsLmNvbWJpbmVkRGF0YSA9IHRoaXMuX2NvbWJpbmVkW2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRhdGEgYXQgYGluZGV4YCB0byBgY2VsbGAuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbChpbmRleDogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICBpZiAoY2VsbC5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gPSBjZWxsLmNvbWJpbmVkRGF0YTtcbiAgICB9XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjZWxsLmNvbnRlbnQ7XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddID0gY2VsbC5mZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBjZWxsLmJnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjZWxsIGRhdGEgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBTaW5jZSB0aGUgaW5wdXQgaGFuZGxlciBzZWUgdGhlIGluY29taW5nIGNoYXJzIGFzIFVURjMyIGNvZGVwb2ludHMsXG4gICAqIGl0IGdldHMgYW4gb3B0aW1pemVkIGFjY2VzcyBtZXRob2QuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbEZyb21Db2RlUG9pbnQoaW5kZXg6IG51bWJlciwgY29kZVBvaW50OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGZnOiBudW1iZXIsIGJnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGNvZGVQb2ludCB8ICh3aWR0aCA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10gPSBmZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBiZztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb2RlcG9pbnQgdG8gYSBjZWxsIGZyb20gaW5wdXQgaGFuZGxlci5cbiAgICogRHVyaW5nIGlucHV0IHN0YWdlIGNvbWJpbmluZyBjaGFycyB3aXRoIGEgd2lkdGggb2YgMCBmb2xsb3cgYW5kIHN0YWNrXG4gICAqIG9udG8gYSBsZWFkaW5nIGNoYXIuIFNpbmNlIHdlIGFscmVhZHkgc2V0IHRoZSBhdHRyc1xuICAgKiBieSB0aGUgcHJldmlvdXMgYHNldERhdGFGcm9tQ29kZVBvaW50YCBjYWxsLCB3ZSBjYW4gb21pdCBpdCBoZXJlLlxuICAgKi9cbiAgcHVibGljIGFkZENvZGVwb2ludFRvQ2VsbChpbmRleDogbnVtYmVyLCBjb2RlUG9pbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb250ZW50ID0gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIC8vIHdlIGFscmVhZHkgaGF2ZSBhIGNvbWJpbmVkIHN0cmluZywgc2ltcGx5IGFkZFxuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdICs9IHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICAgIC8vIG5vcm1hbCBjYXNlIGZvciBjb21iaW5pbmcgY2hhcnM6XG4gICAgICAgIC8vICAtIG1vdmUgY3VycmVudCBsZWFkaW5nIGNoYXIgKyBuZXcgb25lIGludG8gY29tYmluZWQgc3RyaW5nXG4gICAgICAgIC8vICAtIHNldCBjb21iaW5lZCBmbGFnXG4gICAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IHN0cmluZ0Zyb21Db2RlUG9pbnQoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spICsgc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgICAgICBjb250ZW50ICY9IH5Db250ZW50LkNPREVQT0lOVF9NQVNLOyAvLyBzZXQgY29kZXBvaW50IGluIGJ1ZmZlciB0byAwXG4gICAgICAgIGNvbnRlbnQgfD0gQ29udGVudC5JU19DT01CSU5FRF9NQVNLO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4gLSB3ZSBhY3R1YWxseSBoYXZlIG5vIGRhdGEgaW4gdGhlIGNlbGwgeWV0XG4gICAgICAgIC8vIHNpbXBseSBzZXQgdGhlIGRhdGEgaW4gdGhlIGNlbGwgYnVmZmVyIHdpdGggYSB3aWR0aCBvZiAxXG4gICAgICAgIGNvbnRlbnQgPSBjb2RlUG9pbnQgfCAoMSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gY29udGVudDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5zZXJ0Q2VsbHMocG9zOiBudW1iZXIsIG46IG51bWJlciwgZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICBwb3MgJT0gdGhpcy5sZW5ndGg7XG4gICAgaWYgKG4gPCB0aGlzLmxlbmd0aCAtIHBvcykge1xuICAgICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMubGVuZ3RoIC0gcG9zIC0gbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChwb3MgKyBuICsgaSwgdGhpcy5sb2FkQ2VsbChwb3MgKyBpLCBjZWxsKSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwocG9zICsgaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZUNlbGxzKHBvczogbnVtYmVyLCBuOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgcG9zICU9IHRoaXMubGVuZ3RoO1xuICAgIGlmIChuIDwgdGhpcy5sZW5ndGggLSBwb3MpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGggLSBwb3MgLSBuOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIGksIHRoaXMubG9hZENlbGwocG9zICsgbiArIGksIGNlbGwpKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIG47IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gcG9zOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVwbGFjZUNlbGxzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHdoaWxlIChzdGFydCA8IGVuZCAgJiYgc3RhcnQgPCB0aGlzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRDZWxsKHN0YXJ0KyssIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlc2l6ZShjb2xzOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgaWYgKGNvbHMgPT09IHRoaXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb2xzID4gdGhpcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkoY29scyAqIENFTExfU0laRSk7XG4gICAgICBpZiAodGhpcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGNvbHMgKiBDRUxMX1NJWkUgPCB0aGlzLl9kYXRhLmxlbmd0aCkge1xuICAgICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoMCwgY29scyAqIENFTExfU0laRSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aDsgaSA8IGNvbHM7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbHMpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheShjb2xzICogQ0VMTF9TSVpFKTtcbiAgICAgICAgZGF0YS5zZXQodGhpcy5fZGF0YS5zdWJhcnJheSgwLCBjb2xzICogQ0VMTF9TSVpFKSk7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICAvLyBSZW1vdmUgYW55IGN1dCBvZmYgY29tYmluZWQgZGF0YVxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fY29tYmluZWQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludChrZXlzW2ldLCAxMCk7XG4gICAgICAgICAgaWYgKGtleSA+PSBjb2xzKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fY29tYmluZWRba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmxlbmd0aCA9IGNvbHM7XG4gIH1cblxuICAvKiogZmlsbCBhIGxpbmUgd2l0aCBmaWxsQ2hhckRhdGEgKi9cbiAgcHVibGljIGZpbGwoZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIGFsdGVyIHRvIGEgZnVsbCBjb3B5IG9mIGxpbmUgICovXG4gIHB1YmxpYyBjb3B5RnJvbShsaW5lOiBCdWZmZXJMaW5lKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGVuZ3RoICE9PSBsaW5lLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheShsaW5lLl9kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXNlIGhpZ2ggc3BlZWQgY29weSBpZiBsZW5ndGhzIGFyZSBlcXVhbFxuICAgICAgdGhpcy5fZGF0YS5zZXQobGluZS5fZGF0YSk7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gbGluZS5sZW5ndGg7XG4gICAgdGhpcy5fY29tYmluZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGVsIGluIGxpbmUuX2NvbWJpbmVkKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtlbF0gPSBsaW5lLl9jb21iaW5lZFtlbF07XG4gICAgfVxuICAgIHRoaXMuaXNXcmFwcGVkID0gbGluZS5pc1dyYXBwZWQ7XG4gIH1cblxuICAvKiogY3JlYXRlIGEgbmV3IGNsb25lICovXG4gIHB1YmxpYyBjbG9uZSgpOiBJQnVmZmVyTGluZSB7XG4gICAgY29uc3QgbmV3TGluZSA9IG5ldyBCdWZmZXJMaW5lKDApO1xuICAgIG5ld0xpbmUuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkodGhpcy5fZGF0YSk7XG4gICAgbmV3TGluZS5sZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICBmb3IgKGNvbnN0IGVsIGluIHRoaXMuX2NvbWJpbmVkKSB7XG4gICAgICBuZXdMaW5lLl9jb21iaW5lZFtlbF0gPSB0aGlzLl9jb21iaW5lZFtlbF07XG4gICAgfVxuICAgIG5ld0xpbmUuaXNXcmFwcGVkID0gdGhpcy5pc1dyYXBwZWQ7XG4gICAgcmV0dXJuIG5ld0xpbmU7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHJpbW1lZExlbmd0aCgpOiBudW1iZXIge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBpZiAoKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LkhBU19DT05URU5UX01BU0spKSB7XG4gICAgICAgIHJldHVybiBpICsgKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPj4gQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIGNvcHlDZWxsc0Zyb20oc3JjOiBCdWZmZXJMaW5lLCBzcmNDb2w6IG51bWJlciwgZGVzdENvbDogbnVtYmVyLCBsZW5ndGg6IG51bWJlciwgYXBwbHlJblJldmVyc2U6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBzcmNEYXRhID0gc3JjLl9kYXRhO1xuICAgIGlmIChhcHBseUluUmV2ZXJzZSkge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IGxlbmd0aCAtIDE7IGNlbGwgPj0gMDsgY2VsbC0tKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ0VMTF9TSVpFOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9kYXRhWyhkZXN0Q29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXSA9IHNyY0RhdGFbKHNyY0NvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IDA7IGNlbGwgPCBsZW5ndGg7IGNlbGwrKykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENFTExfU0laRTsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5fZGF0YVsoZGVzdENvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV0gPSBzcmNEYXRhWyhzcmNDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBhbnkgY29tYmluZWQgZGF0YSBvdmVyIGFzIG5lZWRlZFxuICAgIGNvbnN0IHNyY0NvbWJpbmVkS2V5cyA9IE9iamVjdC5rZXlzKHNyYy5fY29tYmluZWQpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjQ29tYmluZWRLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBwYXJzZUludChzcmNDb21iaW5lZEtleXNbaV0sIDEwKTtcbiAgICAgIGlmIChrZXkgPj0gc3JjQ29sKSB7XG4gICAgICAgIHRoaXMuX2NvbWJpbmVkW2tleSAtIHNyY0NvbCArIGRlc3RDb2xdID0gc3JjLl9jb21iaW5lZFtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZSwgc3RhcnRDb2w6IG51bWJlciA9IDAsIGVuZENvbDogbnVtYmVyID0gdGhpcy5sZW5ndGgpOiBzdHJpbmcge1xuICAgIGlmICh0cmltUmlnaHQpIHtcbiAgICAgIGVuZENvbCA9IE1hdGgubWluKGVuZENvbCwgdGhpcy5nZXRUcmltbWVkTGVuZ3RoKCkpO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgd2hpbGUgKHN0YXJ0Q29sIDwgZW5kQ29sKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fZGF0YVtzdGFydENvbCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgICBjb25zdCBjcCA9IGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICAgICAgcmVzdWx0ICs9IChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSA/IHRoaXMuX2NvbWJpbmVkW3N0YXJ0Q29sXSA6IChjcCkgPyBzdHJpbmdGcm9tQ29kZVBvaW50KGNwKSA6IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgc3RhcnRDb2wgKz0gKGNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVCkgfHwgMTsgLy8gYWx3YXlzIGFkdmFuY2UgYnkgMVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEJ1ZmZlckxpbmUgfSBmcm9tICcuL0J1ZmZlckxpbmUnO1xuaW1wb3J0IHsgQ2lyY3VsYXJMaXN0IH0gZnJvbSAnLi9jb21tb24vQ2lyY3VsYXJMaXN0JztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEgfSBmcm9tICcuL1R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBJTmV3TGF5b3V0UmVzdWx0IHtcbiAgbGF5b3V0OiBudW1iZXJbXTtcbiAgY291bnRSZW1vdmVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogRXZhbHVhdGVzIGFuZCByZXR1cm5zIGluZGV4ZXMgdG8gYmUgcmVtb3ZlZCBhZnRlciBhIHJlZmxvdyBsYXJnZXIgb2NjdXJzLiBMaW5lcyB3aWxsIGJlIHJlbW92ZWRcbiAqIHdoZW4gYSB3cmFwcGVkIGxpbmUgdW53cmFwcy5cbiAqIEBwYXJhbSBsaW5lcyBUaGUgYnVmZmVyIGxpbmVzLlxuICogQHBhcmFtIG5ld0NvbHMgVGhlIGNvbHVtbnMgYWZ0ZXIgcmVzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZShsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgb2xkQ29sczogbnVtYmVyLCBuZXdDb2xzOiBudW1iZXIsIGJ1ZmZlckFic29sdXRlWTogbnVtYmVyLCBudWxsQ2VsbDogSUNlbGxEYXRhKTogbnVtYmVyW10ge1xuICAvLyBHYXRoZXIgYWxsIEJ1ZmZlckxpbmVzIHRoYXQgbmVlZCB0byBiZSByZW1vdmVkIGZyb20gdGhlIEJ1ZmZlciBoZXJlIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgLy8gYmF0Y2hlZCB1cCBhbmQgb25seSBjb21taXR0ZWQgb25jZVxuICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSBbXTtcblxuICBmb3IgKGxldCB5ID0gMDsgeSA8IGxpbmVzLmxlbmd0aCAtIDE7IHkrKykge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgcm93IGlzIHdyYXBwZWRcbiAgICBsZXQgaSA9IHk7XG4gICAgbGV0IG5leHRMaW5lID0gbGluZXMuZ2V0KCsraSkgYXMgQnVmZmVyTGluZTtcbiAgICBpZiAoIW5leHRMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaG93IG1hbnkgbGluZXMgaXQncyB3cmFwcGVkIGZvclxuICAgIGNvbnN0IHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdID0gW2xpbmVzLmdldCh5KSBhcyBCdWZmZXJMaW5lXTtcbiAgICB3aGlsZSAoaSA8IGxpbmVzLmxlbmd0aCAmJiBuZXh0TGluZS5pc1dyYXBwZWQpIHtcbiAgICAgIHdyYXBwZWRMaW5lcy5wdXNoKG5leHRMaW5lKTtcbiAgICAgIG5leHRMaW5lID0gbGluZXMuZ2V0KCsraSkgYXMgQnVmZmVyTGluZTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVzZSBsaW5lcyBjb250YWluIHRoZSBjdXJzb3IgZG9uJ3QgdG91Y2ggdGhlbSwgdGhlIHByb2dyYW0gd2lsbCBoYW5kbGUgZml4aW5nIHVwIHdyYXBwZWRcbiAgICAvLyBsaW5lcyB3aXRoIHRoZSBjdXJzb3JcbiAgICBpZiAoYnVmZmVyQWJzb2x1dGVZID49IHkgJiYgYnVmZmVyQWJzb2x1dGVZIDwgaSkge1xuICAgICAgeSArPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gMTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENvcHkgYnVmZmVyIGRhdGEgdG8gbmV3IGxvY2F0aW9uc1xuICAgIGxldCBkZXN0TGluZUluZGV4ID0gMDtcbiAgICBsZXQgZGVzdENvbCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIGRlc3RMaW5lSW5kZXgsIG9sZENvbHMpO1xuICAgIGxldCBzcmNMaW5lSW5kZXggPSAxO1xuICAgIGxldCBzcmNDb2wgPSAwO1xuICAgIHdoaWxlIChzcmNMaW5lSW5kZXggPCB3cmFwcGVkTGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBzcmNUcmltbWVkVGluZUxlbmd0aCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIHNyY0xpbmVJbmRleCwgb2xkQ29scyk7XG4gICAgICBjb25zdCBzcmNSZW1haW5pbmdDZWxscyA9IHNyY1RyaW1tZWRUaW5lTGVuZ3RoIC0gc3JjQ29sO1xuICAgICAgY29uc3QgZGVzdFJlbWFpbmluZ0NlbGxzID0gbmV3Q29scyAtIGRlc3RDb2w7XG4gICAgICBjb25zdCBjZWxsc1RvQ29weSA9IE1hdGgubWluKHNyY1JlbWFpbmluZ0NlbGxzLCBkZXN0UmVtYWluaW5nQ2VsbHMpO1xuXG4gICAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0uY29weUNlbGxzRnJvbSh3cmFwcGVkTGluZXNbc3JjTGluZUluZGV4XSwgc3JjQ29sLCBkZXN0Q29sLCBjZWxsc1RvQ29weSwgZmFsc2UpO1xuXG4gICAgICBkZXN0Q29sICs9IGNlbGxzVG9Db3B5O1xuICAgICAgaWYgKGRlc3RDb2wgPT09IG5ld0NvbHMpIHtcbiAgICAgICAgZGVzdExpbmVJbmRleCsrO1xuICAgICAgICBkZXN0Q29sID0gMDtcbiAgICAgIH1cbiAgICAgIHNyY0NvbCArPSBjZWxsc1RvQ29weTtcbiAgICAgIGlmIChzcmNDb2wgPT09IHNyY1RyaW1tZWRUaW5lTGVuZ3RoKSB7XG4gICAgICAgIHNyY0xpbmVJbmRleCsrO1xuICAgICAgICBzcmNDb2wgPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIGxhc3QgY2VsbCBpc24ndCB3aWRlLCBpZiBpdCBpcyBjb3B5IGl0IHRvIHRoZSBjdXJyZW50IGRlc3RcbiAgICAgIGlmIChkZXN0Q29sID09PSAwICYmIGRlc3RMaW5lSW5kZXggIT09IDApIHtcbiAgICAgICAgaWYgKHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0uZ2V0V2lkdGgobmV3Q29scyAtIDEpID09PSAyKSB7XG4gICAgICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXggLSAxXSwgbmV3Q29scyAtIDEsIGRlc3RDb2wrKywgMSwgZmFsc2UpO1xuICAgICAgICAgIC8vIE51bGwgb3V0IHRoZSBlbmQgb2YgdGhlIGxhc3Qgcm93XG4gICAgICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXggLSAxXS5zZXRDZWxsKG5ld0NvbHMgLSAxLCBudWxsQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhciBvdXQgcmVtYWluaW5nIGNlbGxzIG9yIGZyYWdtZW50cyBjb3VsZCByZW1haW47XG4gICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLnJlcGxhY2VDZWxscyhkZXN0Q29sLCBuZXdDb2xzLCBudWxsQ2VsbCk7XG5cbiAgICAvLyBXb3JrIGJhY2t3YXJkcyBhbmQgcmVtb3ZlIGFueSByb3dzIGF0IHRoZSBlbmQgdGhhdCBvbmx5IGNvbnRhaW4gbnVsbCBjZWxsc1xuICAgIGxldCBjb3VudFRvUmVtb3ZlID0gMDtcbiAgICBmb3IgKGxldCBpID0gd3JhcHBlZExpbmVzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGlmIChpID4gZGVzdExpbmVJbmRleCB8fCB3cmFwcGVkTGluZXNbaV0uZ2V0VHJpbW1lZExlbmd0aCgpID09PSAwKSB7XG4gICAgICAgIGNvdW50VG9SZW1vdmUrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb3VudFRvUmVtb3ZlID4gMCkge1xuICAgICAgdG9SZW1vdmUucHVzaCh5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCAtIGNvdW50VG9SZW1vdmUpOyAvLyBpbmRleFxuICAgICAgdG9SZW1vdmUucHVzaChjb3VudFRvUmVtb3ZlKTtcbiAgICB9XG5cbiAgICB5ICs9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxO1xuICB9XG4gIHJldHVybiB0b1JlbW92ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm4gdGhlIG5ldyBsYXlvdXQgZm9yIGxpbmVzIGdpdmVuIGFuIGFycmF5IG9mIGluZGV4ZXMgdG8gYmUgcmVtb3ZlZC5cbiAqIEBwYXJhbSBsaW5lcyBUaGUgYnVmZmVyIGxpbmVzLlxuICogQHBhcmFtIHRvUmVtb3ZlIFRoZSBpbmRleGVzIHRvIHJlbW92ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dChsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgdG9SZW1vdmU6IG51bWJlcltdKTogSU5ld0xheW91dFJlc3VsdCB7XG4gIGNvbnN0IGxheW91dDogbnVtYmVyW10gPSBbXTtcbiAgLy8gRmlyc3QgaXRlcmF0ZSB0aHJvdWdoIHRoZSBsaXN0IGFuZCBnZXQgdGhlIGFjdHVhbCBpbmRleGVzIHRvIHVzZSBmb3Igcm93c1xuICBsZXQgbmV4dFRvUmVtb3ZlSW5kZXggPSAwO1xuICBsZXQgbmV4dFRvUmVtb3ZlU3RhcnQgPSB0b1JlbW92ZVtuZXh0VG9SZW1vdmVJbmRleF07XG4gIGxldCBjb3VudFJlbW92ZWRTb0ZhciA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAobmV4dFRvUmVtb3ZlU3RhcnQgPT09IGkpIHtcbiAgICAgIGNvbnN0IGNvdW50VG9SZW1vdmUgPSB0b1JlbW92ZVsrK25leHRUb1JlbW92ZUluZGV4XTtcblxuICAgICAgLy8gVGVsbCBtYXJrZXJzIHRoYXQgdGhlcmUgd2FzIGEgZGVsZXRpb25cbiAgICAgIGxpbmVzLm9uRGVsZXRlRW1pdHRlci5maXJlKHtcbiAgICAgICAgaW5kZXg6IGkgLSBjb3VudFJlbW92ZWRTb0ZhcixcbiAgICAgICAgYW1vdW50OiBjb3VudFRvUmVtb3ZlXG4gICAgICB9KTtcblxuICAgICAgaSArPSBjb3VudFRvUmVtb3ZlIC0gMTtcbiAgICAgIGNvdW50UmVtb3ZlZFNvRmFyICs9IGNvdW50VG9SZW1vdmU7XG4gICAgICBuZXh0VG9SZW1vdmVTdGFydCA9IHRvUmVtb3ZlWysrbmV4dFRvUmVtb3ZlSW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXlvdXQucHVzaChpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBsYXlvdXQsXG4gICAgY291bnRSZW1vdmVkOiBjb3VudFJlbW92ZWRTb0ZhclxuICB9O1xufVxuXG4vKipcbiAqIEFwcGxpZXMgYSBuZXcgbGF5b3V0IHRvIHRoZSBidWZmZXIuIFRoaXMgZXNzZW50aWFsbHkgZG9lcyB0aGUgc2FtZSBhcyBtYW55IHNwbGljZSBjYWxscyBidXQgaXQnc1xuICogZG9uZSBhbGwgYXQgb25jZSBpbiBhIHNpbmdsZSBpdGVyYXRpb24gdGhyb3VnaCB0aGUgbGlzdCBzaW5jZSBzcGxpY2UgaXMgdmVyeSBleHBlbnNpdmUuXG4gKiBAcGFyYW0gbGluZXMgVGhlIGJ1ZmZlciBsaW5lcy5cbiAqIEBwYXJhbSBuZXdMYXlvdXQgVGhlIG5ldyBsYXlvdXQgdG8gYXBwbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dChsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgbmV3TGF5b3V0OiBudW1iZXJbXSk6IHZvaWQge1xuICAvLyBSZWNvcmQgb3JpZ2luYWwgbGluZXMgc28gdGhleSBkb24ndCBnZXQgb3ZlcnJpZGRlbiB3aGVuIHdlIHJlYXJyYW5nZSB0aGUgbGlzdFxuICBjb25zdCBuZXdMYXlvdXRMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3TGF5b3V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgbmV3TGF5b3V0TGluZXMucHVzaChsaW5lcy5nZXQobmV3TGF5b3V0W2ldKSBhcyBCdWZmZXJMaW5lKTtcbiAgfVxuXG4gIC8vIFJlYXJyYW5nZSB0aGUgbGlzdFxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0xheW91dExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGluZXMuc2V0KGksIG5ld0xheW91dExpbmVzW2ldKTtcbiAgfVxuICBsaW5lcy5sZW5ndGggPSBuZXdMYXlvdXQubGVuZ3RoO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG5ldyBsaW5lIGxlbmd0aHMgZm9yIGEgZ2l2ZW4gd3JhcHBlZCBsaW5lLiBUaGUgcHVycG9zZSBvZiB0aGlzIGZ1bmN0aW9uIGl0IHRvIHByZS1cbiAqIGNvbXB1dGUgdGhlIHdyYXBwaW5nIHBvaW50cyBzaW5jZSB3aWRlIGNoYXJhY3RlcnMgbWF5IG5lZWQgdG8gYmUgd3JhcHBlZCBvbnRvIHRoZSBmb2xsb3dpbmcgbGluZS5cbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgbnVtYmVycyBvZiB3aGVyZSBlYWNoIGxpbmUgd3JhcHMgdG8sIHRoZSByZXN1bHRpbmcgYXJyYXlcbiAqIHdpbGwgb25seSBjb250YWluIHRoZSB2YWx1ZXMgYG5ld0NvbHNgICh3aGVuIHRoZSBsaW5lIGRvZXMgbm90IGVuZCB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIpIGFuZFxuICogYG5ld0NvbHMgLSAxYCAod2hlbiB0aGUgbGluZSBkb2VzIGVuZCB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIpLCBleGNlcHQgZm9yIHRoZSBsYXN0IHZhbHVlIHdoaWNoXG4gKiB3aWxsIGNvbnRhaW4gdGhlIHJlbWFpbmluZyBpdGVtcyB0byBmaWxsIHRoZSBsaW5lLlxuICpcbiAqIENhbGxpbmcgdGhpcyB3aXRoIGEgYG5ld0NvbHNgIHZhbHVlIG9mIGAxYCB3aWxsIGxvY2sgdXAuXG4gKlxuICogQHBhcmFtIHdyYXBwZWRMaW5lcyBUaGUgd3JhcHBlZCBsaW5lcyB0byBldmFsdWF0ZS5cbiAqIEBwYXJhbSBvbGRDb2xzIFRoZSBjb2x1bW5zIGJlZm9yZSByZXNpemUuXG4gKiBAcGFyYW0gbmV3Q29scyBUaGUgY29sdW1ucyBhZnRlciByZXNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMod3JhcHBlZExpbmVzOiBCdWZmZXJMaW5lW10sIG9sZENvbHM6IG51bWJlciwgbmV3Q29sczogbnVtYmVyKTogbnVtYmVyW10ge1xuICBjb25zdCBuZXdMaW5lTGVuZ3RoczogbnVtYmVyW10gPSBbXTtcbiAgY29uc3QgY2VsbHNOZWVkZWQgPSB3cmFwcGVkTGluZXMubWFwKChsLCBpKSA9PiBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBpLCBvbGRDb2xzKSkucmVkdWNlKChwLCBjKSA9PiBwICsgYyk7XG5cbiAgLy8gVXNlIHNyY0NvbCBhbmQgc3JjTGluZSB0byBmaW5kIHRoZSBuZXcgd3JhcHBpbmcgcG9pbnQsIHVzZSB0aGF0IHRvIGdldCB0aGUgY2VsbHNBdmFpbGFibGUgYW5kXG4gIC8vIGxpbmVzTmVlZGVkXG4gIGxldCBzcmNDb2wgPSAwO1xuICBsZXQgc3JjTGluZSA9IDA7XG4gIGxldCBjZWxsc0F2YWlsYWJsZSA9IDA7XG4gIHdoaWxlIChjZWxsc0F2YWlsYWJsZSA8IGNlbGxzTmVlZGVkKSB7XG4gICAgaWYgKGNlbGxzTmVlZGVkIC0gY2VsbHNBdmFpbGFibGUgPCBuZXdDb2xzKSB7XG4gICAgICAvLyBBZGQgdGhlIGZpbmFsIGxpbmUgYW5kIGV4aXQgdGhlIGxvb3BcbiAgICAgIG5ld0xpbmVMZW5ndGhzLnB1c2goY2VsbHNOZWVkZWQgLSBjZWxsc0F2YWlsYWJsZSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgc3JjQ29sICs9IG5ld0NvbHM7XG4gICAgY29uc3Qgb2xkVHJpbW1lZExlbmd0aCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIHNyY0xpbmUsIG9sZENvbHMpO1xuICAgIGlmIChzcmNDb2wgPiBvbGRUcmltbWVkTGVuZ3RoKSB7XG4gICAgICBzcmNDb2wgLT0gb2xkVHJpbW1lZExlbmd0aDtcbiAgICAgIHNyY0xpbmUrKztcbiAgICB9XG4gICAgY29uc3QgZW5kc1dpdGhXaWRlID0gd3JhcHBlZExpbmVzW3NyY0xpbmVdLmdldFdpZHRoKHNyY0NvbCAtIDEpID09PSAyO1xuICAgIGlmIChlbmRzV2l0aFdpZGUpIHtcbiAgICAgIHNyY0NvbC0tO1xuICAgIH1cbiAgICBjb25zdCBsaW5lTGVuZ3RoID0gZW5kc1dpdGhXaWRlID8gbmV3Q29scyAtIDEgOiBuZXdDb2xzO1xuICAgIG5ld0xpbmVMZW5ndGhzLnB1c2gobGluZUxlbmd0aCk7XG4gICAgY2VsbHNBdmFpbGFibGUgKz0gbGluZUxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiBuZXdMaW5lTGVuZ3Rocztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aChsaW5lczogQnVmZmVyTGluZVtdLCBpOiBudW1iZXIsIGNvbHM6IG51bWJlcik6IG51bWJlciB7XG4gIC8vIElmIHRoaXMgaXMgdGhlIGxhc3Qgcm93IGluIHRoZSB3cmFwcGVkIGxpbmUsIGdldCB0aGUgYWN0dWFsIHRyaW1tZWQgbGVuZ3RoXG4gIGlmIChpID09PSBsaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgcmV0dXJuIGxpbmVzW2ldLmdldFRyaW1tZWRMZW5ndGgoKTtcbiAgfVxuICAvLyBEZXRlY3Qgd2hldGhlciB0aGUgZm9sbG93aW5nIGxpbmUgc3RhcnRzIHdpdGggYSB3aWRlIGNoYXJhY3RlciBhbmQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBsaW5lXG4gIC8vIGlzIG51bGwsIGlmIHNvIHRoZW4gd2UgY2FuIGJlIHByZXR0eSBzdXJlIHRoZSBudWxsIGNoYXJhY3RlciBzaG91bGQgYmUgZXhjbHVkZWQgZnJvbSB0aGUgbGluZVxuICAvLyBsZW5ndGhdXG4gIGNvbnN0IGVuZHNJbk51bGwgPSAhKGxpbmVzW2ldLmhhc0NvbnRlbnQoY29scyAtIDEpKSAmJiBsaW5lc1tpXS5nZXRXaWR0aChjb2xzIC0gMSkgPT09IDE7XG4gIGNvbnN0IGZvbGxvd2luZ0xpbmVTdGFydHNXaXRoV2lkZSA9IGxpbmVzW2kgKyAxXS5nZXRXaWR0aCgwKSA9PT0gMjtcbiAgaWYgKGVuZHNJbk51bGwgJiYgZm9sbG93aW5nTGluZVN0YXJ0c1dpdGhXaWRlKSB7XG4gICAgcmV0dXJuIGNvbHMgLSAxO1xuICB9XG4gIHJldHVybiBjb2xzO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJVGVybWluYWwsIElCdWZmZXJTZXQsIElBdHRyaWJ1dGVEYXRhLCBJQnVmZmVyIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICcuL0J1ZmZlcic7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIyLCBJRXZlbnQgfSBmcm9tICcuL2NvbW1vbi9FdmVudEVtaXR0ZXIyJztcblxuLyoqXG4gKiBUaGUgQnVmZmVyU2V0IHJlcHJlc2VudHMgdGhlIHNldCBvZiB0d28gYnVmZmVycyB1c2VkIGJ5IHh0ZXJtIHRlcm1pbmFscyAobm9ybWFsIGFuZCBhbHQpIGFuZFxuICogcHJvdmlkZXMgYWxzbyB1dGlsaXRpZXMgZm9yIHdvcmtpbmcgd2l0aCB0aGVtLlxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyU2V0IGltcGxlbWVudHMgSUJ1ZmZlclNldCB7XG4gIHByaXZhdGUgX25vcm1hbDogQnVmZmVyO1xuICBwcml2YXRlIF9hbHQ6IEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfYWN0aXZlQnVmZmVyOiBCdWZmZXI7XG5cblxuICBwcml2YXRlIF9vbkJ1ZmZlckFjdGl2YXRlID0gbmV3IEV2ZW50RW1pdHRlcjI8e2FjdGl2ZUJ1ZmZlcjogSUJ1ZmZlciwgaW5hY3RpdmVCdWZmZXI6IElCdWZmZXJ9PigpO1xuICBwdWJsaWMgZ2V0IG9uQnVmZmVyQWN0aXZhdGUoKTogSUV2ZW50PHthY3RpdmVCdWZmZXI6IElCdWZmZXIsIGluYWN0aXZlQnVmZmVyOiBJQnVmZmVyfT4geyByZXR1cm4gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudDsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQnVmZmVyU2V0IGZvciB0aGUgZ2l2ZW4gdGVybWluYWwuXG4gICAqIEBwYXJhbSBfdGVybWluYWwgLSBUaGUgdGVybWluYWwgdGhlIEJ1ZmZlclNldCB3aWxsIGJlbG9uZyB0b1xuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfdGVybWluYWw6IElUZXJtaW5hbCkge1xuICAgIHRoaXMuX25vcm1hbCA9IG5ldyBCdWZmZXIodGhpcy5fdGVybWluYWwsIHRydWUpO1xuICAgIHRoaXMuX25vcm1hbC5maWxsVmlld3BvcnRSb3dzKCk7XG5cbiAgICAvLyBUaGUgYWx0IGJ1ZmZlciBzaG91bGQgbmV2ZXIgaGF2ZSBzY3JvbGxiYWNrLlxuICAgIC8vIFNlZSBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWwjaDItVGhlLUFsdGVybmF0ZS1TY3JlZW4tQnVmZmVyXG4gICAgdGhpcy5fYWx0ID0gbmV3IEJ1ZmZlcih0aGlzLl90ZXJtaW5hbCwgZmFsc2UpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX25vcm1hbDtcblxuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFsdCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBhbHQoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5vcm1hbCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBhY3RpdmUoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgbm9ybWFsKCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX25vcm1hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBub3JtYWwgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXQgYXMgaXRzIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyXG4gICAqL1xuICBwdWJsaWMgYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlciA9PT0gdGhpcy5fbm9ybWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX25vcm1hbC54ID0gdGhpcy5fYWx0Lng7XG4gICAgdGhpcy5fbm9ybWFsLnkgPSB0aGlzLl9hbHQueTtcbiAgICAvLyBUaGUgYWx0IGJ1ZmZlciBzaG91bGQgYWx3YXlzIGJlIGNsZWFyZWQgd2hlbiB3ZSBzd2l0Y2ggdG8gdGhlIG5vcm1hbFxuICAgIC8vIGJ1ZmZlci4gVGhpcyBmcmVlcyB1cCBtZW1vcnkgc2luY2UgdGhlIGFsdCBidWZmZXIgc2hvdWxkIGFsd2F5cyBiZSBuZXdcbiAgICAvLyB3aGVuIGFjdGl2YXRlZC5cbiAgICB0aGlzLl9hbHQuY2xlYXIoKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9ub3JtYWw7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsLFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX2FsdFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFsdCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldCBhcyBpdHMgY3VycmVudGx5IGFjdGl2ZSBCdWZmZXJcbiAgICovXG4gIHB1YmxpYyBhY3RpdmF0ZUFsdEJ1ZmZlcihmaWxsQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlciA9PT0gdGhpcy5fYWx0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFNpbmNlIHRoZSBhbHQgYnVmZmVyIGlzIGFsd2F5cyBjbGVhcmVkIHdoZW4gdGhlIG5vcm1hbCBidWZmZXIgaXNcbiAgICAvLyBhY3RpdmF0ZWQsIHdlIHdhbnQgdG8gZmlsbCBpdCB3aGVuIHN3aXRjaGluZyB0byBpdC5cbiAgICB0aGlzLl9hbHQuZmlsbFZpZXdwb3J0Um93cyhmaWxsQXR0cik7XG4gICAgdGhpcy5fYWx0LnggPSB0aGlzLl9ub3JtYWwueDtcbiAgICB0aGlzLl9hbHQueSA9IHRoaXMuX25vcm1hbC55O1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX2FsdDtcbiAgICB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe1xuICAgICAgYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHQsXG4gICAgICBpbmFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyBib3RoIG5vcm1hbCBhbmQgYWx0IGJ1ZmZlcnMsIGFkanVzdGluZyB0aGVpciBkYXRhIGFjY29yZGluZ2x5LlxuICAgKiBAcGFyYW0gbmV3Q29scyBUaGUgbmV3IG51bWJlciBvZiBjb2x1bW5zLlxuICAgKiBAcGFyYW0gbmV3Um93cyBUaGUgbmV3IG51bWJlciBvZiByb3dzLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZShuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX25vcm1hbC5yZXNpemUobmV3Q29scywgbmV3Um93cyk7XG4gICAgdGhpcy5fYWx0LnJlc2l6ZShuZXdDb2xzLCBuZXdSb3dzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgdGFiIHN0b3BzLlxuICAgKiBAcGFyYW0gaSBUaGUgaW5kZXggdG8gc3RhcnQgc2V0dGluZyB1cCB0YWIgc3RvcHMgZnJvbS5cbiAgICovXG4gIHB1YmxpYyBzZXR1cFRhYlN0b3BzKGk/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwuc2V0dXBUYWJTdG9wcyhpKTtcbiAgICB0aGlzLl9hbHQuc2V0dXBUYWJTdG9wcyhpKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhck1lYXN1cmUsIElUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlcjIsIElFdmVudCB9IGZyb20gJy4vY29tbW9uL0V2ZW50RW1pdHRlcjInO1xuXG4vKipcbiAqIFV0aWxpdHkgY2xhc3MgdGhhdCBtZWFzdXJlcyB0aGUgc2l6ZSBvZiBhIGNoYXJhY3Rlci4gTWVhc3VyZW1lbnRzIGFyZSBkb25lIGluXG4gKiB0aGUgRE9NIHJhdGhlciB0aGFuIHdpdGggYSBjYW52YXMgY29udGV4dCBiZWNhdXNlIHN1cHBvcnQgZm9yIGV4dHJhY3RpbmcgdGhlXG4gKiBoZWlnaHQgb2YgY2hhcmFjdGVycyBpcyBwYXRjaHkgYWNyb3NzIGJyb3dzZXJzLlxuICovXG5leHBvcnQgY2xhc3MgQ2hhck1lYXN1cmUgaW1wbGVtZW50cyBJQ2hhck1lYXN1cmUge1xuICBwcml2YXRlIF9kb2N1bWVudDogRG9jdW1lbnQ7XG4gIHByaXZhdGUgX3BhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9tZWFzdXJlRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xuXG4gIHByaXZhdGUgX29uQ2hhclNpemVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkNoYXJTaXplQ2hhbmdlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25DaGFyU2l6ZUNoYW5nZWQuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3Rvcihkb2N1bWVudDogRG9jdW1lbnQsIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5fZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB0aGlzLl9wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudDtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCcpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnRleHRDb250ZW50ID0gJ1cnO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHRoaXMuX3BhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fbWVhc3VyZUVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgfVxuXG4gIHB1YmxpYyBtZWFzdXJlKG9wdGlvbnM6IElUZXJtaW5hbE9wdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250RmFtaWx5ID0gb3B0aW9ucy5mb250RmFtaWx5O1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRTaXplID0gYCR7b3B0aW9ucy5mb250U2l6ZX1weGA7XG4gICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLl9tZWFzdXJlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAvLyBUaGUgZWxlbWVudCBpcyBsaWtlbHkgY3VycmVudGx5IGRpc3BsYXk6bm9uZSwgd2Ugc2hvdWxkIHJldGFpbiB0aGVcbiAgICAvLyBwcmV2aW91cyB2YWx1ZS5cbiAgICBpZiAoZ2VvbWV0cnkud2lkdGggPT09IDAgfHwgZ2VvbWV0cnkuaGVpZ2h0ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFkanVzdGVkSGVpZ2h0ID0gTWF0aC5jZWlsKGdlb21ldHJ5LmhlaWdodCk7XG4gICAgaWYgKHRoaXMuX3dpZHRoICE9PSBnZW9tZXRyeS53aWR0aCB8fCB0aGlzLl9oZWlnaHQgIT09IGFkanVzdGVkSGVpZ2h0KSB7XG4gICAgICB0aGlzLl93aWR0aCA9IGdlb21ldHJ5LndpZHRoO1xuICAgICAgdGhpcy5faGVpZ2h0ID0gYWRqdXN0ZWRIZWlnaHQ7XG4gICAgICB0aGlzLl9vbkNoYXJTaXplQ2hhbmdlZC5maXJlKCk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IGZpbGwgfSBmcm9tICcuL2NvbW1vbi9UeXBlZEFycmF5VXRpbHMnO1xuXG5leHBvcnQgY29uc3Qgd2N3aWR0aCA9IChmdW5jdGlvbihvcHRzOiB7bnVsOiBudW1iZXIsIGNvbnRyb2w6IG51bWJlcn0pOiAodWNzOiBudW1iZXIpID0+IG51bWJlciB7XG4gIC8vIGV4dHJhY3RlZCBmcm9tIGh0dHBzOi8vd3d3LmNsLmNhbS5hYy51ay8lN0VtZ2syNS91Y3Mvd2N3aWR0aC5jXG4gIC8vIGNvbWJpbmluZyBjaGFyYWN0ZXJzXG4gIGNvbnN0IENPTUJJTklOR19CTVAgPSBbXG4gICAgWzB4MDMwMCwgMHgwMzZGXSwgWzB4MDQ4MywgMHgwNDg2XSwgWzB4MDQ4OCwgMHgwNDg5XSxcbiAgICBbMHgwNTkxLCAweDA1QkRdLCBbMHgwNUJGLCAweDA1QkZdLCBbMHgwNUMxLCAweDA1QzJdLFxuICAgIFsweDA1QzQsIDB4MDVDNV0sIFsweDA1QzcsIDB4MDVDN10sIFsweDA2MDAsIDB4MDYwM10sXG4gICAgWzB4MDYxMCwgMHgwNjE1XSwgWzB4MDY0QiwgMHgwNjVFXSwgWzB4MDY3MCwgMHgwNjcwXSxcbiAgICBbMHgwNkQ2LCAweDA2RTRdLCBbMHgwNkU3LCAweDA2RThdLCBbMHgwNkVBLCAweDA2RURdLFxuICAgIFsweDA3MEYsIDB4MDcwRl0sIFsweDA3MTEsIDB4MDcxMV0sIFsweDA3MzAsIDB4MDc0QV0sXG4gICAgWzB4MDdBNiwgMHgwN0IwXSwgWzB4MDdFQiwgMHgwN0YzXSwgWzB4MDkwMSwgMHgwOTAyXSxcbiAgICBbMHgwOTNDLCAweDA5M0NdLCBbMHgwOTQxLCAweDA5NDhdLCBbMHgwOTRELCAweDA5NERdLFxuICAgIFsweDA5NTEsIDB4MDk1NF0sIFsweDA5NjIsIDB4MDk2M10sIFsweDA5ODEsIDB4MDk4MV0sXG4gICAgWzB4MDlCQywgMHgwOUJDXSwgWzB4MDlDMSwgMHgwOUM0XSwgWzB4MDlDRCwgMHgwOUNEXSxcbiAgICBbMHgwOUUyLCAweDA5RTNdLCBbMHgwQTAxLCAweDBBMDJdLCBbMHgwQTNDLCAweDBBM0NdLFxuICAgIFsweDBBNDEsIDB4MEE0Ml0sIFsweDBBNDcsIDB4MEE0OF0sIFsweDBBNEIsIDB4MEE0RF0sXG4gICAgWzB4MEE3MCwgMHgwQTcxXSwgWzB4MEE4MSwgMHgwQTgyXSwgWzB4MEFCQywgMHgwQUJDXSxcbiAgICBbMHgwQUMxLCAweDBBQzVdLCBbMHgwQUM3LCAweDBBQzhdLCBbMHgwQUNELCAweDBBQ0RdLFxuICAgIFsweDBBRTIsIDB4MEFFM10sIFsweDBCMDEsIDB4MEIwMV0sIFsweDBCM0MsIDB4MEIzQ10sXG4gICAgWzB4MEIzRiwgMHgwQjNGXSwgWzB4MEI0MSwgMHgwQjQzXSwgWzB4MEI0RCwgMHgwQjREXSxcbiAgICBbMHgwQjU2LCAweDBCNTZdLCBbMHgwQjgyLCAweDBCODJdLCBbMHgwQkMwLCAweDBCQzBdLFxuICAgIFsweDBCQ0QsIDB4MEJDRF0sIFsweDBDM0UsIDB4MEM0MF0sIFsweDBDNDYsIDB4MEM0OF0sXG4gICAgWzB4MEM0QSwgMHgwQzREXSwgWzB4MEM1NSwgMHgwQzU2XSwgWzB4MENCQywgMHgwQ0JDXSxcbiAgICBbMHgwQ0JGLCAweDBDQkZdLCBbMHgwQ0M2LCAweDBDQzZdLCBbMHgwQ0NDLCAweDBDQ0RdLFxuICAgIFsweDBDRTIsIDB4MENFM10sIFsweDBENDEsIDB4MEQ0M10sIFsweDBENEQsIDB4MEQ0RF0sXG4gICAgWzB4MERDQSwgMHgwRENBXSwgWzB4MEREMiwgMHgwREQ0XSwgWzB4MERENiwgMHgwREQ2XSxcbiAgICBbMHgwRTMxLCAweDBFMzFdLCBbMHgwRTM0LCAweDBFM0FdLCBbMHgwRTQ3LCAweDBFNEVdLFxuICAgIFsweDBFQjEsIDB4MEVCMV0sIFsweDBFQjQsIDB4MEVCOV0sIFsweDBFQkIsIDB4MEVCQ10sXG4gICAgWzB4MEVDOCwgMHgwRUNEXSwgWzB4MEYxOCwgMHgwRjE5XSwgWzB4MEYzNSwgMHgwRjM1XSxcbiAgICBbMHgwRjM3LCAweDBGMzddLCBbMHgwRjM5LCAweDBGMzldLCBbMHgwRjcxLCAweDBGN0VdLFxuICAgIFsweDBGODAsIDB4MEY4NF0sIFsweDBGODYsIDB4MEY4N10sIFsweDBGOTAsIDB4MEY5N10sXG4gICAgWzB4MEY5OSwgMHgwRkJDXSwgWzB4MEZDNiwgMHgwRkM2XSwgWzB4MTAyRCwgMHgxMDMwXSxcbiAgICBbMHgxMDMyLCAweDEwMzJdLCBbMHgxMDM2LCAweDEwMzddLCBbMHgxMDM5LCAweDEwMzldLFxuICAgIFsweDEwNTgsIDB4MTA1OV0sIFsweDExNjAsIDB4MTFGRl0sIFsweDEzNUYsIDB4MTM1Rl0sXG4gICAgWzB4MTcxMiwgMHgxNzE0XSwgWzB4MTczMiwgMHgxNzM0XSwgWzB4MTc1MiwgMHgxNzUzXSxcbiAgICBbMHgxNzcyLCAweDE3NzNdLCBbMHgxN0I0LCAweDE3QjVdLCBbMHgxN0I3LCAweDE3QkRdLFxuICAgIFsweDE3QzYsIDB4MTdDNl0sIFsweDE3QzksIDB4MTdEM10sIFsweDE3REQsIDB4MTdERF0sXG4gICAgWzB4MTgwQiwgMHgxODBEXSwgWzB4MThBOSwgMHgxOEE5XSwgWzB4MTkyMCwgMHgxOTIyXSxcbiAgICBbMHgxOTI3LCAweDE5MjhdLCBbMHgxOTMyLCAweDE5MzJdLCBbMHgxOTM5LCAweDE5M0JdLFxuICAgIFsweDFBMTcsIDB4MUExOF0sIFsweDFCMDAsIDB4MUIwM10sIFsweDFCMzQsIDB4MUIzNF0sXG4gICAgWzB4MUIzNiwgMHgxQjNBXSwgWzB4MUIzQywgMHgxQjNDXSwgWzB4MUI0MiwgMHgxQjQyXSxcbiAgICBbMHgxQjZCLCAweDFCNzNdLCBbMHgxREMwLCAweDFEQ0FdLCBbMHgxREZFLCAweDFERkZdLFxuICAgIFsweDIwMEIsIDB4MjAwRl0sIFsweDIwMkEsIDB4MjAyRV0sIFsweDIwNjAsIDB4MjA2M10sXG4gICAgWzB4MjA2QSwgMHgyMDZGXSwgWzB4MjBEMCwgMHgyMEVGXSwgWzB4MzAyQSwgMHgzMDJGXSxcbiAgICBbMHgzMDk5LCAweDMwOUFdLCBbMHhBODA2LCAweEE4MDZdLCBbMHhBODBCLCAweEE4MEJdLFxuICAgIFsweEE4MjUsIDB4QTgyNl0sIFsweEZCMUUsIDB4RkIxRV0sIFsweEZFMDAsIDB4RkUwRl0sXG4gICAgWzB4RkUyMCwgMHhGRTIzXSwgWzB4RkVGRiwgMHhGRUZGXSwgWzB4RkZGOSwgMHhGRkZCXVxuICBdO1xuICBjb25zdCBDT01CSU5JTkdfSElHSCA9IFtcbiAgICBbMHgxMEEwMSwgMHgxMEEwM10sIFsweDEwQTA1LCAweDEwQTA2XSwgWzB4MTBBMEMsIDB4MTBBMEZdLFxuICAgIFsweDEwQTM4LCAweDEwQTNBXSwgWzB4MTBBM0YsIDB4MTBBM0ZdLCBbMHgxRDE2NywgMHgxRDE2OV0sXG4gICAgWzB4MUQxNzMsIDB4MUQxODJdLCBbMHgxRDE4NSwgMHgxRDE4Ql0sIFsweDFEMUFBLCAweDFEMUFEXSxcbiAgICBbMHgxRDI0MiwgMHgxRDI0NF0sIFsweEUwMDAxLCAweEUwMDAxXSwgWzB4RTAwMjAsIDB4RTAwN0ZdLFxuICAgIFsweEUwMTAwLCAweEUwMUVGXVxuICBdO1xuICAvLyBiaW5hcnkgc2VhcmNoXG4gIGZ1bmN0aW9uIGJpc2VhcmNoKHVjczogbnVtYmVyLCBkYXRhOiBudW1iZXJbXVtdKTogYm9vbGVhbiB7XG4gICAgbGV0IG1pbiA9IDA7XG4gICAgbGV0IG1heCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICBsZXQgbWlkO1xuICAgIGlmICh1Y3MgPCBkYXRhWzBdWzBdIHx8IHVjcyA+IGRhdGFbbWF4XVsxXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB3aGlsZSAobWF4ID49IG1pbikge1xuICAgICAgbWlkID0gKG1pbiArIG1heCkgPj4gMTtcbiAgICAgIGlmICh1Y3MgPiBkYXRhW21pZF1bMV0pIHtcbiAgICAgICAgbWluID0gbWlkICsgMTtcbiAgICAgIH0gZWxzZSBpZiAodWNzIDwgZGF0YVttaWRdWzBdKSB7XG4gICAgICAgIG1heCA9IG1pZCAtIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZ1bmN0aW9uIHdjd2lkdGhIaWdoKHVjczogbnVtYmVyKTogMCB8IDEgfCAyIHtcbiAgICBpZiAoYmlzZWFyY2godWNzLCBDT01CSU5JTkdfSElHSCkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAoKHVjcyA+PSAweDIwMDAwICYmIHVjcyA8PSAweDJmZmZkKSB8fCAodWNzID49IDB4MzAwMDAgJiYgdWNzIDw9IDB4M2ZmZmQpKSB7XG4gICAgICByZXR1cm4gMjtcbiAgICB9XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgY29uc3QgY29udHJvbCA9IG9wdHMuY29udHJvbCB8IDA7XG5cbiAgLy8gY3JlYXRlIGxvb2t1cCB0YWJsZSBmb3IgQk1QIHBsYW5lXG4gIGNvbnN0IHRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzYpO1xuICBmaWxsKHRhYmxlLCAxKTtcbiAgdGFibGVbMF0gPSBvcHRzLm51bDtcbiAgLy8gY29udHJvbCBjaGFyc1xuICBmaWxsKHRhYmxlLCBvcHRzLmNvbnRyb2wsIDEsIDMyKTtcbiAgZmlsbCh0YWJsZSwgb3B0cy5jb250cm9sLCAweDdmLCAweGEwKTtcblxuICAvLyBhcHBseSB3aWRlIGNoYXIgcnVsZXMgZmlyc3RcbiAgLy8gd2lkZSBjaGFyc1xuICBmaWxsKHRhYmxlLCAyLCAweDExMDAsIDB4MTE2MCk7XG4gIHRhYmxlWzB4MjMyOV0gPSAyO1xuICB0YWJsZVsweDIzMmFdID0gMjtcbiAgZmlsbCh0YWJsZSwgMiwgMHgyZTgwLCAweGE0ZDApO1xuICB0YWJsZVsweDMwM2ZdID0gMTsgIC8vIHdyb25nbHkgaW4gbGFzdCBsaW5lXG5cbiAgZmlsbCh0YWJsZSwgMiwgMHhhYzAwLCAweGQ3YTQpO1xuICBmaWxsKHRhYmxlLCAyLCAweGY5MDAsIDB4ZmIwMCk7XG4gIGZpbGwodGFibGUsIDIsIDB4ZmUxMCwgMHhmZTFhKTtcbiAgZmlsbCh0YWJsZSwgMiwgMHhmZTMwLCAweGZlNzApO1xuICBmaWxsKHRhYmxlLCAyLCAweGZmMDAsIDB4ZmY2MSk7XG4gIGZpbGwodGFibGUsIDIsIDB4ZmZlMCwgMHhmZmU3KTtcblxuICAvLyBhcHBseSBjb21iaW5pbmcgbGFzdCB0byBlbnN1cmUgd2Ugb3ZlcndyaXRlXG4gIC8vIHdyb25nbHkgd2lkZSBzZXQgY2hhcnM6XG4gIC8vICAgIHRoZSBvcmlnaW5hbCBhbGdvIGV2YWxzIGNvbWJpbmluZyBmaXJzdCBhbmQgZmFsbHNcbiAgLy8gICAgdGhyb3VnaCB0byB3aWRlIGNoZWNrIHNvIHdlIHNpbXBseSBkbyBoZXJlIHRoZSBvcHBvc2l0ZVxuICAvLyBjb21iaW5pbmcgMFxuICBmb3IgKGxldCByID0gMDsgciA8IENPTUJJTklOR19CTVAubGVuZ3RoOyArK3IpIHtcbiAgICBmaWxsKHRhYmxlLCAwLCBDT01CSU5JTkdfQk1QW3JdWzBdLCBDT01CSU5JTkdfQk1QW3JdWzFdICsgMSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKG51bTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAobnVtIDwgMzIpIHtcbiAgICAgIHJldHVybiBjb250cm9sIHwgMDtcbiAgICB9XG4gICAgaWYgKG51bSA8IDEyNykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGlmIChudW0gPCA2NTUzNikge1xuICAgICAgcmV0dXJuIHRhYmxlW251bV07XG4gICAgfVxuICAgIC8vIGRvIGEgZnVsbCBzZWFyY2ggZm9yIGhpZ2ggY29kZXBvaW50c1xuICAgIHJldHVybiB3Y3dpZHRoSGlnaChudW0pO1xuICB9O1xufSkoe251bDogMCwgY29udHJvbDogMH0pOyAgLy8gY29uZmlndXJhYmxlIG9wdGlvbnNcblxuLyoqXG4gKiBHZXQgdGhlIHRlcm1pbmFsIGNlbGwgd2lkdGggZm9yIGEgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyaW5nQ2VsbFdpZHRoKHM6IHN0cmluZyk6IG51bWJlciB7XG4gIGxldCByZXN1bHQgPSAwO1xuICBjb25zdCBsZW5ndGggPSBzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGxldCBjb2RlID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgIC8vIHN1cnJvZ2F0ZSBwYWlyIGZpcnN0XG4gICAgaWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEQkZGKSB7XG4gICAgICBpZiAoKytpID49IGxlbmd0aCkge1xuICAgICAgICAvLyB0aGlzIHNob3VsZCBub3QgaGFwcGVuIHdpdGggc3RyaW5ncyByZXRyaWV2ZWQgZnJvbVxuICAgICAgICAvLyBCdWZmZXIudHJhbnNsYXRlVG9TdHJpbmcgYXMgaXQgY29udmVydHMgZnJvbSBVVEYtMzJcbiAgICAgICAgLy8gYW5kIHRoZXJlZm9yZSBhbHdheXMgc2hvdWxkIGNvbnRhaW4gdGhlIHNlY29uZCBwYXJ0XG4gICAgICAgIC8vIGZvciBhbnkgb3RoZXIgc3RyaW5nIHdlIHN0aWxsIGhhdmUgdG8gaGFuZGxlIGl0IHNvbWVob3c6XG4gICAgICAgIC8vIHNpbXBseSB0cmVhdCB0aGUgbG9uZWx5IHN1cnJvZ2F0ZSBmaXJzdCBhcyBhIHNpbmdsZSBjaGFyIChVQ1MtMiBiZWhhdmlvcilcbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIHdjd2lkdGgoY29kZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBzZWNvbmQgPSBzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAvLyBjb252ZXJ0IHN1cnJvZ2F0ZSBwYWlyIHRvIGhpZ2ggY29kZXBvaW50IG9ubHkgZm9yIHZhbGlkIHNlY29uZCBwYXJ0IChVVEYtMTYpXG4gICAgICAvLyBvdGhlcndpc2UgdHJlYXQgdGhlbSBpbmRlcGVuZGVudGx5IChVQ1MtMiBiZWhhdmlvcilcbiAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgY29kZSA9IChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCArPSB3Y3dpZHRoKHNlY29uZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdCArPSB3Y3dpZHRoKGNvZGUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbCwgSVNlbGVjdGlvbk1hbmFnZXIgfSBmcm9tICcuL1R5cGVzJztcblxuaW50ZXJmYWNlIElXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICBjbGlwYm9hcmREYXRhPzoge1xuICAgIGdldERhdGEoZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmc7XG4gICAgc2V0RGF0YShmb3JtYXQ6IHN0cmluZywgZGF0YTogc3RyaW5nKTogdm9pZDtcbiAgfTtcbn1cblxuZGVjbGFyZSB2YXIgd2luZG93OiBJV2luZG93O1xuXG4vKipcbiAqIFByZXBhcmVzIHRleHQgdG8gYmUgcGFzdGVkIGludG8gdGhlIHRlcm1pbmFsIGJ5IG5vcm1hbGl6aW5nIHRoZSBsaW5lIGVuZGluZ3NcbiAqIEBwYXJhbSB0ZXh0IFRoZSBwYXN0ZWQgdGV4dCB0aGF0IG5lZWRzIHByb2Nlc3NpbmcgYmVmb3JlIGluc2VydGluZyBpbnRvIHRoZSB0ZXJtaW5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVRleHRGb3JUZXJtaW5hbCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHI/XFxuL2csICdcXHInKTtcbn1cblxuLyoqXG4gKiBCcmFja2V0IHRleHQgZm9yIHBhc3RlLCBpZiBuZWNlc3NhcnksIGFzIHBlciBodHRwczovL2NpcncuaW4vYmxvZy9icmFja2V0ZWQtcGFzdGVcbiAqIEBwYXJhbSB0ZXh0IFRoZSBwYXN0ZWQgdGV4dCB0byBicmFja2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBicmFja2V0VGV4dEZvclBhc3RlKHRleHQ6IHN0cmluZywgYnJhY2tldGVkUGFzdGVNb2RlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgaWYgKGJyYWNrZXRlZFBhc3RlTW9kZSkge1xuICAgIHJldHVybiAnXFx4MWJbMjAwficgKyB0ZXh0ICsgJ1xceDFiWzIwMX4nO1xuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuXG4vKipcbiAqIEJpbmRzIGNvcHkgZnVuY3Rpb25hbGl0eSB0byB0aGUgZ2l2ZW4gdGVybWluYWwuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIGNvcHkgZXZlbnQgdG8gYmUgaGFuZGxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weUhhbmRsZXIoZXY6IENsaXBib2FyZEV2ZW50LCB0ZXJtOiBJVGVybWluYWwsIHNlbGVjdGlvbk1hbmFnZXI6IElTZWxlY3Rpb25NYW5hZ2VyKTogdm9pZCB7XG4gIGlmICh0ZXJtLmJyb3dzZXIuaXNNU0lFKSB7XG4gICAgd2luZG93LmNsaXBib2FyZERhdGEuc2V0RGF0YSgnVGV4dCcsIHNlbGVjdGlvbk1hbmFnZXIuc2VsZWN0aW9uVGV4dCk7XG4gIH0gZWxzZSB7XG4gICAgZXYuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25UZXh0KTtcbiAgfVxuXG4gIC8vIFByZXZlbnQgb3IgdGhlIG9yaWdpbmFsIHRleHQgd2lsbCBiZSBjb3BpZWQuXG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbi8qKlxuICogUmVkaXJlY3QgdGhlIGNsaXBib2FyZCdzIGRhdGEgdG8gdGhlIHRlcm1pbmFsJ3MgaW5wdXQgaGFuZGxlci5cbiAqIEBwYXJhbSBldiBUaGUgb3JpZ2luYWwgcGFzdGUgZXZlbnQgdG8gYmUgaGFuZGxlZFxuICogQHBhcmFtIHRlcm0gVGhlIHRlcm1pbmFsIG9uIHdoaWNoIHRvIGFwcGx5IHRoZSBoYW5kbGVkIHBhc3RlIGV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZUhhbmRsZXIoZXY6IENsaXBib2FyZEV2ZW50LCB0ZXJtOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgbGV0IHRleHQ6IHN0cmluZztcblxuICBjb25zdCBkaXNwYXRjaFBhc3RlID0gZnVuY3Rpb24odGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGV4dCA9IHByZXBhcmVUZXh0Rm9yVGVybWluYWwodGV4dCk7XG4gICAgdGV4dCA9IGJyYWNrZXRUZXh0Rm9yUGFzdGUodGV4dCwgdGVybS5icmFja2V0ZWRQYXN0ZU1vZGUpO1xuICAgIHRlcm0uaGFuZGxlcih0ZXh0KTtcbiAgICB0ZXJtLnRleHRhcmVhLnZhbHVlID0gJyc7XG4gICAgdGVybS5lbWl0KCdwYXN0ZScsIHRleHQpO1xuICAgIHRlcm0uY2FuY2VsKGV2KTtcbiAgfTtcblxuICBpZiAodGVybS5icm93c2VyLmlzTVNJRSkge1xuICAgIGlmICh3aW5kb3cuY2xpcGJvYXJkRGF0YSkge1xuICAgICAgdGV4dCA9IHdpbmRvdy5jbGlwYm9hcmREYXRhLmdldERhdGEoJ1RleHQnKTtcbiAgICAgIGRpc3BhdGNoUGFzdGUodGV4dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChldi5jbGlwYm9hcmREYXRhKSB7XG4gICAgICB0ZXh0ID0gZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICBkaXNwYXRjaFBhc3RlKHRleHQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE1vdmVzIHRoZSB0ZXh0YXJlYSB1bmRlciB0aGUgbW91c2UgY3Vyc29yIGFuZCBmb2N1c2VzIGl0LlxuICogQHBhcmFtIGV2IFRoZSBvcmlnaW5hbCByaWdodCBjbGljayBldmVudCB0byBiZSBoYW5kbGVkLlxuICogQHBhcmFtIHRleHRhcmVhIFRoZSB0ZXJtaW5hbCdzIHRleHRhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvcihldjogTW91c2VFdmVudCwgdGVybTogSVRlcm1pbmFsKTogdm9pZCB7XG5cbiAgLy8gQ2FsY3VsYXRlIHRleHRhcmVhIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBzY3JlZW4gZWxlbWVudFxuICBjb25zdCBwb3MgPSB0ZXJtLnNjcmVlbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGxlZnQgPSBldi5jbGllbnRYIC0gcG9zLmxlZnQgLSAxMDtcbiAgY29uc3QgdG9wID0gZXYuY2xpZW50WSAtIHBvcy50b3AgLSAxMDtcblxuICAvLyBCcmluZyB0ZXh0YXJlYSBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uXG4gIHRlcm0udGV4dGFyZWEuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICB0ZXJtLnRleHRhcmVhLnN0eWxlLndpZHRoID0gJzIwcHgnO1xuICB0ZXJtLnRleHRhcmVhLnN0eWxlLmhlaWdodCA9ICcyMHB4JztcbiAgdGVybS50ZXh0YXJlYS5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gIHRlcm0udGV4dGFyZWEuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgdGVybS50ZXh0YXJlYS5zdHlsZS56SW5kZXggPSAnMTAwMCc7XG5cbiAgdGVybS50ZXh0YXJlYS5mb2N1cygpO1xuXG4gIC8vIFJlc2V0IHRoZSB0ZXJtaW5hbCB0ZXh0YXJlYSdzIHN0eWxpbmdcbiAgLy8gVGltZW91dCBuZWVkcyB0byBiZSBsb25nIGVub3VnaCBmb3IgY2xpY2sgZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgdGVybS50ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9IG51bGw7XG4gICAgdGVybS50ZXh0YXJlYS5zdHlsZS53aWR0aCA9IG51bGw7XG4gICAgdGVybS50ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBudWxsO1xuICAgIHRlcm0udGV4dGFyZWEuc3R5bGUubGVmdCA9IG51bGw7XG4gICAgdGVybS50ZXh0YXJlYS5zdHlsZS50b3AgPSBudWxsO1xuICAgIHRlcm0udGV4dGFyZWEuc3R5bGUuekluZGV4ID0gbnVsbDtcbiAgfSwgMjAwKTtcbn1cblxuLyoqXG4gKiBCaW5kIHRvIHJpZ2h0LWNsaWNrIGV2ZW50IGFuZCBhbGxvdyByaWdodC1jbGljayBjb3B5IGFuZCBwYXN0ZS5cbiAqIEBwYXJhbSBldiBUaGUgb3JpZ2luYWwgcmlnaHQgY2xpY2sgZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAqIEBwYXJhbSB0ZXh0YXJlYSBUaGUgdGVybWluYWwncyB0ZXh0YXJlYS5cbiAqIEBwYXJhbSBzZWxlY3Rpb25NYW5hZ2VyIFRoZSB0ZXJtaW5hbCdzIHNlbGVjdGlvbiBtYW5hZ2VyLlxuICogQHBhcmFtIHNob3VsZFNlbGVjdFdvcmQgSWYgdHJ1ZSBhbmQgdGhlcmUgaXMgbm8gc2VsZWN0aW9uIHRoZSBjdXJyZW50IHdvcmQgd2lsbCBiZSBzZWxlY3RlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmlnaHRDbGlja0hhbmRsZXIoZXY6IE1vdXNlRXZlbnQsIHRlcm06IElUZXJtaW5hbCwgc2VsZWN0aW9uTWFuYWdlcjogSVNlbGVjdGlvbk1hbmFnZXIsIHNob3VsZFNlbGVjdFdvcmQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgbW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvcihldiwgdGVybSk7XG5cbiAgaWYgKHNob3VsZFNlbGVjdFdvcmQgJiYgIXNlbGVjdGlvbk1hbmFnZXIuaXNDbGlja0luU2VsZWN0aW9uKGV2KSkge1xuICAgIHNlbGVjdGlvbk1hbmFnZXIuc2VsZWN0V29yZEF0Q3Vyc29yKGV2KTtcbiAgfVxuXG4gIC8vIEdldCB0ZXh0YXJlYSByZWFkeSB0byBjb3B5IGZyb20gdGhlIGNvbnRleHQgbWVudVxuICB0ZXJtLnRleHRhcmVhLnZhbHVlID0gc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25UZXh0O1xuICB0ZXJtLnRleHRhcmVhLnNlbGVjdCgpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJVGVybWluYWwgfSBmcm9tICcuL1R5cGVzJztcblxuaW50ZXJmYWNlIElQb3NpdGlvbiB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGVuZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgZm9yIGhhbmRsaW5nIGNvbXBvc2l0aW9uc3RhcnQsIGNvbXBvc2l0aW9udXBkYXRlIGFuZCBjb21wb3NpdGlvbmVuZFxuICogZXZlbnRzLCBkaXNwbGF5aW5nIHRoZSBpbi1wcm9ncmVzcyBjb21wb3NpdGlvbiB0byB0aGUgVUkgYW5kIGZvcndhcmRpbmcgdGhlIGZpbmFsIGNvbXBvc2l0aW9uXG4gKiB0byB0aGUgaGFuZGxlci5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uSGVscGVyIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaW5wdXQgY29tcG9zaXRpb24gaXMgY3VycmVudGx5IGhhcHBlbmluZywgZWcuIHZpYSBhIG1vYmlsZSBrZXlib2FyZCwgc3BlZWNoIGlucHV0IG9yXG4gICAqIElNRS4gVGhpcyB2YXJpYWJsZSBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNvbXBvc2l0aW9uVGV4dCBzaG91bGQgYmUgZGlzcGxheWVkIG9uIHRoZSBVSS5cbiAgICovXG4gIHByaXZhdGUgX2lzQ29tcG9zaW5nOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpb24gd2l0aGluIHRoZSBpbnB1dCB0ZXh0YXJlYSdzIHZhbHVlIG9mIHRoZSBjdXJyZW50IGNvbXBvc2l0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25Qb3NpdGlvbjogSVBvc2l0aW9uO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIGEgY29tcG9zaXRpb24gaXMgaW4gdGhlIHByb2Nlc3Mgb2YgYmVpbmcgc2VudCwgc2V0dGluZyB0aGlzIHRvIGZhbHNlIHdpbGwgY2FuY2VsIGFueVxuICAgKiBpbi1wcm9ncmVzcyBjb21wb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX2lzU2VuZGluZ0NvbXBvc2l0aW9uOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IENvbXBvc2l0aW9uSGVscGVyLlxuICAgKiBAcGFyYW0gX3RleHRhcmVhIFRoZSB0ZXh0YXJlYSB0aGF0IHh0ZXJtIHVzZXMgZm9yIGlucHV0LlxuICAgKiBAcGFyYW0gX2NvbXBvc2l0aW9uVmlldyBUaGUgZWxlbWVudCB0byBkaXNwbGF5IHRoZSBpbi1wcm9ncmVzcyBjb21wb3NpdGlvbiBpbi5cbiAgICogQHBhcmFtIF90ZXJtaW5hbCBUaGUgVGVybWluYWwgdG8gZm9yd2FyZCB0aGUgZmluaXNoZWQgY29tcG9zaXRpb24gdG8uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCxcbiAgICBwcml2YXRlIF9jb21wb3NpdGlvblZpZXc6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgX3Rlcm1pbmFsOiBJVGVybWluYWxcbiAgKSB7XG4gICAgdGhpcy5faXNDb21wb3NpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24gPSB7IHN0YXJ0OiBudWxsLCBlbmQ6IG51bGwgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBjb21wb3NpdGlvbnN0YXJ0IGV2ZW50LCBhY3RpdmF0aW5nIHRoZSBjb21wb3NpdGlvbiB2aWV3LlxuICAgKi9cbiAgcHVibGljIGNvbXBvc2l0aW9uc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5faXNDb21wb3NpbmcgPSB0cnVlO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5sZW5ndGg7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnRleHRDb250ZW50ID0gJyc7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGNvbXBvc2l0aW9udXBkYXRlIGV2ZW50LCB1cGRhdGluZyB0aGUgY29tcG9zaXRpb24gdmlldy5cbiAgICogQHBhcmFtIGV2IFRoZSBldmVudC5cbiAgICovXG4gIHB1YmxpYyBjb21wb3NpdGlvbnVwZGF0ZShldjogQ29tcG9zaXRpb25FdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy50ZXh0Q29udGVudCA9IGV2LmRhdGE7XG4gICAgdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLmxlbmd0aDtcbiAgICB9LCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBjb21wb3NpdGlvbmVuZCBldmVudCwgaGlkaW5nIHRoZSBjb21wb3NpdGlvbiB2aWV3IGFuZCBzZW5kaW5nIHRoZSBjb21wb3NpdGlvbiB0b1xuICAgKiB0aGUgaGFuZGxlci5cbiAgICovXG4gIHB1YmxpYyBjb21wb3NpdGlvbmVuZCgpOiB2b2lkIHtcbiAgICB0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGtleWRvd24gZXZlbnQsIHJvdXRpbmcgYW55IG5lY2Vzc2FyeSBldmVudHMgdG8gdGhlIENvbXBvc2l0aW9uSGVscGVyIGZ1bmN0aW9ucy5cbiAgICogQHBhcmFtIGV2IFRoZSBrZXlkb3duIGV2ZW50LlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhlIFRlcm1pbmFsIHNob3VsZCBjb250aW51ZSBwcm9jZXNzaW5nIHRoZSBrZXlkb3duIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIGtleWRvd24oZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5faXNDb21wb3NpbmcgfHwgdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24pIHtcbiAgICAgIGlmIChldi5rZXlDb2RlID09PSAyMjkpIHtcbiAgICAgICAgLy8gQ29udGludWUgY29tcG9zaW5nIGlmIHRoZSBrZXlDb2RlIGlzIHRoZSBcImNvbXBvc2l0aW9uIGNoYXJhY3RlclwiXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMTYgfHwgZXYua2V5Q29kZSA9PT0gMTcgfHwgZXYua2V5Q29kZSA9PT0gMTgpIHtcbiAgICAgICAgLy8gQ29udGludWUgY29tcG9zaW5nIGlmIHRoZSBrZXlDb2RlIGlzIGEgbW9kaWZpZXIga2V5XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEZpbmlzaCBjb21wb3NpdGlvbiBpbW1lZGlhdGVseS4gVGhpcyBpcyBtYWlubHkgaGVyZSBmb3IgdGhlIGNhc2Ugd2hlcmUgZW50ZXIgaXNcbiAgICAgIC8vIHByZXNzZWQgYW5kIHRoZSBoYW5kbGVyIG5lZWRzIHRvIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGNvbW1hbmQgaXMgZXhlY3V0ZWQuXG4gICAgICB0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gMjI5KSB7XG4gICAgICAvLyBJZiB0aGUgXCJjb21wb3NpdGlvbiBjaGFyYWN0ZXJcIiBpcyB1c2VkIGJ1dCBnZXRzIHRvIHRoaXMgcG9pbnQgaXQgbWVhbnMgYSBub24tY29tcG9zaXRpb25cbiAgICAgIC8vIGNoYXJhY3RlciAoZWcuIG51bWJlcnMgYW5kIHB1bmN0dWF0aW9uKSB3YXMgcHJlc3NlZCB3aGVuIHRoZSBJTUUgd2FzIGFjdGl2ZS5cbiAgICAgIHRoaXMuX2hhbmRsZUFueVRleHRhcmVhQ2hhbmdlcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmFsaXplcyB0aGUgY29tcG9zaXRpb24sIHJlc3VtaW5nIHJlZ3VsYXIgaW5wdXQgYWN0aW9ucy4gVGhpcyBpcyBjYWxsZWQgd2hlbiBhIGNvbXBvc2l0aW9uXG4gICAqIGlzIGVuZGluZy5cbiAgICogQHBhcmFtIHdhaXRGb3JQcm9wYWdhdGlvbiBXaGV0aGVyIHRvIHdhaXQgZm9yIGV2ZW50cyB0byBwcm9wYWdhdGUgYmVmb3JlIHNlbmRpbmdcbiAgICogICB0aGUgaW5wdXQuIFRoaXMgc2hvdWxkIGJlIGZhbHNlIGlmIGEgbm9uLWNvbXBvc2l0aW9uIGtleXN0cm9rZSBpcyBlbnRlcmVkIGJlZm9yZSB0aGVcbiAgICogICBjb21wb3NpdGlvbmVuZCBldmVudCBpcyB0cmlnZ2VyZWQsIHN1Y2ggYXMgZW50ZXIsIHNvIHRoYXQgdGhlIGNvbXBvc2l0aW9uIGlzIHNlbnQgYmVmb3JlXG4gICAqICAgdGhlIGNvbW1hbmQgaXMgZXhlY3V0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9maW5hbGl6ZUNvbXBvc2l0aW9uKHdhaXRGb3JQcm9wYWdhdGlvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB0aGlzLl9pc0NvbXBvc2luZyA9IGZhbHNlO1xuICAgIHRoaXMuX2NsZWFyVGV4dGFyZWFQb3NpdGlvbigpO1xuXG4gICAgaWYgKCF3YWl0Rm9yUHJvcGFnYXRpb24pIHtcbiAgICAgIC8vIENhbmNlbCBhbnkgZGVsYXllZCBjb21wb3NpdGlvbiBzZW5kIHJlcXVlc3RzIGFuZCBzZW5kIHRoZSBpbnB1dCBpbW1lZGlhdGVseS5cbiAgICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgICBjb25zdCBpbnB1dCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyh0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LCB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZCk7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5oYW5kbGVyKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTWFrZSBhIGRlZXAgY29weSBvZiB0aGUgY29tcG9zaXRpb24gcG9zaXRpb24gaGVyZSBhcyBhIG5ldyBjb21wb3NpdGlvbnN0YXJ0IGV2ZW50IG1heVxuICAgICAgLy8gZmlyZSBiZWZvcmUgdGhlIHNldFRpbWVvdXQgZXhlY3V0ZXMuXG4gICAgICBjb25zdCBjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsXG4gICAgICAgIGVuZDogdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmRcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbmNlIGNvbXBvc2l0aW9uKiBldmVudHMgaGFwcGVuIGJlZm9yZSB0aGUgY2hhbmdlcyB0YWtlIHBsYWNlIGluIHRoZSB0ZXh0YXJlYSBvbiBtb3N0XG4gICAgICAvLyBicm93c2VycywgdXNlIGEgc2V0VGltZW91dCB3aXRoIDBtcyB0aW1lIHRvIGFsbG93IHRoZSBuYXRpdmUgY29tcG9zaXRpb25lbmQgZXZlbnQgdG9cbiAgICAgIC8vIGNvbXBsZXRlLiBUaGlzIGVuc3VyZXMgdGhlIGNvcnJlY3QgY2hhcmFjdGVyIGlzIHJldHJpZXZlZC5cbiAgICAgIC8vIFRoaXMgc29sdXRpb24gd2FzIHVzZWQgYmVjYXVzZTpcbiAgICAgIC8vIC0gVGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50J3MgZGF0YSBwcm9wZXJ0eSBpcyB1bnJlbGlhYmxlLCBhdCBsZWFzdCBvbiBDaHJvbWl1bVxuICAgICAgLy8gLSBUaGUgbGFzdCBjb21wb3NpdGlvbnVwZGF0ZSBldmVudCdzIGRhdGEgcHJvcGVydHkgZG9lcyBub3QgYWx3YXlzIGFjY3VyYXRlbHkgZGVzY3JpYmVcbiAgICAgIC8vICAgdGhlIGNoYXJhY3RlciwgYSBjb3VudGVyIGV4YW1wbGUgYmVpbmcgS29yZWFuIHdoZXJlIGFuIGVuZGluZyBjb25zb25zYW50IGNhbiBtb3ZlIHRvXG4gICAgICAvLyAgIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyIGlmIHRoZSBmb2xsb3dpbmcgaW5wdXQgaXMgYSB2b3dlbC5cbiAgICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgaW5wdXQgaGFzIG5vdCBhbHJlYWR5IGJlZW4gc2VudFxuICAgICAgICBpZiAodGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIGxldCBpbnB1dDtcbiAgICAgICAgICBpZiAodGhpcy5faXNDb21wb3NpbmcpIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgZW5kIHBvc2l0aW9uIHRvIGdldCB0aGUgc3RyaW5nIGlmIGEgbmV3IGNvbXBvc2l0aW9uIGhhcyBzdGFydGVkLlxuICAgICAgICAgICAgaW5wdXQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcoY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsIGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uLmVuZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIERvbid0IHVzZSB0aGUgZW5kIHBvc2l0aW9uIGhlcmUgaW4gb3JkZXIgdG8gcGljayB1cCBhbnkgY2hhcmFjdGVycyBhZnRlciB0aGVcbiAgICAgICAgICAgIC8vIGNvbXBvc2l0aW9uIGhhcyBmaW5pc2hlZCwgZm9yIGV4YW1wbGUgd2hlbiB0eXBpbmcgYSBub24tY29tcG9zaXRpb24gY2hhcmFjdGVyXG4gICAgICAgICAgICAvLyAoZWcuIDIpIGFmdGVyIGEgY29tcG9zaXRpb24gY2hhcmFjdGVyLlxuICAgICAgICAgICAgaW5wdXQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcoY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5oYW5kbGVyKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgfSwgMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFwcGx5IGFueSBjaGFuZ2VzIG1hZGUgdG8gdGhlIHRleHRhcmVhIGFmdGVyIHRoZSBjdXJyZW50IGV2ZW50IGNoYWluIGlzIGFsbG93ZWQgdG8gY29tcGxldGUuXG4gICAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIG5vdCBjdXJyZW50bHkgY29tcG9zaW5nIGJ1dCBhIGtleWRvd24gZXZlbnQgd2l0aCB0aGUgXCJjb21wb3NpdGlvblxuICAgKiBjaGFyYWN0ZXJcIiAoMjI5KSBpcyB0cmlnZ2VyZWQsIGluIG9yZGVyIHRvIGFsbG93IG5vbi1jb21wb3NpdGlvbiB0ZXh0IHRvIGJlIGVudGVyZWQgd2hlbiBhblxuICAgKiBJTUUgaXMgYWN0aXZlLlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzKCk6IHZvaWQge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fdGV4dGFyZWEudmFsdWU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBJZ25vcmUgaWYgYSBjb21wb3NpdGlvbiBoYXMgc3RhcnRlZCBzaW5jZSB0aGUgdGltZW91dFxuICAgICAgaWYgKCF0aGlzLl9pc0NvbXBvc2luZykge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuX3RleHRhcmVhLnZhbHVlO1xuICAgICAgICBjb25zdCBkaWZmID0gbmV3VmFsdWUucmVwbGFjZShvbGRWYWx1ZSwgJycpO1xuICAgICAgICBpZiAoZGlmZi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuaGFuZGxlcihkaWZmKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvc2l0aW9ucyB0aGUgY29tcG9zaXRpb24gdmlldyBvbiB0b3Agb2YgdGhlIGN1cnNvciBhbmQgdGhlIHRleHRhcmVhIGp1c3QgYmVsb3cgaXQgKHNvIHRoZVxuICAgKiBJTUUgaGVscGVyIGRpYWxvZyBpcyBwb3NpdGlvbmVkIGNvcnJlY3RseSkuXG4gICAqIEBwYXJhbSBkb250UmVjdXJzZSBXaGV0aGVyIHRvIHVzZSBzZXRUaW1lb3V0IHRvIHJlY3Vyc2l2ZWx5IHRyaWdnZXIgYW5vdGhlciB1cGRhdGUsIHRoaXMgaXNcbiAgICogICBuZWNlc3NhcnkgYXMgdGhlIElNRSBldmVudHMgYWNyb3NzIGJyb3dzZXJzIGFyZSBub3QgY29uc2lzdGVudGx5IHRyaWdnZXJlZC5cbiAgICovXG4gIHB1YmxpYyB1cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKGRvbnRSZWN1cnNlPzogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5faXNDb21wb3NpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGVybWluYWwuYnVmZmVyLmlzQ3Vyc29ySW5WaWV3cG9ydCkge1xuICAgICAgY29uc3QgY2VsbEhlaWdodCA9IE1hdGguY2VpbCh0aGlzLl90ZXJtaW5hbC5jaGFyTWVhc3VyZS5oZWlnaHQgKiB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxpbmVIZWlnaHQpO1xuICAgICAgY29uc3QgY3Vyc29yVG9wID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnkgKiBjZWxsSGVpZ2h0O1xuICAgICAgY29uc3QgY3Vyc29yTGVmdCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ICogdGhpcy5fdGVybWluYWwuY2hhck1lYXN1cmUud2lkdGg7XG5cbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5sZWZ0ID0gY3Vyc29yTGVmdCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUudG9wID0gY3Vyc29yVG9wICsgJ3B4JztcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5oZWlnaHQgPSBjZWxsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5saW5lSGVpZ2h0ID0gY2VsbEhlaWdodCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udEZhbWlseSA9IHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMuZm9udEZhbWlseTtcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5mb250U2l6ZSA9IHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMuZm9udFNpemUgKyAncHgnO1xuICAgICAgLy8gU3luYyB0aGUgdGV4dGFyZWEgdG8gdGhlIGV4YWN0IHBvc2l0aW9uIG9mIHRoZSBjb21wb3NpdGlvbiB2aWV3IHNvIHRoZSBJTUUga25vd3Mgd2hlcmUgdGhlXG4gICAgICAvLyB0ZXh0IGlzLlxuICAgICAgY29uc3QgY29tcG9zaXRpb25WaWV3Qm91bmRzID0gdGhpcy5fY29tcG9zaXRpb25WaWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGVmdCA9IGN1cnNvckxlZnQgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wID0gY3Vyc29yVG9wICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLndpZHRoID0gY29tcG9zaXRpb25WaWV3Qm91bmRzLndpZHRoICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLmhlaWdodCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy5oZWlnaHQgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy5oZWlnaHQgKyAncHgnO1xuICAgIH1cblxuICAgIGlmICghZG9udFJlY3Vyc2UpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKHRydWUpLCAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSB0ZXh0YXJlYSdzIHBvc2l0aW9uIHNvIHRoYXQgdGhlIGN1cnNvciBkb2VzIG5vdCBibGluayBvbiBJRS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgX2NsZWFyVGV4dGFyZWFQb3NpdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wID0gJyc7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgUGFyc2VyU3RhdGUsIFBhcnNlckFjdGlvbiwgSVBhcnNpbmdTdGF0ZSwgSURjc0hhbmRsZXIsIElFc2NhcGVTZXF1ZW5jZVBhcnNlciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi9jb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IHV0ZjMyVG9TdHJpbmcgfSBmcm9tICcuL2NvcmUvaW5wdXQvVGV4dERlY29kZXInO1xuXG5pbnRlcmZhY2UgSUhhbmRsZXJDb2xsZWN0aW9uPFQ+IHtcbiAgW2tleTogc3RyaW5nXTogVFtdO1xufVxuXG50eXBlIENzaUhhbmRsZXIgPSAocGFyYW1zOiBudW1iZXJbXSwgY29sbGVjdDogc3RyaW5nKSA9PiBib29sZWFuIHwgdm9pZDtcbnR5cGUgT3NjSGFuZGxlciA9IChkYXRhOiBzdHJpbmcpID0+IGJvb2xlYW4gfCB2b2lkO1xuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgZmlsbGVkIHdpdGggbnVtYmVycyBiZXR3ZWVuIHRoZSBsb3cgYW5kIGhpZ2ggcGFyYW1ldGVycyAocmlnaHQgZXhjbHVzaXZlKS5cbiAqIEBwYXJhbSBsb3cgVGhlIGxvdyBudW1iZXIuXG4gKiBAcGFyYW0gaGlnaCBUaGUgaGlnaCBudW1iZXIuXG4gKi9cbmZ1bmN0aW9uIHIobG93OiBudW1iZXIsIGhpZ2g6IG51bWJlcik6IG51bWJlcltdIHtcbiAgbGV0IGMgPSBoaWdoIC0gbG93O1xuICBjb25zdCBhcnIgPSBuZXcgQXJyYXkoYyk7XG4gIHdoaWxlIChjLS0pIHtcbiAgICBhcnJbY10gPSAtLWhpZ2g7XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9uIHRhYmxlIGZvciBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqIE5PVEU6IGRhdGEgaW4gdGhlIHVuZGVybHlpbmcgdGFibGUgaXMgcGFja2VkIGxpa2UgdGhpczpcbiAqICAgY3VycmVudFN0YXRlIDw8IDggfCBjaGFyYWN0ZXJDb2RlICAtLT4gIGFjdGlvbiA8PCA0IHwgbmV4dFN0YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uVGFibGUge1xuICBwdWJsaWMgdGFibGU6IFVpbnQ4QXJyYXkgfCBudW1iZXJbXTtcblxuICBjb25zdHJ1Y3RvcihsZW5ndGg6IG51bWJlcikge1xuICAgIHRoaXMudGFibGUgPSAodHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnKVxuICAgICAgPyBuZXcgQXJyYXkobGVuZ3RoKVxuICAgICAgOiBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRyYW5zaXRpb24gdG8gdGhlIHRyYW5zaXRpb24gdGFibGUuXG4gICAqIEBwYXJhbSBjb2RlIGlucHV0IGNoYXJhY3RlciBjb2RlXG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgYWRkKGNvZGU6IG51bWJlciwgc3RhdGU6IG51bWJlciwgYWN0aW9uOiBudW1iZXIgfCBudWxsLCBuZXh0OiBudW1iZXIgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy50YWJsZVtzdGF0ZSA8PCA4IHwgY29kZV0gPSAoKGFjdGlvbiB8IDApIDw8IDQpIHwgKChuZXh0ID09PSB1bmRlZmluZWQpID8gc3RhdGUgOiBuZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdHJhbnNpdGlvbnMgZm9yIG11bHRpcGxlIGlucHV0IGNoYXJhY3RlciBjb2Rlcy5cbiAgICogQHBhcmFtIGNvZGVzIGlucHV0IGNoYXJhY3RlciBjb2RlIGFycmF5XG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgYWRkTWFueShjb2RlczogbnVtYmVyW10sIHN0YXRlOiBudW1iZXIsIGFjdGlvbjogbnVtYmVyIHwgbnVsbCwgbmV4dDogbnVtYmVyIHwgbnVsbCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuYWRkKGNvZGVzW2ldLCBzdGF0ZSwgYWN0aW9uLCBuZXh0KTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIERlZmF1bHQgZGVmaW5pdGlvbnMgZm9yIHRoZSBWVDUwMF9UUkFOU0lUSU9OX1RBQkxFLlxuICovXG5jb25zdCBQUklOVEFCTEVTID0gcigweDIwLCAweDdmKTtcbmNvbnN0IEVYRUNVVEFCTEVTID0gcigweDAwLCAweDE4KTtcbkVYRUNVVEFCTEVTLnB1c2goMHgxOSk7XG5FWEVDVVRBQkxFUy5wdXNoLmFwcGx5KEVYRUNVVEFCTEVTLCByKDB4MWMsIDB4MjApKTtcbi8vIFBzZXVkby1jaGFyYWN0ZXIgcGxhY2Vob2xkZXIgZm9yIHByaW50YWJsZSBub24tYXNjaWkgY2hhcmFjdGVycy5cbmNvbnN0IE5PTl9BU0NJSV9QUklOVEFCTEUgPSAweEEwO1xuXG4vKipcbiAqIFZUNTAwIGNvbXBhdGlibGUgdHJhbnNpdGlvbiB0YWJsZS5cbiAqIFRha2VuIGZyb20gaHR0cHM6Ly92dDEwMC5uZXQvZW11L2RlY19hbnNpX3BhcnNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFZUNTAwX1RSQU5TSVRJT05fVEFCTEUgPSAoZnVuY3Rpb24gKCk6IFRyYW5zaXRpb25UYWJsZSB7XG4gIGNvbnN0IHRhYmxlOiBUcmFuc2l0aW9uVGFibGUgPSBuZXcgVHJhbnNpdGlvblRhYmxlKDQwOTUpO1xuXG4gIGNvbnN0IHN0YXRlczogbnVtYmVyW10gPSByKFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIICsgMSk7XG4gIGxldCBzdGF0ZTogYW55O1xuXG4gIC8vIHRhYmxlIHdpdGggZGVmYXVsdCB0cmFuc2l0aW9uXG4gIGZvciAoc3RhdGUgaW4gc3RhdGVzKSB7XG4gICAgLy8gTk9URTogdGFibGUgbG9va3VwIGlzIGNhcHBlZCBhdCAweGEwIGluIHBhcnNlIHRvIGtlZXAgdGhlIHRhYmxlIHNtYWxsXG4gICAgZm9yIChsZXQgY29kZSA9IDA7IGNvZGUgPD0gTk9OX0FTQ0lJX1BSSU5UQUJMRTsgKytjb2RlKSB7XG4gICAgICB0YWJsZS5hZGQoY29kZSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FUlJPUiwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgICB9XG4gIH1cbiAgLy8gcHJpbnRhYmxlc1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBnbG9iYWwgYW55d2hlcmUgcnVsZXNcbiAgZm9yIChzdGF0ZSBpbiBzdGF0ZXMpIHtcbiAgICB0YWJsZS5hZGRNYW55KFsweDE4LCAweDFhLCAweDk5LCAweDlhXSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDgwLCAweDkwKSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDkwLCAweDk4KSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZCgweDljLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuR1JPVU5EKTsgLy8gU1QgYXMgdGVybWluYXRvclxuICAgIHRhYmxlLmFkZCgweDFiLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5FU0NBUEUpOyAgLy8gRVNDXG4gICAgdGFibGUuYWRkKDB4OWQsIHN0YXRlLCBQYXJzZXJBY3Rpb24uT1NDX1NUQVJULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTsgIC8vIE9TQ1xuICAgIHRhYmxlLmFkZE1hbnkoWzB4OTgsIDB4OWUsIDB4OWZdLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICAgIHRhYmxlLmFkZCgweDliLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpOyAgLy8gQ1NJXG4gICAgdGFibGUuYWRkKDB4OTAsIHN0YXRlLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7ICAvLyBEQ1NcbiAgfVxuICAvLyBydWxlcyBmb3IgZXhlY3V0YWJsZXMgYW5kIDdmXG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgLy8gb3NjXG4gIHRhYmxlLmFkZCgweDVkLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShbMHg5YywgMHgxYiwgMHgxOCwgMHgxYSwgMHgwN10sIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfRU5ELCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICAvLyBzb3MvcG0vYXBjIGRvZXMgbm90aGluZ1xuICB0YWJsZS5hZGRNYW55KFsweDU4LCAweDVlLCAweDVmXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4OWMsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgLy8gY3NpIGVudHJpZXNcbiAgdGFibGUuYWRkKDB4NWIsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2EpLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkKDB4M2IsIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2EpLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkKDB4M2IsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYSwgMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkNTSV9QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDQwKSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoMHgzYSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDQwKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgLy8gZXNjX2ludGVybWVkaWF0ZVxuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkVTQ0FQRV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg1MCksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NTEsIDB4NTgpLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4NTksIDB4NWEsIDB4NWNdLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDYwLCAweDdmKSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBkY3MgZW50cnlcbiAgdGFibGUuYWRkKDB4NTAsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHgzMCksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGQoMHgzYSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2EpLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkKDB4M2IsIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDgwKSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNhKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZCgweDNiLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYSwgMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg0MCksIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5EQ1NfSE9PSywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5EQ1NfSE9PSywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShyKDB4NDAsIDB4N2YpLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5EQ1NfSE9PSywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uRENTX1BVVCwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdIKTtcbiAgdGFibGUuYWRkTWFueShQUklOVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfUFVULCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KFsweDFiLCAweDljXSwgUGFyc2VyU3RhdGUuRENTX1BBU1NUSFJPVUdILCBQYXJzZXJBY3Rpb24uRENTX1VOSE9PSywgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgcmV0dXJuIHRhYmxlO1xufSkoKTtcblxuLyoqXG4gKiBEdW1teSBEQ1MgaGFuZGxlciBhcyBkZWZhdWx0IGZhbGxiYWNrLlxuICovXG5jbGFzcyBEY3NEdW1teSBpbXBsZW1lbnRzIElEY3NIYW5kbGVyIHtcbiAgaG9vayhjb2xsZWN0OiBzdHJpbmcsIHBhcmFtczogbnVtYmVyW10sIGZsYWc6IG51bWJlcik6IHZvaWQgeyB9XG4gIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHsgfVxuICB1bmhvb2soKTogdm9pZCB7IH1cbn1cblxuLyoqXG4gKiBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgQU5TSS9ERUMgY29tcGF0aWJsZSBwYXJzZXIgZGVzY3JpYmVkIGJ5XG4gKiBQYXVsIFdpbGxpYW1zIChodHRwczovL3Z0MTAwLm5ldC9lbXUvZGVjX2Fuc2lfcGFyc2VyKS5cbiAqIFRvIGltcGxlbWVudCBjdXN0b20gQU5TSSBjb21wbGlhbnQgZXNjYXBlIHNlcXVlbmNlcyBpdCBpcyBub3QgbmVlZGVkIHRvXG4gKiBhbHRlciB0aGlzIHBhcnNlciwgaW5zdGVhZCBjb25zaWRlciByZWdpc3RlcmluZyBhIGN1c3RvbSBoYW5kbGVyLlxuICogRm9yIG5vbiBBTlNJIGNvbXBsaWFudCBzZXF1ZW5jZXMgY2hhbmdlIHRoZSB0cmFuc2l0aW9uIHRhYmxlIHdpdGhcbiAqIHRoZSBvcHRpb25hbCBgdHJhbnNpdGlvbnNgIGNvbnRydWN0b3IgYXJndW1lbnQgYW5kXG4gKiByZWltcGxlbWVudCB0aGUgYHBhcnNlYCBtZXRob2QuXG4gKiBOT1RFOiBUaGUgcGFyYW1ldGVyIGVsZW1lbnQgbm90YXRpb24gaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQuXG4gKiBUT0RPOiBpbXBsZW1lbnQgZXJyb3IgcmVjb3ZlcnkgaG9vayB2aWEgZXJyb3IgaGFuZGxlciByZXR1cm4gdmFsdWVzXG4gKi9cbmV4cG9ydCBjbGFzcyBFc2NhcGVTZXF1ZW5jZVBhcnNlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJRXNjYXBlU2VxdWVuY2VQYXJzZXIge1xuICBwdWJsaWMgaW5pdGlhbFN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBjdXJyZW50U3RhdGU6IG51bWJlcjtcblxuICAvLyBidWZmZXJzIG92ZXIgc2V2ZXJhbCBwYXJzZSBjYWxsc1xuICBwcm90ZWN0ZWQgX29zYzogc3RyaW5nO1xuICBwcm90ZWN0ZWQgX3BhcmFtczogbnVtYmVyW107XG4gIHByb3RlY3RlZCBfY29sbGVjdDogc3RyaW5nO1xuXG4gIC8vIGhhbmRsZXIgbG9va3VwIGNvbnRhaW5lcnNcbiAgcHJvdGVjdGVkIF9wcmludEhhbmRsZXI6IChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpID0+IHZvaWQ7XG4gIHByb3RlY3RlZCBfZXhlY3V0ZUhhbmRsZXJzOiBhbnk7XG4gIHByb3RlY3RlZCBfY3NpSGFuZGxlcnM6IElIYW5kbGVyQ29sbGVjdGlvbjxDc2lIYW5kbGVyPjtcbiAgcHJvdGVjdGVkIF9lc2NIYW5kbGVyczogYW55O1xuICBwcm90ZWN0ZWQgX29zY0hhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248T3NjSGFuZGxlcj47XG4gIHByb3RlY3RlZCBfZGNzSGFuZGxlcnM6IGFueTtcbiAgcHJvdGVjdGVkIF9hY3RpdmVEY3NIYW5kbGVyOiBJRGNzSGFuZGxlciB8IG51bGw7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyOiAoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IElQYXJzaW5nU3RhdGU7XG5cbiAgLy8gZmFsbGJhY2sgaGFuZGxlcnNcbiAgcHJvdGVjdGVkIF9wcmludEhhbmRsZXJGYjogKGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcikgPT4gdm9pZDtcbiAgcHJvdGVjdGVkIF9leGVjdXRlSGFuZGxlckZiOiAoY29kZTogbnVtYmVyKSA9PiB2b2lkO1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJGYjogKGNvbGxlY3Q6IHN0cmluZywgcGFyYW1zOiBudW1iZXJbXSwgZmxhZzogbnVtYmVyKSA9PiB2b2lkO1xuICBwcm90ZWN0ZWQgX2VzY0hhbmRsZXJGYjogKGNvbGxlY3Q6IHN0cmluZywgZmxhZzogbnVtYmVyKSA9PiB2b2lkO1xuICBwcm90ZWN0ZWQgX29zY0hhbmRsZXJGYjogKGlkZW50aWZpZXI6IG51bWJlciwgZGF0YTogc3RyaW5nKSA9PiB2b2lkO1xuICBwcm90ZWN0ZWQgX2Rjc0hhbmRsZXJGYjogSURjc0hhbmRsZXI7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyRmI6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihyZWFkb25seSBUUkFOU0lUSU9OUzogVHJhbnNpdGlvblRhYmxlID0gVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IFBhcnNlclN0YXRlLkdST1VORDtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX29zYyA9ICcnO1xuICAgIHRoaXMuX3BhcmFtcyA9IFswXTtcbiAgICB0aGlzLl9jb2xsZWN0ID0gJyc7XG5cbiAgICAvLyBzZXQgZGVmYXVsdCBmYWxsYmFjayBoYW5kbGVycyBhbmQgaGFuZGxlciBsb29rdXAgY29udGFpbmVyc1xuICAgIHRoaXMuX3ByaW50SGFuZGxlckZiID0gKGRhdGEsIHN0YXJ0LCBlbmQpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlckZiID0gKGNvZGU6IG51bWJlcik6IHZvaWQgPT4geyB9O1xuICAgIHRoaXMuX2NzaUhhbmRsZXJGYiA9IChjb2xsZWN0OiBzdHJpbmcsIHBhcmFtczogbnVtYmVyW10sIGZsYWc6IG51bWJlcik6IHZvaWQgPT4geyB9O1xuICAgIHRoaXMuX2VzY0hhbmRsZXJGYiA9IChjb2xsZWN0OiBzdHJpbmcsIGZsYWc6IG51bWJlcik6IHZvaWQgPT4geyB9O1xuICAgIHRoaXMuX29zY0hhbmRsZXJGYiA9IChpZGVudGlmaWVyOiBudW1iZXIsIGRhdGE6IHN0cmluZyk6IHZvaWQgPT4geyB9O1xuICAgIHRoaXMuX2Rjc0hhbmRsZXJGYiA9IG5ldyBEY3NEdW1teSgpO1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlckZiID0gKHN0YXRlOiBJUGFyc2luZ1N0YXRlKTogSVBhcnNpbmdTdGF0ZSA9PiBzdGF0ZTtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSB0aGlzLl9wcmludEhhbmRsZXJGYjtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2NzaUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9lc2NIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fb3NjSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2Rjc0hhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9hY3RpdmVEY3NIYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSB0aGlzLl9lcnJvckhhbmRsZXJGYjtcblxuICAgIC8vIHN3YWxsb3cgN2JpdCBTVCAoRVNDK1xcKVxuICAgIHRoaXMuc2V0RXNjSGFuZGxlcignXFxcXCcsICgpID0+IHt9KTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX3ByaW50SGFuZGxlckZiID0gbnVsbDtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlckZiID0gbnVsbDtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSBudWxsO1xuICAgIHRoaXMuX2VzY0hhbmRsZXJGYiA9IG51bGw7XG4gICAgdGhpcy5fb3NjSGFuZGxlckZiID0gbnVsbDtcbiAgICB0aGlzLl9kY3NIYW5kbGVyRmIgPSBudWxsO1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlckZiID0gbnVsbDtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMuX2V4ZWN1dGVIYW5kbGVycyA9IG51bGw7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnMgPSBudWxsO1xuICAgIHRoaXMuX2NzaUhhbmRsZXJzID0gbnVsbDtcbiAgICB0aGlzLl9vc2NIYW5kbGVycyA9IG51bGw7XG4gICAgdGhpcy5fZGNzSGFuZGxlcnMgPSBudWxsO1xuICAgIHRoaXMuX2FjdGl2ZURjc0hhbmRsZXIgPSBudWxsO1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlciA9IG51bGw7XG4gIH1cblxuICBzZXRQcmludEhhbmRsZXIoY2FsbGJhY2s6IChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSBjYWxsYmFjaztcbiAgfVxuICBjbGVhclByaW50SGFuZGxlcigpOiB2b2lkIHtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSB0aGlzLl9wcmludEhhbmRsZXJGYjtcbiAgfVxuXG4gIHNldEV4ZWN1dGVIYW5kbGVyKGZsYWc6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXSA9IGNhbGxiYWNrO1xuICB9XG4gIGNsZWFyRXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldKSBkZWxldGUgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2ZsYWcuY2hhckNvZGVBdCgwKV07XG4gIH1cbiAgc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjayhjYWxsYmFjazogKGNvZGU6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2V4ZWN1dGVIYW5kbGVyRmIgPSBjYWxsYmFjaztcbiAgfVxuXG4gIGFkZENzaUhhbmRsZXIoZmxhZzogc3RyaW5nLCBjYWxsYmFjazogQ3NpSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBpbmRleCA9IGZsYWcuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAodGhpcy5fY3NpSGFuZGxlcnNbaW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NzaUhhbmRsZXJzW2luZGV4XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX2NzaUhhbmRsZXJzW2luZGV4XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgc2V0Q3NpSGFuZGxlcihmbGFnOiBzdHJpbmcsIGNhbGxiYWNrOiAocGFyYW1zOiBudW1iZXJbXSwgY29sbGVjdDogc3RyaW5nKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fY3NpSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXSA9IFtjYWxsYmFja107XG4gIH1cbiAgY2xlYXJDc2lIYW5kbGVyKGZsYWc6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jc2lIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldKSBkZWxldGUgdGhpcy5fY3NpSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXTtcbiAgfVxuICBzZXRDc2lIYW5kbGVyRmFsbGJhY2soY2FsbGJhY2s6IChjb2xsZWN0OiBzdHJpbmcsIHBhcmFtczogbnVtYmVyW10sIGZsYWc6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NzaUhhbmRsZXJGYiA9IGNhbGxiYWNrO1xuICB9XG5cbiAgc2V0RXNjSGFuZGxlcihjb2xsZWN0QW5kRmxhZzogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2VzY0hhbmRsZXJzW2NvbGxlY3RBbmRGbGFnXSA9IGNhbGxiYWNrO1xuICB9XG4gIGNsZWFyRXNjSGFuZGxlcihjb2xsZWN0QW5kRmxhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2VzY0hhbmRsZXJzW2NvbGxlY3RBbmRGbGFnXSkgZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW2NvbGxlY3RBbmRGbGFnXTtcbiAgfVxuICBzZXRFc2NIYW5kbGVyRmFsbGJhY2soY2FsbGJhY2s6IChjb2xsZWN0OiBzdHJpbmcsIGZsYWc6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2VzY0hhbmRsZXJGYiA9IGNhbGxiYWNrO1xuICB9XG5cbiAgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAodGhpcy5fb3NjSGFuZGxlcnNbaWRlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX29zY0hhbmRsZXJzW2lkZW50XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX29zY0hhbmRsZXJzW2lkZW50XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGNhbGxiYWNrKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgc2V0T3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX29zY0hhbmRsZXJzW2lkZW50XSA9IFtjYWxsYmFja107XG4gIH1cbiAgY2xlYXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fb3NjSGFuZGxlcnNbaWRlbnRdKSBkZWxldGUgdGhpcy5fb3NjSGFuZGxlcnNbaWRlbnRdO1xuICB9XG4gIHNldE9zY0hhbmRsZXJGYWxsYmFjayhjYWxsYmFjazogKGlkZW50aWZpZXI6IG51bWJlciwgZGF0YTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjSGFuZGxlckZiID0gY2FsbGJhY2s7XG4gIH1cblxuICBzZXREY3NIYW5kbGVyKGNvbGxlY3RBbmRGbGFnOiBzdHJpbmcsIGhhbmRsZXI6IElEY3NIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzSGFuZGxlcnNbY29sbGVjdEFuZEZsYWddID0gaGFuZGxlcjtcbiAgfVxuICBjbGVhckRjc0hhbmRsZXIoY29sbGVjdEFuZEZsYWc6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9kY3NIYW5kbGVyc1tjb2xsZWN0QW5kRmxhZ10pIGRlbGV0ZSB0aGlzLl9kY3NIYW5kbGVyc1tjb2xsZWN0QW5kRmxhZ107XG4gIH1cbiAgc2V0RGNzSGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IElEY3NIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzSGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHNldEVycm9ySGFuZGxlcihjYWxsYmFjazogKHN0YXRlOiBJUGFyc2luZ1N0YXRlKSA9PiBJUGFyc2luZ1N0YXRlKTogdm9pZCB7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gY2FsbGJhY2s7XG4gIH1cbiAgY2xlYXJFcnJvckhhbmRsZXIoKTogdm9pZCB7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gdGhpcy5fZXJyb3JIYW5kbGVyRmI7XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX29zYyA9ICcnO1xuICAgIHRoaXMuX3BhcmFtcyA9IFswXTtcbiAgICB0aGlzLl9jb2xsZWN0ID0gJyc7XG4gICAgdGhpcy5fYWN0aXZlRGNzSGFuZGxlciA9IG51bGw7XG4gIH1cblxuICBwYXJzZShkYXRhOiBVaW50MzJBcnJheSwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY29kZSA9IDA7XG4gICAgbGV0IHRyYW5zaXRpb24gPSAwO1xuICAgIGxldCBlcnJvciA9IGZhbHNlO1xuICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZTtcbiAgICBsZXQgcHJpbnQgPSAtMTtcbiAgICBsZXQgZGNzID0gLTE7XG4gICAgbGV0IG9zYyA9IHRoaXMuX29zYztcbiAgICBsZXQgY29sbGVjdCA9IHRoaXMuX2NvbGxlY3Q7XG4gICAgbGV0IHBhcmFtcyA9IHRoaXMuX3BhcmFtcztcbiAgICBjb25zdCB0YWJsZTogVWludDhBcnJheSB8IG51bWJlcltdID0gdGhpcy5UUkFOU0lUSU9OUy50YWJsZTtcbiAgICBsZXQgZGNzSGFuZGxlcjogSURjc0hhbmRsZXIgfCBudWxsID0gdGhpcy5fYWN0aXZlRGNzSGFuZGxlcjtcbiAgICBsZXQgY2FsbGJhY2s6IEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICAvLyBwcm9jZXNzIGlucHV0IHN0cmluZ1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvZGUgPSBkYXRhW2ldO1xuXG4gICAgICAvLyBzaG9ydGN1dCBmb3IgbW9zdCBjaGFycyAocHJpbnQgYWN0aW9uKVxuICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gUGFyc2VyU3RhdGUuR1JPVU5EICYmIGNvZGUgPiAweDFmICYmIGNvZGUgPCAweDgwKSB7XG4gICAgICAgIHByaW50ID0gKH5wcmludCkgPyBwcmludCA6IGk7XG4gICAgICAgIGRvIGkrKztcbiAgICAgICAgd2hpbGUgKGkgPCBsZW5ndGggJiYgZGF0YVtpXSA+IDB4MWYgJiYgZGF0YVtpXSA8IDB4ODApO1xuICAgICAgICBpLS07XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBzaG9ydGN1dCBmb3IgQ1NJIHBhcmFtc1xuICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gUGFyc2VyU3RhdGUuQ1NJX1BBUkFNICYmIChjb2RlID4gMHgyZiAmJiBjb2RlIDwgMHgzOSkpIHtcbiAgICAgICAgcGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXSA9IHBhcmFtc1twYXJhbXMubGVuZ3RoIC0gMV0gKiAxMCArIGNvZGUgLSA0ODtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vcm1hbCB0cmFuc2l0aW9uICYgYWN0aW9uIGxvb2t1cFxuICAgICAgdHJhbnNpdGlvbiA9IHRhYmxlW2N1cnJlbnRTdGF0ZSA8PCA4IHwgKGNvZGUgPCAweGEwID8gY29kZSA6IE5PTl9BU0NJSV9QUklOVEFCTEUpXTtcbiAgICAgIHN3aXRjaCAodHJhbnNpdGlvbiA+PiA0KSB7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLlBSSU5UOlxuICAgICAgICAgIHByaW50ID0gKH5wcmludCkgPyBwcmludCA6IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkVYRUNVVEU6XG4gICAgICAgICAgaWYgKH5wcmludCkge1xuICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIHByaW50LCBpKTtcbiAgICAgICAgICAgIHByaW50ID0gLTE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhbGxiYWNrID0gdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2NvZGVdO1xuICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgICAgICBlbHNlIHRoaXMuX2V4ZWN1dGVIYW5kbGVyRmIoY29kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLklHTk9SRTpcbiAgICAgICAgICAvLyBoYW5kbGUgbGVmdG92ZXIgcHJpbnQgb3IgZGNzIGNoYXJzXG4gICAgICAgICAgaWYgKH5wcmludCkge1xuICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIHByaW50LCBpKTtcbiAgICAgICAgICAgIHByaW50ID0gLTE7XG4gICAgICAgICAgfSBlbHNlIGlmICh+ZGNzKSB7XG4gICAgICAgICAgICBkY3NIYW5kbGVyLnB1dChkYXRhLCBkY3MsIGkpO1xuICAgICAgICAgICAgZGNzID0gLTE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5FUlJPUjpcbiAgICAgICAgICAvLyBjaGFycyBoaWdoZXIgdGhhbiAweDlmIGFyZSBoYW5kbGVkIGJ5IHRoaXMgYWN0aW9uXG4gICAgICAgICAgLy8gdG8ga2VlcCB0aGUgdHJhbnNpdGlvbiB0YWJsZSBzbWFsbFxuICAgICAgICAgIGlmIChjb2RlID4gMHg5Zikge1xuICAgICAgICAgICAgc3dpdGNoIChjdXJyZW50U3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBQYXJzZXJTdGF0ZS5HUk9VTkQ6XG4gICAgICAgICAgICAgICAgcHJpbnQgPSAofnByaW50KSA/IHByaW50IDogaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFOlxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gfD0gUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFOlxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24gfD0gUGFyc2VyU3RhdGUuRENTX0lHTk9SRTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0g6XG4gICAgICAgICAgICAgICAgZGNzID0gKH5kY3MpID8gZGNzIDogaTtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gaWYgd2UgZW5kIHVwIGhlcmUgYSByZWFsIGVycm9yIGhhcHBlbmVkXG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBpbmplY3Q6IElQYXJzaW5nU3RhdGUgPSB0aGlzLl9lcnJvckhhbmRsZXIoXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogaSxcbiAgICAgICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSxcbiAgICAgICAgICAgICAgICBwcmludCxcbiAgICAgICAgICAgICAgICBkY3MsXG4gICAgICAgICAgICAgICAgb3NjLFxuICAgICAgICAgICAgICAgIGNvbGxlY3QsXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFib3J0OiBmYWxzZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpbmplY3QuYWJvcnQpIHJldHVybjtcbiAgICAgICAgICAvLyBUT0RPOiBpbmplY3QgcmV0dXJuIHZhbHVlc1xuICAgICAgICAgICAgZXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSDpcbiAgICAgICAgICAvLyBUcmlnZ2VyIENTSSBIYW5kbGVyXG4gICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9jc2lIYW5kbGVyc1tjb2RlXTtcbiAgICAgICAgICBsZXQgaiA9IGhhbmRsZXJzID8gaGFuZGxlcnMubGVuZ3RoIC0gMSA6IC0xO1xuICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgLy8gdW5kZWZpbmVkIG9yIHRydWUgbWVhbnMgc3VjY2VzcyBhbmQgdG8gc3RvcCBidWJibGluZ1xuICAgICAgICAgICAgaWYgKGhhbmRsZXJzW2pdKHBhcmFtcywgY29sbGVjdCkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2NzaUhhbmRsZXJGYihjb2xsZWN0LCBwYXJhbXMsIGNvZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uUEFSQU06XG4gICAgICAgICAgaWYgKGNvZGUgPT09IDB4M2IpIHBhcmFtcy5wdXNoKDApO1xuICAgICAgICAgIGVsc2UgcGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXSA9IHBhcmFtc1twYXJhbXMubGVuZ3RoIC0gMV0gKiAxMCArIGNvZGUgLSA0ODtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ09MTEVDVDpcbiAgICAgICAgICBjb2xsZWN0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSDpcbiAgICAgICAgICBjYWxsYmFjayA9IHRoaXMuX2VzY0hhbmRsZXJzW2NvbGxlY3QgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpXTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGNvbGxlY3QsIGNvZGUpO1xuICAgICAgICAgIGVsc2UgdGhpcy5fZXNjSGFuZGxlckZiKGNvbGxlY3QsIGNvZGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5DTEVBUjpcbiAgICAgICAgICBpZiAofnByaW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgcHJpbnQsIGkpO1xuICAgICAgICAgICAgcHJpbnQgPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb3NjID0gJyc7XG4gICAgICAgICAgcGFyYW1zID0gWzBdO1xuICAgICAgICAgIGNvbGxlY3QgPSAnJztcbiAgICAgICAgICBkY3MgPSAtMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRENTX0hPT0s6XG4gICAgICAgICAgZGNzSGFuZGxlciA9IHRoaXMuX2Rjc0hhbmRsZXJzW2NvbGxlY3QgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpXTtcbiAgICAgICAgICBpZiAoIWRjc0hhbmRsZXIpIGRjc0hhbmRsZXIgPSB0aGlzLl9kY3NIYW5kbGVyRmI7XG4gICAgICAgICAgZGNzSGFuZGxlci5ob29rKGNvbGxlY3QsIHBhcmFtcywgY29kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkRDU19QVVQ6XG4gICAgICAgICAgZGNzID0gKH5kY3MpID8gZGNzIDogaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRENTX1VOSE9PSzpcbiAgICAgICAgICBpZiAoZGNzSGFuZGxlcikge1xuICAgICAgICAgICAgaWYgKH5kY3MpIGRjc0hhbmRsZXIucHV0KGRhdGEsIGRjcywgaSk7XG4gICAgICAgICAgICBkY3NIYW5kbGVyLnVuaG9vaygpO1xuICAgICAgICAgICAgZGNzSGFuZGxlciA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICBvc2MgPSAnJztcbiAgICAgICAgICBwYXJhbXMgPSBbMF07XG4gICAgICAgICAgY29sbGVjdCA9ICcnO1xuICAgICAgICAgIGRjcyA9IC0xO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQ6XG4gICAgICAgICAgaWYgKH5wcmludCkge1xuICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIHByaW50LCBpKTtcbiAgICAgICAgICAgIHByaW50ID0gLTE7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9zYyA9ICcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5PU0NfUFVUOlxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChqID49IGxlbmd0aFxuICAgICAgICAgICAgICAgIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwXG4gICAgICAgICAgICAgICAgfHwgKGNvZGUgPiAweDdmICYmIGNvZGUgPD0gMHg5ZikpIHtcbiAgICAgICAgICAgICAgb3NjICs9IHV0ZjMyVG9TdHJpbmcoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5PU0NfRU5EOlxuICAgICAgICAgIGlmIChvc2MgJiYgY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBPU0Mgc3VicGFyc2luZyBpcyBub3QgcGFydCBvZiB0aGUgb3JpZ2luYWwgcGFyc2VyXG4gICAgICAgICAgICAvLyB3ZSBkbyBiYXNpYyBpZGVudGlmaWVyIHBhcnNpbmcgaGVyZSB0byBvZmZlciBhIGp1bXAgdGFibGUgZm9yIE9TQyBhcyB3ZWxsXG4gICAgICAgICAgICBjb25zdCBpZHggPSBvc2MuaW5kZXhPZignOycpO1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgdGhpcy5fb3NjSGFuZGxlckZiKC0xLCBvc2MpOyAgLy8gdGhpcyBpcyBhbiBlcnJvciAobWFsZm9ybWVkIE9TQylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIE5vdGU6IE5hTiBpcyBub3QgaGFuZGxlZCBoZXJlXG4gICAgICAgICAgICAgIC8vIGVpdGhlciBjYXRjaCBpdCB3aXRoIHRoZSBmYWxsYmFjayBoYW5kbGVyXG4gICAgICAgICAgICAgIC8vIG9yIHdpdGggYW4gZXhwbGljaXQgTmFOIE9TQyBoYW5kbGVyXG4gICAgICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBwYXJzZUludChvc2Muc3Vic3RyaW5nKDAsIGlkeCkpO1xuICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gb3NjLnN1YnN0cmluZyhpZHggKyAxKTtcbiAgICAgICAgICAgICAgLy8gVHJpZ2dlciBPU0MgSGFuZGxlclxuICAgICAgICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX29zY0hhbmRsZXJzW2lkZW50aWZpZXJdO1xuICAgICAgICAgICAgICBsZXQgaiA9IGhhbmRsZXJzID8gaGFuZGxlcnMubGVuZ3RoIC0gMSA6IC0xO1xuICAgICAgICAgICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgICAgICAvLyB1bmRlZmluZWQgb3IgdHJ1ZSBtZWFucyBzdWNjZXNzIGFuZCB0byBzdG9wIGJ1YmJsaW5nXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXJzW2pdKGNvbnRlbnQpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChqIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29zY0hhbmRsZXJGYihpZGVudGlmaWVyLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgb3NjID0gJyc7XG4gICAgICAgICAgcGFyYW1zID0gWzBdO1xuICAgICAgICAgIGNvbGxlY3QgPSAnJztcbiAgICAgICAgICBkY3MgPSAtMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRTdGF0ZSA9IHRyYW5zaXRpb24gJiAxNTtcbiAgICB9XG5cbiAgICAvLyBwdXNoIGxlZnRvdmVyIHB1c2hhYmxlIGJ1ZmZlcnMgdG8gdGVybWluYWxcbiAgICBpZiAoY3VycmVudFN0YXRlID09PSBQYXJzZXJTdGF0ZS5HUk9VTkQgJiYgfnByaW50KSB7XG4gICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgcHJpbnQsIGxlbmd0aCk7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50U3RhdGUgPT09IFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCAmJiB+ZGNzICYmIGRjc0hhbmRsZXIpIHtcbiAgICAgIGRjc0hhbmRsZXIucHV0KGRhdGEsIGRjcywgbGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvLyBzYXZlIG5vbiBwdXNoYWJsZSBidWZmZXJzXG4gICAgdGhpcy5fb3NjID0gb3NjO1xuICAgIHRoaXMuX2NvbGxlY3QgPSBjb2xsZWN0O1xuICAgIHRoaXMuX3BhcmFtcyA9IHBhcmFtcztcblxuICAgIC8vIHNhdmUgYWN0aXZlIGRjcyBoYW5kbGVyIHJlZmVyZW5jZVxuICAgIHRoaXMuX2FjdGl2ZURjc0hhbmRsZXIgPSBkY3NIYW5kbGVyO1xuXG4gICAgLy8gc2F2ZSBzdGF0ZVxuICAgIHRoaXMuY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElJbnB1dEhhbmRsZXIsIElEY3NIYW5kbGVyLCBJRXNjYXBlU2VxdWVuY2VQYXJzZXIsIElJbnB1dEhhbmRsaW5nVGVybWluYWwgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IEMwLCBDMSB9IGZyb20gJy4vY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcbmltcG9ydCB7IENIQVJTRVRTLCBERUZBVUxUX0NIQVJTRVQgfSBmcm9tICcuL2NvcmUvZGF0YS9DaGFyc2V0cyc7XG5pbXBvcnQgeyBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFLCBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJy4vQnVmZmVyJztcbmltcG9ydCB7IHdjd2lkdGggfSBmcm9tICcuL0NoYXJXaWR0aCc7XG5pbXBvcnQgeyBFc2NhcGVTZXF1ZW5jZVBhcnNlciB9IGZyb20gJy4vRXNjYXBlU2VxdWVuY2VQYXJzZXInO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi9jb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gJy4vY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBTdHJpbmdUb1V0ZjMyLCBzdHJpbmdGcm9tQ29kZVBvaW50LCB1dGYzMlRvU3RyaW5nIH0gZnJvbSAnLi9jb3JlL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IENlbGxEYXRhLCBBdHRyaWJ1dGVzLCBGZ0ZsYWdzLCBCZ0ZsYWdzLCBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnLi9CdWZmZXJMaW5lJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlcjIsIElFdmVudCB9IGZyb20gJy4vY29tbW9uL0V2ZW50RW1pdHRlcjInO1xuXG4vKipcbiAqIE1hcCBjb2xsZWN0IHRvIGdsZXZlbC4gVXNlZCBpbiBgc2VsZWN0Q2hhcnNldGAuXG4gKi9cbmNvbnN0IEdMRVZFTDoge1trZXk6IHN0cmluZ106IG51bWJlcn0gPSB7JygnOiAwLCAnKSc6IDEsICcqJzogMiwgJysnOiAzLCAnLSc6IDEsICcuJzogMn07XG5cblxuLyoqXG4gKiBEQ1Mgc3VicGFyc2VyIGltcGxlbWVudGF0aW9uc1xuICovXG5cbi8qKlxuICogRENTICQgcSBQdCBTVFxuICogICBERUNSUVNTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1JRU1MuaHRtbClcbiAqICAgUmVxdWVzdCBTdGF0dXMgU3RyaW5nIChERUNSUVNTKSwgVlQ0MjAgYW5kIHVwLlxuICogICBSZXNwb25zZTogREVDUlBTUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNSUFNTLmh0bWwpXG4gKi9cbmNsYXNzIERFQ1JRU1MgaW1wbGVtZW50cyBJRGNzSGFuZGxlciB7XG4gIHByaXZhdGUgX2RhdGE6IFVpbnQzMkFycmF5ID0gbmV3IFVpbnQzMkFycmF5KDApO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3Rlcm1pbmFsOiBhbnkpIHsgfVxuXG4gIGhvb2soY29sbGVjdDogc3RyaW5nLCBwYXJhbXM6IG51bWJlcltdLCBmbGFnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICB9XG5cbiAgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RhdGEgPSBjb25jYXQodGhpcy5fZGF0YSwgZGF0YS5zdWJhcnJheShzdGFydCwgZW5kKSk7XG4gIH1cblxuICB1bmhvb2soKTogdm9pZCB7XG4gICAgY29uc3QgZGF0YSA9IHV0ZjMyVG9TdHJpbmcodGhpcy5fZGF0YSk7XG4gICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSgwKTtcbiAgICBzd2l0Y2ggKGRhdGEpIHtcbiAgICAgIC8vIHZhbGlkOiBEQ1MgMSAkIHIgUHQgU1QgKHh0ZXJtKVxuICAgICAgY2FzZSAnXCJxJzogLy8gREVDU0NBXG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hbC5oYW5kbGVyKGAke0MwLkVTQ31QMSRyMFwicSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIGNhc2UgJ1wicCc6IC8vIERFQ1NDTFxuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYWwuaGFuZGxlcihgJHtDMC5FU0N9UDEkcjYxXCJwJHtDMC5FU0N9XFxcXGApO1xuICAgICAgY2FzZSAncic6IC8vIERFQ1NUQk1cbiAgICAgICAgY29uc3QgcHQgPSAnJyArICh0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2Nyb2xsVG9wICsgMSkgK1xuICAgICAgICAgICAgICAgICc7JyArICh0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2Nyb2xsQm90dG9tICsgMSkgKyAncic7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hbC5oYW5kbGVyKGAke0MwLkVTQ31QMSRyJHtwdH0ke0MwLkVTQ31cXFxcYCk7XG4gICAgICBjYXNlICdtJzogLy8gU0dSXG4gICAgICAgIC8vIFRPRE86IHJlcG9ydCByZWFsIHNldHRpbmdzIGluc3RlYWQgb2YgMG1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmFsLmhhbmRsZXIoYCR7QzAuRVNDfVAxJHIwbSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIGNhc2UgJyBxJzogLy8gREVDU0NVU1JcbiAgICAgICAgY29uc3QgU1RZTEVTOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfSA9IHsnYmxvY2snOiAyLCAndW5kZXJsaW5lJzogNCwgJ2Jhcic6IDZ9O1xuICAgICAgICBsZXQgc3R5bGUgPSBTVFlMRVNbdGhpcy5fdGVybWluYWwuZ2V0T3B0aW9uKCdjdXJzb3JTdHlsZScpXTtcbiAgICAgICAgc3R5bGUgLT0gdGhpcy5fdGVybWluYWwuZ2V0T3B0aW9uKCdjdXJzb3JCbGluaycpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYWwuaGFuZGxlcihgJHtDMC5FU0N9UDEkciR7c3R5bGV9IHEke0MwLkVTQ31cXFxcYCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICAvLyBpbnZhbGlkOiBEQ1MgMCAkIHIgUHQgU1QgKHh0ZXJtKVxuICAgICAgICB0aGlzLl90ZXJtaW5hbC5lcnJvcignVW5rbm93biBEQ1MgJHEgJXMnLCBkYXRhKTtcbiAgICAgICAgdGhpcy5fdGVybWluYWwuaGFuZGxlcihgJHtDMC5FU0N9UDAkciR7QzAuRVNDfVxcXFxgKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBEQ1MgUHM7IFBzfCBQdCBTVFxuICogICBERUNVREsgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDVURLLmh0bWwpXG4gKiAgIG5vdCBzdXBwb3J0ZWRcbiAqL1xuXG4vKipcbiAqIERDUyArIHEgUHQgU1QgKHh0ZXJtKVxuICogICBSZXF1ZXN0IFRlcm1pbmZvIFN0cmluZ1xuICogICBub3QgaW1wbGVtZW50ZWRcbiAqL1xuXG4vKipcbiAqIERDUyArIHAgUHQgU1QgKHh0ZXJtKVxuICogICBTZXQgVGVybWluZm8gRGF0YVxuICogICBub3Qgc3VwcG9ydGVkXG4gKi9cblxuXG5cbi8qKlxuICogVGhlIHRlcm1pbmFsJ3Mgc3RhbmRhcmQgaW1wbGVtZW50YXRpb24gb2YgSUlucHV0SGFuZGxlciwgdGhpcyBoYW5kbGVzIGFsbFxuICogaW5wdXQgZnJvbSB0aGUgUGFyc2VyLlxuICpcbiAqIFJlZmVyIHRvIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbCB0byB1bmRlcnN0YW5kXG4gKiBlYWNoIGZ1bmN0aW9uJ3MgaGVhZGVyIGNvbW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEhhbmRsZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUlucHV0SGFuZGxlciB7XG4gIHByaXZhdGUgX3BhcnNlQnVmZmVyOiBVaW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheSg0MDk2KTtcbiAgcHJpdmF0ZSBfc3RyaW5nRGVjb2RlcjogU3RyaW5nVG9VdGYzMiA9IG5ldyBTdHJpbmdUb1V0ZjMyKCk7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIHByaXZhdGUgX29uQ3Vyc29yTW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25DdXJzb3JNb3ZlKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25EYXRhID0gbmV3IEV2ZW50RW1pdHRlcjI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkRhdGEuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25MaW5lRmVlZCA9IG5ldyBFdmVudEVtaXR0ZXIyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25MaW5lRmVlZC5ldmVudDsgfVxuICBwcml2YXRlIF9vblNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXIyPG51bWJlcj4oKTtcbiAgcHVibGljIGdldCBvblNjcm9sbCgpOiBJRXZlbnQ8bnVtYmVyPiB7IHJldHVybiB0aGlzLl9vblNjcm9sbC5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgcHJvdGVjdGVkIF90ZXJtaW5hbDogSUlucHV0SGFuZGxpbmdUZXJtaW5hbCxcbiAgICAgIHByaXZhdGUgX3BhcnNlcjogSUVzY2FwZVNlcXVlbmNlUGFyc2VyID0gbmV3IEVzY2FwZVNlcXVlbmNlUGFyc2VyKCkpXG4gIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9wYXJzZXIpO1xuXG4gICAgLyoqXG4gICAgICogY3VzdG9tIGZhbGxiYWNrIGhhbmRsZXJzXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXJGYWxsYmFjaygoY29sbGVjdDogc3RyaW5nLCBwYXJhbXM6IG51bWJlcltdLCBmbGFnOiBudW1iZXIpID0+IHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVycm9yKCdVbmtub3duIENTSSBjb2RlOiAnLCB7IGNvbGxlY3QsIHBhcmFtcywgZmxhZzogU3RyaW5nLmZyb21DaGFyQ29kZShmbGFnKSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlckZhbGxiYWNrKChjb2xsZWN0OiBzdHJpbmcsIGZsYWc6IG51bWJlcikgPT4ge1xuICAgICAgdGhpcy5fdGVybWluYWwuZXJyb3IoJ1Vua25vd24gRVNDIGNvZGU6ICcsIHsgY29sbGVjdCwgZmxhZzogU3RyaW5nLmZyb21DaGFyQ29kZShmbGFnKSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjaygoY29kZTogbnVtYmVyKSA9PiB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5lcnJvcignVW5rbm93biBFWEVDVVRFIGNvZGU6ICcsIHsgY29kZSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0T3NjSGFuZGxlckZhbGxiYWNrKChpZGVudGlmaWVyOiBudW1iZXIsIGRhdGE6IHN0cmluZykgPT4ge1xuICAgICAgdGhpcy5fdGVybWluYWwuZXJyb3IoJ1Vua25vd24gT1NDIGNvZGU6ICcsIHsgaWRlbnRpZmllciwgZGF0YSB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIHByaW50IGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0UHJpbnRIYW5kbGVyKChkYXRhLCBzdGFydCwgZW5kKTogdm9pZCA9PiB0aGlzLnByaW50KGRhdGEsIHN0YXJ0LCBlbmQpKTtcblxuICAgIC8qKlxuICAgICAqIENTSSBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ0AnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLmluc2VydENoYXJzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdBJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5jdXJzb3JVcChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignQicsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuY3Vyc29yRG93bihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignQycsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuY3Vyc29yRm9yd2FyZChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignRCcsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuY3Vyc29yQmFja3dhcmQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ0UnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLmN1cnNvck5leHRMaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdGJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5jdXJzb3JQcmVjZWRpbmdMaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdHJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5jdXJzb3JDaGFyQWJzb2x1dGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ0gnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLmN1cnNvclBvc2l0aW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdJJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5jdXJzb3JGb3J3YXJkVGFiKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdKJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5lcmFzZUluRGlzcGxheShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignSycsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuZXJhc2VJbkxpbmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ0wnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLmluc2VydExpbmVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdNJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5kZWxldGVMaW5lcyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignUCcsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuZGVsZXRlQ2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ1MnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLnNjcm9sbFVwKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdUJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5zY3JvbGxEb3duKHBhcmFtcywgY29sbGVjdCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdYJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5lcmFzZUNoYXJzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdaJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5jdXJzb3JCYWNrd2FyZFRhYihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignYCcsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuY2hhclBvc0Fic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdhJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5oUG9zaXRpb25SZWxhdGl2ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignYicsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdjJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5zZW5kRGV2aWNlQXR0cmlidXRlcyhwYXJhbXMsIGNvbGxlY3QpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignZCcsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMubGluZVBvc0Fic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdlJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy52UG9zaXRpb25SZWxhdGl2ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignZicsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuaFZQb3NpdGlvbihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignZycsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMudGFiQ2xlYXIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ2gnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLnNldE1vZGUocGFyYW1zLCBjb2xsZWN0KSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ2wnLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLnJlc2V0TW9kZShwYXJhbXMsIGNvbGxlY3QpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcignbScsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuY2hhckF0dHJpYnV0ZXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoJ24nLCAocGFyYW1zLCBjb2xsZWN0KSA9PiB0aGlzLmRldmljZVN0YXR1cyhwYXJhbXMsIGNvbGxlY3QpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcigncCcsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuc29mdFJlc2V0KHBhcmFtcywgY29sbGVjdCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdxJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5zZXRDdXJzb3JTdHlsZShwYXJhbXMsIGNvbGxlY3QpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcigncicsIChwYXJhbXMsIGNvbGxlY3QpID0+IHRoaXMuc2V0U2Nyb2xsUmVnaW9uKHBhcmFtcywgY29sbGVjdCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCdzJywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5zYXZlQ3Vyc29yKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKCd1JywgKHBhcmFtcywgY29sbGVjdCkgPT4gdGhpcy5yZXN0b3JlQ3Vyc29yKHBhcmFtcykpO1xuXG4gICAgLyoqXG4gICAgICogZXhlY3V0ZSBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkJFTCwgKCkgPT4gdGhpcy5iZWxsKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5MRiwgKCkgPT4gdGhpcy5saW5lRmVlZCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuVlQsICgpID0+IHRoaXMubGluZUZlZWQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkZGLCAoKSA9PiB0aGlzLmxpbmVGZWVkKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5DUiwgKCkgPT4gdGhpcy5jYXJyaWFnZVJldHVybigpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuQlMsICgpID0+IHRoaXMuYmFja3NwYWNlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5IVCwgKCkgPT4gdGhpcy50YWIoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLlNPLCAoKSA9PiB0aGlzLnNoaWZ0T3V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5TSSwgKCkgPT4gdGhpcy5zaGlmdEluKCkpO1xuICAgIC8vIEZJWE1FOiAgIFdoYXQgZG8gdG8gd2l0aCBtaXNzaW5nPyBPbGQgY29kZSBqdXN0IGFkZGVkIHRob3NlIHRvIHByaW50LlxuXG4gICAgLy8gc29tZSBDMSBjb250cm9sIGNvZGVzIC0gRklYTUU6IHNob3VsZCB0aG9zZSBiZSBlbmFibGVkIGJ5IGRlZmF1bHQ/XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMxLklORCwgKCkgPT4gdGhpcy5pbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzEuTkVMLCAoKSA9PiB0aGlzLm5leHRMaW5lKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMS5IVFMsICgpID0+IHRoaXMudGFiU2V0KCkpO1xuXG4gICAgLyoqXG4gICAgICogT1NDIGhhbmRsZXJcbiAgICAgKi9cbiAgICAvLyAgIDAgLSBpY29uIG5hbWUgKyB0aXRsZVxuICAgIHRoaXMuX3BhcnNlci5zZXRPc2NIYW5kbGVyKDAsIChkYXRhKSA9PiB0aGlzLnNldFRpdGxlKGRhdGEpKTtcbiAgICAvLyAgIDEgLSBpY29uIG5hbWVcbiAgICAvLyAgIDIgLSB0aXRsZVxuICAgIHRoaXMuX3BhcnNlci5zZXRPc2NIYW5kbGVyKDIsIChkYXRhKSA9PiB0aGlzLnNldFRpdGxlKGRhdGEpKTtcbiAgICAvLyAgIDMgLSBzZXQgcHJvcGVydHkgWCBpbiB0aGUgZm9ybSBcInByb3A9dmFsdWVcIlxuICAgIC8vICAgNCAtIENoYW5nZSBDb2xvciBOdW1iZXJcbiAgICAvLyAgIDUgLSBDaGFuZ2UgU3BlY2lhbCBDb2xvciBOdW1iZXJcbiAgICAvLyAgIDYgLSBFbmFibGUvZGlzYWJsZSBTcGVjaWFsIENvbG9yIE51bWJlciBjXG4gICAgLy8gICA3IC0gY3VycmVudCBkaXJlY3Rvcnk/IChub3QgaW4geHRlcm0gc3BlYywgc2VlIGh0dHBzOi8vZ2l0bGFiLmNvbS9nbmFjaG1hbi9pdGVybTIvaXNzdWVzLzM5MzkpXG4gICAgLy8gIDEwIC0gQ2hhbmdlIFZUMTAwIHRleHQgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTEgLSBDaGFuZ2UgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxMiAtIENoYW5nZSB0ZXh0IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTMgLSBDaGFuZ2UgbW91c2UgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTQgLSBDaGFuZ2UgbW91c2UgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTUgLSBDaGFuZ2UgVGVrdHJvbml4IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDE2IC0gQ2hhbmdlIFRla3Ryb25peCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNyAtIENoYW5nZSBoaWdobGlnaHQgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTggLSBDaGFuZ2UgVGVrdHJvbml4IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTkgLSBDaGFuZ2UgaGlnaGxpZ2h0IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDQ2IC0gQ2hhbmdlIExvZyBGaWxlIHRvIFB0LlxuICAgIC8vICA1MCAtIFNldCBGb250IHRvIFB0LlxuICAgIC8vICA1MSAtIHJlc2VydmVkIGZvciBFbWFjcyBzaGVsbC5cbiAgICAvLyAgNTIgLSBNYW5pcHVsYXRlIFNlbGVjdGlvbiBEYXRhLlxuICAgIC8vIDEwNCA7IGMgLSBSZXNldCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDUgOyBjIC0gUmVzZXQgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDYgOyBjOyBmIC0gRW5hYmxlL2Rpc2FibGUgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMTAgLSBSZXNldCBWVDEwMCB0ZXh0IGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTExIC0gUmVzZXQgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExMiAtIFJlc2V0IHRleHQgY3Vyc29yIGNvbG9yLlxuICAgIC8vIDExMyAtIFJlc2V0IG1vdXNlIGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTE0IC0gUmVzZXQgbW91c2UgYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTUgLSBSZXNldCBUZWt0cm9uaXggZm9yZWdyb3VuZCBjb2xvci5cbiAgICAvLyAxMTYgLSBSZXNldCBUZWt0cm9uaXggYmFja2dyb3VuZCBjb2xvci5cbiAgICAvLyAxMTcgLSBSZXNldCBoaWdobGlnaHQgY29sb3IuXG4gICAgLy8gMTE4IC0gUmVzZXQgVGVrdHJvbml4IGN1cnNvciBjb2xvci5cbiAgICAvLyAxMTkgLSBSZXNldCBoaWdobGlnaHQgZm9yZWdyb3VuZCBjb2xvci5cblxuICAgIC8qKlxuICAgICAqIEVTQyBoYW5kbGVyc1xuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKCc3JywgKCkgPT4gdGhpcy5zYXZlQ3Vyc29yKFtdKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJzgnLCAoKSA9PiB0aGlzLnJlc3RvcmVDdXJzb3IoW10pKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcignRCcsICgpID0+IHRoaXMuaW5kZXgoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ0UnLCAoKSA9PiB0aGlzLm5leHRMaW5lKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKCdIJywgKCkgPT4gdGhpcy50YWJTZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ00nLCAoKSA9PiB0aGlzLnJldmVyc2VJbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcignPScsICgpID0+IHRoaXMua2V5cGFkQXBwbGljYXRpb25Nb2RlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKCc+JywgKCkgPT4gdGhpcy5rZXlwYWROdW1lcmljTW9kZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcignYycsICgpID0+IHRoaXMucmVzZXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ24nLCAoKSA9PiB0aGlzLnNldGdMZXZlbCgyKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ28nLCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ3wnLCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ30nLCAoKSA9PiB0aGlzLnNldGdMZXZlbCgyKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJ34nLCAoKSA9PiB0aGlzLnNldGdMZXZlbCgxKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJyVAJywgKCkgPT4gdGhpcy5zZWxlY3REZWZhdWx0Q2hhcnNldCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcignJUcnLCAoKSA9PiB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpO1xuICAgIGZvciAoY29uc3QgZmxhZyBpbiBDSEFSU0VUUykge1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJygnICsgZmxhZywgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcoJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKCcpJyArIGZsYWcsICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcignKicgKyBmbGFnLCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJyonICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJysnICsgZmxhZywgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcrJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKCctJyArIGZsYWcsICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLScgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcignLicgKyBmbGFnLCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy4nICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoJy8nICsgZmxhZywgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcvJyArIGZsYWcpKTsgLy8gVE9ETzogc3VwcG9ydGVkP1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGVycm9yIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChzdGF0ZSkgPT4ge1xuICAgICAgdGhpcy5fdGVybWluYWwuZXJyb3IoJ1BhcnNpbmcgZXJyb3I6ICcsIHN0YXRlKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERDUyBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldERjc0hhbmRsZXIoJyRxJywgbmV3IERFQ1JRU1ModGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl90ZXJtaW5hbCA9IG51bGw7XG4gIH1cblxuICBwdWJsaWMgcGFyc2UoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gRW5zdXJlIHRoZSB0ZXJtaW5hbCBpcyBub3QgZGlzcG9zZWRcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcjtcbiAgICBjb25zdCBjdXJzb3JTdGFydFggPSBidWZmZXIueDtcbiAgICBjb25zdCBjdXJzb3JTdGFydFkgPSBidWZmZXIueTtcblxuICAgIC8vIFRPRE86IENvbnNvbGlkYXRlIGRlYnVnL2xvZ2dpbmcgIzE1NjBcbiAgICBpZiAoKDxhbnk+dGhpcy5fdGVybWluYWwpLmRlYnVnKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5sb2coJ2RhdGE6ICcgKyBkYXRhKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoIDwgZGF0YS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3BhcnNlQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICB9XG4gICAgdGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLCB0aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShkYXRhLCB0aGlzLl9wYXJzZUJ1ZmZlcikpO1xuXG4gICAgYnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueCAhPT0gY3Vyc29yU3RhcnRYIHx8IGJ1ZmZlci55ICE9PSBjdXJzb3JTdGFydFkpIHtcbiAgICAgIHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHByaW50KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb2RlOiBudW1iZXI7XG4gICAgbGV0IGNoV2lkdGg6IG51bWJlcjtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXI7XG4gICAgY29uc3QgY2hhcnNldCA9IHRoaXMuX3Rlcm1pbmFsLmNoYXJzZXQ7XG4gICAgY29uc3Qgc2NyZWVuUmVhZGVyTW9kZSA9IHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZTtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5fdGVybWluYWwuY29scztcbiAgICBjb25zdCB3cmFwYXJvdW5kTW9kZSA9IHRoaXMuX3Rlcm1pbmFsLndyYXBhcm91bmRNb2RlO1xuICAgIGNvbnN0IGluc2VydE1vZGUgPSB0aGlzLl90ZXJtaW5hbC5pbnNlcnRNb2RlO1xuICAgIGNvbnN0IGN1ckF0dHIgPSB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YTtcbiAgICBsZXQgYnVmZmVyUm93ID0gYnVmZmVyLmxpbmVzLmdldChidWZmZXIueSArIGJ1ZmZlci55YmFzZSk7XG5cbiAgICB0aGlzLl90ZXJtaW5hbC51cGRhdGVSYW5nZShidWZmZXIueSk7XG4gICAgZm9yIChsZXQgcG9zID0gc3RhcnQ7IHBvcyA8IGVuZDsgKytwb3MpIHtcbiAgICAgIGNvZGUgPSBkYXRhW3Bvc107XG5cbiAgICAgIC8vIGNhbGN1bGF0ZSBwcmludCBzcGFjZVxuICAgICAgLy8gZXhwZW5zaXZlIGNhbGwsIHRoZXJlZm9yZSB3ZSBzYXZlIHdpZHRoIGluIGxpbmUgYnVmZmVyXG4gICAgICBjaFdpZHRoID0gd2N3aWR0aChjb2RlKTtcblxuICAgICAgLy8gZ2V0IGNoYXJzZXQgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG4gICAgICAvLyBjaGFyc2V0IGlzIG9ubHkgZGVmaW5lZCBmb3IgQVNDSUksIHRoZXJlZm9yZSB3ZSBvbmx5XG4gICAgICAvLyBzZWFyY2ggZm9yIGFuIHJlcGxhY2VtZW50IGNoYXIgaWYgY29kZSA8IDEyN1xuICAgICAgaWYgKGNvZGUgPCAxMjcgJiYgY2hhcnNldCkge1xuICAgICAgICBjb25zdCBjaCA9IGNoYXJzZXRbU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKV07XG4gICAgICAgIGlmIChjaCkge1xuICAgICAgICAgIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLmVtaXQoJ2ExMXkuY2hhcicsIHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZSkpO1xuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnQgY29tYmluaW5nIGNoYXIgYXQgbGFzdCBjdXJzb3IgcG9zaXRpb25cbiAgICAgIC8vIEZJWE1FOiBuZWVkcyBoYW5kbGluZyBhZnRlciBjdXJzb3IganVtcHNcbiAgICAgIC8vIGJ1ZmZlci54IHNob3VsZCBuZXZlciBiZSAwIGZvciBhIGNvbWJpbmluZyBjaGFyXG4gICAgICAvLyBzaW5jZSB0aGV5IGFsd2F5cyBmb2xsb3cgYSBjZWxsIGNvbnN1bWluZyBjaGFyXG4gICAgICAvLyB0aGVyZWZvcmUgd2UgY2FuIHRlc3QgZm9yIGJ1ZmZlci54IHRvIGF2b2lkIG92ZXJmbG93IGxlZnRcbiAgICAgIGlmICghY2hXaWR0aCAmJiBidWZmZXIueCkge1xuICAgICAgICBpZiAoIWJ1ZmZlclJvdy5nZXRXaWR0aChidWZmZXIueCAtIDEpKSB7XG4gICAgICAgICAgLy8gZm91bmQgZW1wdHkgY2VsbCBhZnRlciBmdWxsd2lkdGgsIG5lZWQgdG8gZ28gMiBjZWxscyBiYWNrXG4gICAgICAgICAgLy8gaXQgaXMgc2F2ZSB0byBzdGVwIDIgY2VsbHMgYmFjayBoZXJlXG4gICAgICAgICAgLy8gc2luY2UgYW4gZW1wdHkgY2VsbCBpcyBvbmx5IHNldCBieSBmdWxsd2lkdGggY2hhcnNcbiAgICAgICAgICBidWZmZXJSb3cuYWRkQ29kZXBvaW50VG9DZWxsKGJ1ZmZlci54IC0gMiwgY29kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyUm93LmFkZENvZGVwb2ludFRvQ2VsbChidWZmZXIueCAtIDEsIGNvZGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBnb3RvIG5leHQgbGluZSBpZiBjaCB3b3VsZCBvdmVyZmxvd1xuICAgICAgLy8gVE9ETzogbmVlZHMgYSBnbG9iYWwgbWluIHRlcm1pbmFsIHdpZHRoIG9mIDJcbiAgICAgIC8vIEZJWE1FOiBhZGRpdGlvbmFsbHkgZW5zdXJlIGNoV2lkdGggZml0cyBpbnRvIGEgbGluZVxuICAgICAgLy8gICAtLT4gIG1heWJlIGZvcmJpZCBjb2xzPHh5IGF0IGhpZ2hlciBsZXZlbCBhcyBpdCB3b3VsZFxuICAgICAgLy8gICAgICAgIGludHJvZHVjZSBhIGJhZCBydW50aW1lIHBlbmFsdHkgaGVyZVxuICAgICAgaWYgKGJ1ZmZlci54ICsgY2hXaWR0aCAtIDEgPj0gY29scykge1xuICAgICAgICAvLyBhdXRvd3JhcCAtIERFQ0FXTVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHdyYXBzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG5leHQgbGluZVxuICAgICAgICBpZiAod3JhcGFyb3VuZE1vZGUpIHtcbiAgICAgICAgICBidWZmZXIueCA9IDA7XG4gICAgICAgICAgYnVmZmVyLnkrKztcbiAgICAgICAgICBpZiAoYnVmZmVyLnkgPiBidWZmZXIuc2Nyb2xsQm90dG9tKSB7XG4gICAgICAgICAgICBidWZmZXIueS0tO1xuICAgICAgICAgICAgdGhpcy5fdGVybWluYWwuc2Nyb2xsKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGUgbGluZSBhbHJlYWR5IGV4aXN0cyAoZWcuIHRoZSBpbml0aWFsIHZpZXdwb3J0KSwgbWFyayBpdCBhcyBhXG4gICAgICAgICAgICAvLyB3cmFwcGVkIGxpbmVcbiAgICAgICAgICAgIGJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnkpLmlzV3JhcHBlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJvdyBjaGFuZ2VkLCBnZXQgaXQgYWdhaW5cbiAgICAgICAgICBidWZmZXJSb3cgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2hXaWR0aCA9PT0gMikge1xuICAgICAgICAgICAgLy8gRklYTUU6IGNoZWNrIGZvciB4dGVybSBiZWhhdmlvclxuICAgICAgICAgICAgLy8gV2hhdCB0byBkbyBoZXJlPyBXZSBnb3QgYSB3aWRlIGNoYXIgdGhhdCBkb2VzIG5vdCBmaXQgaW50byBsYXN0IGNlbGxcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBGSVhNRTogRG8gd2UgaGF2ZSB0byBzZXQgYnVmZmVyLnggdG8gY29scyAtIDEsIGlmIG5vdCB3cmFwcGluZz9cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnQgbW9kZTogbW92ZSBjaGFyYWN0ZXJzIHRvIHJpZ2h0XG4gICAgICBpZiAoaW5zZXJ0TW9kZSkge1xuICAgICAgICAvLyByaWdodCBzaGlmdCBjZWxscyBhY2NvcmRpbmcgdG8gdGhlIHdpZHRoXG4gICAgICAgIGJ1ZmZlclJvdy5pbnNlcnRDZWxscyhidWZmZXIueCwgY2hXaWR0aCwgYnVmZmVyLmdldE51bGxDZWxsKGN1ckF0dHIpKTtcbiAgICAgICAgLy8gdGVzdCBsYXN0IGNlbGwgLSBzaW5jZSB0aGUgbGFzdCBjZWxsIGhhcyBvbmx5IHJvb20gZm9yXG4gICAgICAgIC8vIGEgaGFsZndpZHRoIGNoYXIgYW55IGZ1bGx3aWR0aCBzaGlmdGVkIHRoZXJlIGlzIGxvc3RcbiAgICAgICAgLy8gYW5kIHdpbGwgYmUgc2V0IHRvIGVtcHR5IGNlbGxcbiAgICAgICAgaWYgKGJ1ZmZlclJvdy5nZXRXaWR0aChjb2xzIC0gMSkgPT09IDIpIHtcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoY29scyAtIDEsIE5VTExfQ0VMTF9DT0RFLCBOVUxMX0NFTExfV0lEVEgsIGN1ckF0dHIuZmcsIGN1ckF0dHIuYmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdyaXRlIGN1cnJlbnQgY2hhciB0byBidWZmZXIgYW5kIGFkdmFuY2UgY3Vyc29yXG4gICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgY29kZSwgY2hXaWR0aCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZyk7XG5cbiAgICAgIC8vIGZ1bGx3aWR0aCBjaGFyIC0gYWxzbyBzZXQgbmV4dCBjZWxsIHRvIHBsYWNlaG9sZGVyIHN0dWIgYW5kIGFkdmFuY2UgY3Vyc29yXG4gICAgICAvLyBmb3IgZ3JhcGhlbWVzIGJpZ2dlciB0aGFuIGZ1bGx3aWR0aCB3ZSBjYW4gc2ltcGx5IGxvb3AgdG8gemVyb1xuICAgICAgLy8gd2UgYWxyZWFkeSBtYWRlIHN1cmUgYWJvdmUsIHRoYXQgYnVmZmVyLnggKyBjaFdpZHRoIHdpbGwgbm90IG92ZXJmbG93IHJpZ2h0XG4gICAgICBpZiAoY2hXaWR0aCA+IDApIHtcbiAgICAgICAgd2hpbGUgKC0tY2hXaWR0aCkge1xuICAgICAgICAgIC8vIG90aGVyIHRoYW4gYSByZWd1bGFyIGVtcHR5IGNlbGwgYSBjZWxsIGZvbGxvd2luZyBhIHdpZGUgY2hhciBoYXMgbm8gd2lkdGhcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgMCwgMCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UoYnVmZmVyLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgYWRkQ3NpSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyBhZGRDc2lIYW5kbGVyKGZsYWc6IHN0cmluZywgY2FsbGJhY2s6IChwYXJhbXM6IG51bWJlcltdLCBjb2xsZWN0OiBzdHJpbmcpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5hZGRDc2lIYW5kbGVyKGZsYWcsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIGFkZE9zY0hhbmRsZXIgZnJvbSBwYXJzZXIuXG4gICAqL1xuICBwdWJsaWMgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLmFkZE9zY0hhbmRsZXIoaWRlbnQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCRUxcbiAgICogQmVsbCAoQ3RybC1HKS5cbiAgICovXG4gIHB1YmxpYyBiZWxsKCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJlbGwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMRlxuICAgKiBMaW5lIEZlZWQgb3IgTmV3IExpbmUgKE5MKS4gIChMRiAgaXMgQ3RybC1KKS5cbiAgICovXG4gIHB1YmxpYyBsaW5lRmVlZCgpOiB2b2lkIHtcbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcjtcblxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmNvbnZlcnRFb2wpIHtcbiAgICAgIGJ1ZmZlci54ID0gMDtcbiAgICB9XG4gICAgYnVmZmVyLnkrKztcbiAgICBpZiAoYnVmZmVyLnkgPiBidWZmZXIuc2Nyb2xsQm90dG9tKSB7XG4gICAgICBidWZmZXIueS0tO1xuICAgICAgdGhpcy5fdGVybWluYWwuc2Nyb2xsKCk7XG4gICAgfVxuICAgIC8vIElmIHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgaGl0LCBwcmV2ZW50IHRoaXMgYWN0aW9uIGZyb20gd3JhcHBpbmcgYXJvdW5kIHRvIHRoZSBuZXh0IGxpbmUuXG4gICAgaWYgKGJ1ZmZlci54ID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgIGJ1ZmZlci54LS07XG4gICAgfVxuXG4gICAgdGhpcy5fb25MaW5lRmVlZC5maXJlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ1JcbiAgICogQ2FycmlhZ2UgUmV0dXJuIChDdHJsLU0pLlxuICAgKi9cbiAgcHVibGljIGNhcnJpYWdlUmV0dXJuKCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCU1xuICAgKiBCYWNrc3BhY2UgKEN0cmwtSCkuXG4gICAqL1xuICBwdWJsaWMgYmFja3NwYWNlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA+IDApIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54LS07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRBQlxuICAgKiBIb3Jpem9udGFsIFRhYiAoSFQpIChDdHJsLUkpLlxuICAgKi9cbiAgcHVibGljIHRhYigpOiB2b2lkIHtcbiAgICBjb25zdCBvcmlnaW5hbFggPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueDtcbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5uZXh0U3RvcCgpO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVtaXQoJ2ExMXkudGFiJywgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggLSBvcmlnaW5hbFgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTT1xuICAgKiBTaGlmdCBPdXQgKEN0cmwtTikgLT4gU3dpdGNoIHRvIEFsdGVybmF0ZSBDaGFyYWN0ZXIgU2V0LiAgVGhpcyBpbnZva2VzIHRoZVxuICAgKiBHMSBjaGFyYWN0ZXIgc2V0LlxuICAgKi9cbiAgcHVibGljIHNoaWZ0T3V0KCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdMZXZlbCgxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTSVxuICAgKiBTaGlmdCBJbiAoQ3RybC1PKSAtPiBTd2l0Y2ggdG8gU3RhbmRhcmQgQ2hhcmFjdGVyIFNldC4gIFRoaXMgaW52b2tlcyB0aGUgRzBcbiAgICogY2hhcmFjdGVyIHNldCAodGhlIGRlZmF1bHQpLlxuICAgKi9cbiAgcHVibGljIHNoaWZ0SW4oKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuc2V0Z0xldmVsKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBAXG4gICAqIEluc2VydCBQcyAoQmxhbmspIENoYXJhY3RlcihzKSAoZGVmYXVsdCA9IDEpIChJQ0gpLlxuICAgKi9cbiAgcHVibGljIGluc2VydENoYXJzKHBhcmFtczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMuZ2V0KHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ICsgdGhpcy5fdGVybWluYWwuYnVmZmVyLnliYXNlKS5pbnNlcnRDZWxscyhcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54LFxuICAgICAgcGFyYW1zWzBdIHx8IDEsXG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fdGVybWluYWwuZXJhc2VBdHRyRGF0YSgpKVxuICAgICk7XG4gICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UodGhpcy5fdGVybWluYWwuYnVmZmVyLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBBXG4gICAqIEN1cnNvciBVcCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVVUpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclVwKHBhcmFtczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXNbMF07XG4gICAgaWYgKHBhcmFtIDwgMSkge1xuICAgICAgcGFyYW0gPSAxO1xuICAgIH1cbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSAtPSBwYXJhbTtcbiAgICBpZiAodGhpcy5fdGVybWluYWwuYnVmZmVyLnkgPCAwKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBCXG4gICAqIEN1cnNvciBEb3duIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRCkuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yRG93bihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA8IDEpIHtcbiAgICAgIHBhcmFtID0gMTtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnkgKz0gcGFyYW07XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID49IHRoaXMuX3Rlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID0gdGhpcy5fdGVybWluYWwucm93cyAtIDE7XG4gICAgfVxuICAgIC8vIElmIHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgaGl0LCBwcmV2ZW50IHRoaXMgYWN0aW9uIGZyb20gd3JhcHBpbmcgYXJvdW5kIHRvIHRoZSBuZXh0IGxpbmUuXG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54LS07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBDXG4gICAqIEN1cnNvciBGb3J3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRikuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yRm9yd2FyZChwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA8IDEpIHtcbiAgICAgIHBhcmFtID0gMTtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggKz0gcGFyYW07XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gdGhpcy5fdGVybWluYWwuY29scyAtIDE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBEXG4gICAqIEN1cnNvciBCYWNrd2FyZCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVUIpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvckJhY2t3YXJkKHBhcmFtczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXNbMF07XG4gICAgaWYgKHBhcmFtIDwgMSkge1xuICAgICAgcGFyYW0gPSAxO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgZW5kIG9mIHRoZSBsaW5lIGlzIGhpdCwgcHJldmVudCB0aGlzIGFjdGlvbiBmcm9tIHdyYXBwaW5nIGFyb3VuZCB0byB0aGUgbmV4dCBsaW5lLlxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA+PSB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueC0tO1xuICAgIH1cbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCAtPSBwYXJhbTtcbiAgICBpZiAodGhpcy5fdGVybWluYWwuYnVmZmVyLnggPCAwKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBFXG4gICAqIEN1cnNvciBOZXh0IExpbmUgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ05MKS5cbiAgICogc2FtZSBhcyBDU0kgUHMgQiA/XG4gICAqL1xuICBwdWJsaWMgY3Vyc29yTmV4dExpbmUocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPCAxKSB7XG4gICAgICBwYXJhbSA9IDE7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ICs9IHBhcmFtO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA+PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA9IHRoaXMuX3Rlcm1pbmFsLnJvd3MgLSAxO1xuICAgIH1cbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IDA7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRlxuICAgKiBDdXJzb3IgUHJlY2VkaW5nIExpbmUgUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ05MKS5cbiAgICogcmV1c2UgQ1NJIFBzIEEgP1xuICAgKi9cbiAgcHVibGljIGN1cnNvclByZWNlZGluZ0xpbmUocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPCAxKSB7XG4gICAgICBwYXJhbSA9IDE7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55IC09IHBhcmFtO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA8IDApIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID0gMDtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggPSAwO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIFBzIEdcbiAgICogQ3Vyc29yIENoYXJhY3RlciBBYnNvbHV0ZSAgW2NvbHVtbl0gKGRlZmF1bHQgPSBbcm93LDFdKSAoQ0hBKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JDaGFyQWJzb2x1dGUocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPCAxKSB7XG4gICAgICBwYXJhbSA9IDE7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gcGFyYW0gLSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIEhcbiAgICogQ3Vyc29yIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9IFsxLDFdKSAoQ1VQKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JQb3NpdGlvbihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IGNvbDogbnVtYmVyO1xuICAgIGxldCByb3c6IG51bWJlciA9IHBhcmFtc1swXSAtIDE7XG5cbiAgICBpZiAocGFyYW1zLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb2wgPSBwYXJhbXNbMV0gLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb2wgPSAwO1xuICAgIH1cblxuICAgIGlmIChyb3cgPCAwKSB7XG4gICAgICByb3cgPSAwO1xuICAgIH0gZWxzZSBpZiAocm93ID49IHRoaXMuX3Rlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHJvdyA9IHRoaXMuX3Rlcm1pbmFsLnJvd3MgLSAxO1xuICAgIH1cblxuICAgIGlmIChjb2wgPCAwKSB7XG4gICAgICBjb2wgPSAwO1xuICAgIH0gZWxzZSBpZiAoY29sID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgIGNvbCA9IHRoaXMuX3Rlcm1pbmFsLmNvbHMgLSAxO1xuICAgIH1cblxuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gY29sO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID0gcm93O1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBJXG4gICAqICAgQ3Vyc29yIEZvcndhcmQgVGFidWxhdGlvbiBQcyB0YWIgc3RvcHMgKGRlZmF1bHQgPSAxKSAoQ0hUKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JGb3J3YXJkVGFiKHBhcmFtczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXNbMF0gfHwgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIubmV4dFN0b3AoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byBlcmFzZSBjZWxscyBpbiBhIHRlcm1pbmFsIHJvdy5cbiAgICogVGhlIGNlbGwgZ2V0cyByZXBsYWNlZCB3aXRoIHRoZSBlcmFzZUNoYXIgb2YgdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0geSByb3cgaW5kZXhcbiAgICogQHBhcmFtIHN0YXJ0IGZpcnN0IGNlbGwgaW5kZXggdG8gYmUgZXJhc2VkXG4gICAqIEBwYXJhbSBlbmQgICBlbmQgLSAxIGlzIGxhc3QgZXJhc2VkIGNlbGxcbiAgICovXG4gIHByaXZhdGUgX2VyYXNlSW5CdWZmZXJMaW5lKHk6IG51bWJlciwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGNsZWFyV3JhcDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fdGVybWluYWwuYnVmZmVyLnliYXNlICsgeSk7XG4gICAgbGluZS5yZXBsYWNlQ2VsbHMoXG4gICAgICBzdGFydCxcbiAgICAgIGVuZCxcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpXG4gICAgKTtcbiAgICBpZiAoY2xlYXJXcmFwKSB7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHJlc2V0IGNlbGxzIGluIGEgdGVybWluYWwgcm93LlxuICAgKiBUaGUgY2VsbCBnZXRzIHJlcGxhY2VkIHdpdGggdGhlIGVyYXNlQ2hhciBvZiB0aGUgdGVybWluYWwgYW5kIHRoZSBpc1dyYXBwZWQgcHJvcGVydHkgaXMgc2V0IHRvIGZhbHNlLlxuICAgKiBAcGFyYW0geSByb3cgaW5kZXhcbiAgICovXG4gIHByaXZhdGUgX3Jlc2V0QnVmZmVyTGluZSh5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh5LCAwLCB0aGlzLl90ZXJtaW5hbC5jb2xzLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgSiAgRXJhc2UgaW4gRGlzcGxheSAoRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBFcmFzZSBCZWxvdyAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEVyYXNlIEFib3ZlLlxuICAgKiAgICAgUHMgPSAyICAtPiBFcmFzZSBBbGwuXG4gICAqICAgICBQcyA9IDMgIC0+IEVyYXNlIFNhdmVkIExpbmVzICh4dGVybSkuXG4gICAqIENTSSA/IFBzIEpcbiAgICogICBFcmFzZSBpbiBEaXNwbGF5IChERUNTRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBTZWxlY3RpdmUgRXJhc2UgQmVsb3cgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBTZWxlY3RpdmUgRXJhc2UgQWJvdmUuXG4gICAqICAgICBQcyA9IDIgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBbGwuXG4gICAqL1xuICBwdWJsaWMgZXJhc2VJbkRpc3BsYXkocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBqO1xuICAgIHN3aXRjaCAocGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIGogPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueTtcbiAgICAgICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2Uoaik7XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGorKywgdGhpcy5fdGVybWluYWwuYnVmZmVyLngsIHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID09PSAwKTtcbiAgICAgICAgZm9yICg7IGogPCB0aGlzLl90ZXJtaW5hbC5yb3dzOyBqKyspIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2Uoaik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBqID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnk7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLnVwZGF0ZVJhbmdlKGopO1xuICAgICAgICAvLyBEZWxldGVkIGZyb250IHBhcnQgb2YgbGluZSBhbmQgZXZlcnl0aGluZyBiZWZvcmUuIFRoaXMgbGluZSB3aWxsIG5vIGxvbmdlciBiZSB3cmFwcGVkLlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZShqLCAwLCB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCArIDEsIHRydWUpO1xuICAgICAgICBpZiAodGhpcy5fdGVybWluYWwuYnVmZmVyLnggKyAxID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgICAgICAvLyBEZWxldGVkIGVudGlyZSBwcmV2aW91cyBsaW5lLiBUaGlzIG5leHQgbGluZSBjYW4gbm8gbG9uZ2VyIGJlIHdyYXBwZWQuXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLmxpbmVzLmdldChqICsgMSkuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyTGluZShqKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90ZXJtaW5hbC51cGRhdGVSYW5nZSgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGogPSB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuICAgICAgICB0aGlzLl90ZXJtaW5hbC51cGRhdGVSYW5nZShqIC0gMSk7XG4gICAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UoMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICAvLyBDbGVhciBzY3JvbGxiYWNrIChldmVyeXRoaW5nIG5vdCBpbiB2aWV3cG9ydClcbiAgICAgICAgY29uc3Qgc2Nyb2xsQmFja1NpemUgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RoIC0gdGhpcy5fdGVybWluYWwucm93cztcbiAgICAgICAgaWYgKHNjcm9sbEJhY2tTaXplID4gMCkge1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy50cmltU3RhcnQoc2Nyb2xsQmFja1NpemUpO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55YmFzZSA9IE1hdGgubWF4KHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55YmFzZSAtIHNjcm9sbEJhY2tTaXplLCAwKTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueWRpc3AgPSBNYXRoLm1heCh0aGlzLl90ZXJtaW5hbC5idWZmZXIueWRpc3AgLSBzY3JvbGxCYWNrU2l6ZSwgMCk7XG4gICAgICAgICAgLy8gRm9yY2UgYSBzY3JvbGwgZXZlbnQgdG8gcmVmcmVzaCB2aWV3cG9ydFxuICAgICAgICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoMCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBLICBFcmFzZSBpbiBMaW5lIChFTCkuXG4gICAqICAgICBQcyA9IDAgIC0+IEVyYXNlIHRvIFJpZ2h0IChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gRXJhc2UgdG8gTGVmdC5cbiAgICogICAgIFBzID0gMiAgLT4gRXJhc2UgQWxsLlxuICAgKiBDU0kgPyBQcyBLXG4gICAqICAgRXJhc2UgaW4gTGluZSAoREVDU0VMKS5cbiAgICogICAgIFBzID0gMCAgLT4gU2VsZWN0aXZlIEVyYXNlIHRvIFJpZ2h0IChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gU2VsZWN0aXZlIEVyYXNlIHRvIExlZnQuXG4gICAqICAgICBQcyA9IDIgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBbGwuXG4gICAqL1xuICBwdWJsaWMgZXJhc2VJbkxpbmUocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHN3aXRjaCAocGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55LCB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCwgdGhpcy5fdGVybWluYWwuY29scyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl90ZXJtaW5hbC5idWZmZXIueSwgMCwgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggKyAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55LCAwLCB0aGlzLl90ZXJtaW5hbC5jb2xzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLnVwZGF0ZVJhbmdlKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgTFxuICAgKiBJbnNlcnQgUHMgTGluZShzKSAoZGVmYXVsdCA9IDEpIChJTCkuXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0TGluZXMocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbTogbnVtYmVyID0gcGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA8IDEpIHtcbiAgICAgIHBhcmFtID0gMTtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcjtcblxuICAgIGNvbnN0IHJvdzogbnVtYmVyID0gYnVmZmVyLnkgKyBidWZmZXIueWJhc2U7XG5cbiAgICBjb25zdCBzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0ID0gdGhpcy5fdGVybWluYWwucm93cyAtIDEgLSBidWZmZXIuc2Nyb2xsQm90dG9tO1xuICAgIGNvbnN0IHNjcm9sbEJvdHRvbUFic29sdXRlID0gdGhpcy5fdGVybWluYWwucm93cyAtIDEgKyBidWZmZXIueWJhc2UgLSBzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0ICsgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgLy8gdGVzdDogZWNobyAtZSAnXFxlWzQ0bVxcZVsxTFxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSAtIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKHNjcm9sbEJvdHRvbUFic29sdXRlIC0gMSwgMSk7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKHJvdywgMCwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICB9XG5cbiAgICAvLyB0aGlzLm1heFJhbmdlKCk7XG4gICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UoYnVmZmVyLnkpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnVwZGF0ZVJhbmdlKGJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBNXG4gICAqIERlbGV0ZSBQcyBMaW5lKHMpIChkZWZhdWx0ID0gMSkgKERMKS5cbiAgICovXG4gIHB1YmxpYyBkZWxldGVMaW5lcyhwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA8IDEpIHtcbiAgICAgIHBhcmFtID0gMTtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcjtcblxuICAgIGNvbnN0IHJvdzogbnVtYmVyID0gYnVmZmVyLnkgKyBidWZmZXIueWJhc2U7XG5cbiAgICBsZXQgajogbnVtYmVyO1xuICAgIGogPSB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSAtIGJ1ZmZlci5zY3JvbGxCb3R0b207XG4gICAgaiA9IHRoaXMuX3Rlcm1pbmFsLnJvd3MgLSAxICsgYnVmZmVyLnliYXNlIC0gajtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgLy8gdGVzdDogZWNobyAtZSAnXFxlWzQ0bVxcZVsxTVxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSAtIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKHJvdywgMSk7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKGosIDAsIGJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fdGVybWluYWwuZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuXG4gICAgLy8gdGhpcy5tYXhSYW5nZSgpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnVwZGF0ZVJhbmdlKGJ1ZmZlci55KTtcbiAgICB0aGlzLl90ZXJtaW5hbC51cGRhdGVSYW5nZShidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgUFxuICAgKiBEZWxldGUgUHMgQ2hhcmFjdGVyKHMpIChkZWZhdWx0ID0gMSkgKERDSCkuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlQ2hhcnMocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fdGVybWluYWwuYnVmZmVyLnkgKyB0aGlzLl90ZXJtaW5hbC5idWZmZXIueWJhc2UpLmRlbGV0ZUNlbGxzKFxuICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLngsXG4gICAgICBwYXJhbXNbMF0gfHwgMSxcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpXG4gICAgKTtcbiAgICB0aGlzLl90ZXJtaW5hbC51cGRhdGVSYW5nZSh0aGlzLl90ZXJtaW5hbC5idWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFMgIFNjcm9sbCB1cCBQcyBsaW5lcyAoZGVmYXVsdCA9IDEpIChTVSkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsVXAocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXI7XG5cbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShidWZmZXIueWJhc2UgKyBidWZmZXIuc2Nyb2xsVG9wLCAxKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbEJvdHRvbSwgMCwgYnVmZmVyLmdldEJsYW5rTGluZShERUZBVUxUX0FUVFJfREFUQSkpO1xuICAgIH1cbiAgICAvLyB0aGlzLm1heFJhbmdlKCk7XG4gICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UoYnVmZmVyLnNjcm9sbFRvcCk7XG4gICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UoYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFQgIFNjcm9sbCBkb3duIFBzIGxpbmVzIChkZWZhdWx0ID0gMSkgKFNEKS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxEb3duKHBhcmFtczogbnVtYmVyW10sIGNvbGxlY3Q/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA8IDIgJiYgIWNvbGxlY3QpIHtcbiAgICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXSB8fCAxO1xuXG4gICAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuXG4gICAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxCb3R0b20sIDEpO1xuICAgICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxUb3AsIDAsIGJ1ZmZlci5nZXRCbGFua0xpbmUoREVGQVVMVF9BVFRSX0RBVEEpKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXMubWF4UmFuZ2UoKTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnVwZGF0ZVJhbmdlKGJ1ZmZlci5zY3JvbGxUb3ApO1xuICAgICAgdGhpcy5fdGVybWluYWwudXBkYXRlUmFuZ2UoYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBYXG4gICAqIEVyYXNlIFBzIENoYXJhY3RlcihzKSAoZGVmYXVsdCA9IDEpIChFQ0gpLlxuICAgKi9cbiAgcHVibGljIGVyYXNlQ2hhcnMocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fdGVybWluYWwuYnVmZmVyLnkgKyB0aGlzLl90ZXJtaW5hbC5idWZmZXIueWJhc2UpLnJlcGxhY2VDZWxscyhcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54LFxuICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggKyAocGFyYW1zWzBdIHx8IDEpLFxuICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX3Rlcm1pbmFsLmVyYXNlQXR0ckRhdGEoKSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBaICBDdXJzb3IgQmFja3dhcmQgVGFidWxhdGlvbiBQcyB0YWIgc3RvcHMgKGRlZmF1bHQgPSAxKSAoQ0JUKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JCYWNrd2FyZFRhYihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zWzBdIHx8IDE7XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcjtcblxuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICBidWZmZXIueCA9IGJ1ZmZlci5wcmV2U3RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gYCAgQ2hhcmFjdGVyIFBvc2l0aW9uIEFic29sdXRlXG4gICAqICAgW2NvbHVtbl0gKGRlZmF1bHQgPSBbcm93LDFdKSAoSFBBKS5cbiAgICovXG4gIHB1YmxpYyBjaGFyUG9zQWJzb2x1dGUocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPCAxKSB7XG4gICAgICBwYXJhbSA9IDE7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gcGFyYW0gLSAxO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA+PSB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IHRoaXMuX3Rlcm1pbmFsLmNvbHMgLSAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gYSAgQ2hhcmFjdGVyIFBvc2l0aW9uIFJlbGF0aXZlXG4gICAqICAgW2NvbHVtbnNdIChkZWZhdWx0ID0gW3Jvdyxjb2wrMV0pIChIUFIpXG4gICAqIHJldXNlIENTSSBQcyBDID9cbiAgICovXG4gIHB1YmxpYyBoUG9zaXRpb25SZWxhdGl2ZShwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA8IDEpIHtcbiAgICAgIHBhcmFtID0gMTtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggKz0gcGFyYW07XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gdGhpcy5fdGVybWluYWwuY29scyAtIDE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBiICBSZXBlYXQgdGhlIHByZWNlZGluZyBncmFwaGljIGNoYXJhY3RlciBQcyB0aW1lcyAoUkVQKS5cbiAgICovXG4gIHB1YmxpYyByZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXIocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIC8vIG1ha2UgYnVmZmVyIGxvY2FsIGZvciBmYXN0ZXIgYWNjZXNzXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuICAgIGNvbnN0IGxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55KTtcbiAgICBsaW5lLmxvYWRDZWxsKGJ1ZmZlci54IC0gMSwgdGhpcy5fd29ya0NlbGwpO1xuICAgIGxpbmUucmVwbGFjZUNlbGxzKGJ1ZmZlci54LFxuICAgICAgYnVmZmVyLnggKyAocGFyYW1zWzBdIHx8IDEpLFxuICAgICAgKHRoaXMuX3dvcmtDZWxsLmNvbnRlbnQgIT09IHVuZGVmaW5lZCkgPyB0aGlzLl93b3JrQ2VsbCA6IGJ1ZmZlci5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSlcbiAgICApO1xuICAgIC8vIEZJWE1FOiBubyB1cGRhdGVSYW5nZSBoZXJlP1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBjICBTZW5kIERldmljZSBBdHRyaWJ1dGVzIChQcmltYXJ5IERBKS5cbiAgICogICAgIFBzID0gMCAgb3Igb21pdHRlZCAtPiByZXF1ZXN0IGF0dHJpYnV0ZXMgZnJvbSB0ZXJtaW5hbC4gIFRoZVxuICAgKiAgICAgcmVzcG9uc2UgZGVwZW5kcyBvbiB0aGUgZGVjVGVybWluYWxJRCByZXNvdXJjZSBzZXR0aW5nLlxuICAgKiAgICAgLT4gQ1NJID8gMSA7IDIgYyAgKGBgVlQxMDAgd2l0aCBBZHZhbmNlZCBWaWRlbyBPcHRpb24nJylcbiAgICogICAgIC0+IENTSSA/IDEgOyAwIGMgIChgYFZUMTAxIHdpdGggTm8gT3B0aW9ucycnKVxuICAgKiAgICAgLT4gQ1NJID8gNiBjICAoYGBWVDEwMicnKVxuICAgKiAgICAgLT4gQ1NJID8gNiAwIDsgMSA7IDIgOyA2IDsgOCA7IDkgOyAxIDUgOyBjICAoYGBWVDIyMCcnKVxuICAgKiAgIFRoZSBWVDEwMC1zdHlsZSByZXNwb25zZSBwYXJhbWV0ZXJzIGRvIG5vdCBtZWFuIGFueXRoaW5nIGJ5XG4gICAqICAgdGhlbXNlbHZlcy4gIFZUMjIwIHBhcmFtZXRlcnMgZG8sIHRlbGxpbmcgdGhlIGhvc3Qgd2hhdCBmZWEtXG4gICAqICAgdHVyZXMgdGhlIHRlcm1pbmFsIHN1cHBvcnRzOlxuICAgKiAgICAgUHMgPSAxICAtPiAxMzItY29sdW1ucy5cbiAgICogICAgIFBzID0gMiAgLT4gUHJpbnRlci5cbiAgICogICAgIFBzID0gNiAgLT4gU2VsZWN0aXZlIGVyYXNlLlxuICAgKiAgICAgUHMgPSA4ICAtPiBVc2VyLWRlZmluZWQga2V5cy5cbiAgICogICAgIFBzID0gOSAgLT4gTmF0aW9uYWwgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIHNldHMuXG4gICAqICAgICBQcyA9IDEgNSAgLT4gVGVjaG5pY2FsIGNoYXJhY3RlcnMuXG4gICAqICAgICBQcyA9IDIgMiAgLT4gQU5TSSBjb2xvciwgZS5nLiwgVlQ1MjUuXG4gICAqICAgICBQcyA9IDIgOSAgLT4gQU5TSSB0ZXh0IGxvY2F0b3IgKGkuZS4sIERFQyBMb2NhdG9yIG1vZGUpLlxuICAgKiBDU0kgPiBQcyBjXG4gICAqICAgU2VuZCBEZXZpY2UgQXR0cmlidXRlcyAoU2Vjb25kYXJ5IERBKS5cbiAgICogICAgIFBzID0gMCAgb3Igb21pdHRlZCAtPiByZXF1ZXN0IHRoZSB0ZXJtaW5hbCdzIGlkZW50aWZpY2F0aW9uXG4gICAqICAgICBjb2RlLiAgVGhlIHJlc3BvbnNlIGRlcGVuZHMgb24gdGhlIGRlY1Rlcm1pbmFsSUQgcmVzb3VyY2Ugc2V0LVxuICAgKiAgICAgdGluZy4gIEl0IHNob3VsZCBhcHBseSBvbmx5IHRvIFZUMjIwIGFuZCB1cCwgYnV0IHh0ZXJtIGV4dGVuZHNcbiAgICogICAgIHRoaXMgdG8gVlQxMDAuXG4gICAqICAgICAtPiBDU0kgID4gUHAgOyBQdiA7IFBjIGNcbiAgICogICB3aGVyZSBQcCBkZW5vdGVzIHRoZSB0ZXJtaW5hbCB0eXBlXG4gICAqICAgICBQcCA9IDAgIC0+IGBgVlQxMDAnJy5cbiAgICogICAgIFBwID0gMSAgLT4gYGBWVDIyMCcnLlxuICAgKiAgIGFuZCBQdiBpcyB0aGUgZmlybXdhcmUgdmVyc2lvbiAoZm9yIHh0ZXJtLCB0aGlzIHdhcyBvcmlnaW5hbGx5XG4gICAqICAgdGhlIFhGcmVlODYgcGF0Y2ggbnVtYmVyLCBzdGFydGluZyB3aXRoIDk1KS4gIEluIGEgREVDIHRlcm1pLVxuICAgKiAgIG5hbCwgUGMgaW5kaWNhdGVzIHRoZSBST00gY2FydHJpZGdlIHJlZ2lzdHJhdGlvbiBudW1iZXIgYW5kIGlzXG4gICAqICAgYWx3YXlzIHplcm8uXG4gICAqIE1vcmUgaW5mb3JtYXRpb246XG4gICAqICAgeHRlcm0vY2hhcnByb2MuYyAtIGxpbmUgMjAxMiwgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqICAgdmltIHJlc3BvbmRzIHdpdGggXltbPzBjIG9yIF5bWz8xYyBhZnRlciB0aGUgdGVybWluYWwncyByZXNwb25zZSAoPylcbiAgICovXG4gIHB1YmxpYyBzZW5kRGV2aWNlQXR0cmlidXRlcyhwYXJhbXM6IG51bWJlcltdLCBjb2xsZWN0Pzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHBhcmFtc1swXSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbGxlY3QpIHtcbiAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC5pcygneHRlcm0nKSB8fCB0aGlzLl90ZXJtaW5hbC5pcygncnh2dC11bmljb2RlJykgfHwgdGhpcy5fdGVybWluYWwuaXMoJ3NjcmVlbicpKSB7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLmhhbmRsZXIoQzAuRVNDICsgJ1s/MTsyYycpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl90ZXJtaW5hbC5pcygnbGludXgnKSkge1xuICAgICAgICB0aGlzLl90ZXJtaW5hbC5oYW5kbGVyKEMwLkVTQyArICdbPzZjJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb2xsZWN0ID09PSAnPicpIHtcbiAgICAgIC8vIHh0ZXJtIGFuZCB1cnh2dFxuICAgICAgLy8gc2VlbSB0byBzcGl0IHRoaXNcbiAgICAgIC8vIG91dCBhcm91bmQgfjM3MCB0aW1lcyAoPykuXG4gICAgICBpZiAodGhpcy5fdGVybWluYWwuaXMoJ3h0ZXJtJykpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYWwuaGFuZGxlcihDMC5FU0MgKyAnWz4wOzI3NjswYycpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl90ZXJtaW5hbC5pcygncnh2dC11bmljb2RlJykpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYWwuaGFuZGxlcihDMC5FU0MgKyAnWz44NTs5NTswYycpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl90ZXJtaW5hbC5pcygnbGludXgnKSkge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGJ5IGxpbnV4IGNvbnNvbGUuXG4gICAgICAgIC8vIGxpbnV4IGNvbnNvbGUgZWNob2VzIHBhcmFtZXRlcnMuXG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLmhhbmRsZXIocGFyYW1zWzBdICsgJ2MnKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fdGVybWluYWwuaXMoJ3NjcmVlbicpKSB7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLmhhbmRsZXIoQzAuRVNDICsgJ1s+ODM7NDAwMDM7MGMnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGQgIFZlcnRpY2FsIFBvc2l0aW9uIEFic29sdXRlIChWUEEpXG4gICAqICAgW3Jvd10gKGRlZmF1bHQgPSBbMSxjb2x1bW5dKVxuICAgKi9cbiAgcHVibGljIGxpbmVQb3NBYnNvbHV0ZShwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA8IDEpIHtcbiAgICAgIHBhcmFtID0gMTtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnkgPSBwYXJhbSAtIDE7XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID49IHRoaXMuX3Rlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID0gdGhpcy5fdGVybWluYWwucm93cyAtIDE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBlICBWZXJ0aWNhbCBQb3NpdGlvbiBSZWxhdGl2ZSAoVlBSKVxuICAgKiAgIFtyb3dzXSAoZGVmYXVsdCA9IFtyb3crMSxjb2x1bW5dKVxuICAgKiByZXVzZSBDU0kgUHMgQiA/XG4gICAqL1xuICBwdWJsaWMgdlBvc2l0aW9uUmVsYXRpdmUocGFyYW1zOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGxldCBwYXJhbSA9IHBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPCAxKSB7XG4gICAgICBwYXJhbSA9IDE7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ICs9IHBhcmFtO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA+PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA9IHRoaXMuX3Rlcm1pbmFsLnJvd3MgLSAxO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgZW5kIG9mIHRoZSBsaW5lIGlzIGhpdCwgcHJldmVudCB0aGlzIGFjdGlvbiBmcm9tIHdyYXBwaW5nIGFyb3VuZCB0byB0aGUgbmV4dCBsaW5lLlxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA+PSB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueC0tO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyBmXG4gICAqICAgSG9yaXpvbnRhbCBhbmQgVmVydGljYWwgUG9zaXRpb24gW3Jvdztjb2x1bW5dIChkZWZhdWx0ID1cbiAgICogICBbMSwxXSkgKEhWUCkuXG4gICAqL1xuICBwdWJsaWMgaFZQb3NpdGlvbihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgaWYgKHBhcmFtc1swXSA8IDEpIHBhcmFtc1swXSA9IDE7XG4gICAgaWYgKHBhcmFtc1sxXSA8IDEpIHBhcmFtc1sxXSA9IDE7XG5cbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA9IHBhcmFtc1swXSAtIDE7XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID49IHRoaXMuX3Rlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID0gdGhpcy5fdGVybWluYWwucm93cyAtIDE7XG4gICAgfVxuXG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggPSBwYXJhbXNbMV0gLSAxO1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA+PSB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IHRoaXMuX3Rlcm1pbmFsLmNvbHMgLSAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgZyAgVGFiIENsZWFyIChUQkMpLlxuICAgKiAgICAgUHMgPSAwICAtPiBDbGVhciBDdXJyZW50IENvbHVtbiAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDMgIC0+IENsZWFyIEFsbC5cbiAgICogUG90ZW50aWFsbHk6XG4gICAqICAgUHMgPSAyICAtPiBDbGVhciBTdG9wcyBvbiBMaW5lLlxuICAgKiAgIGh0dHA6Ly92dDEwMC5uZXQvYW5uYXJib3IvYWFhLXVnL3NlY3Rpb242Lmh0bWxcbiAgICovXG4gIHB1YmxpYyB0YWJDbGVhcihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgY29uc3QgcGFyYW0gPSBwYXJhbXNbMF07XG4gICAgaWYgKHBhcmFtIDw9IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl90ZXJtaW5hbC5idWZmZXIudGFic1t0aGlzLl90ZXJtaW5hbC5idWZmZXIueF07XG4gICAgfSBlbHNlIGlmIChwYXJhbSA9PT0gMykge1xuICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnRhYnMgPSB7fTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGggIFNldCBNb2RlIChTTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IEtleWJvYXJkIEFjdGlvbiBNb2RlIChBTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IEluc2VydCBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBBdXRvbWF0aWMgTmV3bGluZSAoTE5NKS5cbiAgICogQ1NJID8gUG0gaFxuICAgKiAgIERFQyBQcml2YXRlIE1vZGUgU2V0IChERUNTRVQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBBcHBsaWNhdGlvbiBDdXJzb3IgS2V5cyAoREVDQ0tNKS5cbiAgICogICAgIFBzID0gMiAgLT4gRGVzaWduYXRlIFVTQVNDSUkgZm9yIGNoYXJhY3RlciBzZXRzIEcwLUczXG4gICAqICAgICAoREVDQU5NKSwgYW5kIHNldCBWVDEwMCBtb2RlLlxuICAgKiAgICAgUHMgPSAzICAtPiAxMzIgQ29sdW1uIE1vZGUgKERFQ0NPTE0pLlxuICAgKiAgICAgUHMgPSA0ICAtPiBTbW9vdGggKFNsb3cpIFNjcm9sbCAoREVDU0NMTSkuXG4gICAqICAgICBQcyA9IDUgIC0+IFJldmVyc2UgVmlkZW8gKERFQ1NDTk0pLlxuICAgKiAgICAgUHMgPSA2ICAtPiBPcmlnaW4gTW9kZSAoREVDT00pLlxuICAgKiAgICAgUHMgPSA3ICAtPiBXcmFwYXJvdW5kIE1vZGUgKERFQ0FXTSkuXG4gICAqICAgICBQcyA9IDggIC0+IEF1dG8tcmVwZWF0IEtleXMgKERFQ0FSTSkuXG4gICAqICAgICBQcyA9IDkgIC0+IFNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzLiAgU2VlIHRoZSBzZWMtXG4gICAqICAgICB0aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgIC0+IFNob3cgdG9vbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMiAgLT4gU3RhcnQgQmxpbmtpbmcgQ3Vyc29yIChhdHQ2MTApLlxuICAgKiAgICAgUHMgPSAxIDggIC0+IFByaW50IGZvcm0gZmVlZCAoREVDUEZGKS5cbiAgICogICAgIFBzID0gMSA5ICAtPiBTZXQgcHJpbnQgZXh0ZW50IHRvIGZ1bGwgc2NyZWVuIChERUNQRVgpLlxuICAgKiAgICAgUHMgPSAyIDUgIC0+IFNob3cgQ3Vyc29yIChERUNUQ0VNKS5cbiAgICogICAgIFBzID0gMyAwICAtPiBTaG93IHNjcm9sbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDMgNSAgLT4gRW5hYmxlIGZvbnQtc2hpZnRpbmcgZnVuY3Rpb25zIChyeHZ0KS5cbiAgICogICAgIFBzID0gMyA4ICAtPiBFbnRlciBUZWt0cm9uaXggTW9kZSAoREVDVEVLKS5cbiAgICogICAgIFBzID0gNCAwICAtPiBBbGxvdyA4MCAtPiAxMzIgTW9kZS5cbiAgICogICAgIFBzID0gNCAxICAtPiBtb3JlKDEpIGZpeCAoc2VlIGN1cnNlcyByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDQgMiAgLT4gRW5hYmxlIE5hdGlvbiBSZXBsYWNlbWVudCBDaGFyYWN0ZXIgc2V0cyAoREVDTi1cbiAgICogICAgIFJDTSkuXG4gICAqICAgICBQcyA9IDQgNCAgLT4gVHVybiBPbiBNYXJnaW4gQmVsbC5cbiAgICogICAgIFBzID0gNCA1ICAtPiBSZXZlcnNlLXdyYXBhcm91bmQgTW9kZS5cbiAgICogICAgIFBzID0gNCA2ICAtPiBTdGFydCBMb2dnaW5nLiAgVGhpcyBpcyBub3JtYWxseSBkaXNhYmxlZCBieSBhXG4gICAqICAgICBjb21waWxlLXRpbWUgb3B0aW9uLlxuICAgKiAgICAgUHMgPSA0IDcgIC0+IFVzZSBBbHRlcm5hdGUgU2NyZWVuIEJ1ZmZlci4gIChUaGlzIG1heSBiZSBkaXMtXG4gICAqICAgICBhYmxlZCBieSB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSA2IDYgIC0+IEFwcGxpY2F0aW9uIGtleXBhZCAoREVDTktNKS5cbiAgICogICAgIFBzID0gNiA3ICAtPiBCYWNrYXJyb3cga2V5IHNlbmRzIGJhY2tzcGFjZSAoREVDQktNKS5cbiAgICogICAgIFBzID0gMSAwIDAgMCAgLT4gU2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MgYW5kXG4gICAqICAgICByZWxlYXNlLiAgU2VlIHRoZSBzZWN0aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAxICAtPiBVc2UgSGlsaXRlIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAyICAtPiBVc2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDMgIC0+IFVzZSBBbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCA0ICAtPiBTZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzLlxuICAgKiAgICAgUHMgPSAxIDAgMCA1ICAtPiBFbmFibGUgRXh0ZW5kZWQgTW91c2UgTW9kZS5cbiAgICogICAgIFBzID0gMSAwIDEgMCAgLT4gU2Nyb2xsIHRvIGJvdHRvbSBvbiB0dHkgb3V0cHV0IChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDEgMSAgLT4gU2Nyb2xsIHRvIGJvdHRvbSBvbiBrZXkgcHJlc3MgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA0ICAtPiBJbnRlcnByZXQgXCJtZXRhXCIga2V5LCBzZXRzIGVpZ2h0aCBiaXQuXG4gICAqICAgICAoZW5hYmxlcyB0aGUgZWlnaHRCaXRJbnB1dCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDUgIC0+IEVuYWJsZSBzcGVjaWFsIG1vZGlmaWVycyBmb3IgQWx0IGFuZCBOdW0tXG4gICAqICAgICBMb2NrIGtleXMuICAoVGhpcyBlbmFibGVzIHRoZSBudW1Mb2NrIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNiAgLT4gU2VuZCBFU0MgICB3aGVuIE1ldGEgbW9kaWZpZXMgYSBrZXkuICAoVGhpc1xuICAgKiAgICAgZW5hYmxlcyB0aGUgbWV0YVNlbmRzRXNjYXBlIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNyAgLT4gU2VuZCBERUwgZnJvbSB0aGUgZWRpdGluZy1rZXlwYWQgRGVsZXRlXG4gICAqICAgICBrZXkuXG4gICAqICAgICBQcyA9IDEgMCAzIDkgIC0+IFNlbmQgRVNDICB3aGVuIEFsdCBtb2RpZmllcyBhIGtleS4gIChUaGlzXG4gICAqICAgICBlbmFibGVzIHRoZSBhbHRTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDAgIC0+IEtlZXAgc2VsZWN0aW9uIGV2ZW4gaWYgbm90IGhpZ2hsaWdodGVkLlxuICAgKiAgICAgKFRoaXMgZW5hYmxlcyB0aGUga2VlcFNlbGVjdGlvbiByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDEgIC0+IFVzZSB0aGUgQ0xJUEJPQVJEIHNlbGVjdGlvbi4gIChUaGlzIGVuYWJsZXNcbiAgICogICAgIHRoZSBzZWxlY3RUb0NsaXBib2FyZCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDIgIC0+IEVuYWJsZSBVcmdlbmN5IHdpbmRvdyBtYW5hZ2VyIGhpbnQgd2hlblxuICAgKiAgICAgQ29udHJvbC1HIGlzIHJlY2VpdmVkLiAgKFRoaXMgZW5hYmxlcyB0aGUgYmVsbElzVXJnZW50XG4gICAqICAgICByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDMgIC0+IEVuYWJsZSByYWlzaW5nIG9mIHRoZSB3aW5kb3cgd2hlbiBDb250cm9sLUdcbiAgICogICAgIGlzIHJlY2VpdmVkLiAgKGVuYWJsZXMgdGhlIHBvcE9uQmVsbCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDcgIC0+IFVzZSBBbHRlcm5hdGUgU2NyZWVuIEJ1ZmZlci4gIChUaGlzIG1heSBiZVxuICAgKiAgICAgZGlzYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOCAgLT4gU2F2ZSBjdXJzb3IgYXMgaW4gREVDU0MuICAoVGhpcyBtYXkgYmUgZGlzLVxuICAgKiAgICAgYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOSAgLT4gU2F2ZSBjdXJzb3IgYXMgaW4gREVDU0MgYW5kIHVzZSBBbHRlcm5hdGVcbiAgICogICAgIFNjcmVlbiBCdWZmZXIsIGNsZWFyaW5nIGl0IGZpcnN0LiAgKFRoaXMgbWF5IGJlIGRpc2FibGVkIGJ5XG4gICAqICAgICB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLiAgVGhpcyBjb21iaW5lcyB0aGUgZWZmZWN0cyBvZiB0aGUgMVxuICAgKiAgICAgMCA0IDcgIGFuZCAxIDAgNCA4ICBtb2Rlcy4gIFVzZSB0aGlzIHdpdGggdGVybWluZm8tYmFzZWRcbiAgICogICAgIGFwcGxpY2F0aW9ucyByYXRoZXIgdGhhbiB0aGUgNCA3ICBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAwICAtPiBTZXQgdGVybWluZm8vdGVybWNhcCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMSAgLT4gU2V0IFN1biBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMiAgLT4gU2V0IEhQIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAzICAtPiBTZXQgU0NPIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNiAwICAtPiBTZXQgbGVnYWN5IGtleWJvYXJkIGVtdWxhdGlvbiAoWDExUjYpLlxuICAgKiAgICAgUHMgPSAxIDAgNiAxICAtPiBTZXQgVlQyMjAga2V5Ym9hcmQgZW11bGF0aW9uLlxuICAgKiAgICAgUHMgPSAyIDAgMCA0ICAtPiBTZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuXG4gICAqIE1vZGVzOlxuICAgKiAgIGh0dHA6ICp2dDEwMC5uZXQvZG9jcy92dDIyMC1ybS9jaGFwdGVyNC5odG1sXG4gICAqL1xuICBwdWJsaWMgc2V0TW9kZShwYXJhbXM6IG51bWJlcltdLCBjb2xsZWN0Pzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnNldE1vZGUoW3BhcmFtc1tpXV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFjb2xsZWN0KSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtc1swXSkge1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuaW5zZXJ0TW9kZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgLy8gdGhpcy5fdC5jb252ZXJ0RW9sID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbGxlY3QgPT09ICc/Jykge1xuICAgICAgc3dpdGNoIChwYXJhbXNbMF0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmFwcGxpY2F0aW9uQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdDaGFyc2V0KDAsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuc2V0Z0NoYXJzZXQoMSwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZXRnQ2hhcnNldCgyLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdDaGFyc2V0KDMsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgLy8gc2V0IFZUMTAwIG1vZGUgaGVyZVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6IC8vIDEzMiBjb2wgbW9kZVxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNhdmVkQ29scyA9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwucmVzaXplKDEzMiwgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5vcmlnaW5Nb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLndyYXBhcm91bmRNb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAvLyB0aGlzLmN1cnNvckJsaW5rID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5sb2coJ1NlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuJyk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYXBwbGljYXRpb25LZXlwYWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC52aWV3cG9ydCkge1xuICAgICAgICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTogLy8gWDEwIE1vdXNlXG4gICAgICAgICAgLy8gbm8gcmVsZWFzZSwgbm8gbW90aW9uLCBubyB3aGVlbCwgbm8gbW9kaWZpZXJzLlxuICAgICAgICBjYXNlIDEwMDA6IC8vIHZ0MjAwIG1vdXNlXG4gICAgICAgICAgLy8gbm8gbW90aW9uLlxuICAgICAgICAgIC8vIG5vIG1vZGlmaWVycywgZXhjZXB0IGNvbnRyb2wgb24gdGhlIHdoZWVsLlxuICAgICAgICBjYXNlIDEwMDI6IC8vIGJ1dHRvbiBldmVudCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIC8vIGFueSBldmVudCAtIHNlbmRzIG1vdGlvbiBldmVudHMsXG4gICAgICAgICAgLy8gZXZlbiBpZiB0aGVyZSBpcyBubyBidXR0b24gaGVsZCBkb3duLlxuXG4gICAgICAgICAgLy8gVE9ETzogV2h5IGFyZSBwYXJhbXNbMF0gY29tcGFyZXMgbmVzdGVkIHdpdGhpbiBhIHN3aXRjaCBmb3IgcGFyYW1zWzBdP1xuXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwueDEwTW91c2UgPSBwYXJhbXNbMF0gPT09IDk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwudnQyMDBNb3VzZSA9IHBhcmFtc1swXSA9PT0gMTAwMDtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5ub3JtYWxNb3VzZSA9IHBhcmFtc1swXSA+IDEwMDA7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwubW91c2VFdmVudHMgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC5lbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VuYWJsZS1tb3VzZS1ldmVudHMnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnNlbGVjdGlvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNlbGVjdGlvbk1hbmFnZXIuZGlzYWJsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5sb2coJ0JpbmRpbmcgdG8gbW91c2UgZXZlbnRzLicpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDQ6IC8vIHNlbmQgZm9jdXNpbi9mb2N1c291dCBldmVudHNcbiAgICAgICAgICAvLyBmb2N1c2luOiBeW1tJXG4gICAgICAgICAgLy8gZm9jdXNvdXQ6IF5bW09cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZW5kRm9jdXMgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDU6IC8vIHV0ZjggZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC51dGZNb3VzZSA9IHRydWU7XG4gICAgICAgICAgLy8gZm9yIHdpZGUgdGVybWluYWxzXG4gICAgICAgICAgLy8gc2ltcGx5IGVuY29kZXMgbGFyZ2UgdmFsdWVzIGFzIHV0ZjggY2hhcmFjdGVyc1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDY6IC8vIHNnciBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNnck1vdXNlID0gdHJ1ZTtcbiAgICAgICAgICAvLyBmb3Igd2lkZSB0ZXJtaW5hbHNcbiAgICAgICAgICAvLyBkb2VzIG5vdCBhZGQgMzIgdG8gZmllbGRzXG4gICAgICAgICAgLy8gcHJlc3M6IF5bWzxiO3g7eU1cbiAgICAgICAgICAvLyByZWxlYXNlOiBeW1s8Yjt4O3ltXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAxNTogLy8gdXJ4dnQgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC51cnh2dE1vdXNlID0gdHJ1ZTtcbiAgICAgICAgICAvLyBmb3Igd2lkZSB0ZXJtaW5hbHNcbiAgICAgICAgICAvLyBudW1iZXJzIGZvciBmaWVsZHNcbiAgICAgICAgICAvLyBwcmVzczogXltbYjt4O3lNXG4gICAgICAgICAgLy8gbW90aW9uOiBeW1tiO3g7eVRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyNTogLy8gc2hvdyBjdXJzb3JcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5jdXJzb3JIaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ4OiAvLyBhbHQgc2NyZWVuIGN1cnNvclxuICAgICAgICAgIHRoaXMuc2F2ZUN1cnNvcihwYXJhbXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDk6IC8vIGFsdCBzY3JlZW4gYnVmZmVyIGN1cnNvclxuICAgICAgICAgIHRoaXMuc2F2ZUN1cnNvcihwYXJhbXMpO1xuICAgICAgICAgIC8vIEZBTEwtVEhST1VHSFxuICAgICAgICBjYXNlIDQ3OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlclxuICAgICAgICBjYXNlIDEwNDc6IC8vIGFsdCBzY3JlZW4gYnVmZmVyXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYnVmZmVycy5hY3RpdmF0ZUFsdEJ1ZmZlcih0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2goMCwgdGhpcy5fdGVybWluYWwucm93cyAtIDEpO1xuICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC52aWV3cG9ydCkge1xuICAgICAgICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuc2hvd0N1cnNvcigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIwMDQ6IC8vIGJyYWNrZXRlZCBwYXN0ZSBtb2RlIChodHRwczovL2NpcncuaW4vYmxvZy9icmFja2V0ZWQtcGFzdGUpXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYnJhY2tldGVkUGFzdGVNb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGwgIFJlc2V0IE1vZGUgKFJNKS5cbiAgICogICAgIFBzID0gMiAgLT4gS2V5Ym9hcmQgQWN0aW9uIE1vZGUgKEFNKS5cbiAgICogICAgIFBzID0gNCAgLT4gUmVwbGFjZSBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBOb3JtYWwgTGluZWZlZWQgKExOTSkuXG4gICAqIENTSSA/IFBtIGxcbiAgICogICBERUMgUHJpdmF0ZSBNb2RlIFJlc2V0IChERUNSU1QpLlxuICAgKiAgICAgUHMgPSAxICAtPiBOb3JtYWwgQ3Vyc29yIEtleXMgKERFQ0NLTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IERlc2lnbmF0ZSBWVDUyIG1vZGUgKERFQ0FOTSkuXG4gICAqICAgICBQcyA9IDMgIC0+IDgwIENvbHVtbiBNb2RlIChERUNDT0xNKS5cbiAgICogICAgIFBzID0gNCAgLT4gSnVtcCAoRmFzdCkgU2Nyb2xsIChERUNTQ0xNKS5cbiAgICogICAgIFBzID0gNSAgLT4gTm9ybWFsIFZpZGVvIChERUNTQ05NKS5cbiAgICogICAgIFBzID0gNiAgLT4gTm9ybWFsIEN1cnNvciBNb2RlIChERUNPTSkuXG4gICAqICAgICBQcyA9IDcgIC0+IE5vIFdyYXBhcm91bmQgTW9kZSAoREVDQVdNKS5cbiAgICogICAgIFBzID0gOCAgLT4gTm8gQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS5cbiAgICogICAgIFBzID0gOSAgLT4gRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MuXG4gICAqICAgICBQcyA9IDEgMCAgLT4gSGlkZSB0b29sYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTdG9wIEJsaW5raW5nIEN1cnNvciAoYXR0NjEwKS5cbiAgICogICAgIFBzID0gMSA4ICAtPiBEb24ndCBwcmludCBmb3JtIGZlZWQgKERFQ1BGRikuXG4gICAqICAgICBQcyA9IDEgOSAgLT4gTGltaXQgcHJpbnQgdG8gc2Nyb2xsaW5nIHJlZ2lvbiAoREVDUEVYKS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBIaWRlIEN1cnNvciAoREVDVENFTSkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gRG9uJ3Qgc2hvdyBzY3JvbGxiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IERpc2FibGUgZm9udC1zaGlmdGluZyBmdW5jdGlvbnMgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSA0IDAgIC0+IERpc2FsbG93IDgwIC0+IDEzMiBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDEgIC0+IE5vIG1vcmUoMSkgZml4IChzZWUgY3Vyc2VzIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNCAyICAtPiBEaXNhYmxlIE5hdGlvbiBSZXBsYWNlbWVudCBDaGFyYWN0ZXIgc2V0cyAoREVDLVxuICAgKiAgICAgTlJDTSkuXG4gICAqICAgICBQcyA9IDQgNCAgLT4gVHVybiBPZmYgTWFyZ2luIEJlbGwuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gTm8gUmV2ZXJzZS13cmFwYXJvdW5kIE1vZGUuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU3RvcCBMb2dnaW5nLiAgKFRoaXMgaXMgbm9ybWFsbHkgZGlzYWJsZWQgYnkgYVxuICAgKiAgICAgY29tcGlsZS10aW1lIG9wdGlvbikuXG4gICAqICAgICBQcyA9IDQgNyAgLT4gVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyLlxuICAgKiAgICAgUHMgPSA2IDYgIC0+IE51bWVyaWMga2V5cGFkIChERUNOS00pLlxuICAgKiAgICAgUHMgPSA2IDcgIC0+IEJhY2thcnJvdyBrZXkgc2VuZHMgZGVsZXRlIChERUNCS00pLlxuICAgKiAgICAgUHMgPSAxIDAgMCAwICAtPiBEb24ndCBzZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcyBhbmRcbiAgICogICAgIHJlbGVhc2UuICBTZWUgdGhlIHNlY3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDEgIC0+IERvbid0IHVzZSBIaWxpdGUgTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDIgIC0+IERvbid0IHVzZSBDZWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMyAgLT4gRG9uJ3QgdXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDQgIC0+IERvbid0IHNlbmQgRm9jdXNJbi9Gb2N1c091dCBldmVudHMuXG4gICAqICAgICBQcyA9IDEgMCAwIDUgIC0+IERpc2FibGUgRXh0ZW5kZWQgTW91c2UgTW9kZS5cbiAgICogICAgIFBzID0gMSAwIDEgMCAgLT4gRG9uJ3Qgc2Nyb2xsIHRvIGJvdHRvbSBvbiB0dHkgb3V0cHV0XG4gICAqICAgICAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAxIDEgIC0+IERvbid0IHNjcm9sbCB0byBib3R0b20gb24ga2V5IHByZXNzIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDMgNCAgLT4gRG9uJ3QgaW50ZXJwcmV0IFwibWV0YVwiIGtleS4gIChUaGlzIGRpc2FibGVzXG4gICAqICAgICB0aGUgZWlnaHRCaXRJbnB1dCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDUgIC0+IERpc2FibGUgc3BlY2lhbCBtb2RpZmllcnMgZm9yIEFsdCBhbmQgTnVtLVxuICAgKiAgICAgTG9jayBrZXlzLiAgKFRoaXMgZGlzYWJsZXMgdGhlIG51bUxvY2sgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA2ICAtPiBEb24ndCBzZW5kIEVTQyAgd2hlbiBNZXRhIG1vZGlmaWVzIGEga2V5LlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIG1ldGFTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDcgIC0+IFNlbmQgVlQyMjAgUmVtb3ZlIGZyb20gdGhlIGVkaXRpbmcta2V5cGFkXG4gICAqICAgICBEZWxldGUga2V5LlxuICAgKiAgICAgUHMgPSAxIDAgMyA5ICAtPiBEb24ndCBzZW5kIEVTQyAgd2hlbiBBbHQgbW9kaWZpZXMgYSBrZXkuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUgYWx0U2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAwICAtPiBEbyBub3Qga2VlcCBzZWxlY3Rpb24gd2hlbiBub3QgaGlnaGxpZ2h0ZWQuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUga2VlcFNlbGVjdGlvbiByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDEgIC0+IFVzZSB0aGUgUFJJTUFSWSBzZWxlY3Rpb24uICAoVGhpcyBkaXNhYmxlc1xuICAgKiAgICAgdGhlIHNlbGVjdFRvQ2xpcGJvYXJkIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMiAgLT4gRGlzYWJsZSBVcmdlbmN5IHdpbmRvdyBtYW5hZ2VyIGhpbnQgd2hlblxuICAgKiAgICAgQ29udHJvbC1HIGlzIHJlY2VpdmVkLiAgKFRoaXMgZGlzYWJsZXMgdGhlIGJlbGxJc1VyZ2VudFxuICAgKiAgICAgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAzICAtPiBEaXNhYmxlIHJhaXNpbmcgb2YgdGhlIHdpbmRvdyB3aGVuIENvbnRyb2wtXG4gICAqICAgICBHIGlzIHJlY2VpdmVkLiAgKFRoaXMgZGlzYWJsZXMgdGhlIHBvcE9uQmVsbCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDcgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlciwgY2xlYXJpbmcgc2NyZWVuXG4gICAqICAgICBmaXJzdCBpZiBpbiB0aGUgQWx0ZXJuYXRlIFNjcmVlbi4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieVxuICAgKiAgICAgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOCAgLT4gUmVzdG9yZSBjdXJzb3IgYXMgaW4gREVDUkMuICAoVGhpcyBtYXkgYmVcbiAgICogICAgIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDkgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlciBhbmQgcmVzdG9yZSBjdXJzb3JcbiAgICogICAgIGFzIGluIERFQ1JDLiAgKFRoaXMgbWF5IGJlIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdFxuICAgKiAgICAgcmVzb3VyY2UpLiAgVGhpcyBjb21iaW5lcyB0aGUgZWZmZWN0cyBvZiB0aGUgMSAwIDQgNyAgYW5kIDEgMFxuICAgKiAgICAgNCA4ICBtb2Rlcy4gIFVzZSB0aGlzIHdpdGggdGVybWluZm8tYmFzZWQgYXBwbGljYXRpb25zIHJhdGhlclxuICAgKiAgICAgdGhhbiB0aGUgNCA3ICBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAwICAtPiBSZXNldCB0ZXJtaW5mby90ZXJtY2FwIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAxICAtPiBSZXNldCBTdW4gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDIgIC0+IFJlc2V0IEhQIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAzICAtPiBSZXNldCBTQ08gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA2IDAgIC0+IFJlc2V0IGxlZ2FjeSBrZXlib2FyZCBlbXVsYXRpb24gKFgxMVI2KS5cbiAgICogICAgIFBzID0gMSAwIDYgMSAgLT4gUmVzZXQga2V5Ym9hcmQgZW11bGF0aW9uIHRvIFN1bi9QQyBzdHlsZS5cbiAgICogICAgIFBzID0gMiAwIDAgNCAgLT4gUmVzZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuXG4gICAqL1xuICBwdWJsaWMgcmVzZXRNb2RlKHBhcmFtczogbnVtYmVyW10sIGNvbGxlY3Q/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucmVzZXRNb2RlKFtwYXJhbXNbaV1dKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29sbGVjdCkge1xuICAgICAgc3dpdGNoIChwYXJhbXNbMF0pIHtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmluc2VydE1vZGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICAvLyB0aGlzLl90LmNvbnZlcnRFb2wgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbGxlY3QgPT09ICc/Jykge1xuICAgICAgc3dpdGNoIChwYXJhbXNbMF0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmFwcGxpY2F0aW9uQ3Vyc29yID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBpZiAodGhpcy5fdGVybWluYWwuY29scyA9PT0gMTMyICYmIHRoaXMuX3Rlcm1pbmFsLnNhdmVkQ29scykge1xuICAgICAgICAgICAgdGhpcy5fdGVybWluYWwucmVzaXplKHRoaXMuX3Rlcm1pbmFsLnNhdmVkQ29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHM7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5vcmlnaW5Nb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC53cmFwYXJvdW5kTW9kZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIC8vIHRoaXMuY3Vyc29yQmxpbmsgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5sb2coJ1N3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuJyk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYXBwbGljYXRpb25LZXlwYWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAodGhpcy5fdGVybWluYWwudmlld3BvcnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDk6IC8vIFgxMCBNb3VzZVxuICAgICAgICBjYXNlIDEwMDA6IC8vIHZ0MjAwIG1vdXNlXG4gICAgICAgIGNhc2UgMTAwMjogLy8gYnV0dG9uIGV2ZW50IG1vdXNlXG4gICAgICAgIGNhc2UgMTAwMzogLy8gYW55IGV2ZW50IG1vdXNlXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwueDEwTW91c2UgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52dDIwME1vdXNlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwubm9ybWFsTW91c2UgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5tb3VzZUV2ZW50cyA9IGZhbHNlO1xuICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC5lbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZS1tb3VzZS1ldmVudHMnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnNlbGVjdGlvbk1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNlbGVjdGlvbk1hbmFnZXIuZW5hYmxlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDQ6IC8vIHNlbmQgZm9jdXNpbi9mb2N1c291dCBldmVudHNcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZW5kRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA1OiAvLyB1dGY4IGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwudXRmTW91c2UgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA2OiAvLyBzZ3IgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZ3JNb3VzZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwudXJ4dnRNb3VzZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI1OiAvLyBoaWRlIGN1cnNvclxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmN1cnNvckhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0ODogLy8gYWx0IHNjcmVlbiBjdXJzb3JcbiAgICAgICAgICB0aGlzLnJlc3RvcmVDdXJzb3IocGFyYW1zKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ5OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlciBjdXJzb3JcbiAgICAgICAgICAgLy8gRkFMTC1USFJPVUdIXG4gICAgICAgIGNhc2UgNDc6IC8vIG5vcm1hbCBzY3JlZW4gYnVmZmVyXG4gICAgICAgIGNhc2UgMTA0NzogLy8gbm9ybWFsIHNjcmVlbiBidWZmZXIgLSBjbGVhcmluZyBpdCBmaXJzdFxuICAgICAgICAgIC8vIEVuc3VyZSB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgaGFzIHRoZSBjb3JyZWN0IGJ1ZmZlclxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcnMuYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTtcbiAgICAgICAgICBpZiAocGFyYW1zWzBdID09PSAxMDQ5KSB7XG4gICAgICAgICAgICB0aGlzLnJlc3RvcmVDdXJzb3IocGFyYW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwucmVmcmVzaCgwLCB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSk7XG4gICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zaG93Q3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5icmFja2V0ZWRQYXN0ZU1vZGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIG0gIENoYXJhY3RlciBBdHRyaWJ1dGVzIChTR1IpLlxuICAgKiAgICAgUHMgPSAwICAtPiBOb3JtYWwgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBCb2xkLlxuICAgKiAgICAgUHMgPSAyICAtPiBGYWludCwgZGVjcmVhc2VkIGludGVuc2l0eSAoSVNPIDY0MjkpLlxuICAgKiAgICAgUHMgPSA0ICAtPiBVbmRlcmxpbmVkLlxuICAgKiAgICAgUHMgPSA1ICAtPiBCbGluayAoYXBwZWFycyBhcyBCb2xkKS5cbiAgICogICAgIFBzID0gNyAgLT4gSW52ZXJzZS5cbiAgICogICAgIFBzID0gOCAgLT4gSW52aXNpYmxlLCBpLmUuLCBoaWRkZW4gKFZUMzAwKS5cbiAgICogICAgIFBzID0gMiAyICAtPiBOb3JtYWwgKG5laXRoZXIgYm9sZCBub3IgZmFpbnQpLlxuICAgKiAgICAgUHMgPSAyIDQgIC0+IE5vdCB1bmRlcmxpbmVkLlxuICAgKiAgICAgUHMgPSAyIDUgIC0+IFN0ZWFkeSAobm90IGJsaW5raW5nKS5cbiAgICogICAgIFBzID0gMiA3ICAtPiBQb3NpdGl2ZSAobm90IGludmVyc2UpLlxuICAgKiAgICAgUHMgPSAyIDggIC0+IFZpc2libGUsIGkuZS4sIG5vdCBoaWRkZW4gKFZUMzAwKS5cbiAgICogICAgIFBzID0gMyAwICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBCbGFjay5cbiAgICogICAgIFBzID0gMyAxICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBSZWQuXG4gICAqICAgICBQcyA9IDMgMiAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gR3JlZW4uXG4gICAqICAgICBQcyA9IDMgMyAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gWWVsbG93LlxuICAgKiAgICAgUHMgPSAzIDQgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEJsdWUuXG4gICAqICAgICBQcyA9IDMgNSAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gTWFnZW50YS5cbiAgICogICAgIFBzID0gMyA2ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBDeWFuLlxuICAgKiAgICAgUHMgPSAzIDcgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFdoaXRlLlxuICAgKiAgICAgUHMgPSAzIDkgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIGRlZmF1bHQgKG9yaWdpbmFsKS5cbiAgICogICAgIFBzID0gNCAwICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBCbGFjay5cbiAgICogICAgIFBzID0gNCAxICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBSZWQuXG4gICAqICAgICBQcyA9IDQgMiAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gR3JlZW4uXG4gICAqICAgICBQcyA9IDQgMyAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gWWVsbG93LlxuICAgKiAgICAgUHMgPSA0IDQgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEJsdWUuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gTWFnZW50YS5cbiAgICogICAgIFBzID0gNCA2ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBDeWFuLlxuICAgKiAgICAgUHMgPSA0IDcgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFdoaXRlLlxuICAgKiAgICAgUHMgPSA0IDkgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIGRlZmF1bHQgKG9yaWdpbmFsKS5cbiAgICpcbiAgICogICBJZiAxNi1jb2xvciBzdXBwb3J0IGlzIGNvbXBpbGVkLCB0aGUgZm9sbG93aW5nIGFwcGx5LiAgQXNzdW1lXG4gICAqICAgdGhhdCB4dGVybSdzIHJlc291cmNlcyBhcmUgc2V0IHNvIHRoYXQgdGhlIElTTyBjb2xvciBjb2RlcyBhcmVcbiAgICogICB0aGUgZmlyc3QgOCBvZiBhIHNldCBvZiAxNi4gIFRoZW4gdGhlIGFpeHRlcm0gY29sb3JzIGFyZSB0aGVcbiAgICogICBicmlnaHQgdmVyc2lvbnMgb2YgdGhlIElTTyBjb2xvcnM6XG4gICAqICAgICBQcyA9IDkgMCAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gQmxhY2suXG4gICAqICAgICBQcyA9IDkgMSAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gUmVkLlxuICAgKiAgICAgUHMgPSA5IDIgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEdyZWVuLlxuICAgKiAgICAgUHMgPSA5IDMgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFllbGxvdy5cbiAgICogICAgIFBzID0gOSA0ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBCbHVlLlxuICAgKiAgICAgUHMgPSA5IDUgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIE1hZ2VudGEuXG4gICAqICAgICBQcyA9IDkgNiAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gQ3lhbi5cbiAgICogICAgIFBzID0gOSA3ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBXaGl0ZS5cbiAgICogICAgIFBzID0gMSAwIDAgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEJsYWNrLlxuICAgKiAgICAgUHMgPSAxIDAgMSAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gUmVkLlxuICAgKiAgICAgUHMgPSAxIDAgMiAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gR3JlZW4uXG4gICAqICAgICBQcyA9IDEgMCAzICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBZZWxsb3cuXG4gICAqICAgICBQcyA9IDEgMCA0ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBCbHVlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gTWFnZW50YS5cbiAgICogICAgIFBzID0gMSAwIDYgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEN5YW4uXG4gICAqICAgICBQcyA9IDEgMCA3ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBXaGl0ZS5cbiAgICpcbiAgICogICBJZiB4dGVybSBpcyBjb21waWxlZCB3aXRoIHRoZSAxNi1jb2xvciBzdXBwb3J0IGRpc2FibGVkLCBpdFxuICAgKiAgIHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcsIGZyb20gcnh2dDpcbiAgICogICAgIFBzID0gMSAwIDAgIC0+IFNldCBmb3JlZ3JvdW5kIGFuZCBiYWNrZ3JvdW5kIGNvbG9yIHRvXG4gICAqICAgICBkZWZhdWx0LlxuICAgKlxuICAgKiAgIElmIDg4LSBvciAyNTYtY29sb3Igc3VwcG9ydCBpcyBjb21waWxlZCwgdGhlIGZvbGxvd2luZyBhcHBseS5cbiAgICogICAgIFBzID0gMyA4ICA7IDUgIDsgUHMgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gdGhlIHNlY29uZFxuICAgKiAgICAgUHMuXG4gICAqICAgICBQcyA9IDQgOCAgOyA1ICA7IFBzIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRoZSBzZWNvbmRcbiAgICogICAgIFBzLlxuICAgKi9cbiAgcHVibGljIGNoYXJBdHRyaWJ1dGVzKHBhcmFtczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICAvLyBPcHRpbWl6ZSBhIHNpbmdsZSBTR1IwLlxuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAxICYmIHBhcmFtc1swXSA9PT0gMCkge1xuICAgICAgdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGEuZmcgPSBERUZBVUxUX0FUVFJfREFUQS5mZztcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmN1ckF0dHJEYXRhLmJnID0gREVGQVVMVF9BVFRSX0RBVEEuYmc7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbCA9IHBhcmFtcy5sZW5ndGg7XG4gICAgbGV0IHA7XG4gICAgY29uc3QgYXR0ciA9IHRoaXMuX3Rlcm1pbmFsLmN1ckF0dHJEYXRhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHAgPSBwYXJhbXNbaV07XG4gICAgICBpZiAocCA+PSAzMCAmJiBwIDw9IDM3KSB7XG4gICAgICAgIC8vIGZnIGNvbG9yIDhcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSAzMCk7XG4gICAgICB9IGVsc2UgaWYgKHAgPj0gNDAgJiYgcCA8PSA0Nykge1xuICAgICAgICAvLyBiZyBjb2xvciA4XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gNDApO1xuICAgICAgfSBlbHNlIGlmIChwID49IDkwICYmIHAgPD0gOTcpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgMTZcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSA5MCkgfCA4O1xuICAgICAgfSBlbHNlIGlmIChwID49IDEwMCAmJiBwIDw9IDEwNykge1xuICAgICAgICAvLyBiZyBjb2xvciAxNlxuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDEwMCkgfCA4O1xuICAgICAgfSBlbHNlIGlmIChwID09PSAwKSB7XG4gICAgICAgIC8vIGRlZmF1bHRcbiAgICAgICAgYXR0ci5mZyA9IERFRkFVTFRfQVRUUl9EQVRBLmZnO1xuICAgICAgICBhdHRyLmJnID0gREVGQVVMVF9BVFRSX0RBVEEuYmc7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDEpIHtcbiAgICAgICAgLy8gYm9sZCB0ZXh0XG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5CT0xEO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAzKSB7XG4gICAgICAgIC8vIGl0YWxpYyB0ZXh0XG4gICAgICAgIGF0dHIuYmcgfD0gQmdGbGFncy5JVEFMSUM7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDQpIHtcbiAgICAgICAgLy8gdW5kZXJsaW5lZCB0ZXh0XG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5VTkRFUkxJTkU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDUpIHtcbiAgICAgICAgLy8gYmxpbmtcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLkJMSU5LO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA3KSB7XG4gICAgICAgIC8vIGludmVyc2UgYW5kIHBvc2l0aXZlXG4gICAgICAgIC8vIHRlc3Qgd2l0aDogZWNobyAtZSAnXFxlWzMxbVxcZVs0Mm1oZWxsb1xcZVs3bXdvcmxkXFxlWzI3bWhpXFxlW20nXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5JTlZFUlNFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA4KSB7XG4gICAgICAgIC8vIGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuSU5WSVNJQkxFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyKSB7XG4gICAgICAgIC8vIGRpbW1lZCB0ZXh0XG4gICAgICAgIGF0dHIuYmcgfD0gQmdGbGFncy5ESU07XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIyKSB7XG4gICAgICAgIC8vIG5vdCBib2xkIG5vciBmYWludFxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLkJPTEQ7XG4gICAgICAgIGF0dHIuYmcgJj0gfkJnRmxhZ3MuRElNO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyMykge1xuICAgICAgICAvLyBub3QgaXRhbGljXG4gICAgICAgIGF0dHIuYmcgJj0gfkJnRmxhZ3MuSVRBTElDO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyNCkge1xuICAgICAgICAvLyBub3QgdW5kZXJsaW5lZFxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLlVOREVSTElORTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjUpIHtcbiAgICAgICAgLy8gbm90IGJsaW5rXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuQkxJTks7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI3KSB7XG4gICAgICAgIC8vIG5vdCBpbnZlcnNlXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuSU5WRVJTRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjgpIHtcbiAgICAgICAgLy8gbm90IGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLklOVklTSUJMRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMzkpIHtcbiAgICAgICAgLy8gcmVzZXQgZmdcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmZnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNDkpIHtcbiAgICAgICAgLy8gcmVzZXQgYmdcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmJnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMzgpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgMjU2XG4gICAgICAgIGlmIChwYXJhbXNbaSArIDFdID09PSAyKSB7XG4gICAgICAgICAgaSArPSAyO1xuICAgICAgICAgIGF0dHIuZmcgfD0gQXR0cmlidXRlcy5DTV9SR0I7XG4gICAgICAgICAgYXR0ci5mZyAmPSB+QXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZURhdGEuZnJvbUNvbG9yUkdCKFtwYXJhbXNbaV0sIHBhcmFtc1tpICsgMV0sIHBhcmFtc1tpICsgMl1dKTtcbiAgICAgICAgICBpICs9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAocGFyYW1zW2kgKyAxXSA9PT0gNSkge1xuICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICBwID0gcGFyYW1zW2ldICYgMHhmZjtcbiAgICAgICAgICBhdHRyLmZnICY9IH5BdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgICAgIGF0dHIuZmcgfD0gQXR0cmlidXRlcy5DTV9QMjU2IHwgcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwID09PSA0OCkge1xuICAgICAgICAvLyBiZyBjb2xvciAyNTZcbiAgICAgICAgaWYgKHBhcmFtc1tpICsgMV0gPT09IDIpIHtcbiAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgICAgICBhdHRyLmJnICY9IH5BdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlRGF0YS5mcm9tQ29sb3JSR0IoW3BhcmFtc1tpXSwgcGFyYW1zW2kgKyAxXSwgcGFyYW1zW2kgKyAyXV0pO1xuICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXNbaSArIDFdID09PSA1KSB7XG4gICAgICAgICAgaSArPSAyO1xuICAgICAgICAgIHAgPSBwYXJhbXNbaV0gJiAweGZmO1xuICAgICAgICAgIGF0dHIuYmcgJj0gfkF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1AyNTYgfCBwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDEwMCkge1xuICAgICAgICAvLyByZXNldCBmZy9iZ1xuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuZmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuYmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGVybWluYWwuZXJyb3IoJ1Vua25vd24gU0dSIGF0dHJpYnV0ZTogJWQuJywgcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBuICBEZXZpY2UgU3RhdHVzIFJlcG9ydCAoRFNSKS5cbiAgICogICAgIFBzID0gNSAgLT4gU3RhdHVzIFJlcG9ydC4gIFJlc3VsdCAoYGBPSycnKSBpc1xuICAgKiAgIENTSSAwIG5cbiAgICogICAgIFBzID0gNiAgLT4gUmVwb3J0IEN1cnNvciBQb3NpdGlvbiAoQ1BSKSBbcm93O2NvbHVtbl0uXG4gICAqICAgUmVzdWx0IGlzXG4gICAqICAgQ1NJIHIgOyBjIFJcbiAgICogQ1NJID8gUHMgblxuICAgKiAgIERldmljZSBTdGF0dXMgUmVwb3J0IChEU1IsIERFQy1zcGVjaWZpYykuXG4gICAqICAgICBQcyA9IDYgIC0+IFJlcG9ydCBDdXJzb3IgUG9zaXRpb24gKENQUikgW3Jvdztjb2x1bW5dIGFzIENTSVxuICAgKiAgICAgPyByIDsgYyBSIChhc3N1bWVzIHBhZ2UgaXMgemVybykuXG4gICAqICAgICBQcyA9IDEgNSAgLT4gUmVwb3J0IFByaW50ZXIgc3RhdHVzIGFzIENTSSA/IDEgMCAgbiAgKHJlYWR5KS5cbiAgICogICAgIG9yIENTSSA/IDEgMSAgbiAgKG5vdCByZWFkeSkuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gUmVwb3J0IFVESyBzdGF0dXMgYXMgQ1NJID8gMiAwICBuICAodW5sb2NrZWQpXG4gICAqICAgICBvciBDU0kgPyAyIDEgIG4gIChsb2NrZWQpLlxuICAgKiAgICAgUHMgPSAyIDYgIC0+IFJlcG9ydCBLZXlib2FyZCBzdGF0dXMgYXNcbiAgICogICBDU0kgPyAyIDcgIDsgIDEgIDsgIDAgIDsgIDAgIG4gIChOb3J0aCBBbWVyaWNhbikuXG4gICAqICAgVGhlIGxhc3QgdHdvIHBhcmFtZXRlcnMgYXBwbHkgdG8gVlQ0MDAgJiB1cCwgYW5kIGRlbm90ZSBrZXktXG4gICAqICAgYm9hcmQgcmVhZHkgYW5kIExLMDEgcmVzcGVjdGl2ZWx5LlxuICAgKiAgICAgUHMgPSA1IDMgIC0+IFJlcG9ydCBMb2NhdG9yIHN0YXR1cyBhc1xuICAgKiAgIENTSSA/IDUgMyAgbiAgTG9jYXRvciBhdmFpbGFibGUsIGlmIGNvbXBpbGVkLWluLCBvclxuICAgKiAgIENTSSA/IDUgMCAgbiAgTm8gTG9jYXRvciwgaWYgbm90LlxuICAgKi9cbiAgcHVibGljIGRldmljZVN0YXR1cyhwYXJhbXM6IG51bWJlcltdLCBjb2xsZWN0Pzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFjb2xsZWN0KSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtc1swXSkge1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgLy8gc3RhdHVzIHJlcG9ydFxuICAgICAgICAgIHRoaXMuX29uRGF0YS5maXJlKGAke0MwLkVTQ31bMG5gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIC8vIGN1cnNvciBwb3NpdGlvblxuICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSArIDE7XG4gICAgICAgICAgY29uc3QgeCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ICsgMTtcbiAgICAgICAgICB0aGlzLl9vbkRhdGEuZmlyZShgJHtDMC5FU0N9WyR7eX07JHt4fVJgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbGxlY3QgPT09ICc/Jykge1xuICAgICAgLy8gbW9kZXJuIHh0ZXJtIGRvZXNudCBzZWVtIHRvXG4gICAgICAvLyByZXNwb25kIHRvIGFueSBvZiB0aGVzZSBleGNlcHQgPzYsIDYsIGFuZCA1XG4gICAgICBzd2l0Y2ggKHBhcmFtc1swXSkge1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgLy8gY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgICAgY29uc3QgeSA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ICsgMTtcbiAgICAgICAgICBjb25zdCB4ID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnggKyAxO1xuICAgICAgICAgIHRoaXMuX29uRGF0YS5maXJlKGAke0MwLkVTQ31bPyR7eX07JHt4fVJgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAvLyBubyBwcmludGVyXG4gICAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzExbicpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgIC8vIGRvbnQgc3VwcG9ydCB1c2VyIGRlZmluZWQga2V5c1xuICAgICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz8yMW4nKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyNjpcbiAgICAgICAgICAvLyBub3J0aCBhbWVyaWNhbiBrZXlib2FyZFxuICAgICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz8yNzsxOzA7MG4nKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA1MzpcbiAgICAgICAgICAvLyBubyBkZWMgbG9jYXRvci9tb3VzZVxuICAgICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz81MG4nKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJICEgcCAgIFNvZnQgdGVybWluYWwgcmVzZXQgKERFQ1NUUikuXG4gICAqIGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTQtMTAuaHRtbFxuICAgKi9cbiAgcHVibGljIHNvZnRSZXNldChwYXJhbXM6IG51bWJlcltdLCBjb2xsZWN0Pzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGNvbGxlY3QgPT09ICchJykge1xuICAgICAgdGhpcy5fdGVybWluYWwuY3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5vcmlnaW5Nb2RlID0gZmFsc2U7XG4gICAgICB0aGlzLl90ZXJtaW5hbC53cmFwYXJvdW5kTW9kZSA9IHRydWU7ICAvLyBkZWZhdWx0czogeHRlcm0gLSB0cnVlLCB2dDEwMCAtIGZhbHNlXG4gICAgICB0aGlzLl90ZXJtaW5hbC5hcHBsaWNhdGlvbktleXBhZCA9IGZhbHNlOyAvLyA/XG4gICAgICBpZiAodGhpcy5fdGVybWluYWwudmlld3BvcnQpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmFwcGxpY2F0aW9uQ3Vyc29yID0gZmFsc2U7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2Nyb2xsVG9wID0gMDtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5zY3JvbGxCb3R0b20gPSB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmN1ckF0dHJEYXRhID0gREVGQVVMVF9BVFRSX0RBVEE7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ID0gMDsgLy8gP1xuICAgICAgdGhpcy5fdGVybWluYWwuY2hhcnNldCA9IG51bGw7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5nbGV2ZWwgPSAwOyAvLyA/P1xuICAgICAgdGhpcy5fdGVybWluYWwuY2hhcnNldHMgPSBbbnVsbF07IC8vID8/XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBTUCBxICBTZXQgY3Vyc29yIHN0eWxlIChERUNTQ1VTUiwgVlQ1MjApLlxuICAgKiAgIFBzID0gMCAgLT4gYmxpbmtpbmcgYmxvY2suXG4gICAqICAgUHMgPSAxICAtPiBibGlua2luZyBibG9jayAoZGVmYXVsdCkuXG4gICAqICAgUHMgPSAyICAtPiBzdGVhZHkgYmxvY2suXG4gICAqICAgUHMgPSAzICAtPiBibGlua2luZyB1bmRlcmxpbmUuXG4gICAqICAgUHMgPSA0ICAtPiBzdGVhZHkgdW5kZXJsaW5lLlxuICAgKiAgIFBzID0gNSAgLT4gYmxpbmtpbmcgYmFyICh4dGVybSkuXG4gICAqICAgUHMgPSA2ICAtPiBzdGVhZHkgYmFyICh4dGVybSkuXG4gICAqL1xuICBwdWJsaWMgc2V0Q3Vyc29yU3R5bGUocGFyYW1zPzogbnVtYmVyW10sIGNvbGxlY3Q/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoY29sbGVjdCA9PT0gJyAnKSB7XG4gICAgICBjb25zdCBwYXJhbSA9IHBhcmFtc1swXSA8IDEgPyAxIDogcGFyYW1zWzBdO1xuICAgICAgc3dpdGNoIChwYXJhbSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZXRPcHRpb24oJ2N1cnNvclN0eWxlJywgJ2Jsb2NrJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNldE9wdGlvbignY3Vyc29yU3R5bGUnLCAndW5kZXJsaW5lJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNldE9wdGlvbignY3Vyc29yU3R5bGUnLCAnYmFyJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb25zdCBpc0JsaW5raW5nID0gcGFyYW0gJSAyID09PSAxO1xuICAgICAgdGhpcy5fdGVybWluYWwuc2V0T3B0aW9uKCdjdXJzb3JCbGluaycsIGlzQmxpbmtpbmcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyByXG4gICAqICAgU2V0IFNjcm9sbGluZyBSZWdpb24gW3RvcDtib3R0b21dIChkZWZhdWx0ID0gZnVsbCBzaXplIG9mIHdpbi1cbiAgICogICBkb3cpIChERUNTVEJNKS5cbiAgICogQ1NJID8gUG0gclxuICAgKi9cbiAgcHVibGljIHNldFNjcm9sbFJlZ2lvbihwYXJhbXM6IG51bWJlcltdLCBjb2xsZWN0Pzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGNvbGxlY3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnNjcm9sbFRvcCA9IChwYXJhbXNbMF0gfHwgMSkgLSAxO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5zY3JvbGxCb3R0b20gPSAocGFyYW1zWzFdICYmIHBhcmFtc1sxXSA8PSB0aGlzLl90ZXJtaW5hbC5yb3dzID8gcGFyYW1zWzFdIDogdGhpcy5fdGVybWluYWwucm93cykgLSAxO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54ID0gMDtcbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueSA9IDA7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgc1xuICAgKiBFU0MgN1xuICAgKiAgIFNhdmUgY3Vyc29yIChBTlNJLlNZUykuXG4gICAqL1xuICBwdWJsaWMgc2F2ZUN1cnNvcihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnNhdmVkWCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54O1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5zYXZlZFkgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueTtcbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZyA9IHRoaXMuX3Rlcm1pbmFsLmN1ckF0dHJEYXRhLmZnO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnID0gdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGEuYmc7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgdVxuICAgKiBFU0MgOFxuICAgKiAgIFJlc3RvcmUgY3Vyc29yIChBTlNJLlNZUykuXG4gICAqL1xuICBwdWJsaWMgcmVzdG9yZUN1cnNvcihwYXJhbXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnggPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2F2ZWRYIHx8IDA7XG4gICAgdGhpcy5fdGVybWluYWwuYnVmZmVyLnkgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2F2ZWRZIHx8IDA7XG4gICAgdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGEuZmcgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZztcbiAgICB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YS5iZyA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnO1xuICB9XG5cblxuICAvKipcbiAgICogT1NDIDA7IDxkYXRhPiBTVCAoc2V0IGljb24gbmFtZSArIHdpbmRvdyB0aXRsZSlcbiAgICogT1NDIDI7IDxkYXRhPiBTVCAoc2V0IHdpbmRvdyB0aXRsZSlcbiAgICogICBQcm94eSB0byBzZXQgd2luZG93IHRpdGxlLiBJY29uIG5hbWUgaXMgbm90IHN1cHBvcnRlZC5cbiAgICovXG4gIHB1YmxpYyBzZXRUaXRsZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5oYW5kbGVUaXRsZShkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgRVxuICAgKiBDMS5ORUxcbiAgICogICBERUMgbW5lbW9uaWM6IE5FTCAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ORUwpXG4gICAqICAgTW92ZXMgY3Vyc29yIHRvIGZpcnN0IHBvc2l0aW9uIG9uIG5leHQgbGluZS5cbiAgICovXG4gIHB1YmxpYyBuZXh0TGluZSgpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5idWZmZXIueCA9IDA7XG4gICAgdGhpcy5pbmRleCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyA9XG4gICAqICAgREVDIG1uZW1vbmljOiBERUNLUEFNIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0tQQU0uaHRtbClcbiAgICogICBFbmFibGVzIHRoZSBudW1lcmljIGtleXBhZCB0byBzZW5kIGFwcGxpY2F0aW9uIHNlcXVlbmNlcyB0byB0aGUgaG9zdC5cbiAgICovXG4gIHB1YmxpYyBrZXlwYWRBcHBsaWNhdGlvbk1vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwubG9nKCdTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLicpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmFwcGxpY2F0aW9uS2V5cGFkID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fdGVybWluYWwudmlld3BvcnQpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVTQyA+XG4gICAqICAgREVDIG1uZW1vbmljOiBERUNLUE5NIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0tQTk0uaHRtbClcbiAgICogICBFbmFibGVzIHRoZSBrZXlwYWQgdG8gc2VuZCBudW1lcmljIGNoYXJhY3RlcnMgdG8gdGhlIGhvc3QuXG4gICAqL1xuICBwdWJsaWMga2V5cGFkTnVtZXJpY01vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwubG9nKCdTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLicpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0KSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgJSBAXG4gICAqIEVTQyAlIEdcbiAgICogICBTZWxlY3QgZGVmYXVsdCBjaGFyYWN0ZXIgc2V0LiBVVEYtOCBpcyBub3Qgc3VwcG9ydGVkIChzdHJpbmcgYXJlIHVuaWNvZGUgYW55d2F5cylcbiAgICogICB0aGVyZWZvcmUgRVNDICUgRyBkb2VzIHRoZSBzYW1lLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdERlZmF1bHRDaGFyc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdMZXZlbCgwKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5zZXRnQ2hhcnNldCgwLCBERUZBVUxUX0NIQVJTRVQpOyAvLyBVUyAoZGVmYXVsdClcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgKCBDXG4gICAqICAgRGVzaWduYXRlIEcwIENoYXJhY3RlciBTZXQsIFZUMTAwLCBJU08gMjAyMi5cbiAgICogRVNDICkgQ1xuICAgKiAgIERlc2lnbmF0ZSBHMSBDaGFyYWN0ZXIgU2V0IChJU08gMjAyMiwgVlQxMDApLlxuICAgKiBFU0MgKiBDXG4gICAqICAgRGVzaWduYXRlIEcyIENoYXJhY3RlciBTZXQgKElTTyAyMDIyLCBWVDIyMCkuXG4gICAqIEVTQyArIENcbiAgICogICBEZXNpZ25hdGUgRzMgQ2hhcmFjdGVyIFNldCAoSVNPIDIwMjIsIFZUMjIwKS5cbiAgICogRVNDIC0gQ1xuICAgKiAgIERlc2lnbmF0ZSBHMSBDaGFyYWN0ZXIgU2V0IChWVDMwMCkuXG4gICAqIEVTQyAuIENcbiAgICogICBEZXNpZ25hdGUgRzIgQ2hhcmFjdGVyIFNldCAoVlQzMDApLlxuICAgKiBFU0MgLyBDXG4gICAqICAgRGVzaWduYXRlIEczIENoYXJhY3RlciBTZXQgKFZUMzAwKS4gQyA9IEEgIC0+IElTTyBMYXRpbi0xIFN1cHBsZW1lbnRhbC4gLSBTdXBwb3J0ZWQ/XG4gICAqL1xuICBwdWJsaWMgc2VsZWN0Q2hhcnNldChjb2xsZWN0QW5kRmxhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGNvbGxlY3RBbmRGbGFnLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhpcy5zZWxlY3REZWZhdWx0Q2hhcnNldCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29sbGVjdEFuZEZsYWdbMF0gPT09ICcvJykge1xuICAgICAgcmV0dXJuOyAgLy8gVE9ETzogSXMgdGhpcyBzdXBwb3J0ZWQ/XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdDaGFyc2V0KEdMRVZFTFtjb2xsZWN0QW5kRmxhZ1swXV0sIENIQVJTRVRTW2NvbGxlY3RBbmRGbGFnWzFdXSB8fCBERUZBVUxUX0NIQVJTRVQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgRFxuICAgKiBDMS5JTkRcbiAgICogICBERUMgbW5lbW9uaWM6IElORCAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9JTkQuaHRtbClcbiAgICogICBNb3ZlcyB0aGUgY3Vyc29yIGRvd24gb25lIGxpbmUgaW4gdGhlIHNhbWUgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGluZGV4KCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLmluZGV4KCk7ICAvLyBUT0RPOiBzYXZlIHRvIG1vdmUgZnJvbSB0ZXJtaW5hbD9cbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgSFxuICAgKiBDMS5IVFNcbiAgICogICBERUMgbW5lbW9uaWM6IEhUUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9IVFMuaHRtbClcbiAgICogICBTZXRzIGEgaG9yaXpvbnRhbCB0YWIgc3RvcCBhdCB0aGUgY29sdW1uIHBvc2l0aW9uIGluZGljYXRlZCBieVxuICAgKiAgIHRoZSB2YWx1ZSBvZiB0aGUgYWN0aXZlIGNvbHVtbiB3aGVuIHRoZSB0ZXJtaW5hbCByZWNlaXZlcyBhbiBIVFMuXG4gICAqL1xuICBwdWJsaWMgdGFiU2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLnRhYlNldCgpOyAgLy8gVE9ETzogc2F2ZSB0byBtb3ZlIGZyb20gdGVybWluYWw/XG4gIH1cblxuICAvKipcbiAgICogRVNDIE1cbiAgICogQzEuUklcbiAgICogICBERUMgbW5lbW9uaWM6IEhUU1xuICAgKiAgIE1vdmVzIHRoZSBjdXJzb3IgdXAgb25lIGxpbmUgaW4gdGhlIHNhbWUgY29sdW1uLiBJZiB0aGUgY3Vyc29yIGlzIGF0IHRoZSB0b3AgbWFyZ2luLFxuICAgKiAgIHRoZSBwYWdlIHNjcm9sbHMgZG93bi5cbiAgICovXG4gIHB1YmxpYyByZXZlcnNlSW5kZXgoKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwucmV2ZXJzZUluZGV4KCk7ICAvLyBUT0RPOiBzYXZlIHRvIG1vdmUgZnJvbSB0ZXJtaW5hbD9cbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgY1xuICAgKiAgIERFQyBtbmVtb25pYzogUklTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL1JJUy5odG1sKVxuICAgKiAgIFJlc2V0IHRvIGluaXRpYWwgc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fcGFyc2VyLnJlc2V0KCk7XG4gICAgdGhpcy5fdGVybWluYWwucmVzZXQoKTsgIC8vIFRPRE86IHNhdmUgdG8gbW92ZSBmcm9tIHRlcm1pbmFsP1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBuXG4gICAqIEVTQyBvXG4gICAqIEVTQyB8XG4gICAqIEVTQyB9XG4gICAqIEVTQyB+XG4gICAqICAgREVDIG1uZW1vbmljOiBMUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9MUy5odG1sKVxuICAgKiAgIFdoZW4geW91IHVzZSBhIGxvY2tpbmcgc2hpZnQsIHRoZSBjaGFyYWN0ZXIgc2V0IHJlbWFpbnMgaW4gR0wgb3IgR1IgdW50aWxcbiAgICogICB5b3UgdXNlIGFub3RoZXIgbG9ja2luZyBzaGlmdC4gKHBhcnRseSBzdXBwb3J0ZWQpXG4gICAqL1xuICBwdWJsaWMgc2V0Z0xldmVsKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5zZXRnTGV2ZWwobGV2ZWwpOyAgLy8gVE9ETzogc2F2ZSB0byBtb3ZlIGZyb20gdGVybWluYWw/XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxpbmtpZmllckV2ZW50LCBJTGlua01hdGNoZXIsIExpbmtNYXRjaGVySGFuZGxlciwgSUxpbmtNYXRjaGVyT3B0aW9ucywgSUxpbmtpZmllciwgSVRlcm1pbmFsLCBJQnVmZmVyU3RyaW5nSXRlcmF0b3JSZXN1bHQsIElNb3VzZVpvbmVNYW5hZ2VyIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBNb3VzZVpvbmUgfSBmcm9tICcuL01vdXNlWm9uZU1hbmFnZXInO1xuaW1wb3J0IHsgZ2V0U3RyaW5nQ2VsbFdpZHRoIH0gZnJvbSAnLi9DaGFyV2lkdGgnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyMiwgSUV2ZW50IH0gZnJvbSAnLi9jb21tb24vRXZlbnRFbWl0dGVyMic7XG5cbi8qKlxuICogVGhlIExpbmtpZmllciBhcHBsaWVzIGxpbmtzIHRvIHJvd3Mgc2hvcnRseSBhZnRlciB0aGV5IGhhdmUgYmVlbiByZWZyZXNoZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5raWZpZXIgaW1wbGVtZW50cyBJTGlua2lmaWVyIHtcbiAgLyoqXG4gICAqIFRoZSB0aW1lIHRvIHdhaXQgYWZ0ZXIgYSByb3cgaXMgY2hhbmdlZCBiZWZvcmUgaXQgaXMgbGlua2lmaWVkLiBUaGlzIHByZXZlbnRzXG4gICAqIHRoZSBjb3N0bHkgb3BlcmF0aW9uIG9mIHNlYXJjaGluZyBldmVyeSByb3cgbXVsdGlwbGUgdGltZXMsIHBvdGVudGlhbGx5IGFcbiAgICogaHVnZSBhbW91bnQgb2YgdGltZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IFRJTUVfQkVGT1JFX0xJTktJRlkgPSAyMDA7XG5cbiAgLyoqXG4gICAqIExpbWl0IG9mIHRoZSB1bndyYXBwaW5nIGxpbmUgZXhwYW5zaW9uIChvdmVyc2NhbikgYXQgdGhlIHRvcCBhbmQgYm90dG9tXG4gICAqIG9mIHRoZSBhY3R1YWwgdmlld3BvcnQgaW4gQVNDSUkgY2hhcmFjdGVycy5cbiAgICogQSBsaW1pdCBvZiAyMDAwIHNob3VsZCBtYXRjaCBtb3N0IHNhbmUgdXJscy5cbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgT1ZFUlNDQU5fQ0hBUl9MSU1JVCA9IDIwMDA7XG5cbiAgcHJvdGVjdGVkIF9saW5rTWF0Y2hlcnM6IElMaW5rTWF0Y2hlcltdID0gW107XG5cbiAgcHJpdmF0ZSBfbW91c2Vab25lTWFuYWdlcjogSU1vdXNlWm9uZU1hbmFnZXI7XG4gIHByaXZhdGUgX3Jvd3NUaW1lb3V0SWQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBfbmV4dExpbmtNYXRjaGVySWQgPSAwO1xuICBwcml2YXRlIF9yb3dzVG9MaW5raWZ5OiB7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH07XG5cbiAgcHJpdmF0ZSBfb25MaW5rSG92ZXIgPSBuZXcgRXZlbnRFbWl0dGVyMjxJTGlua2lmaWVyRXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW5rSG92ZXIoKTogSUV2ZW50PElMaW5raWZpZXJFdmVudD4geyByZXR1cm4gdGhpcy5fb25MaW5rSG92ZXIuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25MaW5rTGVhdmUgPSBuZXcgRXZlbnRFbWl0dGVyMjxJTGlua2lmaWVyRXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW5rTGVhdmUoKTogSUV2ZW50PElMaW5raWZpZXJFdmVudD4geyByZXR1cm4gdGhpcy5fb25MaW5rTGVhdmUuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25MaW5rVG9vbHRpcCA9IG5ldyBFdmVudEVtaXR0ZXIyPElMaW5raWZpZXJFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmtUb29sdGlwKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uTGlua1Rvb2x0aXAuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgX3Rlcm1pbmFsOiBJVGVybWluYWxcbiAgKSB7XG4gICAgdGhpcy5fcm93c1RvTGlua2lmeSA9IHtcbiAgICAgIHN0YXJ0OiBudWxsLFxuICAgICAgZW5kOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgbGlua2lmaWVyIHRvIHRoZSBET00sIGVuYWJsaW5nIGxpbmtpZmljYXRpb24uXG4gICAqIEBwYXJhbSBtb3VzZVpvbmVNYW5hZ2VyIFRoZSBtb3VzZSB6b25lIG1hbmFnZXIgdG8gcmVnaXN0ZXIgbGluayB6b25lcyB3aXRoLlxuICAgKi9cbiAgcHVibGljIGF0dGFjaFRvRG9tKG1vdXNlWm9uZU1hbmFnZXI6IElNb3VzZVpvbmVNYW5hZ2VyKTogdm9pZCB7XG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlciA9IG1vdXNlWm9uZU1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgbGlua2lmaWNhdGlvbiBvbiBhIHNldCBvZiByb3dzLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBsaW5raWZ5IGZyb20gKGluY2x1c2l2ZSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBsaW5raWZ5IHRvIChpbmNsdXNpdmUpLlxuICAgKi9cbiAgcHVibGljIGxpbmtpZnlSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgYXR0ZW1wdCBsaW5raWZ5IGlmIG5vdCB5ZXQgYXR0YWNoZWQgdG8gRE9NXG4gICAgaWYgKCF0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5jcmVhc2UgcmFuZ2UgdG8gbGlua2lmeVxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID0gc3RhcnQ7XG4gICAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCA9IGVuZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCA9IE1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQsIHN0YXJ0KTtcbiAgICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kID0gTWF0aC5tYXgodGhpcy5fcm93c1RvTGlua2lmeS5lbmQsIGVuZCk7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgb3V0IGFueSBleGlzdGluZyBsaW5rcyBvbiB0aGlzIHJvdyByYW5nZVxuICAgIHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuY2xlYXJBbGwoc3RhcnQsIGVuZCk7XG5cbiAgICAvLyBSZXN0YXJ0IHRpbWVyXG4gICAgaWYgKHRoaXMuX3Jvd3NUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9yb3dzVGltZW91dElkKTtcbiAgICB9XG4gICAgdGhpcy5fcm93c1RpbWVvdXRJZCA9IDxudW1iZXI+PGFueT5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2xpbmtpZnlSb3dzKCksIExpbmtpZmllci5USU1FX0JFRk9SRV9MSU5LSUZZKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5raWZpZXMgdGhlIHJvd3MgcmVxdWVzdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfbGlua2lmeVJvd3MoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93c1RpbWVvdXRJZCA9IG51bGw7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyO1xuXG4gICAgLy8gRW5zdXJlIHRoZSBzdGFydCByb3cgZXhpc3RzXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID0gYnVmZmVyLnlkaXNwICsgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydDtcbiAgICBpZiAoYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID49IGJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnZhbGlkYXRlIGJhZCBlbmQgcm93IHZhbHVlcyAoaWYgYSByZXNpemUgaGFwcGVuZWQpXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleEVuZCA9IGJ1ZmZlci55ZGlzcCArIE1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCB0aGlzLl90ZXJtaW5hbC5yb3dzKSArIDE7XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIHJhbmdlIG9mIHVud3JhcHBlZCBjb250ZW50IHN0cmluZ3Mgd2l0aGluIHN0YXJ0Li5lbmRcbiAgICAvLyAoZXhjbHVkaW5nKS5cbiAgICAvLyBfZG9MaW5raWZ5Um93IGdldHMgZnVsbCB1bndyYXBwZWQgbGluZXMgd2l0aCB0aGUgc3RhcnQgcm93IGFzIGJ1ZmZlciBvZmZzZXRcbiAgICAvLyBmb3IgZXZlcnkgbWF0Y2hlci5cbiAgICAvLyBUaGUgdW53cmFwcGluZyBpcyBuZWVkZWQgdG8gYWxzbyBtYXRjaCBjb250ZW50IHRoYXQgZ290IHdyYXBwZWQgYWNyb3NzXG4gICAgLy8gc2V2ZXJhbCBidWZmZXIgbGluZXMuIFRvIGF2b2lkIGEgd29yc3QgY2FzZSBzY2VuYXJpbyB3aGVyZSB0aGUgd2hvbGUgYnVmZmVyXG4gICAgLy8gY29udGFpbnMganVzdCBhIHNpbmdsZSB1bndyYXBwZWQgc3RyaW5nIHdlIGxpbWl0IHRoaXMgbGluZSBleHBhbnNpb24gYmV5b25kXG4gICAgLy8gdGhlIHZpZXdwb3J0IHRvICtPVkVSU0NBTl9DSEFSX0xJTUlUIGNoYXJzIChvdmVyc2NhbikgYXQgdG9wIGFuZCBib3R0b20uXG4gICAgLy8gVGhpcyBjb21lcyB3aXRoIHRoZSB0cmFkZW9mZiB0aGF0IG1hdGNoZXMgbG9uZ2VyIHRoYW4gT1ZFUlNDQU5fQ0hBUl9MSU1JVFxuICAgIC8vIGNoYXJzIHdpbGwgbm90IG1hdGNoIGFueW1vcmUgYXQgdGhlIHZpZXdwb3J0IGJvcmRlcnMuXG4gICAgY29uc3Qgb3ZlcnNjYW5MaW5lTGltaXQgPSBNYXRoLmNlaWwoTGlua2lmaWVyLk9WRVJTQ0FOX0NIQVJfTElNSVQgLyB0aGlzLl90ZXJtaW5hbC5jb2xzKTtcbiAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5pdGVyYXRvcihcbiAgICAgIGZhbHNlLCBhYnNvbHV0ZVJvd0luZGV4U3RhcnQsIGFic29sdXRlUm93SW5kZXhFbmQsIG92ZXJzY2FuTGluZUxpbWl0LCBvdmVyc2NhbkxpbmVMaW1pdCk7XG4gICAgd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkge1xuICAgICAgY29uc3QgbGluZURhdGE6IElCdWZmZXJTdHJpbmdJdGVyYXRvclJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2RvTGlua2lmeVJvdyhsaW5lRGF0YS5yYW5nZS5maXJzdCwgbGluZURhdGEuY29udGVudCwgdGhpcy5fbGlua01hdGNoZXJzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID0gbnVsbDtcbiAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyLCBhbGxvd2luZyBjdXN0b20gbGluayBwYXR0ZXJucyB0byBiZSBtYXRjaGVkIGFuZFxuICAgKiBoYW5kbGVkLlxuICAgKiBAcGFyYW0gcmVnZXggVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggZm9yLiBTcGVjaWZpY2FsbHksIHRoaXNcbiAgICogc2VhcmNoZXMgdGhlIHRleHRDb250ZW50IG9mIHRoZSByb3dzLiBZb3Ugd2lsbCB3YW50IHRvIHVzZSBcXHMgdG8gbWF0Y2ggYVxuICAgKiBzcGFjZSAnICcgY2hhcmFjdGVyIGZvciBleGFtcGxlLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgY2FsbGJhY2sgd2hlbiB0aGUgbGluayBpcyBjYWxsZWQuXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBsaW5rIG1hdGNoZXIuXG4gICAqIEByZXR1cm4gVGhlIElEIG9mIHRoZSBuZXcgbWF0Y2hlciwgdGhpcyBjYW4gYmUgdXNlZCB0byBkZXJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXg6IFJlZ0V4cCwgaGFuZGxlcjogTGlua01hdGNoZXJIYW5kbGVyLCBvcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zID0ge30pOiBudW1iZXIge1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdoYW5kbGVyIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVyOiBJTGlua01hdGNoZXIgPSB7XG4gICAgICBpZDogdGhpcy5fbmV4dExpbmtNYXRjaGVySWQrKyxcbiAgICAgIHJlZ2V4LFxuICAgICAgaGFuZGxlcixcbiAgICAgIG1hdGNoSW5kZXg6IG9wdGlvbnMubWF0Y2hJbmRleCxcbiAgICAgIHZhbGlkYXRpb25DYWxsYmFjazogb3B0aW9ucy52YWxpZGF0aW9uQ2FsbGJhY2ssXG4gICAgICBob3ZlclRvb2x0aXBDYWxsYmFjazogb3B0aW9ucy50b29sdGlwQ2FsbGJhY2ssXG4gICAgICBob3ZlckxlYXZlQ2FsbGJhY2s6IG9wdGlvbnMubGVhdmVDYWxsYmFjayxcbiAgICAgIHdpbGxMaW5rQWN0aXZhdGU6IG9wdGlvbnMud2lsbExpbmtBY3RpdmF0ZSxcbiAgICAgIHByaW9yaXR5OiBvcHRpb25zLnByaW9yaXR5IHx8IDBcbiAgICB9O1xuICAgIHRoaXMuX2FkZExpbmtNYXRjaGVyVG9MaXN0KG1hdGNoZXIpO1xuICAgIHJldHVybiBtYXRjaGVyLmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydHMgYSBsaW5rIG1hdGNoZXIgdG8gdGhlIGxpc3QgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb24gYmFzZWQgb24gdGhlXG4gICAqIHByaW9yaXR5IG9mIGVhY2ggbGluayBtYXRjaGVyLiBOZXcgbGluayBtYXRjaGVycyBvZiBlcXVhbCBwcmlvcml0eSBhcmVcbiAgICogY29uc2lkZXJlZCBhZnRlciBvbGRlciBsaW5rIG1hdGNoZXJzLlxuICAgKiBAcGFyYW0gbWF0Y2hlciBUaGUgbGluayBtYXRjaGVyIHRvIGJlIGFkZGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkTGlua01hdGNoZXJUb0xpc3QobWF0Y2hlcjogSUxpbmtNYXRjaGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5wdXNoKG1hdGNoZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSB0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmIChtYXRjaGVyLnByaW9yaXR5IDw9IHRoaXMuX2xpbmtNYXRjaGVyc1tpXS5wcmlvcml0eSkge1xuICAgICAgICB0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKGkgKyAxLCAwLCBtYXRjaGVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoMCwgMCwgbWF0Y2hlcik7XG4gIH1cblxuICAvKipcbiAgICogRGVyZWdpc3RlcnMgYSBsaW5rIG1hdGNoZXIgaWYgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICogQHBhcmFtIG1hdGNoZXJJZCBUaGUgbGluayBtYXRjaGVyJ3MgSUQgKHJldHVybmVkIGFmdGVyIHJlZ2lzdGVyKVxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSBsaW5rIG1hdGNoZXIgd2FzIGZvdW5kIGFuZCBkZXJlZ2lzdGVyZWQuXG4gICAqL1xuICBwdWJsaWMgZGVyZWdpc3RlckxpbmtNYXRjaGVyKG1hdGNoZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9saW5rTWF0Y2hlcnNbaV0uaWQgPT09IG1hdGNoZXJJZCkge1xuICAgICAgICB0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbmtpZmllcyBhIHJvdyBnaXZlbiBhIHNwZWNpZmljIGhhbmRsZXIuXG4gICAqIEBwYXJhbSByb3dJbmRleCBUaGUgcm93IGluZGV4IHRvIGxpbmtpZnkgKGFic29sdXRlIGluZGV4KS5cbiAgICogQHBhcmFtIHRleHQgc3RyaW5nIGNvbnRlbnQgb2YgdGhlIHVud3JhcHBlZCByb3cuXG4gICAqIEBwYXJhbSBtYXRjaGVyIFRoZSBsaW5rIG1hdGNoZXIgZm9yIHRoaXMgbGluZS5cbiAgICovXG4gIHByaXZhdGUgX2RvTGlua2lmeVJvdyhyb3dJbmRleDogbnVtYmVyLCB0ZXh0OiBzdHJpbmcsIG1hdGNoZXI6IElMaW5rTWF0Y2hlcik6IHZvaWQge1xuICAgIC8vIGNsb25lIHJlZ2V4IHRvIGRvIGEgZ2xvYmFsIHNlYXJjaCBvbiB0ZXh0XG4gICAgY29uc3QgcmV4ID0gbmV3IFJlZ0V4cChtYXRjaGVyLnJlZ2V4LnNvdXJjZSwgbWF0Y2hlci5yZWdleC5mbGFncyArICdnJyk7XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCBzdHJpbmdJbmRleCA9IC0xO1xuICAgIHdoaWxlICgobWF0Y2ggPSByZXguZXhlYyh0ZXh0KSkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHVyaSA9IG1hdGNoW3R5cGVvZiBtYXRjaGVyLm1hdGNoSW5kZXggIT09ICdudW1iZXInID8gMCA6IG1hdGNoZXIubWF0Y2hJbmRleF07XG4gICAgICBpZiAoIXVyaSkge1xuICAgICAgICAvLyBzb21ldGhpbmcgbWF0Y2hlZCBidXQgZG9lcyBub3QgY29tcGx5IHdpdGggdGhlIGdpdmVuIG1hdGNoSW5kZXhcbiAgICAgICAgLy8gc2luY2UgdGhpcyBpcyBtb3N0IGxpa2VseSBhIGJ1ZyB0aGUgcmVnZXggaXRzZWxmIHdlIHNpbXBseSBkbyBub3RoaW5nIGhlcmVcbiAgICAgICAgLy8gREVCVUc6IHByaW50IG1hdGNoIGFuZCB0aHJvd1xuICAgICAgICBpZiAoKDxhbnk+dGhpcy5fdGVybWluYWwpLmRlYnVnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coe21hdGNoLCBtYXRjaGVyfSk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXRjaCBmb3VuZCB3aXRob3V0IGNvcnJlc3BvbmRpbmcgbWF0Y2hJbmRleCcpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgaW5kZXgsIG1hdGNoLmluZGV4IGlzIGZvciB0aGUgb3V0ZXIgbWF0Y2ggd2hpY2ggaW5jbHVkZXMgbmVnYXRlZCBjaGFyc1xuICAgICAgLy8gdGhlcmVmb3JlIHdlIGNhbm5vdCB1c2UgbWF0Y2guaW5kZXggZGlyZWN0bHksIGluc3RlYWQgd2Ugc2VhcmNoIHRoZSBwb3NpdGlvblxuICAgICAgLy8gb2YgdGhlIG1hdGNoIGdyb3VwIGluIHRleHQgYWdhaW5cbiAgICAgIC8vIGFsc28gY29ycmVjdCByZWdleCBhbmQgc3RyaW5nIHNlYXJjaCBvZmZzZXRzIGZvciB0aGUgbmV4dCBsb29wIHJ1blxuICAgICAgc3RyaW5nSW5kZXggPSB0ZXh0LmluZGV4T2YodXJpLCBzdHJpbmdJbmRleCArIDEpO1xuICAgICAgcmV4Lmxhc3RJbmRleCA9IHN0cmluZ0luZGV4ICsgdXJpLmxlbmd0aDtcbiAgICAgIGlmIChzdHJpbmdJbmRleCA8IDApIHtcbiAgICAgICAgLy8gaW52YWxpZCBzdHJpbmdJbmRleCAoc2hvdWxkIG5vdCBoYXZlIGhhcHBlbmVkKVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gZ2V0IHRoZSBidWZmZXIgaW5kZXggYXMgW2Fic29sdXRlIHJvdywgY29sXSBmb3IgdGhlIG1hdGNoXG4gICAgICBjb25zdCBidWZmZXJJbmRleCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXgocm93SW5kZXgsIHN0cmluZ0luZGV4KTtcbiAgICAgIGlmIChidWZmZXJJbmRleFswXSA8IDApIHtcbiAgICAgICAgLy8gaW52YWxpZCBidWZmZXJJbmRleCAoc2hvdWxkIG5vdCBoYXZlIGhhcHBlbmVkKVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVySW5kZXhbMF0pO1xuICAgICAgY29uc3QgYXR0ciA9IGxpbmUuZ2V0RmcoYnVmZmVySW5kZXhbMV0pO1xuICAgICAgbGV0IGZnOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgICBpZiAoYXR0cikge1xuICAgICAgICBmZyA9IChhdHRyID4+IDkpICYgMHgxZmY7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXRjaGVyLnZhbGlkYXRpb25DYWxsYmFjaykge1xuICAgICAgICBtYXRjaGVyLnZhbGlkYXRpb25DYWxsYmFjayh1cmksIGlzVmFsaWQgPT4ge1xuICAgICAgICAgIC8vIERpc2NhcmQgbGluayBpZiB0aGUgbGluZSBoYXMgYWxyZWFkeSBjaGFuZ2VkXG4gICAgICAgICAgaWYgKHRoaXMuX3Jvd3NUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmsoYnVmZmVySW5kZXhbMV0sIGJ1ZmZlckluZGV4WzBdIC0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnlkaXNwLCB1cmksIG1hdGNoZXIsIGZnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkTGluayhidWZmZXJJbmRleFsxXSwgYnVmZmVySW5kZXhbMF0gLSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueWRpc3AsIHVyaSwgbWF0Y2hlciwgZmcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBsaW5rIHRvIHRoZSBtb3VzZSB6b25lIG1hbmFnZXIuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdGhlIGxpbmsgc3RhcnRzLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRoZSBsaW5rIGlzIG9uLlxuICAgKiBAcGFyYW0gdXJpIFRoZSBVUkkgb2YgdGhlIGxpbmsuXG4gICAqIEBwYXJhbSBtYXRjaGVyIFRoZSBsaW5rIG1hdGNoZXIgZm9yIHRoZSBsaW5rLlxuICAgKiBAcGFyYW0gZmcgVGhlIGxpbmsgY29sb3IgZm9yIGhvdmVyIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkTGluayh4OiBudW1iZXIsIHk6IG51bWJlciwgdXJpOiBzdHJpbmcsIG1hdGNoZXI6IElMaW5rTWF0Y2hlciwgZmc6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHdpZHRoID0gZ2V0U3RyaW5nQ2VsbFdpZHRoKHVyaSk7XG4gICAgY29uc3QgeDEgPSB4ICUgdGhpcy5fdGVybWluYWwuY29scztcbiAgICBjb25zdCB5MSA9IHkgKyBNYXRoLmZsb29yKHggLyB0aGlzLl90ZXJtaW5hbC5jb2xzKTtcbiAgICBsZXQgeDIgPSAoeDEgKyB3aWR0aCkgJSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgIGxldCB5MiA9IHkxICsgTWF0aC5mbG9vcigoeDEgKyB3aWR0aCkgLyB0aGlzLl90ZXJtaW5hbC5jb2xzKTtcbiAgICBpZiAoeDIgPT09IDApIHtcbiAgICAgIHgyID0gdGhpcy5fdGVybWluYWwuY29scztcbiAgICAgIHkyLS07XG4gICAgfVxuXG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlci5hZGQobmV3IE1vdXNlWm9uZShcbiAgICAgIHgxICsgMSxcbiAgICAgIHkxICsgMSxcbiAgICAgIHgyICsgMSxcbiAgICAgIHkyICsgMSxcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAobWF0Y2hlci5oYW5kbGVyKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXIuaGFuZGxlcihlLCB1cmkpO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5vcGVuKHVyaSwgJ19ibGFuaycpO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5fb25MaW5rSG92ZXIuZmlyZSh0aGlzLl9jcmVhdGVMaW5rSG92ZXJFdmVudCh4MSwgeTEsIHgyLCB5MiwgZmcpKTtcbiAgICAgICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS1jdXJzb3ItcG9pbnRlcicpO1xuICAgICAgfSxcbiAgICAgIGUgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpbmtUb29sdGlwLmZpcmUodGhpcy5fY3JlYXRlTGlua0hvdmVyRXZlbnQoeDEsIHkxLCB4MiwgeTIsIGZnKSk7XG4gICAgICAgIGlmIChtYXRjaGVyLmhvdmVyVG9vbHRpcENhbGxiYWNrKSB7XG4gICAgICAgICAgbWF0Y2hlci5ob3ZlclRvb2x0aXBDYWxsYmFjayhlLCB1cmkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLl9vbkxpbmtMZWF2ZS5maXJlKHRoaXMuX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KHgxLCB5MSwgeDIsIHkyLCBmZykpO1xuICAgICAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3h0ZXJtLWN1cnNvci1wb2ludGVyJyk7XG4gICAgICAgIGlmIChtYXRjaGVyLmhvdmVyTGVhdmVDYWxsYmFjaykge1xuICAgICAgICAgIG1hdGNoZXIuaG92ZXJMZWF2ZUNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlID0+IHtcbiAgICAgICAgaWYgKG1hdGNoZXIud2lsbExpbmtBY3RpdmF0ZSkge1xuICAgICAgICAgIHJldHVybiBtYXRjaGVyLndpbGxMaW5rQWN0aXZhdGUoZSwgdXJpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICApKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJTGlua2lmaWVyRXZlbnQge1xuICAgIHJldHVybiB7IHgxLCB5MSwgeDIsIHkyLCBjb2xzOiB0aGlzLl90ZXJtaW5hbC5jb2xzLCBmZyB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyTWVhc3VyZSwgSU1vdXNlSGVscGVyIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVyL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIE1vdXNlSGVscGVyIGltcGxlbWVudHMgSU1vdXNlSGVscGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfcmVuZGVyZXI6IElSZW5kZXJlcikge31cblxuICBwdWJsaWMgc2V0UmVuZGVyZXIocmVuZGVyZXI6IElSZW5kZXJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50KGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9LCBlbGVtZW50OiBIVE1MRWxlbWVudCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiBbZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCwgZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNvb3JkaW5hdGVzIHdpdGhpbiB0aGUgdGVybWluYWwgZm9yIGEgcGFydGljdWxhciBtb3VzZSBldmVudC4gVGhlIHJlc3VsdFxuICAgKiBpcyByZXR1cm5lZCBhcyBhbiBhcnJheSBpbiB0aGUgZm9ybSBbeCwgeV0gaW5zdGVhZCBvZiBhbiBvYmplY3QgYXMgaXQncyBhXG4gICAqIGxpdHRsZSBmYXN0ZXIgYW5kIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCBpbiBzb21lIGxvdyBsZXZlbCBjb2RlLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgdGVybWluYWwncyBjb250YWluZXIgZWxlbWVudC5cbiAgICogQHBhcmFtIGNoYXJNZWFzdXJlIFRoZSBjaGFyIG1lYXN1cmUgb2JqZWN0IHVzZWQgdG8gZGV0ZXJtaW5lIGNoYXJhY3RlciBzaXplcy5cbiAgICogQHBhcmFtIGNvbENvdW50IFRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSByb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJvd3MgbiB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBpc1NlbGVjdGlvbiBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2VsZWN0aW9uIG9yIG5vdC4gVGhpcyB3aWxsXG4gICAqIGFwcGx5IGFuIG9mZnNldCB0byB0aGUgeCB2YWx1ZSBzdWNoIHRoYXQgdGhlIGxlZnQgaGFsZiBvZiB0aGUgY2VsbCB3aWxsXG4gICAqIHNlbGVjdCB0aGF0IGNlbGwgYW5kIHRoZSByaWdodCBoYWxmIHdpbGwgc2VsZWN0IHRoZSBuZXh0IGNlbGwuXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29vcmRzKGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY2hhck1lYXN1cmU6IElDaGFyTWVhc3VyZSwgY29sQ291bnQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlciwgaXNTZWxlY3Rpb24/OiBib29sZWFuKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgLy8gQ29vcmRpbmF0ZXMgY2Fubm90IGJlIG1lYXN1cmVkIGlmIGNoYXJNZWFzdXJlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZFxuICAgIGlmICghY2hhck1lYXN1cmUud2lkdGggfHwgIWNoYXJNZWFzdXJlLmhlaWdodCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgY29vcmRzID0gTW91c2VIZWxwZXIuZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQoZXZlbnQsIGVsZW1lbnQpO1xuICAgIGlmICghY29vcmRzKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb29yZHNbMF0gPSBNYXRoLmNlaWwoKGNvb3Jkc1swXSArIChpc1NlbGVjdGlvbiA/IHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoIC8gMiA6IDApKSAvIHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKTtcbiAgICBjb29yZHNbMV0gPSBNYXRoLmNlaWwoY29vcmRzWzFdIC8gdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KTtcblxuICAgIC8vIEVuc3VyZSBjb29yZGluYXRlcyBhcmUgd2l0aGluIHRoZSB0ZXJtaW5hbCB2aWV3cG9ydC4gTm90ZSB0aGF0IHNlbGVjdGlvbnNcbiAgICAvLyBuZWVkIGFuIGFkZGl0aW9uIHBvaW50IG9mIHByZWNpc2lvbiB0byBjb3ZlciB0aGUgZW5kIHBvaW50IChhcyBjaGFyYWN0ZXJzXG4gICAgLy8gY292ZXIgaGFsZiBvZiBvbmUgY2hhciBhbmQgaGFsZiBvZiB0aGUgbmV4dCkuXG4gICAgY29vcmRzWzBdID0gTWF0aC5taW4oTWF0aC5tYXgoY29vcmRzWzBdLCAxKSwgY29sQ291bnQgKyAoaXNTZWxlY3Rpb24gPyAxIDogMCkpO1xuICAgIGNvb3Jkc1sxXSA9IE1hdGgubWluKE1hdGgubWF4KGNvb3Jkc1sxXSwgMSksIHJvd0NvdW50KTtcblxuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBjb29yZGluYXRlcyB3aXRoaW4gdGhlIHRlcm1pbmFsIGZvciBhIHBhcnRpY3VsYXIgbW91c2UgZXZlbnQsIHdyYXBwaW5nXG4gICAqIHRoZW0gdG8gdGhlIGJvdW5kcyBvZiB0aGUgdGVybWluYWwgYW5kIGFkZGluZyAzMiB0byBib3RoIHRoZSB4IGFuZCB5IHZhbHVlc1xuICAgKiBhcyBleHBlY3RlZCBieSB4dGVybS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICogQHBhcmFtIGVsZW1lbnQgVGhlIHRlcm1pbmFsJ3MgY29udGFpbmVyIGVsZW1lbnQuXG4gICAqIEBwYXJhbSBjaGFyTWVhc3VyZSBUaGUgY2hhciBtZWFzdXJlIG9iamVjdCB1c2VkIHRvIGRldGVybWluZSBjaGFyYWN0ZXIgc2l6ZXMuXG4gICAqIEBwYXJhbSBjb2xDb3VudCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gcm93Q291bnQgVGhlIG51bWJlciBvZiByb3dzIGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBnZXRSYXdCeXRlQ29vcmRzKGV2ZW50OiBNb3VzZUV2ZW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY2hhck1lYXN1cmU6IElDaGFyTWVhc3VyZSwgY29sQ291bnQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlcik6IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5nZXRDb29yZHMoZXZlbnQsIGVsZW1lbnQsIGNoYXJNZWFzdXJlLCBjb2xDb3VudCwgcm93Q291bnQpO1xuICAgIGxldCB4ID0gY29vcmRzWzBdO1xuICAgIGxldCB5ID0gY29vcmRzWzFdO1xuXG4gICAgLy8geHRlcm0gc2VuZHMgcmF3IGJ5dGVzIGFuZCBzdGFydHMgYXQgMzIgKFNQKSBmb3IgZWFjaC5cbiAgICB4ICs9IDMyO1xuICAgIHkgKz0gMzI7XG5cbiAgICByZXR1cm4geyB4LCB5IH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsLCBJTW91c2Vab25lTWFuYWdlciwgSU1vdXNlWm9uZSB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4vY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICcuL3VpL0xpZmVjeWNsZSc7XG5cbmNvbnN0IEhPVkVSX0RVUkFUSU9OID0gNTAwO1xuXG4vKipcbiAqIFRoZSBNb3VzZVpvbmVNYW5hZ2VyIGFsbG93cyBjb21wb25lbnRzIHRvIHJlZ2lzdGVyIHpvbmVzIHdpdGhpbiB0aGUgdGVybWluYWxcbiAqIHRoYXQgdHJpZ2dlciBob3ZlciBhbmQgY2xpY2sgY2FsbGJhY2tzLlxuICpcbiAqIFRoaXMgY2xhc3Mgd2FzIGludGVudGlvbmFsbHkgbWFkZSBub3Qgc28gcm9idXN0IGluaXRpYWxseSBhcyB0aGUgb25seSBjYXNlIGl0XG4gKiBuZWVkZWQgdG8gc3VwcG9ydCB3YXMgc2luZ2xlLWxpbmUgbGlua3Mgd2hpY2ggbmV2ZXIgb3ZlcmxhcC4gSW1wcm92ZW1lbnRzIGNhblxuICogYmUgbWFkZSBpbiB0aGUgZnV0dXJlLlxuICovXG5leHBvcnQgY2xhc3MgTW91c2Vab25lTWFuYWdlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJTW91c2Vab25lTWFuYWdlciB7XG4gIHByaXZhdGUgX3pvbmVzOiBJTW91c2Vab25lW10gPSBbXTtcblxuICBwcml2YXRlIF9hcmVab25lc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9tb3VzZU1vdmVMaXN0ZW5lcjogKGU6IE1vdXNlRXZlbnQpID0+IGFueTtcbiAgcHJpdmF0ZSBfbW91c2VMZWF2ZUxpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIF9jbGlja0xpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuXG4gIHByaXZhdGUgX3Rvb2x0aXBUaW1lb3V0OiBudW1iZXIgPSBudWxsO1xuICBwcml2YXRlIF9jdXJyZW50Wm9uZTogSU1vdXNlWm9uZSA9IG51bGw7XG4gIHByaXZhdGUgX2xhc3RIb3ZlckNvb3JkczogW251bWJlciwgbnVtYmVyXSA9IFtudWxsLCBudWxsXTtcbiAgcHJpdmF0ZSBfaW5pdGlhbFNlbGVjdGlvbkxlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3Rlcm1pbmFsOiBJVGVybWluYWxcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQsICdtb3VzZWRvd24nLCBlID0+IHRoaXMuX29uTW91c2VEb3duKGUpKSk7XG5cbiAgICAvLyBUaGVzZSBldmVudHMgYXJlIGV4cGVuc2l2ZSwgb25seSBsaXN0ZW4gdG8gaXQgd2hlbiBtb3VzZSB6b25lcyBhcmUgYWN0aXZlXG4gICAgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uTW91c2VNb3ZlKGUpO1xuICAgIHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Nb3VzZUxlYXZlKGUpO1xuICAgIHRoaXMuX2NsaWNrTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uQ2xpY2soZSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICB9XG5cbiAgcHVibGljIGFkZCh6b25lOiBJTW91c2Vab25lKTogdm9pZCB7XG4gICAgdGhpcy5fem9uZXMucHVzaCh6b25lKTtcbiAgICBpZiAodGhpcy5fem9uZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbGVhckFsbChzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRXhpdCBpZiB0aGVyZSdzIG5vdGhpbmcgdG8gY2xlYXJcbiAgICBpZiAodGhpcy5fem9uZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgYWxsIGlmIHN0YXJ0L2VuZCB3ZXJlbid0IHNldFxuICAgIGlmICghZW5kKSB7XG4gICAgICBzdGFydCA9IDA7XG4gICAgICBlbmQgPSB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMTtcbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggem9uZXMgYW5kIGNsZWFyIHRoZW0gb3V0IGlmIHRoZXkncmUgd2l0aGluIHRoZSByYW5nZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fem9uZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHpvbmUgPSB0aGlzLl96b25lc1tpXTtcbiAgICAgIGlmICgoem9uZS55MSA+IHN0YXJ0ICYmIHpvbmUueTEgPD0gZW5kICsgMSkgfHxcbiAgICAgICAgICAoem9uZS55MiA+IHN0YXJ0ICYmIHpvbmUueTIgPD0gZW5kICsgMSkgfHxcbiAgICAgICAgICAoem9uZS55MSA8IHN0YXJ0ICYmIHpvbmUueTIgPiBlbmQgKyAxKSkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudFpvbmUgJiYgdGhpcy5fY3VycmVudFpvbmUgPT09IHpvbmUpIHtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgdGhpcy5fY3VycmVudFpvbmUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3pvbmVzLnNwbGljZShpLS0sIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlYWN0aXZhdGUgdGhlIG1vdXNlIHpvbmUgbWFuYWdlciBpZiBhbGwgdGhlIHpvbmVzIGhhdmUgYmVlbiByZW1vdmVkXG4gICAgaWYgKHRoaXMuX3pvbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2FjdGl2YXRlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYXJlWm9uZXNBY3RpdmUpIHtcbiAgICAgIHRoaXMuX2FyZVpvbmVzQWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0xpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9kZWFjdGl2YXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hcmVab25lc0FjdGl2ZSkge1xuICAgICAgdGhpcy5fYXJlWm9uZXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0xpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbk1vdXNlTW92ZShlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gVE9ETzogSWRlYWxseSB0aGlzIHdvdWxkIG9ubHkgY2xlYXIgdGhlIGhvdmVyIHN0YXRlIHdoZW4gdGhlIG1vdXNlIG1vdmVzXG4gICAgLy8gb3V0c2lkZSBvZiB0aGUgbW91c2Ugem9uZVxuICAgIGlmICh0aGlzLl9sYXN0SG92ZXJDb29yZHNbMF0gIT09IGUucGFnZVggfHwgdGhpcy5fbGFzdEhvdmVyQ29vcmRzWzFdICE9PSBlLnBhZ2VZKSB7XG4gICAgICB0aGlzLl9vbkhvdmVyKGUpO1xuICAgICAgLy8gUmVjb3JkIHRoZSBjdXJyZW50IGNvb3JkaW5hdGVzXG4gICAgICB0aGlzLl9sYXN0SG92ZXJDb29yZHMgPSBbZS5wYWdlWCwgZS5wYWdlWV07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25Ib3ZlcihlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3Qgem9uZSA9IHRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlIHpvbmUgaXMgdGhlIHNhbWVcbiAgICBpZiAoem9uZSA9PT0gdGhpcy5fY3VycmVudFpvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGaXJlIHRoZSBob3ZlciBlbmQgY2FsbGJhY2sgYW5kIGNhbmNlbCBhbnkgZXhpc3RpbmcgdGltZXIgaWYgYSBuZXcgem9uZVxuICAgIC8vIGlzIGJlaW5nIGhvdmVyZWRcbiAgICBpZiAodGhpcy5fY3VycmVudFpvbmUpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKTtcbiAgICAgIHRoaXMuX2N1cnJlbnRab25lID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLl90b29sdGlwVGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4aXQgaWYgdGhlcmUgaXMgbm90IHpvbmVcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY3VycmVudFpvbmUgPSB6b25lO1xuXG4gICAgLy8gVHJpZ2dlciB0aGUgaG92ZXIgY2FsbGJhY2tcbiAgICBpZiAoem9uZS5ob3ZlckNhbGxiYWNrKSB7XG4gICAgICB6b25lLmhvdmVyQ2FsbGJhY2soZSk7XG4gICAgfVxuXG4gICAgLy8gUmVzdGFydCB0aGUgdG9vbHRpcCB0aW1lb3V0XG4gICAgdGhpcy5fdG9vbHRpcFRpbWVvdXQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB0aGlzLl9vblRvb2x0aXAoZSksIEhPVkVSX0RVUkFUSU9OKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uVG9vbHRpcChlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fdG9vbHRpcFRpbWVvdXQgPSBudWxsO1xuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG4gICAgaWYgKHpvbmUgJiYgem9uZS50b29sdGlwQ2FsbGJhY2spIHtcbiAgICAgIHpvbmUudG9vbHRpcENhbGxiYWNrKGUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VEb3duKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBTdG9yZSBjdXJyZW50IHRlcm1pbmFsIHNlbGVjdGlvbiBsZW5ndGgsIHRvIGNoZWNrIGlmIHdlJ3JlIHBlcmZvcm1pbmdcbiAgICAvLyBhIHNlbGVjdGlvbiBvcGVyYXRpb25cbiAgICB0aGlzLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoID0gdGhpcy5fdGVybWluYWwuZ2V0U2VsZWN0aW9uKCkubGVuZ3RoO1xuXG4gICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiB0aGVyZSBhcmUgbm8gem9uZXMgYWN0aXZlXG4gICAgaWYgKCF0aGlzLl9hcmVab25lc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSB6b25lLCBwcmV2ZW50IGV2ZW50IHByb3BhZ2F0aW9uIGlmIGZvdW5kIHRvIHByZXZlbnQgb3RoZXJcbiAgICAvLyBjb21wb25lbnRzIGZyb20gaGFuZGxpbmcgdGhlIG1vdXNlIGV2ZW50LlxuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG4gICAgaWYgKHpvbmUpIHtcbiAgICAgIGlmICh6b25lLndpbGxMaW5rQWN0aXZhdGUoZSkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VMZWF2ZShlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gRmlyZSB0aGUgaG92ZXIgZW5kIGNhbGxiYWNrIGFuZCBjYW5jZWwgYW55IGV4aXN0aW5nIHRpbWVyIGlmIHRoZSBtb3VzZVxuICAgIC8vIGxlYXZlcyB0aGUgdGVybWluYWwgZWxlbWVudFxuICAgIGlmICh0aGlzLl9jdXJyZW50Wm9uZSkge1xuICAgICAgdGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpO1xuICAgICAgdGhpcy5fY3VycmVudFpvbmUgPSBudWxsO1xuICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBUaW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25DbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gRmluZCB0aGUgYWN0aXZlIHpvbmUgYW5kIGNsaWNrIGl0IGlmIGZvdW5kIGFuZCBubyBzZWxlY3Rpb24gd2FzXG4gICAgLy8gYmVpbmcgcGVyZm9ybWVkXG4gICAgY29uc3Qgem9uZSA9IHRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0aW9uTGVuZ3RoID0gdGhpcy5fdGVybWluYWwuZ2V0U2VsZWN0aW9uKCkubGVuZ3RoO1xuXG4gICAgaWYgKHpvbmUgJiYgY3VycmVudFNlbGVjdGlvbkxlbmd0aCA9PT0gdGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aCkge1xuICAgICAgem9uZS5jbGlja0NhbGxiYWNrKGUpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9maW5kWm9uZUV2ZW50QXQoZTogTW91c2VFdmVudCk6IElNb3VzZVpvbmUge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX3Rlcm1pbmFsLm1vdXNlSGVscGVyLmdldENvb3JkcyhlLCB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LCB0aGlzLl90ZXJtaW5hbC5jaGFyTWVhc3VyZSwgdGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgaWYgKCFjb29yZHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB4ID0gY29vcmRzWzBdO1xuICAgIGNvbnN0IHkgPSBjb29yZHNbMV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl96b25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgem9uZSA9IHRoaXMuX3pvbmVzW2ldO1xuICAgICAgaWYgKHpvbmUueTEgPT09IHpvbmUueTIpIHtcbiAgICAgICAgLy8gU2luZ2xlIGxpbmUgbGlua1xuICAgICAgICBpZiAoeSA9PT0gem9uZS55MSAmJiB4ID49IHpvbmUueDEgJiYgeCA8IHpvbmUueDIpIHtcbiAgICAgICAgICByZXR1cm4gem9uZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTXVsdGktbGluZSBsaW5rXG4gICAgICAgIGlmICgoeSA9PT0gem9uZS55MSAmJiB4ID49IHpvbmUueDEpIHx8XG4gICAgICAgICAgICAoeSA9PT0gem9uZS55MiAmJiB4IDwgem9uZS54MikgfHxcbiAgICAgICAgICAgICh5ID4gem9uZS55MSAmJiB5IDwgem9uZS55MikpIHtcbiAgICAgICAgICByZXR1cm4gem9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW91c2Vab25lIGltcGxlbWVudHMgSU1vdXNlWm9uZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB4MTogbnVtYmVyLFxuICAgIHB1YmxpYyB5MTogbnVtYmVyLFxuICAgIHB1YmxpYyB4MjogbnVtYmVyLFxuICAgIHB1YmxpYyB5MjogbnVtYmVyLFxuICAgIHB1YmxpYyBjbGlja0NhbGxiYWNrOiAoZTogTW91c2VFdmVudCkgPT4gYW55LFxuICAgIHB1YmxpYyBob3ZlckNhbGxiYWNrOiAoZTogTW91c2VFdmVudCkgPT4gYW55LFxuICAgIHB1YmxpYyB0b29sdGlwQ2FsbGJhY2s6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnksXG4gICAgcHVibGljIGxlYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQsXG4gICAgcHVibGljIHdpbGxMaW5rQWN0aXZhdGU6IChlOiBNb3VzZUV2ZW50KSA9PiBib29sZWFuXG4gICkge1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbCwgSVNlbGVjdGlvbk1hbmFnZXIsIElCdWZmZXIsIElCdWZmZXJMaW5lLCBJU2VsZWN0aW9uUmVkcmF3UmVxdWVzdEV2ZW50IH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBNb3VzZUhlbHBlciB9IGZyb20gJy4vTW91c2VIZWxwZXInO1xuaW1wb3J0ICogYXMgQnJvd3NlciBmcm9tICcuL2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBDaGFyTWVhc3VyZSB9IGZyb20gJy4vQ2hhck1lYXN1cmUnO1xuaW1wb3J0IHsgU2VsZWN0aW9uTW9kZWwgfSBmcm9tICcuL1NlbGVjdGlvbk1vZGVsJztcbmltcG9ydCB7IEFsdENsaWNrSGFuZGxlciB9IGZyb20gJy4vaGFuZGxlcnMvQWx0Q2xpY2tIYW5kbGVyJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnLi9CdWZmZXJMaW5lJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyMiwgSUV2ZW50IH0gZnJvbSAnLi9jb21tb24vRXZlbnRFbWl0dGVyMic7XG5cbi8qKlxuICogVGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIG1vdXNlIG5lZWRzIHRvIGJlIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCBpblxuICogb3JkZXIgdG8gc2Nyb2xsIGF0IHRoZSBtYXhpbXVtIHNwZWVkLlxuICovXG5jb25zdCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEID0gNTA7XG5cbi8qKlxuICogVGhlIG1heGltdW0gc2Nyb2xsaW5nIHNwZWVkXG4gKi9cbmNvbnN0IERSQUdfU0NST0xMX01BWF9TUEVFRCA9IDE1O1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZHJhZyBzY3JvbGwgdXBkYXRlcy5cbiAqL1xuY29uc3QgRFJBR19TQ1JPTExfSU5URVJWQUwgPSA1MDtcblxuLyoqXG4gKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSB0aGF0IGNhbiBoYXZlIGVsYXBzZWQgZm9yIGFuIGFsdCBjbGljayB0byBtb3ZlIHRoZVxuICogY3Vyc29yLlxuICovXG5jb25zdCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSA9IDUwMDtcblxuLyoqXG4gKiBBIHN0cmluZyBjb250YWluaW5nIGFsbCBjaGFyYWN0ZXJzIHRoYXQgYXJlIGNvbnNpZGVyZWQgd29yZCBzZXBhcmF0ZWQgYnkgdGhlXG4gKiBkb3VibGUgY2xpY2sgdG8gc2VsZWN0IHdvcmsgbG9naWMuXG4gKi9cbmNvbnN0IFdPUkRfU0VQQVJBVE9SUyA9ICcgKClbXXt9XFwnXCInO1xuXG5jb25zdCBOT05fQlJFQUtJTkdfU1BBQ0VfQ0hBUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKTtcbmNvbnN0IEFMTF9OT05fQlJFQUtJTkdfU1BBQ0VfUkVHRVggPSBuZXcgUmVnRXhwKE5PTl9CUkVBS0lOR19TUEFDRV9DSEFSLCAnZycpO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBwb3NpdGlvbiBvZiBhIHdvcmQgb24gYSBsaW5lLlxuICovXG5pbnRlcmZhY2UgSVdvcmRQb3NpdGlvbiB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGxlbmd0aDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEEgc2VsZWN0aW9uIG1vZGUsIHRoaXMgZHJpdmVzIGhvdyB0aGUgc2VsZWN0aW9uIGJlaGF2ZXMgb24gbW91c2UgbW92ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGVudW0gU2VsZWN0aW9uTW9kZSB7XG4gIE5PUk1BTCxcbiAgV09SRCxcbiAgTElORSxcbiAgQ09MVU1OXG59XG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IG1hbmFnZXMgdGhlIHNlbGVjdGlvbiBvZiB0aGUgdGVybWluYWwuIFdpdGggaGVscCBmcm9tXG4gKiBTZWxlY3Rpb25Nb2RlbCwgU2VsZWN0aW9uTWFuYWdlciBoYW5kbGVzIHdpdGggYWxsIGxvZ2ljIGFzc29jaWF0ZWQgd2l0aFxuICogZGVhbGluZyB3aXRoIHRoZSBzZWxlY3Rpb24sIGluY2x1ZGluZyBoYW5kbGluZyBtb3VzZSBpbnRlcmFjdGlvbiwgd2lkZVxuICogY2hhcmFjdGVycyBhbmQgZmV0Y2hpbmcgdGhlIGFjdHVhbCB0ZXh0IHdpdGhpbiB0aGUgc2VsZWN0aW9uLiBSZW5kZXJpbmcgaXNcbiAqIG5vdCBoYW5kbGVkIGJ5IHRoZSBTZWxlY3Rpb25NYW5hZ2VyIGJ1dCB0aGUgb25SZWRyYXdSZXF1ZXN0IGV2ZW50IGlzIGZpcmVkXG4gKiB3aGVuIHRoZSBzZWxlY3Rpb24gaXMgcmVhZHkgdG8gYmUgcmVkcmF3biAob24gYW4gYW5pbWF0aW9uIGZyYW1lKS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlbGVjdGlvbk1hbmFnZXIgaW1wbGVtZW50cyBJU2VsZWN0aW9uTWFuYWdlciB7XG4gIHByb3RlY3RlZCBfbW9kZWw6IFNlbGVjdGlvbk1vZGVsO1xuXG4gIC8qKlxuICAgKiBUaGUgYW1vdW50IHRvIHNjcm9sbCBldmVyeSBkcmFnIHNjcm9sbCB1cGRhdGUgKGRlcGVuZHMgb24gaG93IGZhciB0aGUgbW91c2VcbiAgICogZHJhZyBpcyBhYm92ZSBvciBiZWxvdyB0aGUgdGVybWluYWwpLlxuICAgKi9cbiAgcHJpdmF0ZSBfZHJhZ1Njcm9sbEFtb3VudDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBzZWxlY3Rpb24gbW9kZS5cbiAgICovXG4gIHByb3RlY3RlZCBfYWN0aXZlU2VsZWN0aW9uTW9kZTogU2VsZWN0aW9uTW9kZTtcblxuICAvKipcbiAgICogQSBzZXRJbnRlcnZhbCB0aW1lciB0aGF0IGlzIGFjdGl2ZSB3aGlsZSB0aGUgbW91c2UgaXMgZG93biB3aG9zZSBjYWxsYmFja1xuICAgKiBzY3JvbGxzIHRoZSB2aWV3cG9ydCB3aGVuIG5lY2Vzc2FyeS5cbiAgICovXG4gIHByaXZhdGUgX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyOiBOb2RlSlMuVGltZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBhbmltYXRpb24gZnJhbWUgSUQgdXNlZCBmb3IgcmVmcmVzaGluZyB0aGUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVmcmVzaEFuaW1hdGlvbkZyYW1lOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgc2VsZWN0aW9uIGlzIGVuYWJsZWQuXG4gICAqL1xuICBwcml2YXRlIF9lbmFibGVkID0gdHJ1ZTtcblxuICBwcml2YXRlIF9tb3VzZU1vdmVMaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcjtcbiAgcHJpdmF0ZSBfbW91c2VVcExpc3RlbmVyOiBFdmVudExpc3RlbmVyO1xuICBwcml2YXRlIF90cmltTGlzdGVuZXI6IElEaXNwb3NhYmxlO1xuICBwcml2YXRlIF93b3JrQ2VsbDogQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcblxuICBwcml2YXRlIF9tb3VzZURvd25UaW1lU3RhbXA6IG51bWJlcjtcblxuICBwcml2YXRlIF9vbkxpbnV4TW91c2VTZWxlY3Rpb24gPSBuZXcgRXZlbnRFbWl0dGVyMjxzdHJpbmc+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW51eE1vdXNlU2VsZWN0aW9uKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uTGludXhNb3VzZVNlbGVjdGlvbi5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlZHJhd1JlcXVlc3QgPSBuZXcgRXZlbnRFbWl0dGVyMjxJU2VsZWN0aW9uUmVkcmF3UmVxdWVzdEV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVkcmF3UmVxdWVzdCgpOiBJRXZlbnQ8SVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudD4geyByZXR1cm4gdGhpcy5fb25SZWRyYXdSZXF1ZXN0LmV2ZW50OyB9XG4gIHByaXZhdGUgX29uU2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogSVRlcm1pbmFsLFxuICAgIHByaXZhdGUgX2NoYXJNZWFzdXJlOiBDaGFyTWVhc3VyZVxuICApIHtcbiAgICB0aGlzLl9pbml0TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5lbmFibGUoKTtcblxuICAgIHRoaXMuX21vZGVsID0gbmV3IFNlbGVjdGlvbk1vZGVsKF90ZXJtaW5hbCk7XG4gICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuTk9STUFMO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGdldCBfYnVmZmVyKCk6IElCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLl90ZXJtaW5hbC5idWZmZXJzLmFjdGl2ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBsaXN0ZW5lciB2YXJpYWJsZXMuXG4gICAqL1xuICBwcml2YXRlIF9pbml0TGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyID0gZXZlbnQgPT4gdGhpcy5fb25Nb3VzZU1vdmUoPE1vdXNlRXZlbnQ+ZXZlbnQpO1xuICAgIHRoaXMuX21vdXNlVXBMaXN0ZW5lciA9IGV2ZW50ID0+IHRoaXMuX29uTW91c2VVcCg8TW91c2VFdmVudD5ldmVudCk7XG5cbiAgICB0aGlzLmluaXRCdWZmZXJzTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwdWJsaWMgaW5pdEJ1ZmZlcnNMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy5fdHJpbUxpc3RlbmVyID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLmxpbmVzLm9uVHJpbShhbW91bnQgPT4gdGhpcy5fb25UcmltKGFtb3VudCkpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZShlID0+IHRoaXMuX29uQnVmZmVyQWN0aXZhdGUoZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2FibGVzIHRoZSBzZWxlY3Rpb24gbWFuYWdlci4gVGhpcyBpcyB1c2VmdWwgZm9yIHdoZW4gdGVybWluYWwgbW91c2VcbiAgICogYXJlIGVuYWJsZWQuXG4gICAqL1xuICBwdWJsaWMgZGlzYWJsZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5fZW5hYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0aGUgc2VsZWN0aW9uIG1hbmFnZXIuXG4gICAqL1xuICBwdWJsaWMgZW5hYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuX2VuYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGdldCBzZWxlY3Rpb25TdGFydCgpOiBbbnVtYmVyLCBudW1iZXJdIHsgcmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7IH1cbiAgcHVibGljIGdldCBzZWxlY3Rpb25FbmQoKTogW251bWJlciwgbnVtYmVyXSB7IHJldHVybiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDsgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHdoZXRoZXIgdGhlcmUgaXMgYW4gYWN0aXZlIHRleHQgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldCBoYXNTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO1xuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnRbMF0gIT09IGVuZFswXSB8fCBzdGFydFsxXSAhPT0gZW5kWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRleHQgY3VycmVudGx5IHNlbGVjdGVkLlxuICAgKi9cbiAgcHVibGljIGdldCBzZWxlY3Rpb25UZXh0KCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO1xuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID09PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgLy8gSWdub3JlIHplcm8gd2lkdGggc2VsZWN0aW9uc1xuICAgICAgaWYgKHN0YXJ0WzBdID09PSBlbmRbMF0pIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gc3RhcnRbMV07IGkgPD0gZW5kWzFdOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGluZVRleHQgPSB0aGlzLl9idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGksIHRydWUsIHN0YXJ0WzBdLCBlbmRbMF0pO1xuICAgICAgICByZXN1bHQucHVzaChsaW5lVGV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEdldCBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Um93RW5kQ29sID0gc3RhcnRbMV0gPT09IGVuZFsxXSA/IGVuZFswXSA6IHVuZGVmaW5lZDtcbiAgICAgIHJlc3VsdC5wdXNoKHRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoc3RhcnRbMV0sIHRydWUsIHN0YXJ0WzBdLCBzdGFydFJvd0VuZENvbCkpO1xuXG4gICAgICAvLyBHZXQgbWlkZGxlIHJvd3NcbiAgICAgIGZvciAobGV0IGkgPSBzdGFydFsxXSArIDE7IGkgPD0gZW5kWzFdIC0gMTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSB0aGlzLl9idWZmZXIubGluZXMuZ2V0KGkpO1xuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IHRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoaSwgdHJ1ZSk7XG4gICAgICAgIGlmIChidWZmZXJMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gKz0gbGluZVRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBmaW5hbCByb3dcbiAgICAgIGlmIChzdGFydFsxXSAhPT0gZW5kWzFdKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSB0aGlzLl9idWZmZXIubGluZXMuZ2V0KGVuZFsxXSk7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gdGhpcy5fYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlbmRbMV0sIHRydWUsIDAsIGVuZFswXSk7XG4gICAgICAgIGlmIChidWZmZXJMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gKz0gbGluZVRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHN0cmluZyBieSByZXBsYWNpbmcgbm9uLWJyZWFraW5nIHNwYWNlIGNoYXJzIHdpdGggcmVndWxhciBzcGFjZXNcbiAgICAvLyBhbmQgam9pbmluZyB0aGUgYXJyYXkgaW50byBhIG11bHRpLWxpbmUgc3RyaW5nLlxuICAgIGNvbnN0IGZvcm1hdHRlZFJlc3VsdCA9IHJlc3VsdC5tYXAobGluZSA9PiB7XG4gICAgICByZXR1cm4gbGluZS5yZXBsYWNlKEFMTF9OT05fQlJFQUtJTkdfU1BBQ0VfUkVHRVgsICcgJyk7XG4gICAgfSkuam9pbihCcm93c2VyLmlzTVNXaW5kb3dzID8gJ1xcclxcbicgOiAnXFxuJyk7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkUmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgYSByZWZyZXNoLCByZWRyYXdpbmcgdGhlIHNlbGVjdGlvbiBvbiB0aGUgbmV4dCBvcHBvcnR1bml0eS5cbiAgICogQHBhcmFtIGlzTGludXhNb3VzZVNlbGVjdGlvbiBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gc2hvdWxkIGJlIHJlZ2lzdGVyZWQgYXMgYSBuZXdcbiAgICogc2VsZWN0aW9uIG9uIExpbnV4LlxuICAgKi9cbiAgcHVibGljIHJlZnJlc2goaXNMaW51eE1vdXNlU2VsZWN0aW9uPzogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIFF1ZXVlIHRoZSByZWZyZXNoIGZvciB0aGUgcmVuZGVyZXJcbiAgICBpZiAoIXRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9yZWZyZXNoKCkpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBwbGF0Zm9ybSBpcyBMaW51eCBhbmQgdGhlIHJlZnJlc2ggY2FsbCBjb21lcyBmcm9tIGEgbW91c2UgZXZlbnQsXG4gICAgLy8gd2UgbmVlZCB0byB1cGRhdGUgdGhlIHNlbGVjdGlvbiBmb3IgbWlkZGxlIGNsaWNrIHRvIHBhc3RlIHNlbGVjdGlvbi5cbiAgICBpZiAoQnJvd3Nlci5pc0xpbnV4ICYmIGlzTGludXhNb3VzZVNlbGVjdGlvbikge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uVGV4dCA9IHRoaXMuc2VsZWN0aW9uVGV4dDtcbiAgICAgIGlmIChzZWxlY3Rpb25UZXh0Lmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZmlyZSh0aGlzLnNlbGVjdGlvblRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB0aGUgcmVmcmVzaCBldmVudCwgY2F1c2luZyBjb25zdW1lcnMgdG8gcGljayBpdCB1cCBhbmQgcmVkcmF3IHRoZVxuICAgKiBzZWxlY3Rpb24gc3RhdGUuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IG51bGw7XG4gICAgdGhpcy5fb25SZWRyYXdSZXF1ZXN0LmZpcmUoe1xuICAgICAgc3RhcnQ6IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsXG4gICAgICBlbmQ6IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kLFxuICAgICAgY29sdW1uU2VsZWN0TW9kZTogdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5DT0xVTU5cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgY2xpY2sgd2FzIGluc2lkZSB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudFxuICAgKi9cbiAgcHVibGljIGlzQ2xpY2tJblNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG5cbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fYXJlQ29vcmRzSW5TZWxlY3Rpb24oY29vcmRzLCBzdGFydCwgZW5kKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYXJlQ29vcmRzSW5TZWxlY3Rpb24oY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdLCBzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChjb29yZHNbMV0gPiBzdGFydFsxXSAmJiBjb29yZHNbMV0gPCBlbmRbMV0pIHx8XG4gICAgICAgIChzdGFydFsxXSA9PT0gZW5kWzFdICYmIGNvb3Jkc1sxXSA9PT0gc3RhcnRbMV0gJiYgY29vcmRzWzBdID49IHN0YXJ0WzBdICYmIGNvb3Jkc1swXSA8IGVuZFswXSkgfHxcbiAgICAgICAgKHN0YXJ0WzFdIDwgZW5kWzFdICYmIGNvb3Jkc1sxXSA9PT0gZW5kWzFdICYmIGNvb3Jkc1swXSA8IGVuZFswXSkgfHxcbiAgICAgICAgKHN0YXJ0WzFdIDwgZW5kWzFdICYmIGNvb3Jkc1sxXSA9PT0gc3RhcnRbMV0gJiYgY29vcmRzWzBdID49IHN0YXJ0WzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHdvcmQgYXQgdGhlIGN1cnJlbnQgbW91c2UgZXZlbnQgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0V29yZEF0Q3Vyc29yKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgIHRoaXMuX3NlbGVjdFdvcmRBdChjb29yZHMsIGZhbHNlKTtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IG51bGw7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYWxsIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgc3RhcnQgPSBNYXRoLm1heChzdGFydCwgMCk7XG4gICAgZW5kID0gTWF0aC5taW4oZW5kLCB0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RoIC0gMSk7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbMCwgc3RhcnRdO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl90ZXJtaW5hbC5jb2xzLCBlbmRdO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGJ1ZmZlciBiZWluZyB0cmltbWVkLCBhZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IHRoZSBidWZmZXIgaXMgYmVpbmcgdHJpbW1lZC5cbiAgICovXG4gIHByaXZhdGUgX29uVHJpbShhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG5lZWRzUmVmcmVzaCA9IHRoaXMuX21vZGVsLm9uVHJpbShhbW91bnQpO1xuICAgIGlmIChuZWVkc1JlZnJlc2gpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSAwLWJhc2VkIFt4LCB5XSBidWZmZXIgY29vcmRpbmF0ZXMgb2YgdGhlIGN1cnJlbnQgbW91c2UgZXZlbnQuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudDogTW91c2VFdmVudCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX3Rlcm1pbmFsLm1vdXNlSGVscGVyLmdldENvb3JkcyhldmVudCwgdGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudCwgdGhpcy5fY2hhck1lYXN1cmUsIHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MsIHRydWUpO1xuICAgIGlmICghY29vcmRzKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0IHRvIDAtYmFzZWRcbiAgICBjb29yZHNbMF0tLTtcbiAgICBjb29yZHNbMV0tLTtcblxuICAgIC8vIENvbnZlcnQgdmlld3BvcnQgY29vcmRzIHRvIGJ1ZmZlciBjb29yZHNcbiAgICBjb29yZHNbMV0gKz0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnlkaXNwO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYW1vdW50IHRoZSB2aWV3cG9ydCBzaG91bGQgYmUgc2Nyb2xsZWQgYmFzZWQgb24gaG93IGZhciBvdXQgb2YgdGhlXG4gICAqIHRlcm1pbmFsIHRoZSBtb3VzZSBpcy5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2dldE1vdXNlRXZlbnRTY3JvbGxBbW91bnQoZXZlbnQ6IE1vdXNlRXZlbnQpOiBudW1iZXIge1xuICAgIGxldCBvZmZzZXQgPSBNb3VzZUhlbHBlci5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudChldmVudCwgdGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudClbMV07XG4gICAgY29uc3QgdGVybWluYWxIZWlnaHQgPSB0aGlzLl90ZXJtaW5hbC5yb3dzICogTWF0aC5jZWlsKHRoaXMuX2NoYXJNZWFzdXJlLmhlaWdodCAqIHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMubGluZUhlaWdodCk7XG4gICAgaWYgKG9mZnNldCA+PSAwICYmIG9mZnNldCA8PSB0ZXJtaW5hbEhlaWdodCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChvZmZzZXQgPiB0ZXJtaW5hbEhlaWdodCkge1xuICAgICAgb2Zmc2V0IC09IHRlcm1pbmFsSGVpZ2h0O1xuICAgIH1cblxuICAgIG9mZnNldCA9IE1hdGgubWluKE1hdGgubWF4KG9mZnNldCwgLURSQUdfU0NST0xMX01BWF9USFJFU0hPTEQpLCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEKTtcbiAgICBvZmZzZXQgLz0gRFJBR19TQ1JPTExfTUFYX1RIUkVTSE9MRDtcbiAgICByZXR1cm4gKG9mZnNldCAvIE1hdGguYWJzKG9mZnNldCkpICsgTWF0aC5yb3VuZChvZmZzZXQgKiAoRFJBR19TQ1JPTExfTUFYX1NQRUVEIC0gMSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgc2hvdWxkIGZvcmNlIHNlbGVjdGlvbiwgcmVnYXJkbGVzcyBvZlxuICAgKiB3aGV0aGVyIHRoZSB0ZXJtaW5hbCBpcyBpbiBtb3VzZSBldmVudHMgbW9kZS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHB1YmxpYyBzaG91bGRGb3JjZVNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmIChCcm93c2VyLmlzTWFjKSB7XG4gICAgICByZXR1cm4gZXZlbnQuYWx0S2V5ICYmIHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGUgbW91c2Vkb3duIGV2ZW50LCBzZXR0aW5nIHVwIGZvciBhIG5ldyBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2Vkb3duIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIG9uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbW91c2VEb3duVGltZVN0YW1wID0gZXZlbnQudGltZVN0YW1wO1xuICAgIC8vIElmIHdlIGhhdmUgc2VsZWN0aW9uLCB3ZSB3YW50IHRoZSBjb250ZXh0IG1lbnUgb24gcmlnaHQgY2xpY2sgZXZlbiBpZiB0aGVcbiAgICAvLyB0ZXJtaW5hbCBpcyBpbiBtb3VzZSBtb2RlLlxuICAgIGlmIChldmVudC5idXR0b24gPT09IDIgJiYgdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGFjdGlvbiB0aGUgcHJpbWFyeSBidXR0b25cbiAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWxsb3cgc2VsZWN0aW9uIHdoZW4gdXNpbmcgYSBzcGVjaWZpYyBtb2RpZmllciBrZXksIGV2ZW4gd2hlbiBkaXNhYmxlZFxuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgaWYgKCF0aGlzLnNob3VsZEZvcmNlU2VsZWN0aW9uKGV2ZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHNlbmQgdGhlIG1vdXNlIGRvd24gZXZlbnQgdG8gdGhlIGN1cnJlbnQgcHJvY2Vzcywgd2Ugd2FudCB0byBzZWxlY3RcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIC8vIFRlbGwgdGhlIGJyb3dzZXIgbm90IHRvIHN0YXJ0IGEgcmVndWxhciBzZWxlY3Rpb25cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gUmVzZXQgZHJhZyBzY3JvbGwgc3RhdGVcbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gMDtcblxuICAgIGlmICh0aGlzLl9lbmFibGVkICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICB0aGlzLl9vbkluY3JlbWVudGFsQ2xpY2soZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuX29uU2luZ2xlQ2xpY2soZXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChldmVudC5kZXRhaWwgPT09IDIpIHtcbiAgICAgICAgdGhpcy5fb25Eb3VibGVDbGljayhldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmRldGFpbCA9PT0gMykge1xuICAgICAgICB0aGlzLl9vblRyaXBsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBsaXN0ZW5lcnMgd2hlbiBtb3VzZWRvd24gaXMgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkTW91c2VEb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiBvbiB0aGUgZG9jdW1lbnQgc28gdGhhdCBkcmFnZ2luZyBvdXRzaWRlIG9mIHZpZXdwb3J0IHdvcmtzXG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBMaXN0ZW5lcik7XG4gICAgdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLl9kcmFnU2Nyb2xsKCksIERSQUdfU0NST0xMX0lOVEVSVkFMKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBsaXN0ZW5lcnMgdGhhdCBhcmUgcmVnaXN0ZXJlZCB3aGVuIG1vdXNlZG93biBpcyB0cmlnZ2VyZWQuXG4gICAqL1xuICBwcml2YXRlIF9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcExpc3RlbmVyKTtcbiAgICB9XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lcik7XG4gICAgdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIGluY3JlbWVudGFsIGNsaWNrLCBzZXR0aW5nIHRoZSBzZWxlY3Rpb24gZW5kIHBvc2l0aW9uIHRvIHRoZSBtb3VzZVxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uSW5jcmVtZW50YWxDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHNpbmdsZSBjbGljaywgcmVzZXR0aW5nIHJlbGV2YW50IHN0YXRlIGFuZCBzZXR0aW5nIHRoZSBzZWxlY3Rpb25cbiAgICogc3RhcnQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vblNpbmdsZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IHRoaXMuc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50KSA/IFNlbGVjdGlvbk1vZGUuQ09MVU1OIDogU2VsZWN0aW9uTW9kZS5OT1JNQUw7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBuZXcgc2VsZWN0aW9uXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSBudWxsO1xuXG4gICAgLy8gRW5zdXJlIHRoZSBsaW5lIGV4aXN0c1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXIubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdKTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gZWFybHkgaWYgdGhlIGNsaWNrIGV2ZW50IGlzIG5vdCBpbiB0aGUgYnVmZmVyIChlZy4gaW4gc2Nyb2xsIGJhcilcbiAgICBpZiAobGluZS5sZW5ndGggPj0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgbW91c2UgaXMgb3ZlciB0aGUgc2Vjb25kIGhhbGYgb2YgYSB3aWRlIGNoYXJhY3RlciwgYWRqdXN0IHRoZVxuICAgIC8vIHNlbGVjdGlvbiB0byBjb3ZlciB0aGUgd2hvbGUgY2hhcmFjdGVyXG4gICAgaWYgKGxpbmUuaGFzV2lkdGgodGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0pID09PSAwKSB7XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSsrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIGRvdWJsZSBjbGljaywgc2VsZWN0aW5nIHRoZSBjdXJyZW50IHdvcmsuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vbkRvdWJsZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPSBTZWxlY3Rpb25Nb2RlLldPUkQ7XG4gICAgICB0aGlzLl9zZWxlY3RXb3JkQXQoY29vcmRzLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSB0cmlwbGUgY2xpY2ssIHNlbGVjdGluZyB0aGUgY3VycmVudCBsaW5lIGFuZCBhY3RpdmF0aW5nIGxpbmVcbiAgICogc2VsZWN0IG1vZGUuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vblRyaXBsZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPSBTZWxlY3Rpb25Nb2RlLkxJTkU7XG4gICAgICB0aGlzLl9zZWxlY3RMaW5lQXQoY29vcmRzWzFdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBzaG91bGQgb3BlcmF0ZSBpbiBjb2x1bW4gc2VsZWN0IG1vZGVcbiAgICogQHBhcmFtIGV2ZW50IHRoZSBtb3VzZSBvciBrZXlib2FyZCBldmVudFxuICAgKi9cbiAgcHVibGljIHNob3VsZENvbHVtblNlbGVjdChldmVudDogS2V5Ym9hcmRFdmVudCB8IE1vdXNlRXZlbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZXZlbnQuYWx0S2V5ICYmICEoQnJvd3Nlci5pc01hYyAmJiB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLm1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBtb3VzZW1vdmUgZXZlbnQgd2hlbiB0aGUgbW91c2UgYnV0dG9uIGlzIGRvd24sIHJlY29yZGluZyB0aGVcbiAgICogZW5kIG9mIHRoZSBzZWxlY3Rpb24gYW5kIHJlZnJlc2hpbmcgdGhlIHNlbGVjdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZW1vdmUgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIC8vIElmIHRoZSBtb3VzZW1vdmUgbGlzdGVuZXIgaXMgYWN0aXZlIGl0IG1lYW5zIHRoYXQgYSBzZWxlY3Rpb24gaXNcbiAgICAvLyBjdXJyZW50bHkgYmVpbmcgbWFkZSwgd2Ugc2hvdWxkIHN0b3AgcHJvcGFnYXRpb24gdG8gcHJldmVudCBtb3VzZSBldmVudHNcbiAgICAvLyB0byBiZSBzZW50IHRvIHRoZSBwdHkuXG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAvLyBSZWNvcmQgdGhlIHByZXZpb3VzIHBvc2l0aW9uIHNvIHdlIGtub3cgd2hldGhlciB0byByZWRyYXcgdGhlIHNlbGVjdGlvblxuICAgIC8vIGF0IHRoZSBlbmQuXG4gICAgY29uc3QgcHJldmlvdXNTZWxlY3Rpb25FbmQgPSB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPyBbdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdLCB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV1dIDogbnVsbDtcblxuICAgIC8vIFNldCB0aGUgaW5pdGlhbCBzZWxlY3Rpb24gZW5kIGJhc2VkIG9uIHRoZSBtb3VzZSBjb29yZGluYXRlc1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoIXRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCkge1xuICAgICAgdGhpcy5yZWZyZXNoKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNlbGVjdCB0aGUgZW50aXJlIGxpbmUgaWYgbGluZSBzZWxlY3QgbW9kZSBpcyBhY3RpdmUuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuTElORSkge1xuICAgICAgaWYgKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXSA8IHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5XT1JEKSB7XG4gICAgICB0aGlzLl9zZWxlY3RUb1dvcmRBdCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQpO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgYW1vdW50IG9mIHNjcm9sbGluZyB0aGF0IHdpbGwgaGFwcGVuLlxuICAgIHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPSB0aGlzLl9nZXRNb3VzZUV2ZW50U2Nyb2xsQW1vdW50KGV2ZW50KTtcblxuICAgIC8vIElmIHRoZSBjdXJzb3Igd2FzIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCwgbWFrZSBzdXJlIGl0J3MgYXQgdGhlXG4gICAgLy8gc3RhcnQgb3IgZW5kIG9mIHRoZSB2aWV3cG9ydCByZXNwZWN0aXZlbHkuIFRoaXMgc2hvdWxkIG9ubHkgaGFwcGVuIHdoZW5cbiAgICAvLyBOT1QgaW4gY29sdW1uIHNlbGVjdCBtb2RlLlxuICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPiAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPCAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhcmFjdGVyIGluY2x1ZGUgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGluIHRoZVxuICAgIC8vIHNlbGVjdGlvbi4gTm90ZSB0aGF0IHNlbGVjdGlvbnMgYXQgdGhlIHZlcnkgZW5kIG9mIHRoZSBsaW5lIHdpbGwgbmV2ZXJcbiAgICAvLyBoYXZlIGEgY2hhcmFjdGVyLlxuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPCB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy5fYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pLmhhc1dpZHRoKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSkgPT09IDApIHtcbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gT25seSBkcmF3IGhlcmUgaWYgdGhlIHNlbGVjdGlvbiBjaGFuZ2VzLlxuICAgIGlmICghcHJldmlvdXNTZWxlY3Rpb25FbmQgfHxcbiAgICAgIHByZXZpb3VzU2VsZWN0aW9uRW5kWzBdICE9PSB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gfHxcbiAgICAgIHByZXZpb3VzU2VsZWN0aW9uRW5kWzFdICE9PSB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pIHtcbiAgICAgIHRoaXMucmVmcmVzaCh0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNhbGxiYWNrIHRoYXQgb2NjdXJzIGV2ZXJ5IERSQUdfU0NST0xMX0lOVEVSVkFMIG1zIHRoYXQgZG9lcyB0aGVcbiAgICogc2Nyb2xsaW5nIG9mIHRoZSB2aWV3cG9ydC5cbiAgICovXG4gIHByaXZhdGUgX2RyYWdTY3JvbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnNjcm9sbExpbmVzKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQsIGZhbHNlKTtcbiAgICAgIC8vIFJlLWV2YWx1YXRlIHNlbGVjdGlvblxuICAgICAgLy8gSWYgdGhlIGN1cnNvciB3YXMgYWJvdmUgb3IgYmVsb3cgdGhlIHZpZXdwb3J0LCBtYWtlIHN1cmUgaXQncyBhdCB0aGVcbiAgICAgIC8vIHN0YXJ0IG9yIGVuZCBvZiB0aGUgdmlld3BvcnQgcmVzcGVjdGl2ZWx5LiBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbiB3aGVuXG4gICAgICAvLyBOT1QgaW4gY29sdW1uIHNlbGVjdCBtb2RlLlxuICAgICAgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdID0gTWF0aC5taW4odGhpcy5fdGVybWluYWwuYnVmZmVyLnlkaXNwICsgdGhpcy5fdGVybWluYWwucm93cywgdGhpcy5fdGVybWluYWwuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgIT09IFNlbGVjdGlvbk1vZGUuQ09MVU1OKSB7XG4gICAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueWRpc3A7XG4gICAgICB9XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgbW91c2V1cCBldmVudCwgcmVtb3ZpbmcgdGhlIG1vdXNlZG93biBsaXN0ZW5lcnMuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2V1cCBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uTW91c2VVcChldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IHRpbWVFbGFwc2VkID0gZXZlbnQudGltZVN0YW1wIC0gdGhpcy5fbW91c2VEb3duVGltZVN0YW1wO1xuXG4gICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG5cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25UZXh0Lmxlbmd0aCA8PSAxICYmIHRpbWVFbGFwc2VkIDwgQUxUX0NMSUNLX01PVkVfQ1VSU09SX1RJTUUpIHtcbiAgICAgIChuZXcgQWx0Q2xpY2tIYW5kbGVyKGV2ZW50LCB0aGlzLl90ZXJtaW5hbCkpLm1vdmUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaGFzU2VsZWN0aW9uKSB7XG4gICAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25CdWZmZXJBY3RpdmF0ZShlOiB7YWN0aXZlQnVmZmVyOiBJQnVmZmVyLCBpbmFjdGl2ZUJ1ZmZlcjogSUJ1ZmZlcn0pOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgLy8gT25seSBhZGp1c3QgdGhlIHNlbGVjdGlvbiBvbiB0cmltLCBzaGlmdEVsZW1lbnRzIGlzIHJhcmVseSB1c2VkIChvbmx5IGluXG4gICAgLy8gcmV2ZXJzZUluZGV4KSBhbmQgZGVsZXRlIGluIGEgc3BsaWNlIGlzIG9ubHkgZXZlciB1c2VkIHdoZW4gdGhlIHNhbWVcbiAgICAvLyBudW1iZXIgb2YgZWxlbWVudHMgd2FzIGp1c3QgYWRkZWQuIEdpdmVuIHRoaXMgaXMgY291bGQgYWN0dWFsbHkgYmVcbiAgICAvLyBiZW5lZmljaWFsIHRvIGxlYXZlIHRoZSBzZWxlY3Rpb24gYXMgaXMgZm9yIHRoZXNlIGNhc2VzLlxuICAgIGlmICh0aGlzLl90cmltTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuX3RyaW1MaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuX3RyaW1MaXN0ZW5lciA9IGUuYWN0aXZlQnVmZmVyLmxpbmVzLm9uVHJpbShhbW91bnQgPT4gdGhpcy5fb25UcmltKGFtb3VudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgdmlld3BvcnQgY29sdW1uIHRvIHRoZSBjaGFyYWN0ZXIgaW5kZXggb24gdGhlIGJ1ZmZlciBsaW5lLCB0aGVcbiAgICogbGF0dGVyIHRha2VzIGludG8gYWNjb3VudCB3aWRlIGNoYXJhY3RlcnMuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGZpbmQgdGhlIDIgaW5kZXggZm9yLlxuICAgKi9cbiAgcHJpdmF0ZSBfY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChidWZmZXJMaW5lOiBJQnVmZmVyTGluZSwgY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdKTogbnVtYmVyIHtcbiAgICBsZXQgY2hhckluZGV4ID0gY29vcmRzWzBdO1xuICAgIGZvciAobGV0IGkgPSAwOyBjb29yZHNbMF0gPj0gaTsgaSsrKSB7XG4gICAgICBjb25zdCBsZW5ndGggPSBidWZmZXJMaW5lLmxvYWRDZWxsKGksIHRoaXMuX3dvcmtDZWxsKS5nZXRDaGFycygpLmxlbmd0aDtcbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICAgIC8vIFdpZGUgY2hhcmFjdGVycyBhcmVuJ3QgaW5jbHVkZWQgaW4gdGhlIGxpbmUgc3RyaW5nIHNvIGRlY3JlbWVudCB0aGVcbiAgICAgICAgLy8gaW5kZXggc28gdGhlIGluZGV4IGlzIGJhY2sgb24gdGhlIHdpZGUgY2hhcmFjdGVyLlxuICAgICAgICBjaGFySW5kZXgtLTtcbiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMSAmJiBjb29yZHNbMF0gIT09IGkpIHtcbiAgICAgICAgLy8gRW1vamlzIHRha2UgdXAgbXVsdGlwbGUgY2hhcmFjdGVycywgc28gYWRqdXN0IGFjY29yZGluZ2x5LiBGb3IgdGhlc2VcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCBvdCBpbmNsdWRlIHRoZSBjaGFyYWN0ZXIgYXQgdGhlIGNvbHVtbiBhcyB3ZSdyZVxuICAgICAgICAvLyByZXR1cm5pbmcgdGhlIHN0YXJ0IGluZGV4IGluIHRoZSBzdHJpbmcsIG5vdCB0aGUgZW5kIGluZGV4LlxuICAgICAgICBjaGFySW5kZXggKz0gbGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYXJJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTZWxlY3Rpb24oY29sOiBudW1iZXIsIHJvdzogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbY29sLCByb3ddO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoID0gbGVuZ3RoO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgcG9zaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgdGhlIHdvcmQgYXQgdGhlIGNvb3JkaW5hdGVkIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGNvb3JkcyBUaGUgY29vcmRpbmF0ZXMgdG8gZ2V0IHRoZSB3b3JkIGF0LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0V29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbjogYm9vbGVhbiwgZm9sbG93V3JhcHBlZExpbmVzQWJvdmU6IGJvb2xlYW4gPSB0cnVlLCBmb2xsb3dXcmFwcGVkTGluZXNCZWxvdzogYm9vbGVhbiA9IHRydWUpOiBJV29yZFBvc2l0aW9uIHtcbiAgICAvLyBFbnN1cmUgY29vcmRzIGFyZSB3aXRoaW4gdmlld3BvcnQgKGVnLiBub3Qgd2l0aGluIHNjcm9sbCBiYXIpXG4gICAgaWYgKGNvb3Jkc1swXSA+PSB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBidWZmZXJMaW5lID0gdGhpcy5fYnVmZmVyLmxpbmVzLmdldChjb29yZHNbMV0pO1xuICAgIGlmICghYnVmZmVyTGluZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoY29vcmRzWzFdLCBmYWxzZSk7XG5cbiAgICAvLyBHZXQgYWN0dWFsIGluZGV4LCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHdpZGUgY2hhcmFjdGVyc1xuICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5fY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChidWZmZXJMaW5lLCBjb29yZHMpO1xuICAgIGxldCBlbmRJbmRleCA9IHN0YXJ0SW5kZXg7XG5cbiAgICAvLyBSZWNvcmQgb2Zmc2V0IHRvIGJlIHVzZWQgbGF0ZXJcbiAgICBjb25zdCBjaGFyT2Zmc2V0ID0gY29vcmRzWzBdIC0gc3RhcnRJbmRleDtcbiAgICBsZXQgbGVmdFdpZGVDaGFyQ291bnQgPSAwO1xuICAgIGxldCByaWdodFdpZGVDaGFyQ291bnQgPSAwO1xuICAgIGxldCBsZWZ0TG9uZ0NoYXJPZmZzZXQgPSAwO1xuICAgIGxldCByaWdodExvbmdDaGFyT2Zmc2V0ID0gMDtcblxuICAgIGlmIChsaW5lLmNoYXJBdChzdGFydEluZGV4KSA9PT0gJyAnKSB7XG4gICAgICAvLyBFeHBhbmQgdW50aWwgbm9uLXdoaXRlc3BhY2UgaXMgaGl0XG4gICAgICB3aGlsZSAoc3RhcnRJbmRleCA+IDAgJiYgbGluZS5jaGFyQXQoc3RhcnRJbmRleCAtIDEpID09PSAnICcpIHtcbiAgICAgICAgc3RhcnRJbmRleC0tO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGVuZEluZGV4IDwgbGluZS5sZW5ndGggJiYgbGluZS5jaGFyQXQoZW5kSW5kZXggKyAxKSA9PT0gJyAnKSB7XG4gICAgICAgIGVuZEluZGV4Kys7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEV4cGFuZCB1bnRpbCB3aGl0ZXNwYWNlIGlzIGhpdC4gVGhpcyBhbGdvcml0aG0gd29ya3MgYnkgc2Nhbm5pbmcgbGVmdFxuICAgICAgLy8gYW5kIHJpZ2h0IGZyb20gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uLCBrZWVwaW5nIGJvdGggdGhlIGluZGV4IGZvcm1hdFxuICAgICAgLy8gKGxpbmUpIGFuZCB0aGUgY29sdW1uIGZvcm1hdCAoYnVmZmVyTGluZSkgaW4gc3luYy4gV2hlbiBhIHdpZGVcbiAgICAgIC8vIGNoYXJhY3RlciBpcyBoaXQsIGl0IGlzIHJlY29yZGVkIGFuZCB0aGUgY29sdW1uIGluZGV4IGlzIGFkanVzdGVkLlxuICAgICAgbGV0IHN0YXJ0Q29sID0gY29vcmRzWzBdO1xuICAgICAgbGV0IGVuZENvbCA9IGNvb3Jkc1swXTtcblxuICAgICAgLy8gQ29uc2lkZXIgdGhlIGluaXRpYWwgcG9zaXRpb24sIHNraXAgaXQgYW5kIGluY3JlbWVudCB0aGUgd2lkZSBjaGFyXG4gICAgICAvLyB2YXJpYWJsZVxuICAgICAgaWYgKGJ1ZmZlckxpbmUuZ2V0V2lkdGgoc3RhcnRDb2wpID09PSAwKSB7XG4gICAgICAgIGxlZnRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgIHN0YXJ0Q29sLS07XG4gICAgICB9XG4gICAgICBpZiAoYnVmZmVyTGluZS5nZXRXaWR0aChlbmRDb2wpID09PSAyKSB7XG4gICAgICAgIHJpZ2h0V2lkZUNoYXJDb3VudCsrO1xuICAgICAgICBlbmRDb2wrKztcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHRoZSBlbmQgaW5kZXggZm9yIGNoYXJhY3RlcnMgd2hvc2UgbGVuZ3RoIGFyZSA+IDEgKGVtb2ppcylcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGJ1ZmZlckxpbmUuZ2V0U3RyaW5nKGVuZENvbCkubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmlnaHRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICBlbmRJbmRleCArPSBsZW5ndGggLSAxO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHBhbmQgdGhlIHN0cmluZyBpbiBib3RoIGRpcmVjdGlvbnMgdW50aWwgYSBzcGFjZSBpcyBoaXRcbiAgICAgIHdoaWxlIChzdGFydENvbCA+IDAgJiYgc3RhcnRJbmRleCA+IDAgJiYgIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3IoYnVmZmVyTGluZS5sb2FkQ2VsbChzdGFydENvbCAtIDEsIHRoaXMuX3dvcmtDZWxsKSkpIHtcbiAgICAgICAgYnVmZmVyTGluZS5sb2FkQ2VsbChzdGFydENvbCAtIDEsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyIGlzIGEgd2lkZSBjaGFyLCByZWNvcmQgaXQgYW5kIHNraXAgdGhlIGNvbHVtblxuICAgICAgICAgIGxlZnRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyJ3Mgc3RyaW5nIGlzIGxvbmdlciB0aGFuIDEgY2hhciAoZWcuIGVtb2ppKSxcbiAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4XG4gICAgICAgICAgbGVmdExvbmdDaGFyT2Zmc2V0ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgICAgc3RhcnRJbmRleCAtPSBsZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0SW5kZXgtLTtcbiAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChlbmRDb2wgPCBidWZmZXJMaW5lLmxlbmd0aCAmJiBlbmRJbmRleCArIDEgPCBsaW5lLmxlbmd0aCAmJiAhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihidWZmZXJMaW5lLmxvYWRDZWxsKGVuZENvbCArIDEsIHRoaXMuX3dvcmtDZWxsKSkpIHtcbiAgICAgICAgYnVmZmVyTGluZS5sb2FkQ2VsbChlbmRDb2wgKyAxLCB0aGlzLl93b3JrQ2VsbCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMikge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhciwgcmVjb3JkIGl0IGFuZCBza2lwIHRoZSBjb2x1bW5cbiAgICAgICAgICByaWdodFdpZGVDaGFyQ291bnQrKztcbiAgICAgICAgICBlbmRDb2wrKztcbiAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyJ3Mgc3RyaW5nIGlzIGxvbmdlciB0aGFuIDEgY2hhciAoZWcuIGVtb2ppKSxcbiAgICAgICAgICAvLyBhZGp1c3QgdGhlIGluZGV4XG4gICAgICAgICAgcmlnaHRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICAgIGVuZEluZGV4ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZW5kSW5kZXgrKztcbiAgICAgICAgZW5kQ29sKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW5ldCB0aGUgZW5kIGluZGV4IHNvIGl0IGlzIGF0IHRoZSBzdGFydCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXJcbiAgICBlbmRJbmRleCsrO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzdGFydCBfY29sdW1uXywgY29udmVydGluZyB0aGUgdGhlIHN0cmluZyBpbmRleGVzIGJhY2sgdG9cbiAgICAvLyBjb2x1bW4gY29vcmRpbmF0ZXMuXG4gICAgbGV0IHN0YXJ0ID1cbiAgICAgICAgc3RhcnRJbmRleCAvLyBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGlvbidzIHN0YXJ0IGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgICsgY2hhck9mZnNldCAvLyBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBpbml0aWFsIGNoYXIncyBjb2x1bW4gYW5kIGluZGV4XG4gICAgICAgIC0gbGVmdFdpZGVDaGFyQ291bnQgLy8gVGhlIG51bWJlciBvZiB3aWRlIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhclxuICAgICAgICArIGxlZnRMb25nQ2hhck9mZnNldDsgLy8gVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhciBhZGRlZCBieSBjb2x1bW5zIHdpdGggc3RyaW5ncyBsb25nZXIgdGhhbiAxIChlbW9qaXMpXG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIGxlbmd0aCBpbiBfY29sdW1uc18sIGNvbnZlcnRpbmcgdGhlIHRoZSBzdHJpbmcgaW5kZXhlcyBiYWNrXG4gICAgLy8gdG8gY29sdW1uIGNvb3JkaW5hdGVzLlxuICAgIGxldCBsZW5ndGggPSBNYXRoLm1pbih0aGlzLl90ZXJtaW5hbC5jb2xzLCAvLyBEaXNhbGxvdyBsZW5ndGhzIGxhcmdlciB0aGFuIHRoZSB0ZXJtaW5hbCBjb2xzXG4gICAgICAgIGVuZEluZGV4IC8vIFRoZSBpbmRleCBvZiB0aGUgc2VsZWN0aW9uJ3MgZW5kIGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgIC0gc3RhcnRJbmRleCAvLyBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGlvbidzIHN0YXJ0IGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgICsgbGVmdFdpZGVDaGFyQ291bnQgLy8gVGhlIG51bWJlciBvZiB3aWRlIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhclxuICAgICAgICArIHJpZ2h0V2lkZUNoYXJDb3VudCAvLyBUaGUgbnVtYmVyIG9mIHdpZGUgY2hhcnMgcmlnaHQgb2YgdGhlIGluaXRpYWwgY2hhciAoaW5jbHVzaXZlKVxuICAgICAgICAtIGxlZnRMb25nQ2hhck9mZnNldCAvLyBUaGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyIGFkZGVkIGJ5IGNvbHVtbnMgd2l0aCBzdHJpbmdzIGxvbmdlciB0aGFuIDEgKGVtb2ppcylcbiAgICAgICAgLSByaWdodExvbmdDaGFyT2Zmc2V0KTsgLy8gVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGNoYXJzIHJpZ2h0IG9mIHRoZSBpbml0aWFsIGNoYXIgKGluY2x1c2l2ZSkgYWRkZWQgYnkgY29sdW1ucyB3aXRoIHN0cmluZ3MgbG9uZ2VyIHRoYW4gMSAoZW1vamlzKVxuXG4gICAgaWYgKCFhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uICYmIGxpbmUuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFJlY3Vyc2UgdXB3YXJkcyBpZiB0aGUgbGluZSBpcyB3cmFwcGVkIGFuZCB0aGUgd29yZCB3cmFwcyB0byB0aGUgYWJvdmUgbGluZVxuICAgIGlmIChmb2xsb3dXcmFwcGVkTGluZXNBYm92ZSkge1xuICAgICAgaWYgKHN0YXJ0ID09PSAwICYmIGJ1ZmZlckxpbmUuZ2V0Q29kZVBvaW50KDApICE9PSAzMiAvKicgJyovKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzQnVmZmVyTGluZSA9IHRoaXMuX2J1ZmZlci5saW5lcy5nZXQoY29vcmRzWzFdIC0gMSk7XG4gICAgICAgIGlmIChwcmV2aW91c0J1ZmZlckxpbmUgJiYgYnVmZmVyTGluZS5pc1dyYXBwZWQgJiYgcHJldmlvdXNCdWZmZXJMaW5lLmdldENvZGVQb2ludCh0aGlzLl90ZXJtaW5hbC5jb2xzIC0gMSkgIT09IDMyIC8qJyAnKi8pIHtcbiAgICAgICAgICBjb25zdCBwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoW3RoaXMuX3Rlcm1pbmFsLmNvbHMgLSAxLCBjb29yZHNbMV0gLSAxXSwgZmFsc2UsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICBpZiAocHJldmlvdXNMaW5lV29yZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLl90ZXJtaW5hbC5jb2xzIC0gcHJldmlvdXNMaW5lV29yZFBvc2l0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgc3RhcnQgLT0gb2Zmc2V0O1xuICAgICAgICAgICAgbGVuZ3RoICs9IG9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZWN1cnNlIGRvd253YXJkcyBpZiB0aGUgbGluZSBpcyB3cmFwcGVkIGFuZCB0aGUgd29yZCB3cmFwcyB0byB0aGUgbmV4dCBsaW5lXG4gICAgaWYgKGZvbGxvd1dyYXBwZWRMaW5lc0JlbG93KSB7XG4gICAgICBpZiAoc3RhcnQgKyBsZW5ndGggPT09IHRoaXMuX3Rlcm1pbmFsLmNvbHMgJiYgYnVmZmVyTGluZS5nZXRDb2RlUG9pbnQodGhpcy5fdGVybWluYWwuY29scyAtIDEpICE9PSAzMiAvKicgJyovKSB7XG4gICAgICAgIGNvbnN0IG5leHRCdWZmZXJMaW5lID0gdGhpcy5fYnVmZmVyLmxpbmVzLmdldChjb29yZHNbMV0gKyAxKTtcbiAgICAgICAgaWYgKG5leHRCdWZmZXJMaW5lICYmIG5leHRCdWZmZXJMaW5lLmlzV3JhcHBlZCAmJiBuZXh0QnVmZmVyTGluZS5nZXRDb2RlUG9pbnQoMCkgIT09IDMyIC8qJyAnKi8pIHtcbiAgICAgICAgICBjb25zdCBuZXh0TGluZVdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChbMCwgY29vcmRzWzFdICsgMV0sIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgaWYgKG5leHRMaW5lV29yZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBsZW5ndGggKz0gbmV4dExpbmVXb3JkUG9zaXRpb24ubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN0YXJ0LCBsZW5ndGggfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSB3b3JkIGF0IHRoZSBjb29yZGluYXRlcyBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGdldCB0aGUgd29yZCBhdC5cbiAgICogQHBhcmFtIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24gSWYgd2hpdGVzcGFjZSBzaG91bGQgYmUgc2VsZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBfc2VsZWN0V29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChjb29yZHMsIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24pO1xuICAgIGlmICh3b3JkUG9zaXRpb24pIHtcbiAgICAgIC8vIEFkanVzdCBuZWdhdGl2ZSBzdGFydCB2YWx1ZVxuICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCA8IDApIHtcbiAgICAgICAgd29yZFBvc2l0aW9uLnN0YXJ0ICs9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICAgIGNvb3Jkc1sxXS0tO1xuICAgICAgfVxuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbd29yZFBvc2l0aW9uLnN0YXJ0LCBjb29yZHNbMV1dO1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSB3b3JkUG9zaXRpb24ubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzZWxlY3Rpb24gZW5kIHRvIHRoZSB3b3JkIGF0IHRoZSBjb29yZGluYXRlZCBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGdldCB0aGUgd29yZCBhdC5cbiAgICovXG4gIHByaXZhdGUgX3NlbGVjdFRvV29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSk6IHZvaWQge1xuICAgIGNvbnN0IHdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChjb29yZHMsIHRydWUpO1xuICAgIGlmICh3b3JkUG9zaXRpb24pIHtcbiAgICAgIGxldCBlbmRSb3cgPSBjb29yZHNbMV07XG5cbiAgICAgIC8vIEFkanVzdCBuZWdhdGl2ZSBzdGFydCB2YWx1ZVxuICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCA8IDApIHtcbiAgICAgICAgd29yZFBvc2l0aW9uLnN0YXJ0ICs9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICAgIGVuZFJvdy0tO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3Qgd3JhcHBlZCBsZW5ndGggdmFsdWUsIHRoaXMgb25seSBuZWVkcyB0byBoYXBwZW4gd2hlbiB2YWx1ZXMgYXJlIHJldmVyc2VkIGFzIGluIHRoYXRcbiAgICAgIC8vIGNhc2Ugd2UncmUgaW50ZXJlc3RlZCBpbiB0aGUgc3RhcnQgb2YgdGhlIHdvcmQsIG5vdCB0aGUgZW5kXG4gICAgICBpZiAoIXRoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpIHtcbiAgICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCArIHdvcmRQb3NpdGlvbi5sZW5ndGggPiB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICAgICAgd29yZFBvc2l0aW9uLmxlbmd0aCAtPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgICAgIGVuZFJvdysrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl9tb2RlbC5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpID8gd29yZFBvc2l0aW9uLnN0YXJ0IDogd29yZFBvc2l0aW9uLnN0YXJ0ICsgd29yZFBvc2l0aW9uLmxlbmd0aCwgZW5kUm93XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgY29uc2lkZXJlZCBhIHdvcmQgc2VwYXJhdG9yIGJ5IHRoZSBzZWxlY3RcbiAgICogd29yZCBsb2dpYy5cbiAgICogQHBhcmFtIGNoYXIgVGhlIGNoYXJhY3RlciB0byBjaGVjay5cbiAgICovXG4gIHByaXZhdGUgX2lzQ2hhcldvcmRTZXBhcmF0b3IoY2VsbDogQ2VsbERhdGEpOiBib29sZWFuIHtcbiAgICAvLyBaZXJvIHdpZHRoIGNoYXJhY3RlcnMgYXJlIG5ldmVyIHNlcGFyYXRvcnMgYXMgdGhleSBhcmUgYWx3YXlzIHRvIHRoZVxuICAgIC8vIHJpZ2h0IG9mIHdpZGUgY2hhcmFjdGVyc1xuICAgIGlmIChjZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIFdPUkRfU0VQQVJBVE9SUy5pbmRleE9mKGNlbGwuZ2V0Q2hhcnMoKSkgPj0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSBsaW5lIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGxpbmUgVGhlIGxpbmUgaW5kZXguXG4gICAqL1xuICBwcm90ZWN0ZWQgX3NlbGVjdExpbmVBdChsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3cmFwcGVkUmFuZ2UgPSB0aGlzLl9idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZShsaW5lKTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IFswLCB3cmFwcGVkUmFuZ2UuZmlyc3RdO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl90ZXJtaW5hbC5jb2xzLCB3cmFwcGVkUmFuZ2UubGFzdF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbCB9IGZyb20gJy4vVHlwZXMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzZWxlY3Rpb24gd2l0aGluIHRoZSBidWZmZXIuIFRoaXMgbW9kZWwgb25seSBjYXJlcyBhYm91dCBjb2x1bW5cbiAqIGFuZCByb3cgY29vcmRpbmF0ZXMsIG5vdCB3aWRlIGNoYXJhY3RlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25Nb2RlbCB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHNlbGVjdCBhbGwgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICovXG4gIHB1YmxpYyBpc1NlbGVjdEFsbEFjdGl2ZTogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIFt4LCB5XSBwb3NpdGlvbiB0aGUgc2VsZWN0aW9uIHN0YXJ0cyBhdC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3Rpb25TdGFydDogW251bWJlciwgbnVtYmVyXTtcblxuICAvKipcbiAgICogVGhlIG1pbmltYWwgbGVuZ3RoIG9mIHRoZSBzZWxlY3Rpb24gZnJvbSB0aGUgc3RhcnQgcG9zaXRpb24uIFdoZW4gZG91YmxlXG4gICAqIGNsaWNraW5nIG9uIGEgd29yZCwgdGhlIHdvcmQgd2lsbCBiZSBzZWxlY3RlZCB3aGljaCBtYWtlcyB0aGUgc2VsZWN0aW9uXG4gICAqIHN0YXJ0IGF0IHRoZSBzdGFydCBvZiB0aGUgd29yZCBhbmQgbWFrZXMgdGhpcyB2YXJpYWJsZSB0aGUgbGVuZ3RoLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdGlvblN0YXJ0TGVuZ3RoOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBlbmRzIGF0LlxuICAgKi9cbiAgcHVibGljIHNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogSVRlcm1pbmFsXG4gICkge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnQgPSBudWxsO1xuICAgIHRoaXMuc2VsZWN0aW9uRW5kID0gbnVsbDtcbiAgICB0aGlzLmlzU2VsZWN0QWxsQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGZpbmFsIHNlbGVjdGlvbiBzdGFydCwgdGFraW5nIGludG8gY29uc2lkZXJhdGlvbiBzZWxlY3QgYWxsLlxuICAgKi9cbiAgcHVibGljIGdldCBmaW5hbFNlbGVjdGlvblN0YXJ0KCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsQWN0aXZlKSB7XG4gICAgICByZXR1cm4gWzAsIDBdO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5zZWxlY3Rpb25FbmQgfHwgIXRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkgPyB0aGlzLnNlbGVjdGlvbkVuZCA6IHRoaXMuc2VsZWN0aW9uU3RhcnQ7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGZpbmFsIHNlbGVjdGlvbiBlbmQsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gc2VsZWN0IGFsbCwgZG91YmxlIGNsaWNrXG4gICAqIHdvcmQgc2VsZWN0aW9uIGFuZCB0cmlwbGUgY2xpY2sgbGluZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGZpbmFsU2VsZWN0aW9uRW5kKCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICAgIGlmICh0aGlzLmlzU2VsZWN0QWxsQWN0aXZlKSB7XG4gICAgICByZXR1cm4gW3RoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55YmFzZSArIHRoaXMuX3Rlcm1pbmFsLnJvd3MgLSAxXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgc2VsZWN0aW9uIHN0YXJ0ICsgbGVuZ3RoIGlmIHRoZSBlbmQgZG9lc24ndCBleGlzdCBvciB0aGV5J3JlIHJldmVyc2VkXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvbkVuZCB8fCB0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpIHtcbiAgICAgIGNvbnN0IHN0YXJ0UGx1c0xlbmd0aCA9IHRoaXMuc2VsZWN0aW9uU3RhcnRbMF0gKyB0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoO1xuICAgICAgaWYgKHN0YXJ0UGx1c0xlbmd0aCA+IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgICAgcmV0dXJuIFtzdGFydFBsdXNMZW5ndGggJSB0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdICsgTWF0aC5mbG9vcihzdGFydFBsdXNMZW5ndGggLyB0aGlzLl90ZXJtaW5hbC5jb2xzKV07XG4gICAgICB9XG4gICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCwgdGhpcy5zZWxlY3Rpb25TdGFydFsxXV07XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSB0aGUgd29yZC9saW5lIGlzIHNlbGVjdGVkIGFmdGVyIGEgZG91YmxlL3RyaXBsZSBjbGlja1xuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKSB7XG4gICAgICAvLyBTZWxlY3QgdGhlIGxhcmdlciBvZiB0aGUgdHdvIHdoZW4gc3RhcnQgYW5kIGVuZCBhcmUgb24gdGhlIHNhbWUgbGluZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kWzFdID09PSB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdKSB7XG4gICAgICAgIHJldHVybiBbTWF0aC5tYXgodGhpcy5zZWxlY3Rpb25TdGFydFswXSArIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgsIHRoaXMuc2VsZWN0aW9uRW5kWzBdKSwgdGhpcy5zZWxlY3Rpb25FbmRbMV1dO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25FbmQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gc3RhcnQgYW5kIGVuZCBhcmUgcmV2ZXJzZWQuXG4gICAqL1xuICBwdWJsaWMgYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuc2VsZWN0aW9uRW5kO1xuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnRbMV0gPiBlbmRbMV0gfHwgKHN0YXJ0WzFdID09PSBlbmRbMV0gJiYgc3RhcnRbMF0gPiBlbmRbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgYnVmZmVyIGJlaW5nIHRyaW1tZWQsIGFkanVzdCB0aGUgc2VsZWN0aW9uIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgdGhlIGJ1ZmZlciBpcyBiZWluZyB0cmltbWVkLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZWZyZXNoIGlzIG5lY2Vzc2FyeS5cbiAgICovXG4gIHB1YmxpYyBvblRyaW0oYW1vdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyBBZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgdHJpbW1lZCBhbW91bnQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gLT0gYW1vdW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uRW5kWzFdIC09IGFtb3VudDtcbiAgICB9XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIGhhcyBtb3ZlZCBvZmYgdGhlIGJ1ZmZlciwgY2xlYXIgaXQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kICYmIHRoaXMuc2VsZWN0aW9uRW5kWzFdIDwgMCkge1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNlbGVjdGlvbiBzdGFydCBpcyB0cmltbWVkLCBlbnN1cmUgdGhlIHN0YXJ0IGNvbHVtbiBpcyAwLlxuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0ICYmIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gPCAwKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbCwgSVNvdW5kTWFuYWdlciB9IGZyb20gJy4vVHlwZXMnO1xuXG4vLyBTb3VyY2U6IGh0dHBzOi8vZnJlZXNvdW5kLm9yZy9wZW9wbGUvYWx0ZW1hcmsvc291bmRzLzQ1NzU5L1xuLy8gVGhpcyBzb3VuZCBpcyByZWxlYXNlZCB1bmRlciB0aGUgQ3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbiAzLjAgVW5wb3J0ZWRcbi8vIChDQyBCWSAzLjApIGxpY2Vuc2UuIEl0IHdhcyBjcmVhdGVkIGJ5ICdhbHRlbWFyaycuIE5vIG1vZGlmaWNhdGlvbnMgaGF2ZSBiZWVuXG4vLyBtYWRlLCBhcGFydCBmcm9tIHRoZSBjb252ZXJzaW9uIHRvIGJhc2U2NC5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0JFTExfU09VTkQgPSAnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdCQUFCWFFWWkZabTEwSUJBQUFBQUJBQUVBUkt3QUFJaFlBUUFDQUJBQVpHRjBZUVFCQUFEcEFGZ0N3QU1sQlpvRy93ZG1DY29LUkF5cERROFBiUkRCRVFRVE94UnRGWWNXbEJlUEdJVVpYaG9pRzg4YmNCejdISElkemgwV0hsTWVaeDUxSG1rZVV4NFdIczhkYWgwQUhYd2MzaHM5RzRzYXhSbnlHQklZR0JjUUZ2OFU0UlBBRW9ZUlFCQUNENzBOV3d3SEM2Z0pPd2pXQmxvRjdnT0JBaEFCa2Y4Yi9xdjhSL3ZlK1hmNElmZTc5Vy8wSmZQWjhaL3dkZTlON2lqdEUrd1U2eHZxTStsYjZIN253K1lYNW1ybHh1UXo1TXpqZStNYTQ5ZmlvZUtENG5YaVllSnk0cEhpdE9MMDRqL2puK01ONUlQa0ZPV3M1VTNtRGVmTTU1L29nT2wzNm03cmRPeUU3YWJ1eXU4RDhVbnlqL1BnOUQvMnFmY2IrWW42L3Z1Sy9Rai9sQUFsQWc9PSc7XG5cbmV4cG9ydCBjbGFzcyBTb3VuZE1hbmFnZXIgaW1wbGVtZW50cyBJU291bmRNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgX2F1ZGlvQ29udGV4dDogQXVkaW9Db250ZXh0O1xuXG4gIHN0YXRpYyBnZXQgYXVkaW9Db250ZXh0KCk6IEF1ZGlvQ29udGV4dCB8IG51bGwge1xuICAgIGlmICghU291bmRNYW5hZ2VyLl9hdWRpb0NvbnRleHQpIHtcbiAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dEN0b3I6IHR5cGVvZiBBdWRpb0NvbnRleHQgPSAoPGFueT53aW5kb3cpLkF1ZGlvQ29udGV4dCB8fCAoPGFueT53aW5kb3cpLndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICAgIGlmICghYXVkaW9Db250ZXh0Q3Rvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dlYiBBdWRpbyBBUEkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIENvbnNpZGVyIHVwZ3JhZGluZyB0byB0aGUgbGF0ZXN0IHZlcnNpb24nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBTb3VuZE1hbmFnZXIuX2F1ZGlvQ29udGV4dCA9IG5ldyBhdWRpb0NvbnRleHRDdG9yKCk7XG4gICAgfVxuICAgIHJldHVybiBTb3VuZE1hbmFnZXIuX2F1ZGlvQ29udGV4dDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3Rlcm1pbmFsOiBJVGVybWluYWxcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgcGxheUJlbGxTb3VuZCgpOiB2b2lkIHtcbiAgICBjb25zdCBjdHggPSBTb3VuZE1hbmFnZXIuYXVkaW9Db250ZXh0O1xuICAgIGlmICghY3R4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGJlbGxBdWRpb1NvdXJjZSA9IGN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICBjdHguZGVjb2RlQXVkaW9EYXRhKHRoaXMuX2Jhc2U2NFRvQXJyYXlCdWZmZXIodGhpcy5fcmVtb3ZlTWltZVR5cGUodGhpcy5fdGVybWluYWwub3B0aW9ucy5iZWxsU291bmQpKSwgKGJ1ZmZlcikgPT4ge1xuICAgICAgYmVsbEF1ZGlvU291cmNlLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICAgIGJlbGxBdWRpb1NvdXJjZS5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbik7XG4gICAgICBiZWxsQXVkaW9Tb3VyY2Uuc3RhcnQoMCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9iYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NDogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IHdpbmRvdy5hdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVNaW1lVHlwZShkYXRhVVJJOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dCB0byBnZXQgdGhlIG1pbWUtdHlwZSBhbmQgdGhlIGRhdGEgaXRzZWxmXG4gICAgY29uc3Qgc3BsaXRVcmkgPSBkYXRhVVJJLnNwbGl0KCcsJyk7XG5cbiAgICAvLyBSZXR1cm4gb25seSB0aGUgZGF0YVxuICAgIHJldHVybiBzcGxpdFVyaVsxXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5leHBvcnQgbGV0IGJsYW5rTGluZSA9ICdCbGFuayBsaW5lJztcbmV4cG9ydCBsZXQgcHJvbXB0TGFiZWwgPSAnVGVybWluYWwgaW5wdXQnO1xuZXhwb3J0IGxldCB0b29NdWNoT3V0cHV0ID0gJ1RvbyBtdWNoIG91dHB1dCB0byBhbm5vdW5jZSwgbmF2aWdhdGUgdG8gcm93cyBtYW51YWxseSB0byByZWFkJztcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKVxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogT3JpZ2luYWxseSBmb3JrZWQgZnJvbSAod2l0aCB0aGUgYXV0aG9yJ3MgcGVybWlzc2lvbik6XG4gKiAgIEZhYnJpY2UgQmVsbGFyZCdzIGphdmFzY3JpcHQgdnQxMDAgZm9yIGpzbGludXg6XG4gKiAgIGh0dHA6Ly9iZWxsYXJkLm9yZy9qc2xpbnV4L1xuICogICBDb3B5cmlnaHQgKGMpIDIwMTEgRmFicmljZSBCZWxsYXJkXG4gKiAgIFRoZSBvcmlnaW5hbCBkZXNpZ24gcmVtYWlucy4gVGhlIHRlcm1pbmFsIGl0c2VsZlxuICogICBoYXMgYmVlbiBleHRlbmRlZCB0byBpbmNsdWRlIHh0ZXJtIENTSSBjb2RlcywgYW1vbmdcbiAqICAgb3RoZXIgZmVhdHVyZXMuXG4gKlxuICogVGVybWluYWwgRW11bGF0aW9uIFJlZmVyZW5jZXM6XG4gKiAgIGh0dHA6Ly92dDEwMC5uZXQvXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMudHh0XG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbFxuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQvdnR0ZXN0L1xuICogICBodHRwOi8vd3d3Lmlud2FwLmNvbS9wZHAxMC9hbnNpY29kZS50eHRcbiAqICAgaHR0cDovL2xpbnV4LmRpZS5uZXQvbWFuLzQvY29uc29sZV9jb2Rlc1xuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNy91cnh2dFxuICovXG5cbmltcG9ydCB7IElJbnB1dEhhbmRsaW5nVGVybWluYWwsIElWaWV3cG9ydCwgSUNvbXBvc2l0aW9uSGVscGVyLCBJVGVybWluYWxPcHRpb25zLCBJVGVybWluYWwsIElCcm93c2VyLCBJTGlua2lmaWVyLCBJTGlua01hdGNoZXJPcHRpb25zLCBDdXN0b21LZXlFdmVudEhhbmRsZXIsIExpbmtNYXRjaGVySGFuZGxlciwgQ2hhcmFjdGVySm9pbmVySGFuZGxlciwgSUJ1ZmZlckxpbmUsIElBdHRyaWJ1dGVEYXRhLCBJTW91c2Vab25lTWFuYWdlciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXJTZXQgfSBmcm9tICcuL0J1ZmZlclNldCc7XG5pbXBvcnQgeyBCdWZmZXIsIE1BWF9CVUZGRVJfU0laRSwgREVGQVVMVF9BVFRSX0RBVEEgfSBmcm9tICcuL0J1ZmZlcic7XG5pbXBvcnQgeyBDb21wb3NpdGlvbkhlbHBlciB9IGZyb20gJy4vQ29tcG9zaXRpb25IZWxwZXInO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9jb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCc7XG5pbXBvcnQgeyByaWdodENsaWNrSGFuZGxlciwgbW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvciwgcGFzdGVIYW5kbGVyLCBjb3B5SGFuZGxlciB9IGZyb20gJy4vQ2xpcGJvYXJkJztcbmltcG9ydCB7IEMwIH0gZnJvbSAnLi9jb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuaW1wb3J0IHsgSW5wdXRIYW5kbGVyIH0gZnJvbSAnLi9JbnB1dEhhbmRsZXInO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVyL1JlbmRlcmVyJztcbmltcG9ydCB7IExpbmtpZmllciB9IGZyb20gJy4vTGlua2lmaWVyJztcbmltcG9ydCB7IFNlbGVjdGlvbk1hbmFnZXIgfSBmcm9tICcuL1NlbGVjdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ2hhck1lYXN1cmUgfSBmcm9tICcuL0NoYXJNZWFzdXJlJztcbmltcG9ydCAqIGFzIEJyb3dzZXIgZnJvbSAnLi9jb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnLi91aS9MaWZlY3ljbGUnO1xuaW1wb3J0ICogYXMgU3RyaW5ncyBmcm9tICcuL1N0cmluZ3MnO1xuaW1wb3J0IHsgTW91c2VIZWxwZXIgfSBmcm9tICcuL01vdXNlSGVscGVyJztcbmltcG9ydCB7IERFRkFVTFRfQkVMTF9TT1VORCwgU291bmRNYW5hZ2VyIH0gZnJvbSAnLi9Tb3VuZE1hbmFnZXInO1xuaW1wb3J0IHsgTW91c2Vab25lTWFuYWdlciB9IGZyb20gJy4vTW91c2Vab25lTWFuYWdlcic7XG5pbXBvcnQgeyBBY2Nlc3NpYmlsaXR5TWFuYWdlciB9IGZyb20gJy4vQWNjZXNzaWJpbGl0eU1hbmFnZXInO1xuaW1wb3J0IHsgU2NyZWVuRHByTW9uaXRvciB9IGZyb20gJy4vdWkvU2NyZWVuRHByTW9uaXRvcic7XG5pbXBvcnQgeyBJVGhlbWUsIElNYXJrZXIsIElEaXNwb3NhYmxlIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUgfSBmcm9tICcuL3JlbmRlcmVyL2F0bGFzL0NoYXJBdGxhc0NhY2hlJztcbmltcG9ydCB7IERvbVJlbmRlcmVyIH0gZnJvbSAnLi9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXInO1xuaW1wb3J0IHsgSUtleWJvYXJkRXZlbnQgfSBmcm9tICcuL2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBldmFsdWF0ZUtleWJvYXJkRXZlbnQgfSBmcm9tICcuL2NvcmUvaW5wdXQvS2V5Ym9hcmQnO1xuaW1wb3J0IHsgS2V5Ym9hcmRSZXN1bHRUeXBlLCBJQ2hhcnNldCB9IGZyb20gJy4vY29yZS9UeXBlcyc7XG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJy4vY29tbW9uL0Nsb25lJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlcjIsIElFdmVudCB9IGZyb20gJy4vY29tbW9uL0V2ZW50RW1pdHRlcjInO1xuaW1wb3J0IHsgQXR0cmlidXRlcyB9IGZyb20gJy4vQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBhcHBseVdpbmRvd3NNb2RlIH0gZnJvbSAnLi9XaW5kb3dzTW9kZSc7XG5cbi8vIExldCBpdCB3b3JrIGluc2lkZSBOb2RlLmpzIGZvciBhdXRvbWF0ZWQgdGVzdGluZyBwdXJwb3Nlcy5cbmNvbnN0IGRvY3VtZW50ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdy5kb2N1bWVudCA6IG51bGw7XG5cbi8qKlxuICogVGhlIGFtb3VudCBvZiB3cml0ZSByZXF1ZXN0cyB0byBxdWV1ZSBiZWZvcmUgc2VuZGluZyBhbiBYT0ZGIHNpZ25hbCB0byB0aGVcbiAqIHB0eSBwcm9jZXNzLiBUaGlzIG51bWJlciBtdXN0IGJlIHNtYWxsIGluIG9yZGVyIGZvciBeQyBhbmQgc2ltaWxhciBzZXF1ZW5jZXNcbiAqIHRvIGJlIHJlc3BvbnNpdmUuXG4gKi9cbmNvbnN0IFdSSVRFX0JVRkZFUl9QQVVTRV9USFJFU0hPTEQgPSA1O1xuXG4vKipcbiAqIFRoZSBtYXggbnVtYmVyIG9mIG1zIHRvIHNwZW5kIG9uIHdyaXRlcyBiZWZvcmUgYWxsb3dpbmcgdGhlIHJlbmRlcmVyIHRvXG4gKiBjYXRjaCB1cCB3aXRoIGEgMG1zIHNldFRpbWVvdXQuIEEgdmFsdWUgb2YgPCAzMyB0byBrZWVwIHVzIGNsb3NlIHRvXG4gKiAzMGZwcywgYW5kIGEgdmFsdWUgb2YgPCAxNiB0byB0cnkgdG8gcnVuIGF0IDYwZnBzLiBPZiBjb3Vyc2UsIHRoZSByZWFsIEZQU1xuICogZGVwZW5kcyBvbiB0aGUgdGltZSBpdCB0YWtlcyBmb3IgdGhlIHJlbmRlcmVyIHRvIGRyYXcgdGhlIGZyYW1lLlxuICovXG5jb25zdCBXUklURV9USU1FT1VUX01TID0gMTI7XG5cbmNvbnN0IE1JTklNVU1fQ09MUyA9IDI7IC8vIExlc3MgdGhhbiAyIGNhbiBtZXNzIHdpdGggd2lkZSBjaGFyc1xuY29uc3QgTUlOSU1VTV9ST1dTID0gMTtcblxuLyoqXG4gKiBUaGUgc2V0IG9mIG9wdGlvbnMgdGhhdCBvbmx5IGhhdmUgYW4gZWZmZWN0IHdoZW4gc2V0IGluIHRoZSBUZXJtaW5hbCBjb25zdHJ1Y3Rvci5cbiAqL1xuY29uc3QgQ09OU1RSVUNUT1JfT05MWV9PUFRJT05TID0gWydjb2xzJywgJ3Jvd3MnXTtcblxuY29uc3QgREVGQVVMVF9PUFRJT05TOiBJVGVybWluYWxPcHRpb25zID0ge1xuICBjb2xzOiA4MCxcbiAgcm93czogMjQsXG4gIGNvbnZlcnRFb2w6IGZhbHNlLFxuICB0ZXJtTmFtZTogJ3h0ZXJtJyxcbiAgY3Vyc29yQmxpbms6IGZhbHNlLFxuICBjdXJzb3JTdHlsZTogJ2Jsb2NrJyxcbiAgYmVsbFNvdW5kOiBERUZBVUxUX0JFTExfU09VTkQsXG4gIGJlbGxTdHlsZTogJ25vbmUnLFxuICBkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yczogdHJ1ZSxcbiAgZW5hYmxlQm9sZDogdHJ1ZSxcbiAgZXhwZXJpbWVudGFsQ2hhckF0bGFzOiAnc3RhdGljJyxcbiAgZm9udEZhbWlseTogJ2NvdXJpZXItbmV3LCBjb3VyaWVyLCBtb25vc3BhY2UnLFxuICBmb250U2l6ZTogMTUsXG4gIGZvbnRXZWlnaHQ6ICdub3JtYWwnLFxuICBmb250V2VpZ2h0Qm9sZDogJ2JvbGQnLFxuICBsaW5lSGVpZ2h0OiAxLjAsXG4gIGxldHRlclNwYWNpbmc6IDAsXG4gIHNjcm9sbGJhY2s6IDEwMDAsXG4gIHNjcmVlbktleXM6IGZhbHNlLFxuICBzY3JlZW5SZWFkZXJNb2RlOiBmYWxzZSxcbiAgZGVidWc6IGZhbHNlLFxuICBtYWNPcHRpb25Jc01ldGE6IGZhbHNlLFxuICBtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjogZmFsc2UsXG4gIGNhbmNlbEV2ZW50czogZmFsc2UsXG4gIGRpc2FibGVTdGRpbjogZmFsc2UsXG4gIHVzZUZsb3dDb250cm9sOiBmYWxzZSxcbiAgYWxsb3dUcmFuc3BhcmVuY3k6IGZhbHNlLFxuICB0YWJTdG9wV2lkdGg6IDgsXG4gIHRoZW1lOiBudWxsLFxuICByaWdodENsaWNrU2VsZWN0c1dvcmQ6IEJyb3dzZXIuaXNNYWMsXG4gIHJlbmRlcmVyVHlwZTogJ2NhbnZhcycsXG4gIHdpbmRvd3NNb2RlOiBmYWxzZVxufTtcblxuZXhwb3J0IGNsYXNzIFRlcm1pbmFsIGV4dGVuZHMgRXZlbnRFbWl0dGVyIGltcGxlbWVudHMgSVRlcm1pbmFsLCBJRGlzcG9zYWJsZSwgSUlucHV0SGFuZGxpbmdUZXJtaW5hbCB7XG4gIHB1YmxpYyB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHVibGljIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwdWJsaWMgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgLyoqXG4gICAqIFRoZSBIVE1MRWxlbWVudCB0aGF0IHRoZSB0ZXJtaW5hbCBpcyBjcmVhdGVkIGluLCBzZXQgYnkgVGVybWluYWwub3Blbi5cbiAgICovXG4gIHByaXZhdGUgX3BhcmVudDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX2NvbnRleHQ6IFdpbmRvdztcbiAgcHJpdmF0ZSBfZG9jdW1lbnQ6IERvY3VtZW50O1xuICBwcml2YXRlIF92aWV3cG9ydFNjcm9sbEFyZWE6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF92aWV3cG9ydEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9oZWxwZXJDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9jb21wb3NpdGlvblZpZXc6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgX3Zpc3VhbEJlbGxUaW1lcjogbnVtYmVyO1xuXG4gIHB1YmxpYyBicm93c2VyOiBJQnJvd3NlciA9IDxhbnk+QnJvd3NlcjtcblxuICBwdWJsaWMgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucztcblxuICAvLyBUT0RPOiBUaGlzIGNhbiBiZSBjaGFuZ2VkIHRvIGFuIGVudW0gb3IgYm9vbGVhbiwgMCBhbmQgMSBzZWVtIHRvIGJlIHRoZSBvbmx5IG9wdGlvbnNcbiAgcHVibGljIGN1cnNvclN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBjdXJzb3JIaWRkZW46IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfY3VzdG9tS2V5RXZlbnRIYW5kbGVyOiBDdXN0b21LZXlFdmVudEhhbmRsZXI7XG5cbiAgLy8gbW9kZXNcbiAgcHVibGljIGFwcGxpY2F0aW9uS2V5cGFkOiBib29sZWFuO1xuICBwdWJsaWMgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW47XG4gIHB1YmxpYyBvcmlnaW5Nb2RlOiBib29sZWFuO1xuICBwdWJsaWMgaW5zZXJ0TW9kZTogYm9vbGVhbjtcbiAgcHVibGljIHdyYXBhcm91bmRNb2RlOiBib29sZWFuOyAvLyBkZWZhdWx0czogeHRlcm0gLSB0cnVlLCB2dDEwMCAtIGZhbHNlXG4gIHB1YmxpYyBicmFja2V0ZWRQYXN0ZU1vZGU6IGJvb2xlYW47XG5cbiAgLy8gY2hhcnNldFxuICAvLyBUaGUgY3VycmVudCBjaGFyc2V0XG4gIHB1YmxpYyBjaGFyc2V0OiBJQ2hhcnNldDtcbiAgcHVibGljIGdjaGFyc2V0OiBudW1iZXI7XG4gIHB1YmxpYyBnbGV2ZWw6IG51bWJlcjtcbiAgcHVibGljIGNoYXJzZXRzOiBJQ2hhcnNldFtdO1xuXG4gIC8vIG1vdXNlIHByb3BlcnRpZXNcbiAgcHJpdmF0ZSBfZGVjTG9jYXRvcjogYm9vbGVhbjsgLy8gVGhpcyBpcyB1bnN0YWJsZSBhbmQgbmV2ZXIgc2V0XG4gIHB1YmxpYyB4MTBNb3VzZTogYm9vbGVhbjtcbiAgcHVibGljIHZ0MjAwTW91c2U6IGJvb2xlYW47XG4gIHByaXZhdGUgX3Z0MzAwTW91c2U6IGJvb2xlYW47IC8vIFRoaXMgaXMgdW5zdGFibGUgYW5kIG5ldmVyIHNldFxuICBwdWJsaWMgbm9ybWFsTW91c2U6IGJvb2xlYW47XG4gIHB1YmxpYyBtb3VzZUV2ZW50czogYm9vbGVhbjtcbiAgcHVibGljIHNlbmRGb2N1czogYm9vbGVhbjtcbiAgcHVibGljIHV0Zk1vdXNlOiBib29sZWFuO1xuICBwdWJsaWMgc2dyTW91c2U6IGJvb2xlYW47XG4gIHB1YmxpYyB1cnh2dE1vdXNlOiBib29sZWFuO1xuXG4gIC8vIG1pc2NcbiAgcHJpdmF0ZSBfcmVmcmVzaFN0YXJ0OiBudW1iZXI7XG4gIHByaXZhdGUgX3JlZnJlc2hFbmQ6IG51bWJlcjtcbiAgcHVibGljIHNhdmVkQ29sczogbnVtYmVyO1xuXG4gIHB1YmxpYyBjdXJBdHRyRGF0YTogSUF0dHJpYnV0ZURhdGE7XG4gIHByaXZhdGUgX2VyYXNlQXR0ckRhdGE6IElBdHRyaWJ1dGVEYXRhO1xuXG4gIHB1YmxpYyBwYXJhbXM6IChzdHJpbmcgfCBudW1iZXIpW107XG4gIHB1YmxpYyBjdXJyZW50UGFyYW06IHN0cmluZyB8IG51bWJlcjtcblxuICAvLyB1c2VyIGlucHV0IHN0YXRlc1xuICBwdWJsaWMgd3JpdGVCdWZmZXI6IHN0cmluZ1tdO1xuICBwcml2YXRlIF93cml0ZUluUHJvZ3Jlc3M6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgX3h0ZXJtLmpzXyBzZW50IFhPRkYgaW4gb3JkZXIgdG8gY2F0Y2ggdXAgd2l0aCB0aGUgcHR5IHByb2Nlc3MuXG4gICAqIFRoaXMgaXMgYSBkaXN0aW5jdCBzdGF0ZSBmcm9tIHdyaXRlU3RvcHBlZCBzbyB0aGF0IGlmIHRoZSB1c2VyIHJlcXVlc3RlZFxuICAgKiBYT0ZGIHZpYSBeUyB0aGF0IGl0IHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgcmVzdW1lIHdoZW4gdGhlIHdyaXRlQnVmZmVyIGdvZXNcbiAgICogYmVsb3cgdGhyZXNob2xkLlxuICAgKi9cbiAgcHJpdmF0ZSBfeG9mZlNlbnRUb0NhdGNoVXA6IGJvb2xlYW47XG5cbiAgLyoqIFdoZXRoZXIgd3JpdGluZyBoYXMgYmVlbiBzdG9wcGVkIGFzIGEgcmVzdWx0IG9mIFhPRkYgKi9cbiAgLy8gcHJpdmF0ZSBfd3JpdGVTdG9wcGVkOiBib29sZWFuO1xuXG4gIC8vIFN0b3JlIGlmIHVzZXIgd2VudCBicm93c2luZyBoaXN0b3J5IGluIHNjcm9sbGJhY2tcbiAgcHJpdmF0ZSBfdXNlclNjcm9sbGluZzogYm9vbGVhbjtcblxuICBwcml2YXRlIF9pbnB1dEhhbmRsZXI6IElucHV0SGFuZGxlcjtcbiAgcHVibGljIHNvdW5kTWFuYWdlcjogU291bmRNYW5hZ2VyO1xuICBwdWJsaWMgcmVuZGVyZXI6IElSZW5kZXJlcjtcbiAgcHVibGljIHNlbGVjdGlvbk1hbmFnZXI6IFNlbGVjdGlvbk1hbmFnZXI7XG4gIHB1YmxpYyBsaW5raWZpZXI6IElMaW5raWZpZXI7XG4gIHB1YmxpYyBidWZmZXJzOiBCdWZmZXJTZXQ7XG4gIHB1YmxpYyB2aWV3cG9ydDogSVZpZXdwb3J0O1xuICBwcml2YXRlIF9jb21wb3NpdGlvbkhlbHBlcjogSUNvbXBvc2l0aW9uSGVscGVyO1xuICBwdWJsaWMgY2hhck1lYXN1cmU6IENoYXJNZWFzdXJlO1xuICBwcml2YXRlIF9tb3VzZVpvbmVNYW5hZ2VyOiBJTW91c2Vab25lTWFuYWdlcjtcbiAgcHVibGljIG1vdXNlSGVscGVyOiBNb3VzZUhlbHBlcjtcbiAgcHJpdmF0ZSBfYWNjZXNzaWJpbGl0eU1hbmFnZXI6IEFjY2Vzc2liaWxpdHlNYW5hZ2VyO1xuICBwcml2YXRlIF9zY3JlZW5EcHJNb25pdG9yOiBTY3JlZW5EcHJNb25pdG9yO1xuICBwcml2YXRlIF90aGVtZTogSVRoZW1lO1xuICBwcml2YXRlIF93aW5kb3dzTW9kZTogSURpc3Bvc2FibGUgfCB1bmRlZmluZWQ7XG5cbiAgLy8gYnVmZmVybGluZSB0byBjbG9uZS9jb3B5IGZyb20gZm9yIG5ldyBibGFuayBsaW5lc1xuICBwcml2YXRlIF9ibGFua0xpbmU6IElCdWZmZXJMaW5lID0gbnVsbDtcblxuICBwdWJsaWMgY29sczogbnVtYmVyO1xuICBwdWJsaWMgcm93czogbnVtYmVyO1xuXG4gIHByaXZhdGUgX29uQ3Vyc29yTW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25DdXJzb3JNb3ZlKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25EYXRhID0gbmV3IEV2ZW50RW1pdHRlcjI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkRhdGEuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25LZXkgPSBuZXcgRXZlbnRFbWl0dGVyMjx7IGtleTogc3RyaW5nLCBkb21FdmVudDogS2V5Ym9hcmRFdmVudCB9PigpO1xuICBwdWJsaWMgZ2V0IG9uS2V5KCk6IElFdmVudDx7IGtleTogc3RyaW5nLCBkb21FdmVudDogS2V5Ym9hcmRFdmVudCB9PiB7IHJldHVybiB0aGlzLl9vbktleS5ldmVudDsgfVxuICBwcml2YXRlIF9vbkxpbmVGZWVkID0gbmV3IEV2ZW50RW1pdHRlcjI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmVGZWVkKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVuZGVyID0gbmV3IEV2ZW50RW1pdHRlcjI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVzaXplID0gbmV3IEV2ZW50RW1pdHRlcjI8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVzaXplKCk6IElFdmVudDx7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVzaXplLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uU2Nyb2xsID0gbmV3IEV2ZW50RW1pdHRlcjI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uU2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25UaXRsZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uVGl0bGVDaGFuZ2UuZXZlbnQ7IH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBgVGVybWluYWxgIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBzZXQgb2Ygb3B0aW9ucywgdGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTpcbiAgICogICAtIGBjdXJzb3JCbGlua2AgKGJvb2xlYW4pOiBXaGV0aGVyIHRoZSB0ZXJtaW5hbCBjdXJzb3IgYmxpbmtzXG4gICAqICAgLSBgY29sc2AgKG51bWJlcik6IFRoZSBudW1iZXIgb2YgY29sdW1ucyBvZiB0aGUgdGVybWluYWwgKGhvcml6b250YWwgc2l6ZSlcbiAgICogICAtIGByb3dzYCAobnVtYmVyKTogVGhlIG51bWJlciBvZiByb3dzIG9mIHRoZSB0ZXJtaW5hbCAodmVydGljYWwgc2l6ZSlcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAY2xhc3MgWHRlcm0gWHRlcm1cbiAgICogQGFsaWFzIG1vZHVsZTp4dGVybS9zcmMveHRlcm1cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIG9wdGlvbnM6IElUZXJtaW5hbE9wdGlvbnMgPSB7fVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0aW9ucyA9IGNsb25lKG9wdGlvbnMpO1xuICAgIHRoaXMuX3NldHVwKCk7XG5cbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhlc2UgaW4gdjRcbiAgICAvLyBGaXJlIG9sZCBzdHlsZSBldmVudHMgZnJvbSBuZXcgZW1pdHRlcnNcbiAgICB0aGlzLm9uQ3Vyc29yTW92ZSgoKSA9PiB0aGlzLmVtaXQoJ2N1cnNvcm1vdmUnKSk7XG4gICAgdGhpcy5vbkRhdGEoZSA9PiB0aGlzLmVtaXQoJ2RhdGEnLCBlKSk7XG4gICAgdGhpcy5vbktleShlID0+IHRoaXMuZW1pdCgna2V5JywgZS5rZXksIGUuZG9tRXZlbnQpKTtcbiAgICB0aGlzLm9uTGluZUZlZWQoKCkgPT4gdGhpcy5lbWl0KCdsaW5lZmVlZCcpKTtcbiAgICB0aGlzLm9uUmVuZGVyKGUgPT4gdGhpcy5lbWl0KCdyZWZyZXNoJywgZSkpO1xuICAgIHRoaXMub25SZXNpemUoZSA9PiB0aGlzLmVtaXQoJ3Jlc2l6ZScsIGUpKTtcbiAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKCgpID0+IHRoaXMuZW1pdCgnc2VsZWN0aW9uJykpO1xuICAgIHRoaXMub25TY3JvbGwoZSA9PiB0aGlzLmVtaXQoJ3Njcm9sbCcsIGUpKTtcbiAgICB0aGlzLm9uVGl0bGVDaGFuZ2UoZSA9PiB0aGlzLmVtaXQoJ3RpdGxlJywgZSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIGlmICh0aGlzLl93aW5kb3dzTW9kZSkge1xuICAgICAgdGhpcy5fd2luZG93c01vZGUuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fd2luZG93c01vZGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IG51bGw7XG4gICAgcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVyID0gKCkgPT4ge307XG4gICAgdGhpcy53cml0ZSA9ICgpID0+IHt9O1xuICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBkaXNwb3NlIGluc3RlYWQuXG4gICAqL1xuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3NldHVwKCk6IHZvaWQge1xuICAgIE9iamVjdC5rZXlzKERFRkFVTFRfT1BUSU9OUykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zW2tleV0gPT09IG51bGwgfHwgdGhpcy5vcHRpb25zW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IERFRkFVTFRfT1BUSU9OU1trZXldO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdGhpcy5jb250ZXh0ID0gb3B0aW9ucy5jb250ZXh0IHx8IHdpbmRvdztcbiAgICAvLyB0aGlzLmRvY3VtZW50ID0gb3B0aW9ucy5kb2N1bWVudCB8fCBkb2N1bWVudDtcbiAgICAvLyBUT0RPOiBXSHkgbm90IGRvY3VtZW50LmJvZHk/XG4gICAgdGhpcy5fcGFyZW50ID0gZG9jdW1lbnQgPyBkb2N1bWVudC5ib2R5IDogbnVsbDtcblxuICAgIHRoaXMuY29scyA9IE1hdGgubWF4KHRoaXMub3B0aW9ucy5jb2xzLCBNSU5JTVVNX0NPTFMpO1xuICAgIHRoaXMucm93cyA9IE1hdGgubWF4KHRoaXMub3B0aW9ucy5yb3dzLCBNSU5JTVVNX1JPV1MpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5oYW5kbGVyKSB7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLm9wdGlvbnMuaGFuZGxlcik7XG4gICAgfVxuXG4gICAgdGhpcy5jdXJzb3JTdGF0ZSA9IDA7XG4gICAgdGhpcy5jdXJzb3JIaWRkZW4gPSBmYWxzZTtcbiAgICB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgPSBudWxsO1xuXG4gICAgLy8gbW9kZXNcbiAgICB0aGlzLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2U7XG4gICAgdGhpcy5hcHBsaWNhdGlvbkN1cnNvciA9IGZhbHNlO1xuICAgIHRoaXMub3JpZ2luTW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuaW5zZXJ0TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMud3JhcGFyb3VuZE1vZGUgPSB0cnVlOyAvLyBkZWZhdWx0czogeHRlcm0gLSB0cnVlLCB2dDEwMCAtIGZhbHNlXG4gICAgdGhpcy5icmFja2V0ZWRQYXN0ZU1vZGUgPSBmYWxzZTtcblxuICAgIC8vIGNoYXJzZXRcbiAgICB0aGlzLmNoYXJzZXQgPSBudWxsO1xuICAgIHRoaXMuZ2NoYXJzZXQgPSBudWxsO1xuICAgIHRoaXMuZ2xldmVsID0gMDtcbiAgICAvLyBUT0RPOiBDYW4gdGhpcyBiZSBqdXN0IFtdP1xuICAgIHRoaXMuY2hhcnNldHMgPSBbbnVsbF07XG5cbiAgICB0aGlzLmN1ckF0dHJEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgICB0aGlzLl9lcmFzZUF0dHJEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcblxuICAgIHRoaXMucGFyYW1zID0gW107XG4gICAgdGhpcy5jdXJyZW50UGFyYW0gPSAwO1xuXG4gICAgLy8gdXNlciBpbnB1dCBzdGF0ZXNcbiAgICB0aGlzLndyaXRlQnVmZmVyID0gW107XG4gICAgdGhpcy5fd3JpdGVJblByb2dyZXNzID0gZmFsc2U7XG5cbiAgICB0aGlzLl94b2ZmU2VudFRvQ2F0Y2hVcCA9IGZhbHNlO1xuICAgIC8vIHRoaXMuX3dyaXRlU3RvcHBlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3VzZXJTY3JvbGxpbmcgPSBmYWxzZTtcblxuICAgIC8vIFJlZ2lzdGVyIGlucHV0IGhhbmRsZXIgYW5kIHJlZmlyZS9oYW5kbGUgZXZlbnRzXG4gICAgdGhpcy5faW5wdXRIYW5kbGVyID0gbmV3IElucHV0SGFuZGxlcih0aGlzKTtcbiAgICB0aGlzLl9pbnB1dEhhbmRsZXIub25DdXJzb3JNb3ZlKCgpID0+IHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCkpO1xuICAgIHRoaXMuX2lucHV0SGFuZGxlci5vbkxpbmVGZWVkKCgpID0+IHRoaXMuX29uTGluZUZlZWQuZmlyZSgpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlcik7XG5cbiAgICAvLyBSZXVzZSByZW5kZXJlciBpZiB0aGUgVGVybWluYWwgaXMgYmVpbmcgcmVjcmVhdGVkIHZpYSBhIHJlc2V0IGNhbGwuXG4gICAgdGhpcy5yZW5kZXJlciA9IHRoaXMucmVuZGVyZXIgfHwgbnVsbDtcbiAgICB0aGlzLnNlbGVjdGlvbk1hbmFnZXIgPSB0aGlzLnNlbGVjdGlvbk1hbmFnZXIgfHwgbnVsbDtcbiAgICB0aGlzLmxpbmtpZmllciA9IHRoaXMubGlua2lmaWVyIHx8IG5ldyBMaW5raWZpZXIodGhpcyk7XG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlciA9IHRoaXMuX21vdXNlWm9uZU1hbmFnZXIgfHwgbnVsbDtcbiAgICB0aGlzLnNvdW5kTWFuYWdlciA9IHRoaXMuc291bmRNYW5hZ2VyIHx8IG5ldyBTb3VuZE1hbmFnZXIodGhpcyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHRlcm1pbmFsJ3MgYnVmZmVycyBhbmQgc2V0IHRoZSBjdXJyZW50IGJ1ZmZlclxuICAgIHRoaXMuYnVmZmVycyA9IG5ldyBCdWZmZXJTZXQodGhpcyk7XG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uTWFuYWdlcikge1xuICAgICAgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICB0aGlzLnNlbGVjdGlvbk1hbmFnZXIuaW5pdEJ1ZmZlcnNMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLndpbmRvd3NNb2RlKSB7XG4gICAgICB0aGlzLl93aW5kb3dzTW9kZSA9IGFwcGx5V2luZG93c01vZGUodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIHByb3BlcnR5IHRvIGFjdGl2ZSBidWZmZXIuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGJ1ZmZlcigpOiBCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlO1xuICB9XG5cbiAgLyoqXG4gICAqIGJhY2tfY29sb3JfZXJhc2UgZmVhdHVyZSBmb3IgeHRlcm0uXG4gICAqL1xuICBwdWJsaWMgZXJhc2VBdHRyRGF0YSgpOiBJQXR0cmlidXRlRGF0YSB7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YS5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IDB4RkZGRkZGKTtcbiAgICB0aGlzLl9lcmFzZUF0dHJEYXRhLmJnIHw9IHRoaXMuY3VyQXR0ckRhdGEuYmcgJiB+MHhGQzAwMDAwMDtcbiAgICByZXR1cm4gdGhpcy5fZXJhc2VBdHRyRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgdGVybWluYWwuIERlbGVnYXRlcyBmb2N1cyBoYW5kbGluZyB0byB0aGUgdGVybWluYWwncyBET00gZWxlbWVudC5cbiAgICovXG4gIHB1YmxpYyBmb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50ZXh0YXJlYSkge1xuICAgICAgdGhpcy50ZXh0YXJlYS5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBpc0ZvY3VzZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMudGV4dGFyZWEgJiYgZG9jdW1lbnQuaGFzRm9jdXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYW4gb3B0aW9uJ3MgdmFsdWUgZnJvbSB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBrZXkgVGhlIG9wdGlvbiBrZXkuXG4gICAqL1xuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogc3RyaW5nKTogYW55IHtcbiAgICBpZiAoIShrZXkgaW4gREVGQVVMVF9PUFRJT05TKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb24gd2l0aCBrZXkgXCInICsga2V5ICsgJ1wiJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYW4gb3B0aW9uIG9uIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGtleSBUaGUgb3B0aW9uIGtleS5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSBvcHRpb24gdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKCEoa2V5IGluIERFRkFVTFRfT1BUSU9OUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9uIHdpdGgga2V5IFwiJyArIGtleSArICdcIicpO1xuICAgIH1cbiAgICBpZiAoQ09OU1RSVUNUT1JfT05MWV9PUFRJT05TLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE9wdGlvbiBcIiR7a2V5fVwiIGNhbiBvbmx5IGJlIHNldCBpbiB0aGUgY29uc3RydWN0b3JgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9uc1trZXldID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSAnYmVsbFN0eWxlJzpcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3Vyc29yU3R5bGUnOlxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUgPSAnYmxvY2snO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZm9udFdlaWdodCc6XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZSA9ICdub3JtYWwnO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZm9udFdlaWdodEJvbGQnOlxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUgPSAnYm9sZCc7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsaW5lSGVpZ2h0JzpcbiAgICAgICAgaWYgKHZhbHVlIDwgMSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgJHtrZXl9IGNhbm5vdCBiZSBsZXNzIHRoYW4gMSwgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICBjYXNlICdyZW5kZXJlclR5cGUnOlxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgdmFsdWUgPSAnY2FudmFzJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RhYlN0b3BXaWR0aCc6XG4gICAgICAgIGlmICh2YWx1ZSA8IDEpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYCR7a2V5fSBjYW5ub3QgYmUgbGVzcyB0aGFuIDEsIHZhbHVlOiAke3ZhbHVlfWApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RoZW1lJzpcbiAgICAgICAgLy8gSWYgb3BlbiBoYXMgYmVlbiBjYWxsZWQgd2UgZG8gbm90IHdhbnQgdG8gc2V0IG9wdGlvbnMudGhlbWUgYXMgdGhlXG4gICAgICAgIC8vIHNvdXJjZSBvZiB0cnV0aCBpcyBvd25lZCBieSB0aGUgcmVuZGVyZXIuXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XG4gICAgICAgICAgdGhpcy5fc2V0VGhlbWUoPElUaGVtZT52YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2Nyb2xsYmFjayc6XG4gICAgICAgIHZhbHVlID0gTWF0aC5taW4odmFsdWUsIE1BWF9CVUZGRVJfU0laRSk7XG5cbiAgICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgJHtrZXl9IGNhbm5vdCBiZSBsZXNzIHRoYW4gMCwgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNba2V5XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICBjb25zdCBuZXdCdWZmZXJMZW5ndGggPSB0aGlzLnJvd3MgKyB2YWx1ZTtcbiAgICAgICAgICBpZiAodGhpcy5idWZmZXIubGluZXMubGVuZ3RoID4gbmV3QnVmZmVyTGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBhbW91bnRUb1RyaW0gPSB0aGlzLmJ1ZmZlci5saW5lcy5sZW5ndGggLSBuZXdCdWZmZXJMZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBuZWVkc1JlZnJlc2ggPSAodGhpcy5idWZmZXIueWRpc3AgLSBhbW91bnRUb1RyaW0gPCAwKTtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnRyaW1TdGFydChhbW91bnRUb1RyaW0pO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIueWJhc2UgPSBNYXRoLm1heCh0aGlzLmJ1ZmZlci55YmFzZSAtIGFtb3VudFRvVHJpbSwgMCk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KHRoaXMuYnVmZmVyLnlkaXNwIC0gYW1vdW50VG9UcmltLCAwKTtcbiAgICAgICAgICAgIGlmIChuZWVkc1JlZnJlc2gpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgY2FzZSAnZm9udEZhbWlseSc6XG4gICAgICBjYXNlICdmb250U2l6ZSc6XG4gICAgICAgIC8vIFdoZW4gdGhlIGZvbnQgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgY2VsbHMgbWF5IGNoYW5nZSB3aGljaCByZXF1aXJlcyBhIHJlbmRlcmVyIGNsZWFyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuY2hhck1lYXN1cmUubWVhc3VyZSh0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMnOlxuICAgICAgY2FzZSAnZXhwZXJpbWVudGFsQ2hhckF0bGFzJzpcbiAgICAgIGNhc2UgJ2VuYWJsZUJvbGQnOlxuICAgICAgY2FzZSAnbGV0dGVyU3BhY2luZyc6XG4gICAgICBjYXNlICdsaW5lSGVpZ2h0JzpcbiAgICAgIGNhc2UgJ2ZvbnRXZWlnaHQnOlxuICAgICAgY2FzZSAnZm9udFdlaWdodEJvbGQnOlxuICAgICAgICAvLyBXaGVuIHRoZSBmb250IGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIGNlbGxzIG1heSBjaGFuZ2Ugd2hpY2ggcmVxdWlyZXMgYSByZW5kZXJlciBjbGVhclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlcikge1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLm9uUmVzaXplKHRoaXMuY29scywgdGhpcy5yb3dzKTtcbiAgICAgICAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyZW5kZXJlclR5cGUnOlxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlcikge1xuICAgICAgICAgIHRoaXMudW5yZWdpc3Rlcih0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXR1cFJlbmRlcmVyKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIub25DaGFyU2l6ZUNoYW5nZWQoKTtcbiAgICAgICAgaWYgKHRoaXMuX3RoZW1lKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRUaGVtZSh0aGlzLl90aGVtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3VzZUhlbHBlci5zZXRSZW5kZXJlcih0aGlzLnJlbmRlcmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzY3JvbGxiYWNrJzpcbiAgICAgICAgdGhpcy5idWZmZXJzLnJlc2l6ZSh0aGlzLmNvbHMsIHRoaXMucm93cyk7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0KSB7XG4gICAgICAgICAgdGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2NyZWVuUmVhZGVyTW9kZSc6XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIGlmICghdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gbmV3IEFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0YWJTdG9wV2lkdGgnOiB0aGlzLmJ1ZmZlcnMuc2V0dXBUYWJTdG9wcygpOyBicmVhaztcbiAgICAgIGNhc2UgJ3dpbmRvd3NNb2RlJzpcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLl93aW5kb3dzTW9kZSkge1xuICAgICAgICAgICAgdGhpcy5fd2luZG93c01vZGUgPSBhcHBseVdpbmRvd3NNb2RlKHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5fd2luZG93c01vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvd3NNb2RlLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvd3NNb2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gSW5mb3JtIHJlbmRlcmVyIG9mIGNoYW5nZXNcbiAgICBpZiAodGhpcy5yZW5kZXJlcikge1xuICAgICAgdGhpcy5yZW5kZXJlci5vbk9wdGlvbnNDaGFuZ2VkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJpbmRzIHRoZSBkZXNpcmVkIGZvY3VzIGJlaGF2aW9yIG9uIGEgZ2l2ZW4gdGVybWluYWwgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSBfb25UZXh0QXJlYUZvY3VzKGV2OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VuZEZvY3VzKSB7XG4gICAgICB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1tJJyk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZXYpO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdmb2N1cycpO1xuICAgIHRoaXMuc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuZW1pdCgnZm9jdXMnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCbHVyIHRoZSB0ZXJtaW5hbCwgY2FsbGluZyB0aGUgYmx1ciBmdW5jdGlvbiBvbiB0aGUgdGVybWluYWwncyB1bmRlcmx5aW5nXG4gICAqIHRleHRhcmVhLlxuICAgKi9cbiAgcHVibGljIGJsdXIoKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMudGV4dGFyZWEuYmx1cigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJpbmRzIHRoZSBkZXNpcmVkIGJsdXIgYmVoYXZpb3Igb24gYSBnaXZlbiB0ZXJtaW5hbCBvYmplY3QuXG4gICAqL1xuICBwcml2YXRlIF9vblRleHRBcmVhQmx1cigpOiB2b2lkIHtcbiAgICAvLyBUZXh0IGNhbiBzYWZlbHkgYmUgcmVtb3ZlZCBvbiBibHVyLiBEb2luZyBpdCBlYXJsaWVyIGNvdWxkIGludGVyZmVyZSB3aXRoXG4gICAgLy8gc2NyZWVuIHJlYWRlcnMgcmVhZGluZyBpdCBvdXQuXG4gICAgdGhpcy50ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgIHRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LCB0aGlzLmJ1ZmZlci55KTtcbiAgICBpZiAodGhpcy5zZW5kRm9jdXMpIHtcbiAgICAgIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnW08nKTtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzJyk7XG4gICAgdGhpcy5lbWl0KCdibHVyJyk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAqL1xuICBwcml2YXRlIF9pbml0R2xvYmFsKCk6IHZvaWQge1xuICAgIHRoaXMuX2JpbmRLZXlzKCk7XG5cbiAgICAvLyBCaW5kIGNsaXBib2FyZCBmdW5jdGlvbmFsaXR5XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50LCAnY29weScsIChldmVudDogQ2xpcGJvYXJkRXZlbnQpID0+IHtcbiAgICAgIC8vIElmIG1vdXNlIGV2ZW50cyBhcmUgYWN0aXZlIGl0IG1lYW5zIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBpcyBkaXNhYmxlZCBhbmRcbiAgICAgIC8vIGNvcHkgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIGhvc3QgcHJvZ3JhbS5cbiAgICAgIGlmICghdGhpcy5oYXNTZWxlY3Rpb24oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb3B5SGFuZGxlcihldmVudCwgdGhpcywgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyKTtcbiAgICB9KSk7XG4gICAgY29uc3QgcGFzdGVIYW5kbGVyV3JhcHBlciA9IChldmVudDogQ2xpcGJvYXJkRXZlbnQpID0+IHBhc3RlSGFuZGxlcihldmVudCwgdGhpcyk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ3Bhc3RlJywgcGFzdGVIYW5kbGVyV3JhcHBlcikpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ3Bhc3RlJywgcGFzdGVIYW5kbGVyV3JhcHBlcikpO1xuXG4gICAgLy8gSGFuZGxlIHJpZ2h0IGNsaWNrIGNvbnRleHQgbWVudXNcbiAgICBpZiAoQnJvd3Nlci5pc0ZpcmVmb3gpIHtcbiAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBhcHBlYXIgdG8gZmlyZSB0aGUgY29udGV4dG1lbnUgZXZlbnQgb24gcmlnaHQgY2xpY2tcbiAgICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAyKSB7XG4gICAgICAgICAgcmlnaHRDbGlja0hhbmRsZXIoZXZlbnQsIHRoaXMsIHRoaXMuc2VsZWN0aW9uTWFuYWdlciwgdGhpcy5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50LCAnY29udGV4dG1lbnUnLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgcmlnaHRDbGlja0hhbmRsZXIoZXZlbnQsIHRoaXMsIHRoaXMuc2VsZWN0aW9uTWFuYWdlciwgdGhpcy5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCk7XG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gTW92ZSB0aGUgdGV4dGFyZWEgdW5kZXIgdGhlIGN1cnNvciB3aGVuIG1pZGRsZSBjbGlja2luZyBvbiBMaW51eCB0byBlbnN1cmVcbiAgICAvLyBtaWRkbGUgY2xpY2sgdG8gcGFzdGUgc2VsZWN0aW9uIHdvcmtzLiBUaGlzIG9ubHkgYXBwZWFycyB0byB3b3JrIGluIENocm9tZVxuICAgIC8vIGF0IHRoZSB0aW1lIGlzIHdyaXRpbmcuXG4gICAgaWYgKEJyb3dzZXIuaXNMaW51eCkge1xuICAgICAgLy8gVXNlIGF1eGNsaWNrIGV2ZW50IG92ZXIgbW91c2Vkb3duIHRoZSBsYXR0ZXIgZG9lc24ndCBzZWVtIHRvIHdvcmsuIE5vdGVcbiAgICAgIC8vIHRoYXQgdGhlIHJlZ3VsYXIgY2xpY2sgZXZlbnQgZG9lc24ndCBmaXJlIGZvciB0aGUgbWlkZGxlIG1vdXNlIGJ1dHRvbi5cbiAgICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ2F1eGNsaWNrJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDEpIHtcbiAgICAgICAgICBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKGV2ZW50LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBrZXkgaGFuZGxpbmcgdG8gdGhlIHRlcm1pbmFsXG4gICAqL1xuICBwcml2YXRlIF9iaW5kS2V5cygpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQsICdrZXlkb3duJywgZnVuY3Rpb24gKGV2OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWxmLl9rZXlEb3duKGV2KTtcbiAgICB9LCB0cnVlKSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQsICdrZXlwcmVzcycsIGZ1bmN0aW9uIChldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRoaXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VsZi5fa2V5UHJlc3MoZXYpO1xuICAgIH0sIHRydWUpKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ2tleXVwJywgKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXdhc01vZGlmaWVyS2V5T25seUV2ZW50KGV2KSkge1xuICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX2tleVVwKGV2KTtcbiAgICB9LCB0cnVlKSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAna2V5ZG93bicsIChldjogS2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5fa2V5RG93bihldiksIHRydWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAna2V5cHJlc3MnLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleVByZXNzKGV2KSwgdHJ1ZSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdjb21wb3NpdGlvbnN0YXJ0JywgKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25zdGFydCgpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2NvbXBvc2l0aW9udXBkYXRlJywgKGU6IENvbXBvc2l0aW9uRXZlbnQpID0+IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9udXBkYXRlKGUpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2NvbXBvc2l0aW9uZW5kJywgKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25lbmQoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vblJlbmRlcigoKSA9PiB0aGlzLl9jb21wb3NpdGlvbkhlbHBlci51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoZSA9PiB0aGlzLl9xdWV1ZUxpbmtpZmljYXRpb24oZS5zdGFydCwgZS5lbmQpKSk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIHRlcm1pbmFsIHdpdGhpbiBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IFRoZSBlbGVtZW50IHRvIGNyZWF0ZSB0aGUgdGVybWluYWwgd2l0aGluLlxuICAgKi9cbiAgcHVibGljIG9wZW4ocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudCB8fCB0aGlzLl9wYXJlbnQ7XG5cbiAgICBpZiAoIXRoaXMuX3BhcmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXJtaW5hbCByZXF1aXJlcyBhIHBhcmVudCBlbGVtZW50LicpO1xuICAgIH1cblxuICAgIC8vIEdyYWIgZ2xvYmFsIGVsZW1lbnRzXG4gICAgdGhpcy5fY29udGV4dCA9IHRoaXMuX3BhcmVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgIHRoaXMuX2RvY3VtZW50ID0gdGhpcy5fcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG5cbiAgICB0aGlzLl9zY3JlZW5EcHJNb25pdG9yID0gbmV3IFNjcmVlbkRwck1vbml0b3IoKTtcbiAgICB0aGlzLl9zY3JlZW5EcHJNb25pdG9yLnNldExpc3RlbmVyKCgpID0+IHRoaXMuZW1pdCgnZHByY2hhbmdlJywgd2luZG93LmRldmljZVBpeGVsUmF0aW8pKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3NjcmVlbkRwck1vbml0b3IpO1xuXG4gICAgLy8gQ3JlYXRlIG1haW4gZWxlbWVudCBjb250YWluZXJcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmVsZW1lbnQuZGlyID0gJ2x0cic7ICAgLy8geHRlcm0uY3NzIGFzc3VtZXMgTFRSXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Rlcm1pbmFsJyk7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtJyk7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgIHRoaXMuX3BhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuXG4gICAgLy8gUGVyZm9ybWFuY2U6IFVzZSBhIGRvY3VtZW50IGZyYWdtZW50IHRvIGJ1aWxkIHRoZSB0ZXJtaW5hbFxuICAgIC8vIHZpZXdwb3J0IGFuZCBoZWxwZXIgZWxlbWVudHMgZGV0YWNoZWQgZnJvbSB0aGUgRE9NXG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLXZpZXdwb3J0Jyk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdmlld3BvcnRFbGVtZW50KTtcbiAgICB0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEuY2xhc3NMaXN0LmFkZCgneHRlcm0tc2Nyb2xsLWFyZWEnKTtcbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhKTtcblxuICAgIHRoaXMuc2NyZWVuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuc2NyZWVuRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS1zY3JlZW4nKTtcbiAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgaG9sZCBoZWxwZXJzIGxpa2UgdGhlIHRleHRhcmVhIGZvclxuICAgIC8vIGNhcHR1cmluZyBET00gRXZlbnRzLiBUaGVuIHByb2R1Y2UgdGhlIGhlbHBlcnMuXG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWhlbHBlcnMnKTtcbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5faGVscGVyQ29udGFpbmVyKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjcmVlbkVsZW1lbnQpO1xuXG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlciA9IG5ldyBNb3VzZVpvbmVNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fbW91c2Vab25lTWFuYWdlcik7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uU2Nyb2xsKCgpID0+IHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuY2xlYXJBbGwoKSkpO1xuICAgIHRoaXMubGlua2lmaWVyLmF0dGFjaFRvRG9tKHRoaXMuX21vdXNlWm9uZU1hbmFnZXIpO1xuXG4gICAgdGhpcy50ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5jbGFzc0xpc3QuYWRkKCd4dGVybS1oZWxwZXItdGV4dGFyZWEnKTtcbiAgICAvLyBUT0RPOiBOZXcgQVBJIHRvIHNldCB0aXRsZT8gVGhpcyBjb3VsZCBzYXkgXCJUZXJtaW5hbCBiYXNoIGlucHV0XCIsIGV0Yy5cbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIFN0cmluZ3MucHJvbXB0TGFiZWwpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhcmlhLW11bHRpbGluZScsICdmYWxzZScpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhdXRvY29ycmVjdCcsICdvZmYnKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXV0b2NhcGl0YWxpemUnLCAnb2ZmJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3NwZWxsY2hlY2snLCAnZmFsc2UnKTtcbiAgICB0aGlzLnRleHRhcmVhLnRhYkluZGV4ID0gMDtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAnZm9jdXMnLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX29uVGV4dEFyZWFGb2N1cyhldikpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAnYmx1cicsICgpID0+IHRoaXMuX29uVGV4dEFyZWFCbHVyKCkpKTtcbiAgICB0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50ZXh0YXJlYSk7XG5cbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LmFkZCgnY29tcG9zaXRpb24tdmlldycpO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyID0gbmV3IENvbXBvc2l0aW9uSGVscGVyKHRoaXMudGV4dGFyZWEsIHRoaXMuX2NvbXBvc2l0aW9uVmlldywgdGhpcyk7XG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NvbXBvc2l0aW9uVmlldyk7XG5cbiAgICB0aGlzLmNoYXJNZWFzdXJlID0gbmV3IENoYXJNZWFzdXJlKGRvY3VtZW50LCB0aGlzLl9oZWxwZXJDb250YWluZXIpO1xuXG4gICAgLy8gUGVyZm9ybWFuY2U6IEFkZCB2aWV3cG9ydCBhbmQgaGVscGVyIGVsZW1lbnRzIGZyb20gdGhlIGZyYWdtZW50XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIHRoaXMuX3NldHVwUmVuZGVyZXIoKTtcbiAgICB0aGlzLl90aGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZTtcbiAgICB0aGlzLm9wdGlvbnMudGhlbWUgPSBudWxsO1xuICAgIHRoaXMudmlld3BvcnQgPSBuZXcgVmlld3BvcnQodGhpcywgdGhpcy5fdmlld3BvcnRFbGVtZW50LCB0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEsIHRoaXMuY2hhck1lYXN1cmUpO1xuICAgIHRoaXMudmlld3BvcnQub25UaGVtZUNoYW5nZWQodGhpcy5yZW5kZXJlci5jb2xvck1hbmFnZXIuY29sb3JzKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMudmlld3BvcnQpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uQ3Vyc29yTW92ZSgoKSA9PiB0aGlzLnJlbmRlcmVyLm9uQ3Vyc29yTW92ZSgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVzaXplKCgpID0+IHRoaXMucmVuZGVyZXIub25SZXNpemUodGhpcy5jb2xzLCB0aGlzLnJvd3MpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLmFkZERpc3Bvc2FibGVMaXN0ZW5lcignYmx1cicsICgpID0+IHRoaXMucmVuZGVyZXIub25CbHVyKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKCdmb2N1cycsICgpID0+IHRoaXMucmVuZGVyZXIub25Gb2N1cygpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLmFkZERpc3Bvc2FibGVMaXN0ZW5lcignZHByY2hhbmdlJywgKCkgPT4gdGhpcy5yZW5kZXJlci5vbldpbmRvd1Jlc2l6ZSh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykpKTtcbiAgICAvLyBkcHJjaGFuZ2Ugc2hvdWxkIGhhbmRsZSB0aGlzIGNhc2UsIHdlIG5lZWQgdGhpcyBhcyB3ZWxsIGZvciBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgdGhlXG4gICAgLy8gbWF0Y2hNZWRpYSBxdWVyeS5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih3aW5kb3csICdyZXNpemUnLCAoKSA9PiB0aGlzLnJlbmRlcmVyLm9uV2luZG93UmVzaXplKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5jaGFyTWVhc3VyZS5vbkNoYXJTaXplQ2hhbmdlZCgoKSA9PiB0aGlzLnJlbmRlcmVyLm9uQ2hhclNpemVDaGFuZ2VkKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMucmVuZGVyZXIub25DYW52YXNSZXNpemUoKCkgPT4gdGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpKSk7XG5cbiAgICB0aGlzLnNlbGVjdGlvbk1hbmFnZXIgPSBuZXcgU2VsZWN0aW9uTWFuYWdlcih0aGlzLCB0aGlzLmNoYXJNZWFzdXJlKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuc2VsZWN0aW9uTWFuYWdlci5vblNlbGVjdGlvbkNoYW5nZSgoKSA9PiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQsICdtb3VzZWRvd24nLCAoZTogTW91c2VFdmVudCkgPT4gdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLm9uTW91c2VEb3duKGUpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLnNlbGVjdGlvbk1hbmFnZXIub25SZWRyYXdSZXF1ZXN0KGUgPT4gdGhpcy5yZW5kZXJlci5vblNlbGVjdGlvbkNoYW5nZWQoZS5zdGFydCwgZS5lbmQsIGUuY29sdW1uU2VsZWN0TW9kZSkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuc2VsZWN0aW9uTWFuYWdlci5vbkxpbnV4TW91c2VTZWxlY3Rpb24odGV4dCA9PiB7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgbmV3IHNlbGVjdGlvbiwgcHV0IGl0IGludG8gdGhlIHRleHRhcmVhLCBmb2N1cyBhbmQgc2VsZWN0IGl0XG4gICAgICAvLyBpbiBvcmRlciB0byByZWdpc3RlciBpdCBhcyBhIHNlbGVjdGlvbiBvbiB0aGUgT1MuIFRoaXMgZXZlbnQgaXMgZmlyZWRcbiAgICAgIC8vIG9ubHkgb24gTGludXggdG8gZW5hYmxlIG1pZGRsZSBjbGljayB0byBwYXN0ZSBzZWxlY3Rpb24uXG4gICAgICB0aGlzLnRleHRhcmVhLnZhbHVlID0gdGV4dDtcbiAgICAgIHRoaXMudGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgIHRoaXMudGV4dGFyZWEuc2VsZWN0KCk7XG4gICAgfSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vblNjcm9sbCgoKSA9PiB7XG4gICAgICB0aGlzLnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgICB0aGlzLnNlbGVjdGlvbk1hbmFnZXIucmVmcmVzaCgpO1xuICAgIH0pKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLl92aWV3cG9ydEVsZW1lbnQsICdzY3JvbGwnLCAoKSA9PiB0aGlzLnNlbGVjdGlvbk1hbmFnZXIucmVmcmVzaCgpKSk7XG5cbiAgICB0aGlzLm1vdXNlSGVscGVyID0gbmV3IE1vdXNlSGVscGVyKHRoaXMucmVuZGVyZXIpO1xuICAgIC8vIGFwcGx5IG1vdXNlIGV2ZW50IGNsYXNzZXMgc2V0IGJ5IGVzY2FwZSBjb2RlcyBiZWZvcmUgdGVybWluYWwgd2FzIGF0dGFjaGVkXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2VuYWJsZS1tb3VzZS1ldmVudHMnLCB0aGlzLm1vdXNlRXZlbnRzKTtcbiAgICBpZiAodGhpcy5tb3VzZUV2ZW50cykge1xuICAgICAgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLmRpc2FibGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLmVuYWJsZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgbXVzdCBiZSBkb25lICphZnRlciogdGhlIHJlbmRlcmVyIGlzIGNyZWF0ZWQgaW4gb3JkZXIgdG9cbiAgICAgIC8vIGVuc3VyZSB0aGUgY29ycmVjdCBvcmRlciBvZiB0aGUgZHByY2hhbmdlIGV2ZW50XG4gICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciA9IG5ldyBBY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBNZWFzdXJlIHRoZSBjaGFyYWN0ZXIgc2l6ZVxuICAgIHRoaXMuY2hhck1lYXN1cmUubWVhc3VyZSh0aGlzLm9wdGlvbnMpO1xuXG4gICAgLy8gU2V0dXAgbG9vcCB0aGF0IGRyYXdzIHRvIHNjcmVlblxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcblxuICAgIC8vIEluaXRpYWxpemUgZ2xvYmFsIGFjdGlvbnMgdGhhdCBuZWVkIHRvIGJlIHRha2VuIG9uIHRoZSBkb2N1bWVudC5cbiAgICB0aGlzLl9pbml0R2xvYmFsKCk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIG1vdXNlIGV2ZW50cyBhbmQgdHJhbnNsYXRlXG4gICAgLy8gdGhlbSBpbnRvIHRlcm1pbmFsIG1vdXNlIHByb3RvY29scy5cbiAgICB0aGlzLmJpbmRNb3VzZSgpO1xuXG4gIH1cblxuICBwcml2YXRlIF9zZXR1cFJlbmRlcmVyKCk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZSkge1xuICAgICAgY2FzZSAnY2FudmFzJzogdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcih0aGlzLCB0aGlzLm9wdGlvbnMudGhlbWUpOyBicmVhaztcbiAgICAgIGNhc2UgJ2RvbSc6IHRoaXMucmVuZGVyZXIgPSBuZXcgRG9tUmVuZGVyZXIodGhpcywgdGhpcy5vcHRpb25zLnRoZW1lKTsgYnJlYWs7XG4gICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCByZW5kZXJlclR5cGUgXCIke3RoaXMub3B0aW9ucy5yZW5kZXJlclR5cGV9XCJgKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJlci5vblJlbmRlcihlID0+IHRoaXMuX29uUmVuZGVyLmZpcmUoZSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5yZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdGhlbWUgb24gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgbXVzdCBoYXZlIGJlZW4gaW5pdGlhbGl6ZWQuXG4gICAqIEBwYXJhbSB0aGVtZSBUaGUgdGhlbWUgdG8gc2V0LlxuICAgKi9cbiAgcHJpdmF0ZSBfc2V0VGhlbWUodGhlbWU6IElUaGVtZSk6IHZvaWQge1xuICAgIHRoaXMuX3RoZW1lID0gdGhlbWU7XG4gICAgY29uc3QgY29sb3JzID0gdGhpcy5yZW5kZXJlci5zZXRUaGVtZSh0aGVtZSk7XG4gICAgaWYgKHRoaXMudmlld3BvcnQpIHtcbiAgICAgIHRoaXMudmlld3BvcnQub25UaGVtZUNoYW5nZWQoY29sb3JzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogWFRlcm0gbW91c2UgZXZlbnRzXG4gICAqIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbCNNb3VzZSUyMFRyYWNraW5nXG4gICAqIFRvIGJldHRlciB1bmRlcnN0YW5kIHRoZXNlXG4gICAqIHRoZSB4dGVybSBjb2RlIGlzIHZlcnkgaGVscGZ1bDpcbiAgICogUmVsZXZhbnQgZmlsZXM6XG4gICAqICAgYnV0dG9uLmMsIGNoYXJwcm9jLmMsIG1pc2MuY1xuICAgKiBSZWxldmFudCBmdW5jdGlvbnMgaW4geHRlcm0vYnV0dG9uLmM6XG4gICAqICAgQnRuQ29kZSwgRW1pdEJ1dHRvbkNvZGUsIEVkaXRvckJ1dHRvbiwgU2VuZE1vdXNlUG9zaXRpb25cbiAgICovXG4gIHB1YmxpYyBiaW5kTW91c2UoKTogdm9pZCB7XG4gICAgY29uc3QgZWwgPSB0aGlzLmVsZW1lbnQ7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IHByZXNzZWQgPSAzMjtcblxuICAgIC8vIG1vdXNldXAsIG1vdXNlZG93biwgd2hlZWxcbiAgICAvLyBsZWZ0IGNsaWNrOiBeW1tNIDM8XltbTSMzPFxuICAgIC8vIHdoZWVsIHVwOiBeW1tNYDM+XG4gICAgZnVuY3Rpb24gc2VuZEJ1dHRvbihldjogTW91c2VFdmVudCB8IFdoZWVsRXZlbnQpOiB2b2lkIHtcbiAgICAgIGxldCBidXR0b247XG4gICAgICBsZXQgcG9zO1xuXG4gICAgICAvLyBnZXQgdGhlIHh0ZXJtLXN0eWxlIGJ1dHRvblxuICAgICAgYnV0dG9uID0gZ2V0QnV0dG9uKGV2KTtcblxuICAgICAgLy8gZ2V0IG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgICBwb3MgPSBzZWxmLm1vdXNlSGVscGVyLmdldFJhd0J5dGVDb29yZHMoZXYsIHNlbGYuc2NyZWVuRWxlbWVudCwgc2VsZi5jaGFyTWVhc3VyZSwgc2VsZi5jb2xzLCBzZWxmLnJvd3MpO1xuICAgICAgaWYgKCFwb3MpIHJldHVybjtcblxuICAgICAgc2VuZEV2ZW50KGJ1dHRvbiwgcG9zKTtcblxuICAgICAgc3dpdGNoICgoPGFueT5ldikub3ZlcnJpZGVUeXBlIHx8IGV2LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbW91c2Vkb3duJzpcbiAgICAgICAgICBwcmVzc2VkID0gYnV0dG9uO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3VzZXVwJzpcbiAgICAgICAgICAvLyBrZWVwIGl0IGF0IHRoZSBsZWZ0XG4gICAgICAgICAgLy8gYnV0dG9uLCBqdXN0IGluIGNhc2UuXG4gICAgICAgICAgcHJlc3NlZCA9IDMyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3aGVlbCc6XG4gICAgICAgICAgLy8gbm90aGluZy4gZG9uJ3RcbiAgICAgICAgICAvLyBpbnRlcmZlcmUgd2l0aFxuICAgICAgICAgIC8vIGBwcmVzc2VkYC5cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBtb3Rpb24gZXhhbXBsZSBvZiBhIGxlZnQgY2xpY2s6XG4gICAgLy8gXltbTSAzPF5bW01ANDxeW1tNQDU8XltbTUA2PF5bW01ANzxeW1tNIzc8XG4gICAgZnVuY3Rpb24gc2VuZE1vdmUoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAgIGxldCBidXR0b24gPSBwcmVzc2VkO1xuICAgICAgY29uc3QgcG9zID0gc2VsZi5tb3VzZUhlbHBlci5nZXRSYXdCeXRlQ29vcmRzKGV2LCBzZWxmLnNjcmVlbkVsZW1lbnQsIHNlbGYuY2hhck1lYXN1cmUsIHNlbGYuY29scywgc2VsZi5yb3dzKTtcbiAgICAgIGlmICghcG9zKSByZXR1cm47XG5cbiAgICAgIC8vIGJ1dHRvbnMgbWFya2VkIGFzIG1vdGlvbnNcbiAgICAgIC8vIGFyZSBpbmNyZW1lbnRlZCBieSAzMlxuICAgICAgYnV0dG9uICs9IDMyO1xuXG4gICAgICBzZW5kRXZlbnQoYnV0dG9uLCBwb3MpO1xuICAgIH1cblxuICAgIC8vIGVuY29kZSBidXR0b24gYW5kXG4gICAgLy8gcG9zaXRpb24gdG8gY2hhcmFjdGVyc1xuICAgIGZ1bmN0aW9uIGVuY29kZShkYXRhOiBudW1iZXJbXSwgY2g6IG51bWJlcik6IHZvaWQge1xuICAgICAgaWYgKCFzZWxmLnV0Zk1vdXNlKSB7XG4gICAgICAgIGlmIChjaCA9PT0gMjU1KSB7XG4gICAgICAgICAgZGF0YS5wdXNoKDApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2ggPiAxMjcpIGNoID0gMTI3O1xuICAgICAgICBkYXRhLnB1c2goY2gpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGNoID4gMjA0Nykge1xuICAgICAgICAgIGRhdGEucHVzaCgyMDQ3KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5wdXNoKGNoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBzZW5kIGEgbW91c2UgZXZlbnQ6XG4gICAgLy8gcmVndWxhci91dGY4OiBeW1tNIENiIEN4IEN5XG4gICAgLy8gdXJ4dnQ6IF5bWyBDYiA7IEN4IDsgQ3kgTVxuICAgIC8vIHNncjogXltbIENiIDsgQ3ggOyBDeSBNL21cbiAgICAvLyB2dDMwMDogXltbIDI0KDEvMy81KX4gWyBDeCAsIEN5IF0gXFxyXG4gICAgLy8gbG9jYXRvcjogQ1NJIFAgZSA7IFAgYiA7IFAgciA7IFAgYyA7IFAgcCAmIHdcbiAgICBmdW5jdGlvbiBzZW5kRXZlbnQoYnV0dG9uOiBudW1iZXIsIHBvczoge3g6IG51bWJlciwgeTogbnVtYmVyfSk6IHZvaWQge1xuICAgICAgLy8gc2VsZi5lbWl0KCdtb3VzZScsIHtcbiAgICAgIC8vICAgeDogcG9zLnggLSAzMixcbiAgICAgIC8vICAgeTogcG9zLnggLSAzMixcbiAgICAgIC8vICAgYnV0dG9uOiBidXR0b25cbiAgICAgIC8vIH0pO1xuXG4gICAgICBpZiAoc2VsZi5fdnQzMDBNb3VzZSkge1xuICAgICAgICAvLyBOT1RFOiBVbnN0YWJsZS5cbiAgICAgICAgLy8gaHR0cDovL3d3dy52dDEwMC5uZXQvZG9jcy92dDN4eC1ncC9jaGFwdGVyMTUuaHRtbFxuICAgICAgICBidXR0b24gJj0gMztcbiAgICAgICAgcG9zLnggLT0gMzI7XG4gICAgICAgIHBvcy55IC09IDMyO1xuICAgICAgICBsZXQgZGF0YSA9IEMwLkVTQyArICdbMjQnO1xuICAgICAgICBpZiAoYnV0dG9uID09PSAwKSBkYXRhICs9ICcxJztcbiAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09PSAxKSBkYXRhICs9ICczJztcbiAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09PSAyKSBkYXRhICs9ICc1JztcbiAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09PSAzKSByZXR1cm47XG4gICAgICAgIGVsc2UgZGF0YSArPSAnMCc7XG4gICAgICAgIGRhdGEgKz0gJ35bJyArIHBvcy54ICsgJywnICsgcG9zLnkgKyAnXVxccic7XG4gICAgICAgIHNlbGYuaGFuZGxlcihkYXRhKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5fZGVjTG9jYXRvcikge1xuICAgICAgICAvLyBOT1RFOiBVbnN0YWJsZS5cbiAgICAgICAgYnV0dG9uICY9IDM7XG4gICAgICAgIHBvcy54IC09IDMyO1xuICAgICAgICBwb3MueSAtPSAzMjtcbiAgICAgICAgaWYgKGJ1dHRvbiA9PT0gMCkgYnV0dG9uID0gMjtcbiAgICAgICAgZWxzZSBpZiAoYnV0dG9uID09PSAxKSBidXR0b24gPSA0O1xuICAgICAgICBlbHNlIGlmIChidXR0b24gPT09IDIpIGJ1dHRvbiA9IDY7XG4gICAgICAgIGVsc2UgaWYgKGJ1dHRvbiA9PT0gMykgYnV0dG9uID0gMztcbiAgICAgICAgc2VsZi5oYW5kbGVyKEMwLkVTQyArICdbJ1xuICAgICAgICAgICAgICAgICAgKyBidXR0b25cbiAgICAgICAgICAgICAgICAgICsgJzsnXG4gICAgICAgICAgICAgICAgICArIChidXR0b24gPT09IDMgPyA0IDogMClcbiAgICAgICAgICAgICAgICAgICsgJzsnXG4gICAgICAgICAgICAgICAgICArIHBvcy55XG4gICAgICAgICAgICAgICAgICArICc7J1xuICAgICAgICAgICAgICAgICAgKyBwb3MueFxuICAgICAgICAgICAgICAgICAgKyAnOydcbiAgICAgICAgICAgICAgICAgIC8vIE5vdCBzdXJlIHdoYXQgcGFnZSBpcyBtZWFudCB0byBiZVxuICAgICAgICAgICAgICAgICAgKyAoPGFueT5wb3MpLnBhZ2UgfHwgMFxuICAgICAgICAgICAgICAgICAgKyAnJncnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi51cnh2dE1vdXNlKSB7XG4gICAgICAgIHBvcy54IC09IDMyO1xuICAgICAgICBwb3MueSAtPSAzMjtcbiAgICAgICAgcG9zLngrKztcbiAgICAgICAgcG9zLnkrKztcbiAgICAgICAgc2VsZi5oYW5kbGVyKEMwLkVTQyArICdbJyArIGJ1dHRvbiArICc7JyArIHBvcy54ICsgJzsnICsgcG9zLnkgKyAnTScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLnNnck1vdXNlKSB7XG4gICAgICAgIHBvcy54IC09IDMyO1xuICAgICAgICBwb3MueSAtPSAzMjtcbiAgICAgICAgc2VsZi5oYW5kbGVyKEMwLkVTQyArICdbPCdcbiAgICAgICAgICAgICAgICAgICsgKCgoYnV0dG9uICYgMykgPT09IDMgPyBidXR0b24gJiB+MyA6IGJ1dHRvbikgLSAzMilcbiAgICAgICAgICAgICAgICAgICsgJzsnXG4gICAgICAgICAgICAgICAgICArIHBvcy54XG4gICAgICAgICAgICAgICAgICArICc7J1xuICAgICAgICAgICAgICAgICAgKyBwb3MueVxuICAgICAgICAgICAgICAgICAgKyAoKGJ1dHRvbiAmIDMpID09PSAzID8gJ20nIDogJ00nKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YTogbnVtYmVyW10gPSBbXTtcblxuICAgICAgZW5jb2RlKGRhdGEsIGJ1dHRvbik7XG4gICAgICBlbmNvZGUoZGF0YSwgcG9zLngpO1xuICAgICAgZW5jb2RlKGRhdGEsIHBvcy55KTtcblxuICAgICAgc2VsZi5oYW5kbGVyKEMwLkVTQyArICdbTScgKyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgZGF0YSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEJ1dHRvbihldjogTW91c2VFdmVudCk6IG51bWJlciB7XG4gICAgICBsZXQgYnV0dG9uO1xuICAgICAgbGV0IHNoaWZ0O1xuICAgICAgbGV0IG1ldGE7XG4gICAgICBsZXQgY3RybDtcbiAgICAgIGxldCBtb2Q7XG5cbiAgICAgIC8vIHR3byBsb3cgYml0czpcbiAgICAgIC8vIDAgPSBsZWZ0XG4gICAgICAvLyAxID0gbWlkZGxlXG4gICAgICAvLyAyID0gcmlnaHRcbiAgICAgIC8vIDMgPSByZWxlYXNlXG4gICAgICAvLyB3aGVlbCB1cC9kb3duOlxuICAgICAgLy8gMSwgYW5kIDIgLSB3aXRoIDY0IGFkZGVkXG4gICAgICBzd2l0Y2ggKCg8YW55PmV2KS5vdmVycmlkZVR5cGUgfHwgZXYudHlwZSkge1xuICAgICAgICBjYXNlICdtb3VzZWRvd24nOlxuICAgICAgICAgIGJ1dHRvbiA9IGV2LmJ1dHRvbiAhPT0gbnVsbCAmJiBldi5idXR0b24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyArZXYuYnV0dG9uXG4gICAgICAgICAgOiBldi53aGljaCAhPT0gbnVsbCAmJiBldi53aGljaCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGV2LndoaWNoIC0gMVxuICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICAgIGlmIChCcm93c2VyLmlzTVNJRSkge1xuICAgICAgICAgICAgYnV0dG9uID0gYnV0dG9uID09PSAxID8gMCA6IGJ1dHRvbiA9PT0gNCA/IDEgOiBidXR0b247XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3VzZXVwJzpcbiAgICAgICAgICBidXR0b24gPSAzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdET01Nb3VzZVNjcm9sbCc6XG4gICAgICAgICAgYnV0dG9uID0gZXYuZGV0YWlsIDwgMFxuICAgICAgICAgICAgPyA2NFxuICAgICAgICAgIDogNjU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3doZWVsJzpcbiAgICAgICAgICBidXR0b24gPSAoPFdoZWVsRXZlbnQ+ZXYpLmRlbHRhWSA8IDBcbiAgICAgICAgICAgID8gNjRcbiAgICAgICAgICA6IDY1O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBuZXh0IHRocmVlIGJpdHMgYXJlIHRoZSBtb2RpZmllcnM6XG4gICAgICAvLyA0ID0gc2hpZnQsIDggPSBtZXRhLCAxNiA9IGNvbnRyb2xcbiAgICAgIHNoaWZ0ID0gZXYuc2hpZnRLZXkgPyA0IDogMDtcbiAgICAgIG1ldGEgPSBldi5tZXRhS2V5ID8gOCA6IDA7XG4gICAgICBjdHJsID0gZXYuY3RybEtleSA/IDE2IDogMDtcbiAgICAgIG1vZCA9IHNoaWZ0IHwgbWV0YSB8IGN0cmw7XG5cbiAgICAgIC8vIG5vIG1vZHNcbiAgICAgIGlmIChzZWxmLnZ0MjAwTW91c2UpIHtcbiAgICAgICAgLy8gY3RybCBvbmx5XG4gICAgICAgIG1vZCAmPSBjdHJsO1xuICAgICAgfSBlbHNlIGlmICghc2VsZi5ub3JtYWxNb3VzZSkge1xuICAgICAgICBtb2QgPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBpbmNyZW1lbnQgdG8gU1BcbiAgICAgIGJ1dHRvbiA9ICgzMiArIChtb2QgPDwgMikpICsgYnV0dG9uO1xuXG4gICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAnbW91c2Vkb3duJywgKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG5cbiAgICAgIC8vIFByZXZlbnQgdGhlIGZvY3VzIG9uIHRoZSB0ZXh0YXJlYSBmcm9tIGdldHRpbmcgbG9zdFxuICAgICAgLy8gYW5kIG1ha2Ugc3VyZSB3ZSBnZXQgZm9jdXNlZCBvbiBtb3VzZWRvd25cbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmZvY3VzKCk7XG5cbiAgICAgIC8vIERvbid0IHNlbmQgdGhlIG1vdXNlIGJ1dHRvbiB0byB0aGUgcHR5IGlmIG1vdXNlIGV2ZW50cyBhcmUgZGlzYWJsZWQgb3JcbiAgICAgIC8vIGlmIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBpcyBoYXZpbmcgc2VsZWN0aW9uIGZvcmNlZCAoaWUuIGEgbW9kaWZpZXIgaXNcbiAgICAgIC8vIGhlbGQpLlxuICAgICAgaWYgKCF0aGlzLm1vdXNlRXZlbnRzIHx8IHRoaXMuc2VsZWN0aW9uTWFuYWdlci5zaG91bGRGb3JjZVNlbGVjdGlvbihldikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBzZW5kIHRoZSBidXR0b25cbiAgICAgIHNlbmRCdXR0b24oZXYpO1xuXG4gICAgICAvLyBmaXggZm9yIG9kZCBidWdcbiAgICAgIC8vIGlmICh0aGlzLnZ0MjAwTW91c2UgJiYgIXRoaXMubm9ybWFsTW91c2UpIHtcbiAgICAgIGlmICh0aGlzLnZ0MjAwTW91c2UpIHtcbiAgICAgICAgKDxhbnk+ZXYpLm92ZXJyaWRlVHlwZSA9ICdtb3VzZXVwJztcbiAgICAgICAgc2VuZEJ1dHRvbihldik7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE86IEFsbCBtb3VzZSBoYW5kbGluZyBzaG91bGQgYmUgcHVsbGVkIGludG8gaXRzIG93biBmaWxlLlxuXG4gICAgICAvLyBiaW5kIGV2ZW50c1xuICAgICAgbGV0IG1vdmVIYW5kbGVyOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQ7XG4gICAgICBpZiAodGhpcy5ub3JtYWxNb3VzZSkge1xuICAgICAgICBtb3ZlSGFuZGxlciA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgbm9ybWFsIG1vdXNlIG1vZGUgaXMgb24uIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgbW91c2UgaXMgaGVsZCBkb3duIHdoZW4gdGhlXG4gICAgICAgICAgLy8gdGVybWluYWwgZXhpdHMgbm9ybWFsTW91c2UgbW9kZS5cbiAgICAgICAgICBpZiAoIXRoaXMubm9ybWFsTW91c2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VuZE1vdmUoZXZlbnQpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiB0aGVzZSBldmVudCBsaXN0ZW5lcnMgc2hvdWxkIGJlIG1hbmFnZWQgYnkgdGhlIGRpc3Bvc2FibGUsIHRoZSBUZXJtaW5hbCByZWZlcmVuY2UgbWF5XG4gICAgICAgIC8vIGJlIGtlcHQgYXJvdWQgaWYgVGVybWluYWwuZGlzcG9zZSBpcyBmaXJlZCB3aGVuIHRoZSBtb3VzZSBpcyBkb3duXG4gICAgICAgIHRoaXMuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVIYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgLy8geDEwIGNvbXBhdGliaWxpdHkgbW9kZSBjYW4ndCBzZW5kIGJ1dHRvbiByZWxlYXNlc1xuICAgICAgY29uc3QgaGFuZGxlciA9IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ub3JtYWxNb3VzZSAmJiAhdGhpcy54MTBNb3VzZSkge1xuICAgICAgICAgIHNlbmRCdXR0b24oZXYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3ZlSGFuZGxlcikge1xuICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIHRoaXMgc2hvdWxkIG9ubHkgYmUgYXR0YWNoZWQgd2hlbiB0aGlzLm5vcm1hbE1vdXNlIGlzIHRydWUsIGhvbGRpbmcgdGhlXG4gICAgICAgICAgLy8gbW91c2UgYnV0dG9uIGRvd24gd2hlbiBub3JtYWxNb3VzZSBjaGFuZ2VzIGNhbiBoYXBwZW4uIEp1c3QgYWx3YXlzIHRyeSB0byByZW1vdmUgaXQuXG4gICAgICAgICAgdGhpcy5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIpO1xuICAgICAgICAgIG1vdmVIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgICB9O1xuICAgICAgdGhpcy5fZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZXIpO1xuXG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgIH0pKTtcblxuICAgIC8vIGlmICh0aGlzLm5vcm1hbE1vdXNlKSB7XG4gICAgLy8gIG9uKHRoaXMuZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBzZW5kTW92ZSk7XG4gICAgLy8gfVxuXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoZWwsICd3aGVlbCcsIChldjogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLm1vdXNlRXZlbnRzKSB7XG4gICAgICAgIC8vIENvbnZlcnQgd2hlZWwgZXZlbnRzIGludG8gdXAvZG93biBldmVudHMgd2hlbiB0aGUgYnVmZmVyIGRvZXMgbm90IGhhdmUgc2Nyb2xsYmFjaywgdGhpc1xuICAgICAgICAvLyBlbmFibGVzIHNjcm9sbGluZyBpbiBhcHBzIGhvc3RlZCBpbiB0aGUgYWx0IGJ1ZmZlciBzdWNoIGFzIHZpbSBvciB0bXV4LlxuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyLmhhc1Njcm9sbGJhY2spIHtcbiAgICAgICAgICBjb25zdCBhbW91bnQgPSB0aGlzLnZpZXdwb3J0LmdldExpbmVzU2Nyb2xsZWQoZXYpO1xuXG4gICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGVyZSdzIG5vIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgICAgIGlmIChhbW91bnQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDb25zdHJ1Y3QgYW5kIHNlbmQgc2VxdWVuY2VzXG4gICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBDMC5FU0MgKyAodGhpcy5hcHBsaWNhdGlvbkN1cnNvciA/ICdPJyA6ICdbJykgKyAoIGV2LmRlbHRhWSA8IDAgPyAnQScgOiAnQicpO1xuICAgICAgICAgIGxldCBkYXRhID0gJyc7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmFicyhhbW91bnQpOyBpKyspIHtcbiAgICAgICAgICAgIGRhdGEgKz0gc2VxdWVuY2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuaGFuZGxlcihkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy54MTBNb3VzZSB8fCB0aGlzLl92dDMwME1vdXNlIHx8IHRoaXMuX2RlY0xvY2F0b3IpIHJldHVybjtcbiAgICAgIHNlbmRCdXR0b24oZXYpO1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICB9KSk7XG5cbiAgICAvLyBhbGxvdyB3aGVlbCBzY3JvbGxpbmcgaW5cbiAgICAvLyB0aGUgc2hlbGwgZm9yIGV4YW1wbGVcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ3doZWVsJywgKGV2OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5tb3VzZUV2ZW50cykgcmV0dXJuO1xuICAgICAgdGhpcy52aWV3cG9ydC5vbldoZWVsKGV2KTtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldik7XG4gICAgfSkpO1xuXG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoZWwsICd0b3VjaHN0YXJ0JywgKGV2OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5tb3VzZUV2ZW50cykgcmV0dXJuO1xuICAgICAgdGhpcy52aWV3cG9ydC5vblRvdWNoU3RhcnQoZXYpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICB9KSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ3RvdWNobW92ZScsIChldjogVG91Y2hFdmVudCkgPT4ge1xuICAgICAgaWYgKHRoaXMubW91c2VFdmVudHMpIHJldHVybjtcbiAgICAgIHRoaXMudmlld3BvcnQub25Ub3VjaE1vdmUoZXYpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogVGVsbHMgdGhlIHJlbmRlcmVyIHRvIHJlZnJlc2ggdGVybWluYWwgY29udGVudCBiZXR3ZWVuIHR3byByb3dzIChpbmNsdXNpdmUpIGF0IHRoZSBuZXh0XG4gICAqIG9wcG9ydHVuaXR5LlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBzdGFydCBmcm9tIChiZXR3ZWVuIDAgYW5kIHRoaXMucm93cyAtIDEpLlxuICAgKiBAcGFyYW0gZW5kIFRoZSByb3cgdG8gZW5kIGF0IChiZXR3ZWVuIHN0YXJ0IGFuZCB0aGlzLnJvd3MgLSAxKS5cbiAgICovXG4gIHB1YmxpYyByZWZyZXNoKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucmVuZGVyZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVmcmVzaFJvd3Moc3RhcnQsIGVuZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlcyBsaW5raWZpY2F0aW9uIGZvciB0aGUgc3BlY2lmaWVkIHJvd3MuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgcm93IHRvIHN0YXJ0IGZyb20gKGJldHdlZW4gMCBhbmQgdGhpcy5yb3dzIC0gMSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBlbmQgYXQgKGJldHdlZW4gc3RhcnQgYW5kIHRoaXMucm93cyAtIDEpLlxuICAgKi9cbiAgcHJpdmF0ZSBfcXVldWVMaW5raWZpY2F0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGlua2lmaWVyKSB7XG4gICAgICB0aGlzLmxpbmtpZmllci5saW5raWZ5Um93cyhzdGFydCwgZW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBjdXJzb3Igc3R5bGUgZm9yIGRpZmZlcmVudCBzZWxlY3Rpb24gbW9kZXNcbiAgICovXG4gIHB1YmxpYyB1cGRhdGVDdXJzb3JTdHlsZShldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGlvbk1hbmFnZXIgJiYgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLnNob3VsZENvbHVtblNlbGVjdChldikpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjb2x1bW4tc2VsZWN0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjb2x1bW4tc2VsZWN0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdGhlIGN1cnNvciBlbGVtZW50XG4gICAqL1xuICBwdWJsaWMgc2hvd0N1cnNvcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY3Vyc29yU3RhdGUpIHtcbiAgICAgIHRoaXMuY3Vyc29yU3RhdGUgPSAxO1xuICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksIHRoaXMuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIHRlcm1pbmFsIGRvd24gMSByb3csIGNyZWF0aW5nIGEgYmxhbmsgbGluZS5cbiAgICogQHBhcmFtIGlzV3JhcHBlZCBXaGV0aGVyIHRoZSBuZXcgbGluZSBpcyB3cmFwcGVkIGZyb20gdGhlIHByZXZpb3VzIGxpbmUuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsKGlzV3JhcHBlZDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgbGV0IG5ld0xpbmU6IElCdWZmZXJMaW5lO1xuICAgIG5ld0xpbmUgPSB0aGlzLl9ibGFua0xpbmU7XG4gICAgY29uc3QgZXJhc2VBdHRyID0gdGhpcy5lcmFzZUF0dHJEYXRhKCk7XG4gICAgaWYgKCFuZXdMaW5lIHx8IG5ld0xpbmUubGVuZ3RoICE9PSB0aGlzLmNvbHMgfHwgbmV3TGluZS5nZXRGZygwKSAhPT0gZXJhc2VBdHRyLmZnIHx8IG5ld0xpbmUuZ2V0QmcoMCkgIT09IGVyYXNlQXR0ci5iZykge1xuICAgICAgbmV3TGluZSA9IHRoaXMuYnVmZmVyLmdldEJsYW5rTGluZShlcmFzZUF0dHIsIGlzV3JhcHBlZCk7XG4gICAgICB0aGlzLl9ibGFua0xpbmUgPSBuZXdMaW5lO1xuICAgIH1cbiAgICBuZXdMaW5lLmlzV3JhcHBlZCA9IGlzV3JhcHBlZDtcblxuICAgIGNvbnN0IHRvcFJvdyA9IHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IGJvdHRvbVJvdyA9IHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIuc2Nyb2xsQm90dG9tO1xuXG4gICAgaWYgKHRoaXMuYnVmZmVyLnNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGJ1ZmZlciBpcyBnb2luZyB0byBiZSB0cmltbWVkIGFmdGVyIGluc2VydGlvbi5cbiAgICAgIGNvbnN0IHdpbGxCdWZmZXJCZVRyaW1tZWQgPSB0aGlzLmJ1ZmZlci5saW5lcy5pc0Z1bGw7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgbGluZSB1c2luZyB0aGUgZmFzdGVzdCBtZXRob2RcbiAgICAgIGlmIChib3R0b21Sb3cgPT09IHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgaWYgKHdpbGxCdWZmZXJCZVRyaW1tZWQpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlci5saW5lcy5yZWN5Y2xlKCkuY29weUZyb20obmV3TGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIubGluZXMucHVzaChuZXdMaW5lLmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJ1ZmZlci5saW5lcy5zcGxpY2UoYm90dG9tUm93ICsgMSwgMCwgbmV3TGluZS5jbG9uZSgpKTtcbiAgICAgIH1cblxuICAgICAgLy8gT25seSBhZGp1c3QgeWJhc2UgYW5kIHlkaXNwIHdoZW4gdGhlIGJ1ZmZlciBpcyBub3QgdHJpbW1lZFxuICAgICAgaWYgKCF3aWxsQnVmZmVyQmVUcmltbWVkKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnliYXNlKys7XG4gICAgICAgIC8vIE9ubHkgc2Nyb2xsIHRoZSB5ZGlzcCB3aXRoIHliYXNlIGlmIHRoZSB1c2VyIGhhcyBub3Qgc2Nyb2xsZWQgdXBcbiAgICAgICAgaWYgKCF0aGlzLl91c2VyU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIueWRpc3ArKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgYnVmZmVyIGlzIGZ1bGwgYW5kIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCB1cCwga2VlcCB0aGUgdGV4dFxuICAgICAgICAvLyBzdGFibGUgdW5sZXNzIHlkaXNwIGlzIHJpZ2h0IGF0IHRoZSB0b3BcbiAgICAgICAgaWYgKHRoaXMuX3VzZXJTY3JvbGxpbmcpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KHRoaXMuYnVmZmVyLnlkaXNwIC0gMSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc2Nyb2xsVG9wIGlzIG5vbi16ZXJvIHdoaWNoIG1lYW5zIG5vIGxpbmUgd2lsbCBiZSBnb2luZyB0byB0aGVcbiAgICAgIC8vIHNjcm9sbGJhY2ssIGluc3RlYWQgd2UgY2FuIGp1c3Qgc2hpZnQgdGhlbSBpbi1wbGFjZS5cbiAgICAgIGNvbnN0IHNjcm9sbFJlZ2lvbkhlaWdodCA9IGJvdHRvbVJvdyAtIHRvcFJvdyArIDEvKmFzIGl0J3MgemVyby1iYXNlZCovO1xuICAgICAgdGhpcy5idWZmZXIubGluZXMuc2hpZnRFbGVtZW50cyh0b3BSb3cgKyAxLCBzY3JvbGxSZWdpb25IZWlnaHQgLSAxLCAtMSk7XG4gICAgICB0aGlzLmJ1ZmZlci5saW5lcy5zZXQoYm90dG9tUm93LCBuZXdMaW5lLmNsb25lKCkpO1xuICAgIH1cblxuICAgIC8vIE1vdmUgdGhlIHZpZXdwb3J0IHRvIHRoZSBib3R0b20gb2YgdGhlIGJ1ZmZlciB1bmxlc3MgdGhlIHVzZXIgaXNcbiAgICAvLyBzY3JvbGxpbmcuXG4gICAgaWYgKCF0aGlzLl91c2VyU2Nyb2xsaW5nKSB7XG4gICAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IHRoaXMuYnVmZmVyLnliYXNlO1xuICAgIH1cblxuICAgIC8vIEZsYWcgcm93cyB0aGF0IG5lZWQgdXBkYXRpbmdcbiAgICB0aGlzLnVwZGF0ZVJhbmdlKHRoaXMuYnVmZmVyLnNjcm9sbFRvcCk7XG4gICAgdGhpcy51cGRhdGVSYW5nZSh0aGlzLmJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuXG4gICAgdGhpcy5fb25TY3JvbGwuZmlyZSh0aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbFxuICAgKiBAcGFyYW0gZGlzcCBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIHNjcm9sbCBkb3duIChuZWdhdGl2ZSBzY3JvbGwgdXApLlxuICAgKiBAcGFyYW0gc3VwcHJlc3NTY3JvbGxFdmVudCBEb24ndCBlbWl0IHRoZSBzY3JvbGwgZXZlbnQgYXMgc2Nyb2xsTGluZXMuIFRoaXMgaXMgdXNlZFxuICAgKiB0byBhdm9pZCB1bndhbnRlZCBldmVudHMgYmVpbmcgaGFuZGxlZCBieSB0aGUgdmlld3BvcnQgd2hlbiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIHRoZVxuICAgKiB2aWV3cG9ydCBvcmlnaW5hbGx5LlxuICAgKi9cbiAgcHVibGljIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlciwgc3VwcHJlc3NTY3JvbGxFdmVudD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoZGlzcCA8IDApIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci55ZGlzcCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl91c2VyU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRpc3AgKyB0aGlzLmJ1ZmZlci55ZGlzcCA+PSB0aGlzLmJ1ZmZlci55YmFzZSkge1xuICAgICAgdGhpcy5fdXNlclNjcm9sbGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZFlkaXNwID0gdGhpcy5idWZmZXIueWRpc3A7XG4gICAgdGhpcy5idWZmZXIueWRpc3AgPSBNYXRoLm1heChNYXRoLm1pbih0aGlzLmJ1ZmZlci55ZGlzcCArIGRpc3AsIHRoaXMuYnVmZmVyLnliYXNlKSwgMCk7XG5cbiAgICAvLyBObyBjaGFuZ2Ugb2NjdXJyZWQsIGRvbid0IHRyaWdnZXIgc2Nyb2xsL3JlZnJlc2hcbiAgICBpZiAob2xkWWRpc3AgPT09IHRoaXMuYnVmZmVyLnlkaXNwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFzdXBwcmVzc1Njcm9sbEV2ZW50KSB7XG4gICAgICB0aGlzLl9vblNjcm9sbC5maXJlKHRoaXMuYnVmZmVyLnlkaXNwKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbCBieSBhIG51bWJlciBvZiBwYWdlcy5cbiAgICogQHBhcmFtIHBhZ2VDb3VudCBUaGUgbnVtYmVyIG9mIHBhZ2VzIHRvIHNjcm9sbCAobmVnYXRpdmUgc2Nyb2xscyB1cCkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsUGFnZXMocGFnZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHBhZ2VDb3VudCAqICh0aGlzLnJvd3MgLSAxKSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgdG8gdGhlIHRvcC5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKC10aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgdG8gdGhlIGJvdHRvbS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHRoaXMuYnVmZmVyLnliYXNlIC0gdGhpcy5idWZmZXIueWRpc3ApO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBsaW5lIC0gdGhpcy5idWZmZXIueWRpc3A7XG4gICAgaWYgKHNjcm9sbEFtb3VudCAhPT0gMCkge1xuICAgICAgdGhpcy5zY3JvbGxMaW5lcyhzY3JvbGxBbW91bnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGV4dCB0byB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSB0ZXh0IHRvIHdyaXRlIHRvIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBFbnN1cmUgdGhlIHRlcm1pbmFsIGlzbid0IGRpc3Bvc2VkXG4gICAgaWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZ25vcmUgZmFsc3kgZGF0YSB2YWx1ZXMgKGluY2x1ZGluZyB0aGUgZW1wdHkgc3RyaW5nKVxuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMud3JpdGVCdWZmZXIucHVzaChkYXRhKTtcblxuICAgIC8vIFNlbmQgWE9GRiB0byBwYXVzZSB0aGUgcHR5IHByb2Nlc3MgaWYgdGhlIHdyaXRlIGJ1ZmZlciBiZWNvbWVzIHRvbyBsYXJnZSBzb1xuICAgIC8vIHh0ZXJtLmpzIGNhbiBjYXRjaCB1cCBiZWZvcmUgbW9yZSBkYXRhIGlzIHNlbnQuIFRoaXMgaXMgbmVjZXNzYXJ5IGluIG9yZGVyXG4gICAgLy8gdG8ga2VlcCBzaWduYWxzIHN1Y2ggYXMgXkMgcmVzcG9uc2l2ZS5cbiAgICBpZiAodGhpcy5vcHRpb25zLnVzZUZsb3dDb250cm9sICYmICF0aGlzLl94b2ZmU2VudFRvQ2F0Y2hVcCAmJiB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCA+PSBXUklURV9CVUZGRVJfUEFVU0VfVEhSRVNIT0xEKSB7XG4gICAgICAvLyBYT0ZGIC0gc3RvcCBwdHkgcGlwZVxuICAgICAgLy8gWE9OIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IGVtdWxhdG9yIGJlZm9yZSBwcm9jZXNzaW5nIGRhdGEgY2h1bmtcbiAgICAgIHRoaXMuaGFuZGxlcihDMC5EQzMpO1xuICAgICAgdGhpcy5feG9mZlNlbnRUb0NhdGNoVXAgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fd3JpdGVJblByb2dyZXNzICYmIHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgLy8gS2ljayBvZmYgYSB3cml0ZSB3aGljaCB3aWxsIHdyaXRlIGFsbCBkYXRhIGluIHNlcXVlbmNlIHJlY3Vyc2l2ZWx5XG4gICAgICB0aGlzLl93cml0ZUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgLy8gS2ljayBvZmYgYW4gYXN5bmMgaW5uZXJXcml0ZSBzbyBtb3JlIHdyaXRlcyBjYW4gY29tZSBpbiB3aGlsZSBwcm9jZXNzaW5nIGRhdGFcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbm5lcldyaXRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2lubmVyV3JpdGUoYnVmZmVyT2Zmc2V0OiBudW1iZXIgPSAwKTogdm9pZCB7XG4gICAgLy8gRW5zdXJlIHRoZSB0ZXJtaW5hbCBpc24ndCBkaXNwb3NlZFxuICAgIGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLndyaXRlQnVmZmVyID0gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB3aGlsZSAodGhpcy53cml0ZUJ1ZmZlci5sZW5ndGggPiBidWZmZXJPZmZzZXQpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLndyaXRlQnVmZmVyW2J1ZmZlck9mZnNldF07XG4gICAgICBidWZmZXJPZmZzZXQrKztcblxuICAgICAgLy8gSWYgWE9GRiB3YXMgc2VudCBpbiBvcmRlciB0byBjYXRjaCB1cCB3aXRoIHRoZSBwdHkgcHJvY2VzcywgcmVzdW1lIGl0IGlmXG4gICAgICAvLyB3ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHdyaXRlQnVmZmVyIHRvIGFsbG93IG1vcmUgZGF0YSB0byBjb21lIGluLlxuICAgICAgaWYgKHRoaXMuX3hvZmZTZW50VG9DYXRjaFVwICYmIHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoID09PSBidWZmZXJPZmZzZXQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyKEMwLkRDMSk7XG4gICAgICAgIHRoaXMuX3hvZmZTZW50VG9DYXRjaFVwID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JlZnJlc2hTdGFydCA9IHRoaXMuYnVmZmVyLnk7XG4gICAgICB0aGlzLl9yZWZyZXNoRW5kID0gdGhpcy5idWZmZXIueTtcblxuICAgICAgLy8gSEFDSzogU2V0IHRoZSBwYXJzZXIgc3RhdGUgYmFzZWQgb24gaXQncyBzdGF0ZSBhdCB0aGUgdGltZSBvZiByZXR1cm4uXG4gICAgICAvLyBUaGlzIHdvcmtzIGFyb3VuZCB0aGUgYnVnICM2NjIgd2hpY2ggc2F3IHRoZSBwYXJzZXIgc3RhdGUgcmVzZXQgaW4gdGhlXG4gICAgICAvLyBtaWRkbGUgb2YgcGFyc2luZyBlc2NhcGUgc2VxdWVuY2UgaW4gdHdvIGNodW5rcy4gRm9yIHNvbWUgcmVhc29uIHRoZVxuICAgICAgLy8gc3RhdGUgb2YgdGhlIHBhcnNlciByZXNldHMgdG8gMCBhZnRlciBleGl0aW5nIHBhcnNlci5wYXJzZS4gVGhpcyBjaGFuZ2VcbiAgICAgIC8vIGp1c3Qgc2V0cyB0aGUgc3RhdGUgYmFjayBiYXNlZCBvbiB0aGUgY29ycmVjdCByZXR1cm4gc3RhdGVtZW50LlxuXG4gICAgICB0aGlzLl9pbnB1dEhhbmRsZXIucGFyc2UoZGF0YSk7XG5cbiAgICAgIHRoaXMudXBkYXRlUmFuZ2UodGhpcy5idWZmZXIueSk7XG4gICAgICB0aGlzLnJlZnJlc2godGhpcy5fcmVmcmVzaFN0YXJ0LCB0aGlzLl9yZWZyZXNoRW5kKTtcblxuICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NUykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoID4gYnVmZmVyT2Zmc2V0KSB7XG4gICAgICAvLyBBbGxvdyByZW5kZXJlciB0byBjYXRjaCB1cCBiZWZvcmUgcHJvY2Vzc2luZyB0aGUgbmV4dCBiYXRjaFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbm5lcldyaXRlKGJ1ZmZlck9mZnNldCksIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93cml0ZUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgIHRoaXMud3JpdGVCdWZmZXIgPSBbXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV3JpdGVzIHRleHQgdG8gdGhlIHRlcm1pbmFsLCBmb2xsb3dlZCBieSBhIGJyZWFrIGxpbmUgY2hhcmFjdGVyIChcXG4pLlxuICAgKiBAcGFyYW0gZGF0YSBUaGUgdGV4dCB0byB3cml0ZSB0byB0aGUgdGVybWluYWwuXG4gICAqL1xuICBwdWJsaWMgd3JpdGVsbihkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLndyaXRlKGRhdGEgKyAnXFxyXFxuJyk7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoZXMgYSBjdXN0b20ga2V5IGV2ZW50IGhhbmRsZXIgd2hpY2ggaXMgcnVuIGJlZm9yZSBrZXlzIGFyZSBwcm9jZXNzZWQsXG4gICAqIGdpdmluZyBjb25zdW1lcnMgb2YgeHRlcm0uanMgdWx0aW1hdGUgY29udHJvbCBhcyB0byB3aGF0IGtleXMgc2hvdWxkIGJlXG4gICAqIHByb2Nlc3NlZCBieSB0aGUgdGVybWluYWwgYW5kIHdoYXQga2V5cyBzaG91bGQgbm90LlxuICAgKiBAcGFyYW0gY3VzdG9tS2V5RXZlbnRIYW5kbGVyIFRoZSBjdXN0b20gS2V5Ym9hcmRFdmVudCBoYW5kbGVyIHRvIGF0dGFjaC5cbiAgICogVGhpcyBpcyBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBLZXlib2FyZEV2ZW50LCBhbGxvd2luZyBjb25zdW1lcnMgdG8gc3RvcFxuICAgKiBwcm9wYWdhdGlvbiBhbmQvb3IgcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24uIFRoZSBmdW5jdGlvbiByZXR1cm5zIHdoZXRoZXJcbiAgICogdGhlIGV2ZW50IHNob3VsZCBiZSBwcm9jZXNzZWQgYnkgeHRlcm0uanMuXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGN1c3RvbUtleUV2ZW50SGFuZGxlcjogQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gY3VzdG9tS2V5RXZlbnRIYW5kbGVyO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBDU0kgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIGFkZENzaUhhbmRsZXIoZmxhZzogc3RyaW5nLCBjYWxsYmFjazogKHBhcmFtczogbnVtYmVyW10sIGNvbGxlY3Q6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLmFkZENzaUhhbmRsZXIoZmxhZywgY2FsbGJhY2spO1xuICB9XG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgT1NDIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIuYWRkT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpbmsgbWF0Y2hlciwgYWxsb3dpbmcgY3VzdG9tIGxpbmsgcGF0dGVybnMgdG8gYmUgbWF0Y2hlZCBhbmRcbiAgICogaGFuZGxlZC5cbiAgICogQHBhcmFtIHJlZ2V4IFRoZSByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VhcmNoIGZvciwgc3BlY2lmaWNhbGx5XG4gICAqIHRoaXMgc2VhcmNoZXMgdGhlIHRleHRDb250ZW50IG9mIHRoZSByb3dzLiBZb3Ugd2lsbCB3YW50IHRvIHVzZSBcXHMgdG8gbWF0Y2hcbiAgICogYSBzcGFjZSAnICcgY2hhcmFjdGVyIGZvciBleGFtcGxlLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgY2FsbGJhY2sgd2hlbiB0aGUgbGluayBpcyBjYWxsZWQuXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBsaW5rIG1hdGNoZXIuXG4gICAqIEByZXR1cm4gVGhlIElEIG9mIHRoZSBuZXcgbWF0Y2hlciwgdGhpcyBjYW4gYmUgdXNlZCB0byBkZXJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXg6IFJlZ0V4cCwgaGFuZGxlcjogTGlua01hdGNoZXJIYW5kbGVyLCBvcHRpb25zPzogSUxpbmtNYXRjaGVyT3B0aW9ucyk6IG51bWJlciB7XG4gICAgY29uc3QgbWF0Y2hlcklkID0gdGhpcy5saW5raWZpZXIucmVnaXN0ZXJMaW5rTWF0Y2hlcihyZWdleCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIHJldHVybiBtYXRjaGVySWQ7XG4gIH1cblxuICAvKipcbiAgICogRGVyZWdpc3RlcnMgYSBsaW5rIG1hdGNoZXIgaWYgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAgICogQHBhcmFtIG1hdGNoZXJJZCBUaGUgbGluayBtYXRjaGVyJ3MgSUQgKHJldHVybmVkIGFmdGVyIHJlZ2lzdGVyKVxuICAgKi9cbiAgcHVibGljIGRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihtYXRjaGVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmxpbmtpZmllci5kZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkKSkge1xuICAgICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBqb2luZXJJZCA9IHRoaXMucmVuZGVyZXIucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcik7XG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIHJldHVybiBqb2luZXJJZDtcbiAgfVxuXG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yZW5kZXJlci5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkKSkge1xuICAgICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWFya2VycygpOiBJTWFya2VyW10ge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5tYXJrZXJzO1xuICB9XG5cbiAgcHVibGljIGFkZE1hcmtlcihjdXJzb3JZT2Zmc2V0OiBudW1iZXIpOiBJTWFya2VyIHtcbiAgICAvLyBEaXNhbGxvdyBtYXJrZXJzIG9uIHRoZSBhbHQgYnVmZmVyXG4gICAgaWYgKHRoaXMuYnVmZmVyICE9PSB0aGlzLmJ1ZmZlcnMubm9ybWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLmFkZE1hcmtlcih0aGlzLmJ1ZmZlci55YmFzZSArIHRoaXMuYnVmZmVyLnkgKyBjdXJzb3JZT2Zmc2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHdoZXRoZXIgdGhlIHRlcm1pbmFsIGhhcyBhbiBhY3RpdmUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25NYW5hZ2VyID8gdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLmhhc1NlbGVjdGlvbiA6IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRlcm1pbmFsJ3MgY3VycmVudCBzZWxlY3Rpb24sIHRoaXMgaXMgdXNlZnVsIGZvciBpbXBsZW1lbnRpbmcgY29weVxuICAgKiBiZWhhdmlvciBvdXRzaWRlIG9mIHh0ZXJtLmpzLlxuICAgKi9cbiAgcHVibGljIGdldFNlbGVjdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1hbmFnZXIgPyB0aGlzLnNlbGVjdGlvbk1hbmFnZXIuc2VsZWN0aW9uVGV4dCA6ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uTWFuYWdlcikge1xuICAgICAgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYWxsIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uTWFuYWdlcikge1xuICAgICAgdGhpcy5zZWxlY3Rpb25NYW5hZ2VyLnNlbGVjdEFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbGVjdGlvbk1hbmFnZXIpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uTWFuYWdlci5zZWxlY3RMaW5lcyhzdGFydCwgZW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGEga2V5ZG93biBldmVudFxuICAgKiBLZXkgUmVzb3VyY2VzOlxuICAgKiAgIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vS2V5Ym9hcmRFdmVudFxuICAgKiBAcGFyYW0gZXYgVGhlIGtleWRvd24gZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAgICovXG4gIHByb3RlY3RlZCBfa2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgJiYgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGV2ZW50KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmtleWRvd24oZXZlbnQpKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXIueWJhc2UgIT09IHRoaXMuYnVmZmVyLnlkaXNwKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBldmFsdWF0ZUtleWJvYXJkRXZlbnQoZXZlbnQsIHRoaXMuYXBwbGljYXRpb25DdXJzb3IsIHRoaXMuYnJvd3Nlci5pc01hYywgdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSk7XG5cbiAgICB0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGV2ZW50KTtcblxuICAgIC8vIGlmIChyZXN1bHQua2V5ID09PSBDMC5EQzMpIHsgLy8gWE9GRlxuICAgIC8vICAgdGhpcy5fd3JpdGVTdG9wcGVkID0gdHJ1ZTtcbiAgICAvLyB9IGVsc2UgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkRDMSkgeyAvLyBYT05cbiAgICAvLyAgIHRoaXMuX3dyaXRlU3RvcHBlZCA9IGZhbHNlO1xuICAgIC8vIH1cblxuICAgIGlmIChyZXN1bHQudHlwZSA9PT0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfRE9XTiB8fCByZXN1bHQudHlwZSA9PT0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfVVApIHtcbiAgICAgIGNvbnN0IHNjcm9sbENvdW50ID0gdGhpcy5yb3dzIC0gMTtcbiAgICAgIHRoaXMuc2Nyb2xsTGluZXMocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX1VQID8gLXNjcm9sbENvdW50IDogc2Nyb2xsQ291bnQpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2ZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5TRUxFQ1RfQUxMKSB7XG4gICAgICB0aGlzLnNlbGVjdEFsbCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsIGV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5jYW5jZWwpIHtcbiAgICAgIC8vIFRoZSBldmVudCBpcyBjYW5jZWxlZCBhdCB0aGUgZW5kIGFscmVhZHksIGlzIHRoaXMgbmVjZXNzYXJ5P1xuICAgICAgdGhpcy5jYW5jZWwoZXZlbnQsIHRydWUpO1xuICAgIH1cblxuICAgIGlmICghcmVzdWx0LmtleSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5lbWl0KCdrZXlkb3duJywgZXZlbnQpO1xuICAgIHRoaXMuX29uS2V5LmZpcmUoeyBrZXk6IHJlc3VsdC5rZXksIGRvbUV2ZW50OiBldmVudCB9KTtcbiAgICB0aGlzLnNob3dDdXJzb3IoKTtcbiAgICB0aGlzLmhhbmRsZXIocmVzdWx0LmtleSk7XG5cbiAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXZlbnQsIHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaXNUaGlyZExldmVsU2hpZnQoYnJvd3NlcjogSUJyb3dzZXIsIGV2OiBJS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRoaXJkTGV2ZWxLZXkgPVxuICAgICAgICAoYnJvd3Nlci5pc01hYyAmJiAhdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSAmJiBldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgIWV2Lm1ldGFLZXkpIHx8XG4gICAgICAgIChicm93c2VyLmlzTVNXaW5kb3dzICYmIGV2LmFsdEtleSAmJiBldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5KTtcblxuICAgIGlmIChldi50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gdGhpcmRMZXZlbEtleTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBpbnZva2UgZm9yIGFycm93cywgcGFnZURvd24sIGhvbWUsIGJhY2tzcGFjZSwgZXRjLiAob24gbm9uLWtleXByZXNzIGV2ZW50cylcbiAgICByZXR1cm4gdGhpcmRMZXZlbEtleSAmJiAoIWV2LmtleUNvZGUgfHwgZXYua2V5Q29kZSA+IDQ3KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIEcgbGV2ZWwgb2YgdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBnXG4gICAqL1xuICBwdWJsaWMgc2V0Z0xldmVsKGc6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZ2xldmVsID0gZztcbiAgICB0aGlzLmNoYXJzZXQgPSB0aGlzLmNoYXJzZXRzW2ddO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2hhcnNldCBmb3IgdGhlIGdpdmVuIEcgbGV2ZWwgb2YgdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBnXG4gICAqIEBwYXJhbSBjaGFyc2V0XG4gICAqL1xuICBwdWJsaWMgc2V0Z0NoYXJzZXQoZzogbnVtYmVyLCBjaGFyc2V0OiBJQ2hhcnNldCk6IHZvaWQge1xuICAgIHRoaXMuY2hhcnNldHNbZ10gPSBjaGFyc2V0O1xuICAgIGlmICh0aGlzLmdsZXZlbCA9PT0gZykge1xuICAgICAgdGhpcy5jaGFyc2V0ID0gY2hhcnNldDtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2tleVVwKGV2OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGEga2V5cHJlc3MgZXZlbnQuXG4gICAqIEtleSBSZXNvdXJjZXM6XG4gICAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9LZXlib2FyZEV2ZW50XG4gICAqIEBwYXJhbSBldiBUaGUga2V5cHJlc3MgZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAgICovXG4gIHByb3RlY3RlZCBfa2V5UHJlc3MoZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICBsZXQga2V5O1xuXG4gICAgaWYgKHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciAmJiB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZXYpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuY2FuY2VsKGV2KTtcblxuICAgIGlmIChldi5jaGFyQ29kZSkge1xuICAgICAga2V5ID0gZXYuY2hhckNvZGU7XG4gICAgfSBlbHNlIGlmIChldi53aGljaCA9PT0gbnVsbCB8fCBldi53aGljaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSBldi5rZXlDb2RlO1xuICAgIH0gZWxzZSBpZiAoZXYud2hpY2ggIT09IDAgJiYgZXYuY2hhckNvZGUgIT09IDApIHtcbiAgICAgIGtleSA9IGV2LndoaWNoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFrZXkgfHwgKFxuICAgICAgKGV2LmFsdEtleSB8fCBldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpICYmICF0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsIGV2KVxuICAgICkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBrZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleSk7XG5cbiAgICB0aGlzLmVtaXQoJ2tleXByZXNzJywga2V5LCBldik7XG4gICAgdGhpcy5fb25LZXkuZmlyZSh7IGtleSwgZG9tRXZlbnQ6IGV2IH0pO1xuICAgIHRoaXMuc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuaGFuZGxlcihrZXkpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogUmluZyB0aGUgYmVsbC5cbiAgICogTm90ZTogV2UgY291bGQgZG8gc3dlZXQgdGhpbmdzIHdpdGggd2ViYXVkaW8gaGVyZVxuICAgKi9cbiAgcHVibGljIGJlbGwoKTogdm9pZCB7XG4gICAgdGhpcy5lbWl0KCdiZWxsJyk7XG4gICAgaWYgKHRoaXMuX3NvdW5kQmVsbCgpKSB7XG4gICAgICB0aGlzLnNvdW5kTWFuYWdlci5wbGF5QmVsbFNvdW5kKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Zpc3VhbEJlbGwoKSkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbC1iZWxsLWFjdGl2ZScpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Zpc3VhbEJlbGxUaW1lcik7XG4gICAgICB0aGlzLl92aXN1YWxCZWxsVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXN1YWwtYmVsbC1hY3RpdmUnKTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyB0aGUgY3VycmVudCBzdGF0ZSB0byB0aGUgY29uc29sZS5cbiAgICovXG4gIHB1YmxpYyBsb2codGV4dDogc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZGVidWcpIHJldHVybjtcbiAgICBpZiAoIXRoaXMuX2NvbnRleHQuY29uc29sZSB8fCAhdGhpcy5fY29udGV4dC5jb25zb2xlLmxvZykgcmV0dXJuO1xuICAgIHRoaXMuX2NvbnRleHQuY29uc29sZS5sb2codGV4dCwgZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogTG9nIHRoZSBjdXJyZW50IHN0YXRlIGFzIGVycm9yIHRvIHRoZSBjb25zb2xlLlxuICAgKi9cbiAgcHVibGljIGVycm9yKHRleHQ6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5vcHRpb25zLmRlYnVnKSByZXR1cm47XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0LmNvbnNvbGUgfHwgIXRoaXMuX2NvbnRleHQuY29uc29sZS5lcnJvcikgcmV0dXJuO1xuICAgIHRoaXMuX2NvbnRleHQuY29uc29sZS5lcnJvcih0ZXh0LCBkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSB0ZXJtaW5hbC5cbiAgICpcbiAgICogQHBhcmFtIHggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIHJlc2l6ZSB0by5cbiAgICogQHBhcmFtIHkgVGhlIG51bWJlciBvZiByb3dzIHRvIHJlc2l6ZSB0by5cbiAgICovXG4gIHB1YmxpYyByZXNpemUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoaXNOYU4oeCkgfHwgaXNOYU4oeSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoeCA9PT0gdGhpcy5jb2xzICYmIHkgPT09IHRoaXMucm93cykge1xuICAgICAgLy8gQ2hlY2sgaWYgd2Ugc3RpbGwgbmVlZCB0byBtZWFzdXJlIHRoZSBjaGFyIHNpemUgKGZpeGVzICM3ODUpLlxuICAgICAgaWYgKHRoaXMuY2hhck1lYXN1cmUgJiYgKCF0aGlzLmNoYXJNZWFzdXJlLndpZHRoIHx8ICF0aGlzLmNoYXJNZWFzdXJlLmhlaWdodCkpIHtcbiAgICAgICAgdGhpcy5jaGFyTWVhc3VyZS5tZWFzdXJlKHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHggPCBNSU5JTVVNX0NPTFMpIHggPSBNSU5JTVVNX0NPTFM7XG4gICAgaWYgKHkgPCBNSU5JTVVNX1JPV1MpIHkgPSBNSU5JTVVNX1JPV1M7XG5cbiAgICB0aGlzLmJ1ZmZlcnMucmVzaXplKHgsIHkpO1xuXG4gICAgdGhpcy5jb2xzID0geDtcbiAgICB0aGlzLnJvd3MgPSB5O1xuICAgIHRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKHRoaXMuY29scyk7XG5cbiAgICBpZiAodGhpcy5jaGFyTWVhc3VyZSkge1xuICAgICAgdGhpcy5jaGFyTWVhc3VyZS5tZWFzdXJlKHRoaXMub3B0aW9ucyk7XG4gICAgfVxuXG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIHRoaXMuX29uUmVzaXplLmZpcmUoeyBjb2xzOiB4LCByb3dzOiB5IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJhbmdlIG9mIHJvd3MgdG8gcmVmcmVzaFxuICAgKiBAcGFyYW0geSBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gcmVmcmVzaCBuZXh0LlxuICAgKi9cbiAgcHVibGljIHVwZGF0ZVJhbmdlKHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh5IDwgdGhpcy5fcmVmcmVzaFN0YXJ0KSB0aGlzLl9yZWZyZXNoU3RhcnQgPSB5O1xuICAgIGlmICh5ID4gdGhpcy5fcmVmcmVzaEVuZCkgdGhpcy5fcmVmcmVzaEVuZCA9IHk7XG4gICAgLy8gaWYgKHkgPiB0aGlzLnJlZnJlc2hFbmQpIHtcbiAgICAvLyAgIHRoaXMucmVmcmVzaEVuZCA9IHk7XG4gICAgLy8gICBpZiAoeSA+IHRoaXMucm93cyAtIDEpIHtcbiAgICAvLyAgICAgdGhpcy5yZWZyZXNoRW5kID0gdGhpcy5yb3dzIC0gMTtcbiAgICAvLyAgIH1cbiAgICAvLyB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSByYW5nZSBvZiByZWZyZXNoaW5nIHRvIHRoZSBtYXhpbXVtIHZhbHVlXG4gICAqL1xuICBwdWJsaWMgbWF4UmFuZ2UoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVmcmVzaFN0YXJ0ID0gMDtcbiAgICB0aGlzLl9yZWZyZXNoRW5kID0gdGhpcy5yb3dzIC0gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgZW50aXJlIGJ1ZmZlciwgbWFraW5nIHRoZSBwcm9tcHQgbGluZSB0aGUgbmV3IGZpcnN0IGxpbmUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuYnVmZmVyLnliYXNlID09PSAwICYmIHRoaXMuYnVmZmVyLnkgPT09IDApIHtcbiAgICAgIC8vIERvbid0IGNsZWFyIGlmIGl0J3MgYWxyZWFkeSBjbGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmJ1ZmZlci5saW5lcy5zZXQoMCwgdGhpcy5idWZmZXIubGluZXMuZ2V0KHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIueSkpO1xuICAgIHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aCA9IDE7XG4gICAgdGhpcy5idWZmZXIueWRpc3AgPSAwO1xuICAgIHRoaXMuYnVmZmVyLnliYXNlID0gMDtcbiAgICB0aGlzLmJ1ZmZlci55ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucm93czsgaSsrKSB7XG4gICAgICB0aGlzLmJ1ZmZlci5saW5lcy5wdXNoKHRoaXMuYnVmZmVyLmdldEJsYW5rTGluZShERUZBVUxUX0FUVFJfREFUQSkpO1xuICAgIH1cbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgdGhpcy5fb25TY3JvbGwuZmlyZSh0aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGUgaWYgdGhlIGN1cnJlbnQgdGVybWluYWwgaXMgdGhlIGdpdmVuIGFyZ3VtZW50LlxuICAgKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgbmFtZSB0byBldmFsdWF0ZVxuICAgKi9cbiAgcHVibGljIGlzKHRlcm06IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5vcHRpb25zLnRlcm1OYW1lICsgJycpLmluZGV4T2YodGVybSkgPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogRW1pdCB0aGUgZGF0YSBldmVudCBhbmQgcG9wdWxhdGUgdGhlIGdpdmVuIGRhdGEuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHBvcHVsYXRlIGluIHRoZSBldmVudC5cbiAgICovXG4gIHB1YmxpYyBoYW5kbGVyKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFByZXZlbnRzIGFsbCBldmVudHMgdG8gcHR5IHByb2Nlc3MgaWYgc3RkaW4gaXMgZGlzYWJsZWRcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVTdGRpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBzZWxlY3Rpb24gaWYgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGlzIGF2YWlsYWJsZSBhbmQgaGFzIGFuIGFjdGl2ZSBzZWxlY3Rpb25cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25NYW5hZ2VyICYmIHRoaXMuc2VsZWN0aW9uTWFuYWdlci5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uTWFuYWdlci5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8vIElucHV0IGlzIGJlaW5nIHNlbnQgdG8gdGhlIHRlcm1pbmFsLCB0aGUgdGVybWluYWwgc2hvdWxkIGZvY3VzIHRoZSBwcm9tcHQuXG4gICAgaWYgKHRoaXMuYnVmZmVyLnliYXNlICE9PSB0aGlzLmJ1ZmZlci55ZGlzcCkge1xuICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICAgIH1cbiAgICB0aGlzLl9vbkRhdGEuZmlyZShkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbWl0IHRoZSAndGl0bGUnIGV2ZW50IGFuZCBwb3B1bGF0ZSB0aGUgZ2l2ZW4gdGl0bGUuXG4gICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gcG9wdWxhdGUgaW4gdGhlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIGhhbmRsZVRpdGxlKHRpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9vblRpdGxlQ2hhbmdlLmZpcmUodGl0bGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQ1xuICAgKi9cblxuICAvKipcbiAgICogRVNDIEQgSW5kZXggKElORCBpcyAweDg0KS5cbiAgICovXG4gIHB1YmxpYyBpbmRleCgpOiB2b2lkIHtcbiAgICB0aGlzLmJ1ZmZlci55Kys7XG4gICAgaWYgKHRoaXMuYnVmZmVyLnkgPiB0aGlzLmJ1ZmZlci5zY3JvbGxCb3R0b20pIHtcbiAgICAgIHRoaXMuYnVmZmVyLnktLTtcbiAgICAgIHRoaXMuc2Nyb2xsKCk7XG4gICAgfVxuICAgIC8vIElmIHRoZSBlbmQgb2YgdGhlIGxpbmUgaXMgaGl0LCBwcmV2ZW50IHRoaXMgYWN0aW9uIGZyb20gd3JhcHBpbmcgYXJvdW5kIHRvIHRoZSBuZXh0IGxpbmUuXG4gICAgaWYgKHRoaXMuYnVmZmVyLnggPj0gdGhpcy5jb2xzKSB7XG4gICAgICB0aGlzLmJ1ZmZlci54LS07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBNIFJldmVyc2UgSW5kZXggKFJJIGlzIDB4OGQpLlxuICAgKlxuICAgKiBNb3ZlIHRoZSBjdXJzb3IgdXAgb25lIHJvdywgaW5zZXJ0aW5nIGEgbmV3IGJsYW5rIGxpbmUgaWYgbmVjZXNzYXJ5LlxuICAgKi9cbiAgcHVibGljIHJldmVyc2VJbmRleCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5idWZmZXIueSA9PT0gdGhpcy5idWZmZXIuc2Nyb2xsVG9wKSB7XG4gICAgICAvLyBwb3NzaWJseSBtb3ZlIHRoZSBjb2RlIGJlbG93IHRvIHRlcm0ucmV2ZXJzZVNjcm9sbCgpO1xuICAgICAgLy8gdGVzdDogZWNobyAtbmUgJ1xcZVsxOzFIXFxlWzQ0bVxcZU1cXGVbMG0nXG4gICAgICAvLyBibGFua0xpbmUodHJ1ZSkgaXMgeHRlcm0vbGludXggYmVoYXZpb3JcbiAgICAgIGNvbnN0IHNjcm9sbFJlZ2lvbkhlaWdodCA9IHRoaXMuYnVmZmVyLnNjcm9sbEJvdHRvbSAtIHRoaXMuYnVmZmVyLnNjcm9sbFRvcDtcbiAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnNoaWZ0RWxlbWVudHModGhpcy5idWZmZXIueSArIHRoaXMuYnVmZmVyLnliYXNlLCBzY3JvbGxSZWdpb25IZWlnaHQsIDEpO1xuICAgICAgdGhpcy5idWZmZXIubGluZXMuc2V0KHRoaXMuYnVmZmVyLnkgKyB0aGlzLmJ1ZmZlci55YmFzZSwgdGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlKHRoaXMuYnVmZmVyLnNjcm9sbFRvcCk7XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlKHRoaXMuYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnVmZmVyLnktLTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRVNDIGMgRnVsbCBSZXNldCAoUklTKS5cbiAgICovXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLm9wdGlvbnMucm93cyA9IHRoaXMucm93cztcbiAgICB0aGlzLm9wdGlvbnMuY29scyA9IHRoaXMuY29scztcbiAgICBjb25zdCBjdXN0b21LZXlFdmVudEhhbmRsZXIgPSB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI7XG4gICAgY29uc3QgaW5wdXRIYW5kbGVyID0gdGhpcy5faW5wdXRIYW5kbGVyO1xuICAgIGNvbnN0IGN1cnNvclN0YXRlID0gdGhpcy5jdXJzb3JTdGF0ZTtcbiAgICB0aGlzLl9zZXR1cCgpO1xuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IGN1c3RvbUtleUV2ZW50SGFuZGxlcjtcbiAgICB0aGlzLl9pbnB1dEhhbmRsZXIgPSBpbnB1dEhhbmRsZXI7XG4gICAgdGhpcy5jdXJzb3JTdGF0ZSA9IGN1cnNvclN0YXRlO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgdGhpcy52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEVTQyBIIFRhYiBTZXQgKEhUUyBpcyAweDg4KS5cbiAgICovXG4gIHB1YmxpYyB0YWJTZXQoKTogdm9pZCB7XG4gICAgdGhpcy5idWZmZXIudGFic1t0aGlzLmJ1ZmZlci54XSA9IHRydWU7XG4gIH1cblxuICAvLyBUT0RPOiBSZW1vdmUgY2FuY2VsIGZ1bmN0aW9uIGFuZCBjYW5jZWxFdmVudHMgb3B0aW9uXG4gIHB1YmxpYyBjYW5jZWwoZXY6IEV2ZW50LCBmb3JjZT86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5jYW5jZWxFdmVudHMgJiYgIWZvcmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfdmlzdWFsQmVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gcmV0dXJuIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICd2aXN1YWwnIHx8XG4gICAgLy8gICAgIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICdib3RoJztcbiAgfVxuXG4gIHByaXZhdGUgX3NvdW5kQmVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ3NvdW5kJztcbiAgICAvLyByZXR1cm4gdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ3NvdW5kJyB8fFxuICAgIC8vICAgICB0aGlzLm9wdGlvbnMuYmVsbFN0eWxlID09PSAnYm90aCc7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXJzXG4gKi9cblxuZnVuY3Rpb24gd2FzTW9kaWZpZXJLZXlPbmx5RXZlbnQoZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgcmV0dXJuIGV2LmtleUNvZGUgPT09IDE2IHx8IC8vIFNoaWZ0XG4gICAgZXYua2V5Q29kZSA9PT0gMTcgfHwgLy8gQ3RybFxuICAgIGV2LmtleUNvZGUgPT09IDE4OyAvLyBBbHRcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnLi9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBJVGVybWluYWwsIElWaWV3cG9ydCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQ2hhck1lYXN1cmUgfSBmcm9tICcuL0NoYXJNZWFzdXJlJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuL2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnLi91aS9MaWZlY3ljbGUnO1xuXG5jb25zdCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIID0gMTU7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgdmlld3BvcnQgb2YgYSB0ZXJtaW5hbCwgdGhlIHZpc2libGUgYXJlYSB3aXRoaW4gdGhlIGxhcmdlciBidWZmZXIgb2Ygb3V0cHV0LlxuICogTG9naWMgZm9yIHRoZSB2aXJ0dWFsIHNjcm9sbCBiYXIgaXMgaW5jbHVkZWQgaW4gdGhpcyBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVmlld3BvcnQge1xuICBwdWJsaWMgc2Nyb2xsQmFyV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFRvdWNoWTogbnVtYmVyO1xuICBwcml2YXRlIF9sYXN0U2Nyb2xsVG9wOiBudW1iZXIgPSAwO1xuXG4gIC8vIFN0b3JlcyBhIHBhcnRpYWwgbGluZSBhbW91bnQgd2hlbiBzY3JvbGxpbmcsIHRoaXMgaXMgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGhvdyBtdWNoIG9mIGEgbGluZVxuICAvLyBpcyBzY3JvbGxlZCBzbyB3ZSBjYW4gXCJzY3JvbGxcIiBvdmVyIHBhcnRpYWwgbGluZXMgYW5kIGZlZWwgbmF0dXJhbCBvbiB0b3VjaHBhZHMuIFRoaXMgaXMgYVxuICAvLyBxdWljayBmaXggYW5kIGNvdWxkIGhhdmUgYSBtb3JlIHJvYnVzdCBzb2x1dGlvbiBpbiBwbGFjZSB0aGF0IHJlc2V0IHRoZSB2YWx1ZSB3aGVuIG5lZWRlZC5cbiAgcHJpdmF0ZSBfd2hlZWxQYXJ0aWFsU2Nyb2xsOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgX3JlZnJlc2hBbmltYXRpb25GcmFtZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX2lnbm9yZU5leHRTY3JvbGxFdmVudDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFZpZXdwb3J0LlxuICAgKiBAcGFyYW0gX3Rlcm1pbmFsIFRoZSB0ZXJtaW5hbCB0aGlzIHZpZXdwb3J0IGJlbG9uZ3MgdG8uXG4gICAqIEBwYXJhbSBfdmlld3BvcnRFbGVtZW50IFRoZSBET00gZWxlbWVudCBhY3RpbmcgYXMgdGhlIHZpZXdwb3J0LlxuICAgKiBAcGFyYW0gX3Njcm9sbEFyZWEgVGhlIERPTSBlbGVtZW50IGFjdGluZyBhcyB0aGUgc2Nyb2xsIGFyZWEuXG4gICAqIEBwYXJhbSBfY2hhck1lYXN1cmUgQSBET00gZWxlbWVudCB1c2VkIHRvIG1lYXN1cmUgdGhlIGNoYXJhY3RlciBzaXplIG9mLiB0aGUgdGVybWluYWwuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogSVRlcm1pbmFsLFxuICAgIHByaXZhdGUgX3ZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSBfc2Nyb2xsQXJlYTogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSBfY2hhck1lYXN1cmU6IENoYXJNZWFzdXJlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBNZWFzdXJlIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsYmFyLiBJZiBpdCBpcyAwIHdlIGNhbiBhc3N1bWUgaXQncyBhbiBPU1ggb3ZlcmxheSBzY3JvbGxiYXIuXG4gICAgLy8gVW5mb3J0dW5hdGVseSB0aGUgb3ZlcmxheSBzY3JvbGxiYXIgd291bGQgYmUgaGlkZGVuIHVuZGVybmVhdGggdGhlIHNjcmVlbiBlbGVtZW50IGluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGVyZWZvcmUgd2UgYWNjb3VudCBmb3IgYSBzdGFuZGFyZCBhbW91bnQgdG8gbWFrZSBpdCB2aXNpYmxlXG4gICAgdGhpcy5zY3JvbGxCYXJXaWR0aCA9ICh0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0V2lkdGggLSB0aGlzLl9zY3JvbGxBcmVhLm9mZnNldFdpZHRoKSB8fCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwgJ3Njcm9sbCcsIHRoaXMuX29uU2Nyb2xsLmJpbmQodGhpcykpKTtcblxuICAgIC8vIFBlcmZvcm0gdGhpcyBhc3luYyB0byBlbnN1cmUgdGhlIENoYXJNZWFzdXJlIGlzIHJlYWR5LlxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zeW5jU2Nyb2xsQXJlYSgpLCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBvblRoZW1lQ2hhbmdlZChjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHJvdyBoZWlnaHQsIHNldHRpbmcgbGluZS1oZWlnaHQsIHZpZXdwb3J0IGhlaWdodCBhbmQgc2Nyb2xsIGFyZWEgaGVpZ2h0IGlmXG4gICAqIG5lY2Vzc2FyeS5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX2lubmVyUmVmcmVzaCgpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbm5lclJlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NoYXJNZWFzdXJlLmhlaWdodCA+IDApIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgPSB0aGlzLl90ZXJtaW5hbC5yZW5kZXJlci5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0ID0gdGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgIGNvbnN0IG5ld0J1ZmZlckhlaWdodCA9IE1hdGgucm91bmQodGhpcy5fY3VycmVudFJvd0hlaWdodCAqIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCkgKyAodGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQgLSB0aGlzLl90ZXJtaW5hbC5yZW5kZXJlci5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCk7XG4gICAgICBpZiAodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0ICE9PSBuZXdCdWZmZXJIZWlnaHQpIHtcbiAgICAgICAgdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0ID0gbmV3QnVmZmVySGVpZ2h0O1xuICAgICAgICB0aGlzLl9zY3JvbGxBcmVhLnN0eWxlLmhlaWdodCA9IHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCArICdweCc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3luYyBzY3JvbGxUb3BcbiAgICBjb25zdCBzY3JvbGxUb3AgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueWRpc3AgKiB0aGlzLl9jdXJyZW50Um93SGVpZ2h0O1xuICAgIGlmICh0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wICE9PSBzY3JvbGxUb3ApIHtcbiAgICAgIC8vIElnbm9yZSB0aGUgbmV4dCBzY3JvbGwgZXZlbnQgd2hpY2ggd2lsbCBiZSB0cmlnZ2VyZWQgYnkgc2V0dGluZyB0aGUgc2Nyb2xsVG9wIGFzIHdlIGRvIG5vdFxuICAgICAgLy8gd2FudCB0aGlzIGV2ZW50IHRvIHNjcm9sbCB0aGUgdGVybWluYWxcbiAgICAgIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCA9IHRydWU7XG4gICAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBkaW1lbnNpb25zIGFuZCBzeW5jaHJvbml6ZXMgdGhlIHNjcm9sbCBhcmVhIGlmIG5lY2Vzc2FyeS5cbiAgICovXG4gIHB1YmxpYyBzeW5jU2Nyb2xsQXJlYSgpOiB2b2lkIHtcbiAgICAvLyBJZiBidWZmZXIgaGVpZ2h0IGNoYW5nZWRcbiAgICBpZiAodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoICE9PSB0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGggPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RoO1xuICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHZpZXdwb3J0IGhlaWdodCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0ICE9PSAoPGFueT50aGlzLl90ZXJtaW5hbCkucmVuZGVyZXIuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQpIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYnVmZmVyIHBvc2l0aW9uIGRvZXNuJ3QgbWF0Y2ggbGFzdCBzY3JvbGwgdG9wXG4gICAgY29uc3QgbmV3U2Nyb2xsVG9wID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnlkaXNwICogdGhpcy5fY3VycmVudFJvd0hlaWdodDtcbiAgICBpZiAodGhpcy5fbGFzdFNjcm9sbFRvcCAhPT0gbmV3U2Nyb2xsVG9wKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgZWxlbWVudCdzIHNjcm9sbCB0b3AgY2hhbmdlZCwgdGhpcyBjYW4gaGFwcGVuIHdoZW4gaGlkaW5nIHRoZSBlbGVtZW50XG4gICAgaWYgKHRoaXMuX2xhc3RTY3JvbGxUb3AgIT09IHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3ApIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiByb3cgaGVpZ2h0IGNoYW5nZWRcbiAgICBpZiAodGhpcy5fdGVybWluYWwucmVuZGVyZXIuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQpIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBzY3JvbGwgZXZlbnRzIG9uIHRoZSB2aWV3cG9ydCwgY2FsY3VsYXRpbmcgdGhlIG5ldyB2aWV3cG9ydCBhbmQgcmVxdWVzdGluZyB0aGVcbiAgICogdGVybWluYWwgdG8gc2Nyb2xsIHRvIGl0LlxuICAgKiBAcGFyYW0gZXYgVGhlIHNjcm9sbCBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uU2Nyb2xsKGV2OiBFdmVudCk6IHZvaWQge1xuICAgIC8vIFJlY29yZCBjdXJyZW50IHNjcm9sbCB0b3AgcG9zaXRpb25cbiAgICB0aGlzLl9sYXN0U2Nyb2xsVG9wID0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgIC8vIERvbid0IGF0dGVtcHQgdG8gc2Nyb2xsIGlmIHRoZSBlbGVtZW50IGlzIG5vdCB2aXNpYmxlLCBvdGhlcndpc2Ugc2Nyb2xsVG9wIHdpbGwgYmUgY29ycnVwdFxuICAgIC8vIHdoaWNoIGNhdXNlcyB0aGUgdGVybWluYWwgdG8gc2Nyb2xsIHRoZSBidWZmZXIgdG8gdGhlIHRvcFxuICAgIGlmICghdGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFBhcmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSB0aGUgZXZlbnQgaWYgaXQgd2FzIGZsYWdnZWQgdG8gaWdub3JlICh3aGVuIHRoZSBzb3VyY2Ugb2YgdGhlIGV2ZW50IGlzIGZyb20gVmlld3BvcnQpXG4gICAgaWYgKHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCkge1xuICAgICAgdGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50ID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3Um93ID0gTWF0aC5yb3VuZCh0aGlzLl9sYXN0U2Nyb2xsVG9wIC8gdGhpcy5fY3VycmVudFJvd0hlaWdodCk7XG4gICAgY29uc3QgZGlmZiA9IG5ld1JvdyAtIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcyhkaWZmLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIG1vdXNlIHdoZWVsIGV2ZW50cyBieSBhZGp1c3RpbmcgdGhlIHZpZXdwb3J0J3Mgc2Nyb2xsVG9wIGFuZCBkZWxlZ2F0aW5nIHRoZSBhY3R1YWxcbiAgICogc2Nyb2xsaW5nIHRvIGBvblNjcm9sbGAsIHRoaXMgZXZlbnQgbmVlZHMgdG8gYmUgYXR0YWNoZWQgbWFudWFsbHkgYnkgdGhlIGNvbnN1bWVyIG9mXG4gICAqIGBWaWV3cG9ydGAuXG4gICAqIEBwYXJhbSBldiBUaGUgbW91c2Ugd2hlZWwgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgb25XaGVlbChldjogV2hlZWxFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGFtb3VudCA9IHRoaXMuX2dldFBpeGVsc1Njcm9sbGVkKGV2KTtcbiAgICBpZiAoYW1vdW50ID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AgKz0gYW1vdW50O1xuICAgIC8vIFByZXZlbnQgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcgd2hlbiB0aGUgdGVybWluYWwgc2Nyb2xsc1xuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRQaXhlbHNTY3JvbGxlZChldjogV2hlZWxFdmVudCk6IG51bWJlciB7XG4gICAgLy8gRG8gbm90aGluZyBpZiBpdCdzIG5vdCBhIHZlcnRpY2FsIHNjcm9sbCBldmVudFxuICAgIGlmIChldi5kZWx0YVkgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMXG4gICAgbGV0IGFtb3VudCA9IGV2LmRlbHRhWTtcbiAgICBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fY3VycmVudFJvd0hlaWdodDtcbiAgICB9IGVsc2UgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSkge1xuICAgICAgYW1vdW50ICo9IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgKiB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuICAgIH1cbiAgICByZXR1cm4gYW1vdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG51bWJlciBvZiBwaXhlbHMgc2Nyb2xsZWQgYnkgdGhlIG1vdXNlIGV2ZW50IHRha2luZyBpbnRvIGFjY291bnQgd2hhdCB0eXBlIG9mIGRlbHRhXG4gICAqIGlzIGJlaW5nIHVzZWQuXG4gICAqIEBwYXJhbSBldiBUaGUgbW91c2Ugd2hlZWwgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgZ2V0TGluZXNTY3JvbGxlZChldjogV2hlZWxFdmVudCk6IG51bWJlciB7XG4gICAgLy8gRG8gbm90aGluZyBpZiBpdCdzIG5vdCBhIHZlcnRpY2FsIHNjcm9sbCBldmVudFxuICAgIGlmIChldi5kZWx0YVkgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIFdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkVcbiAgICBsZXQgYW1vdW50ID0gZXYuZGVsdGFZO1xuICAgIGlmIChldi5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgICBhbW91bnQgLz0gdGhpcy5fY3VycmVudFJvd0hlaWdodCArIDAuMDsgLy8gUHJldmVudCBpbnRlZ2VyIGRpdmlzaW9uXG4gICAgICB0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgKz0gYW1vdW50O1xuICAgICAgYW1vdW50ID0gTWF0aC5mbG9vcihNYXRoLmFicyh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwpKSAqICh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgPiAwID8gMSA6IC0xKTtcbiAgICAgIHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCAlPSAxO1xuICAgIH0gZWxzZSBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fdGVybWluYWwucm93cztcbiAgICB9XG4gICAgcmV0dXJuIGFtb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB0b3VjaHN0YXJ0IGV2ZW50LCByZWNvcmRpbmcgdGhlIHRvdWNoIG9jY3VycmVkLlxuICAgKiBAcGFyYW0gZXYgVGhlIHRvdWNoIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIG9uVG91Y2hTdGFydChldjogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2xhc3RUb3VjaFkgPSBldi50b3VjaGVzWzBdLnBhZ2VZO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHRvdWNobW92ZSBldmVudCwgc2Nyb2xsaW5nIHRoZSB2aWV3cG9ydCBpZiB0aGUgcG9zaXRpb24gc2hpZnRlZC5cbiAgICogQHBhcmFtIGV2IFRoZSB0b3VjaCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBvblRvdWNoTW92ZShldjogVG91Y2hFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGRlbHRhWSA9IHRoaXMuX2xhc3RUb3VjaFkgLSBldi50b3VjaGVzWzBdLnBhZ2VZO1xuICAgIHRoaXMuX2xhc3RUb3VjaFkgPSBldi50b3VjaGVzWzBdLnBhZ2VZO1xuICAgIGlmIChkZWx0YVkgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCArPSBkZWx0YVk7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElUZXJtaW5hbCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQ0hBUl9EQVRBX0NPREVfSU5ERVgsIE5VTExfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfQ09ERSB9IGZyb20gJy4vQnVmZmVyJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5V2luZG93c01vZGUodGVybWluYWw6IElUZXJtaW5hbCk6IElEaXNwb3NhYmxlIHtcbiAgLy8gV2lucHR5IGRvZXMgbm90IHN1cHBvcnQgd3JhcGFyb3VuZCBtb2RlIHdoaWNoIG1lYW5zIHRoYXQgbGluZXMgd2lsbCBuZXZlclxuICAvLyBiZSBtYXJrZWQgYXMgd3JhcHBlZC4gVGhpcyBjYXVzZXMgaXNzdWVzIGZvciB0aGluZ3MgbGlrZSBjb3B5aW5nIGEgbGluZVxuICAvLyByZXRhaW5pbmcgdGhlIHdyYXBwZWQgbmV3IGxpbmUgY2hhcmFjdGVycyBvciBpZiBjb25zdW1lcnMgYXJlIGxpc3RlbmluZ1xuICAvLyBpbiBvbiB0aGUgZGF0YSBzdHJlYW0uXG4gIC8vXG4gIC8vIFRoZSB3b3JrYXJvdW5kIGZvciB0aGlzIGlzIHRvIGxpc3RlbiB0byBldmVyeSBpbmNvbWluZyBsaW5lIGZlZWQgYW5kIG1hcmtcbiAgLy8gdGhlIGxpbmUgYXMgd3JhcHBlZCBpZiB0aGUgbGFzdCBjaGFyYWN0ZXIgaW4gdGhlIHByZXZpb3VzIGxpbmUgaXMgbm90IGFcbiAgLy8gc3BhY2UuIFRoaXMgaXMgY2VydGFpbmx5IG5vdCB3aXRob3V0IGl0cyBwcm9ibGVtcywgYnV0IGdlbmVyYWxseSBvblxuICAvLyBXaW5kb3dzIHdoZW4gdGV4dCByZWFjaGVzIHRoZSBlbmQgb2YgdGhlIHRlcm1pbmFsIGl0J3MgbGlrZWx5IGdvaW5nIHRvIGJlXG4gIC8vIHdyYXBwZWQuXG4gIHJldHVybiB0ZXJtaW5hbC5vbkxpbmVGZWVkKCgpID0+IHtcbiAgICBjb25zdCBsaW5lID0gdGVybWluYWwuYnVmZmVyLmxpbmVzLmdldCh0ZXJtaW5hbC5idWZmZXIueWJhc2UgKyB0ZXJtaW5hbC5idWZmZXIueSAtIDEpO1xuICAgIGNvbnN0IGxhc3RDaGFyID0gbGluZS5nZXQodGVybWluYWwuY29scyAtIDEpO1xuXG4gICAgaWYgKGxhc3RDaGFyW0NIQVJfREFUQV9DT0RFX0lOREVYXSAhPT0gTlVMTF9DRUxMX0NPREUgJiYgbGFzdENoYXJbQ0hBUl9EQVRBX0NPREVfSU5ERVhdICE9PSBXSElURVNQQUNFX0NFTExfQ09ERSkge1xuICAgICAgY29uc3QgbmV4dExpbmUgPSB0ZXJtaW5hbC5idWZmZXIubGluZXMuZ2V0KHRlcm1pbmFsLmJ1ZmZlci55YmFzZSArIHRlcm1pbmFsLmJ1ZmZlci55KTtcbiAgICAgIG5leHRMaW5lLmlzV3JhcHBlZCA9IHRydWU7XG4gICAgfVxuICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogSW1wbGVtZW50cyB0aGUgYXR0YWNoIG1ldGhvZCwgdGhhdCBhdHRhY2hlcyB0aGUgdGVybWluYWwgdG8gYSBXZWJTb2NrZXQgc3RyZWFtLlxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsLCBJRGlzcG9zYWJsZSB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElBdHRhY2hBZGRvblRlcm1pbmFsIH0gZnJvbSAnLi9JbnRlcmZhY2VzJztcblxuLyoqXG4gKiBBdHRhY2hlcyB0aGUgZ2l2ZW4gdGVybWluYWwgdG8gdGhlIGdpdmVuIHNvY2tldC5cbiAqXG4gKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgdG8gYmUgYXR0YWNoZWQgdG8gdGhlIGdpdmVuIHNvY2tldC5cbiAqIEBwYXJhbSBzb2NrZXQgVGhlIHNvY2tldCB0byBhdHRhY2ggdGhlIGN1cnJlbnQgdGVybWluYWwuXG4gKiBAcGFyYW0gYmlkaXJlY3Rpb25hbCBXaGV0aGVyIHRoZSB0ZXJtaW5hbCBzaG91bGQgc2VuZCBkYXRhIHRvIHRoZSBzb2NrZXQgYXMgd2VsbC5cbiAqIEBwYXJhbSBidWZmZXJlZCBXaGV0aGVyIHRoZSByZW5kZXJpbmcgb2YgaW5jb21pbmcgZGF0YSBzaG91bGQgaGFwcGVuIGluc3RhbnRseSBvciBhdCBhIG1heGltdW1cbiAqIGZyZXF1ZW5jeSBvZiAxIHJlbmRlcmluZyBwZXIgMTBtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGF0dGFjaCh0ZXJtOiBUZXJtaW5hbCwgc29ja2V0OiBXZWJTb2NrZXQsIGJpZGlyZWN0aW9uYWw6IGJvb2xlYW4sIGJ1ZmZlcmVkOiBib29sZWFuKTogdm9pZCB7XG4gIGNvbnN0IGFkZG9uVGVybWluYWwgPSA8SUF0dGFjaEFkZG9uVGVybWluYWw+dGVybTtcbiAgYmlkaXJlY3Rpb25hbCA9ICh0eXBlb2YgYmlkaXJlY3Rpb25hbCA9PT0gJ3VuZGVmaW5lZCcpID8gdHJ1ZSA6IGJpZGlyZWN0aW9uYWw7XG4gIGFkZG9uVGVybWluYWwuX19zb2NrZXQgPSBzb2NrZXQ7XG5cbiAgYWRkb25UZXJtaW5hbC5fX2ZsdXNoQnVmZmVyID0gKCkgPT4ge1xuICAgIGFkZG9uVGVybWluYWwud3JpdGUoYWRkb25UZXJtaW5hbC5fX2F0dGFjaFNvY2tldEJ1ZmZlcik7XG4gICAgYWRkb25UZXJtaW5hbC5fX2F0dGFjaFNvY2tldEJ1ZmZlciA9IG51bGw7XG4gIH07XG5cbiAgYWRkb25UZXJtaW5hbC5fX3B1c2hUb0J1ZmZlciA9IChkYXRhOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoYWRkb25UZXJtaW5hbC5fX2F0dGFjaFNvY2tldEJ1ZmZlcikge1xuICAgICAgYWRkb25UZXJtaW5hbC5fX2F0dGFjaFNvY2tldEJ1ZmZlciArPSBkYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRvblRlcm1pbmFsLl9fYXR0YWNoU29ja2V0QnVmZmVyID0gZGF0YTtcbiAgICAgIHNldFRpbWVvdXQoYWRkb25UZXJtaW5hbC5fX2ZsdXNoQnVmZmVyLCAxMCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFRPRE86IFRoaXMgc2hvdWxkIGJlIHR5cGVkIGJ1dCB0aGVyZSBzZWVtIHRvIGJlIGlzc3VlcyBpbXBvcnRpbmcgdGhlIHR5cGVcbiAgbGV0IG15VGV4dERlY29kZXI6IGFueTtcblxuICBhZGRvblRlcm1pbmFsLl9fZ2V0TWVzc2FnZSA9IGZ1bmN0aW9uKGV2OiBNZXNzYWdlRXZlbnQpOiB2b2lkIHtcbiAgICBsZXQgc3RyOiBzdHJpbmc7XG5cbiAgICBpZiAodHlwZW9mIGV2LmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoIW15VGV4dERlY29kZXIpIHtcbiAgICAgICAgbXlUZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgfVxuICAgICAgaWYgKGV2LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICBzdHIgPSBteVRleHREZWNvZGVyLmRlY29kZShldi5kYXRhKTtcbiAgICAgICAgZGlzcGxheURhdGEoc3RyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG4gICAgICAgIGZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICBzdHIgPSBteVRleHREZWNvZGVyLmRlY29kZShmaWxlUmVhZGVyLnJlc3VsdCk7XG4gICAgICAgICAgZGlzcGxheURhdGEoc3RyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZXYuZGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXYuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRpc3BsYXlEYXRhKGV2LmRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcihgQ2Fubm90IGhhbmRsZSBcIiR7dHlwZW9mIGV2LmRhdGF9XCIgd2Vic29ja2V0IG1lc3NhZ2UuYCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAqIFB1c2ggZGF0YSB0byBidWZmZXIgb3Igd3JpdGUgaXQgaW4gdGhlIHRlcm1pbmFsLlxuICAqIFRoaXMgaXMgdXNlZCBhcyBhIGNhbGxiYWNrIGZvciBGaWxlUmVhZGVyLm9ubG9hZC5cbiAgKlxuICAqIEBwYXJhbSBzdHIgU3RyaW5nIGRlY29kZWQgYnkgRmlsZVJlYWRlci5cbiAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSBvZiB0aGUgRXZlbnRNZXNzYWdlLlxuICAqL1xuICBmdW5jdGlvbiBkaXNwbGF5RGF0YShzdHI/OiBzdHJpbmcsIGRhdGE/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoYnVmZmVyZWQpIHtcbiAgICAgIGFkZG9uVGVybWluYWwuX19wdXNoVG9CdWZmZXIoc3RyIHx8IGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZGRvblRlcm1pbmFsLndyaXRlKHN0ciB8fCBkYXRhKTtcbiAgICB9XG4gIH1cblxuICBhZGRvblRlcm1pbmFsLl9fc2VuZERhdGEgPSAoZGF0YTogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHNvY2tldC5yZWFkeVN0YXRlICE9PSAxKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNvY2tldC5zZW5kKGRhdGEpO1xuICB9O1xuXG4gIGFkZG9uVGVybWluYWwuX2NvcmUucmVnaXN0ZXIoYWRkU29ja2V0TGlzdGVuZXIoc29ja2V0LCAnbWVzc2FnZScsIGFkZG9uVGVybWluYWwuX19nZXRNZXNzYWdlKSk7XG5cbiAgaWYgKGJpZGlyZWN0aW9uYWwpIHtcbiAgICBhZGRvblRlcm1pbmFsLl9fZGF0YUxpc3RlbmVyID0gYWRkb25UZXJtaW5hbC5vbkRhdGEoYWRkb25UZXJtaW5hbC5fX3NlbmREYXRhKTtcbiAgICBhZGRvblRlcm1pbmFsLl9jb3JlLnJlZ2lzdGVyKGFkZG9uVGVybWluYWwuX19kYXRhTGlzdGVuZXIpO1xuICB9XG5cbiAgYWRkb25UZXJtaW5hbC5fY29yZS5yZWdpc3RlcihhZGRTb2NrZXRMaXN0ZW5lcihzb2NrZXQsICdjbG9zZScsICgpID0+IGRldGFjaChhZGRvblRlcm1pbmFsLCBzb2NrZXQpKSk7XG4gIGFkZG9uVGVybWluYWwuX2NvcmUucmVnaXN0ZXIoYWRkU29ja2V0TGlzdGVuZXIoc29ja2V0LCAnZXJyb3InLCAoKSA9PiBkZXRhY2goYWRkb25UZXJtaW5hbCwgc29ja2V0KSkpO1xufVxuXG5mdW5jdGlvbiBhZGRTb2NrZXRMaXN0ZW5lcihzb2NrZXQ6IFdlYlNvY2tldCwgdHlwZTogc3RyaW5nLCBoYW5kbGVyOiAodGhpczogV2ViU29ja2V0LCBldjogRXZlbnQpID0+IGFueSk6IElEaXNwb3NhYmxlIHtcbiAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XG4gIHJldHVybiB7XG4gICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIC8vIEFscmVhZHkgZGlzcG9zZWRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XG4gICAgICBoYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogRGV0YWNoZXMgdGhlIGdpdmVuIHRlcm1pbmFsIGZyb20gdGhlIGdpdmVuIHNvY2tldFxuICpcbiAqIEBwYXJhbSB0ZXJtIFRoZSB0ZXJtaW5hbCB0byBiZSBkZXRhY2hlZCBmcm9tIHRoZSBnaXZlbiBzb2NrZXQuXG4gKiBAcGFyYW0gc29ja2V0IFRoZSBzb2NrZXQgZnJvbSB3aGljaCB0byBkZXRhY2ggdGhlIGN1cnJlbnQgdGVybWluYWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRhY2godGVybTogVGVybWluYWwsIHNvY2tldDogV2ViU29ja2V0KTogdm9pZCB7XG4gIGNvbnN0IGFkZG9uVGVybWluYWwgPSA8SUF0dGFjaEFkZG9uVGVybWluYWw+dGVybTtcbiAgYWRkb25UZXJtaW5hbC5fX2RhdGFMaXN0ZW5lci5kaXNwb3NlKCk7XG4gIGFkZG9uVGVybWluYWwuX19kYXRhTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG5cbiAgc29ja2V0ID0gKHR5cGVvZiBzb2NrZXQgPT09ICd1bmRlZmluZWQnKSA/IGFkZG9uVGVybWluYWwuX19zb2NrZXQgOiBzb2NrZXQ7XG5cbiAgaWYgKHNvY2tldCkge1xuICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgYWRkb25UZXJtaW5hbC5fX2dldE1lc3NhZ2UpO1xuICB9XG5cbiAgZGVsZXRlIGFkZG9uVGVybWluYWwuX19zb2NrZXQ7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRlcm1pbmFsQ29uc3RydWN0b3I6IHR5cGVvZiBUZXJtaW5hbCk6IHZvaWQge1xuICAvKipcbiAgICogQXR0YWNoZXMgdGhlIGN1cnJlbnQgdGVybWluYWwgdG8gdGhlIGdpdmVuIHNvY2tldFxuICAgKlxuICAgKiBAcGFyYW0gc29ja2V0IFRoZSBzb2NrZXQgdG8gYXR0YWNoIHRoZSBjdXJyZW50IHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gYmlkaXJlY3Rpb25hbCBXaGV0aGVyIHRoZSB0ZXJtaW5hbCBzaG91bGQgc2VuZCBkYXRhIHRvIHRoZSBzb2NrZXQgYXMgd2VsbC5cbiAgICogQHBhcmFtIGJ1ZmZlcmVkIFdoZXRoZXIgdGhlIHJlbmRlcmluZyBvZiBpbmNvbWluZyBkYXRhIHNob3VsZCBoYXBwZW4gaW5zdGFudGx5IG9yIGF0IGEgbWF4aW11bVxuICAgKiBmcmVxdWVuY3kgb2YgMSByZW5kZXJpbmcgcGVyIDEwbXMuXG4gICAqL1xuICAoPGFueT50ZXJtaW5hbENvbnN0cnVjdG9yLnByb3RvdHlwZSkuYXR0YWNoID0gZnVuY3Rpb24gKHNvY2tldDogV2ViU29ja2V0LCBiaWRpcmVjdGlvbmFsOiBib29sZWFuLCBidWZmZXJlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGF0dGFjaCh0aGlzLCBzb2NrZXQsIGJpZGlyZWN0aW9uYWwsIGJ1ZmZlcmVkKTtcbiAgfTtcblxuICAvKipcbiAgICogRGV0YWNoZXMgdGhlIGN1cnJlbnQgdGVybWluYWwgZnJvbSB0aGUgZ2l2ZW4gc29ja2V0LlxuICAgKlxuICAgKiBAcGFyYW0gc29ja2V0IFRoZSBzb2NrZXQgZnJvbSB3aGljaCB0byBkZXRhY2ggdGhlIGN1cnJlbnQgdGVybWluYWwuXG4gICAqL1xuICAoPGFueT50ZXJtaW5hbENvbnN0cnVjdG9yLnByb3RvdHlwZSkuZGV0YWNoID0gZnVuY3Rpb24gKHNvY2tldDogV2ViU29ja2V0KTogdm9pZCB7XG4gICAgZGV0YWNoKHRoaXMsIHNvY2tldCk7XG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIEZpdCB0ZXJtaW5hbCBjb2x1bW5zIGFuZCByb3dzIHRvIHRoZSBkaW1lbnNpb25zIG9mIGl0cyBET00gZWxlbWVudC5cbiAqXG4gKiAjIyBBcHByb2FjaFxuICpcbiAqICAgIFJvd3M6IFRydW5jYXRlIHRoZSBkaXZpc2lvbiBvZiB0aGUgdGVybWluYWwgcGFyZW50IGVsZW1lbnQgaGVpZ2h0IGJ5IHRoZVxuICogICAgICAgICAgdGVybWluYWwgcm93IGhlaWdodC5cbiAqIENvbHVtbnM6IFRydW5jYXRlIHRoZSBkaXZpc2lvbiBvZiB0aGUgdGVybWluYWwgcGFyZW50IGVsZW1lbnQgd2lkdGggYnkgdGhlXG4gKiAgICAgICAgICB0ZXJtaW5hbCBjaGFyYWN0ZXIgd2lkdGggKGFwcGx5IGRpc3BsYXk6IGlubGluZSBhdCB0aGUgdGVybWluYWxcbiAqICAgICAgICAgIHJvdyBhbmQgdHJ1bmNhdGUgaXRzIHdpZHRoIHdpdGggdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGNvbHVtbnMpLlxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElHZW9tZXRyeSB7XG4gIHJvd3M6IG51bWJlcjtcbiAgY29sczogbnVtYmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvcG9zZUdlb21ldHJ5KHRlcm06IFRlcm1pbmFsKTogSUdlb21ldHJ5IHtcbiAgaWYgKCF0ZXJtLmVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHBhcmVudEVsZW1lbnRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRlcm0uZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbiAgY29uc3QgcGFyZW50RWxlbWVudEhlaWdodCA9IHBhcnNlSW50KHBhcmVudEVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdoZWlnaHQnKSk7XG4gIGNvbnN0IHBhcmVudEVsZW1lbnRXaWR0aCA9IE1hdGgubWF4KDAsIHBhcnNlSW50KHBhcmVudEVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd3aWR0aCcpKSk7XG4gIGNvbnN0IGVsZW1lbnRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRlcm0uZWxlbWVudCk7XG4gIGNvbnN0IGVsZW1lbnRQYWRkaW5nID0ge1xuICAgIHRvcDogcGFyc2VJbnQoZWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJykpLFxuICAgIGJvdHRvbTogcGFyc2VJbnQoZWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctYm90dG9tJykpLFxuICAgIHJpZ2h0OiBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1yaWdodCcpKSxcbiAgICBsZWZ0OiBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1sZWZ0JykpXG4gIH07XG4gIGNvbnN0IGVsZW1lbnRQYWRkaW5nVmVyID0gZWxlbWVudFBhZGRpbmcudG9wICsgZWxlbWVudFBhZGRpbmcuYm90dG9tO1xuICBjb25zdCBlbGVtZW50UGFkZGluZ0hvciA9IGVsZW1lbnRQYWRkaW5nLnJpZ2h0ICsgZWxlbWVudFBhZGRpbmcubGVmdDtcbiAgY29uc3QgYXZhaWxhYmxlSGVpZ2h0ID0gcGFyZW50RWxlbWVudEhlaWdodCAtIGVsZW1lbnRQYWRkaW5nVmVyO1xuICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHBhcmVudEVsZW1lbnRXaWR0aCAtIGVsZW1lbnRQYWRkaW5nSG9yIC0gKDxhbnk+dGVybSkuX2NvcmUudmlld3BvcnQuc2Nyb2xsQmFyV2lkdGg7XG4gIGNvbnN0IGdlb21ldHJ5ID0ge1xuICAgIGNvbHM6IE1hdGguZmxvb3IoYXZhaWxhYmxlV2lkdGggLyAoPGFueT50ZXJtKS5fY29yZS5yZW5kZXJlci5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCksXG4gICAgcm93czogTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyAoPGFueT50ZXJtKS5fY29yZS5yZW5kZXJlci5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQpXG4gIH07XG4gIHJldHVybiBnZW9tZXRyeTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpdCh0ZXJtOiBUZXJtaW5hbCk6IHZvaWQge1xuICBjb25zdCBnZW9tZXRyeSA9IHByb3Bvc2VHZW9tZXRyeSh0ZXJtKTtcbiAgaWYgKGdlb21ldHJ5KSB7XG4gICAgLy8gRm9yY2UgYSBmdWxsIHJlbmRlclxuICAgIGlmICh0ZXJtLnJvd3MgIT09IGdlb21ldHJ5LnJvd3MgfHwgdGVybS5jb2xzICE9PSBnZW9tZXRyeS5jb2xzKSB7XG4gICAgICAoPGFueT50ZXJtKS5fY29yZS5yZW5kZXJlci5jbGVhcigpO1xuICAgICAgdGVybS5yZXNpemUoZ2VvbWV0cnkuY29scywgZ2VvbWV0cnkucm93cyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseSh0ZXJtaW5hbENvbnN0cnVjdG9yOiB0eXBlb2YgVGVybWluYWwpOiB2b2lkIHtcbiAgKDxhbnk+dGVybWluYWxDb25zdHJ1Y3Rvci5wcm90b3R5cGUpLnByb3Bvc2VHZW9tZXRyeSA9IGZ1bmN0aW9uICgpOiBJR2VvbWV0cnkge1xuICAgIHJldHVybiBwcm9wb3NlR2VvbWV0cnkodGhpcyk7XG4gIH07XG5cbiAgKDxhbnk+dGVybWluYWxDb25zdHJ1Y3Rvci5wcm90b3R5cGUpLmZpdCA9IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICBmaXQodGhpcyk7XG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuXG4vKipcbiAqIFRvZ2dsZSB0aGUgZ2l2ZW4gdGVybWluYWwncyBmdWxsc2NyZWVuIG1vZGUuXG4gKiBAcGFyYW0gdGVybSBUaGUgdGVybWluYWwgdG8gdG9nZ2xlIGZ1bGwgc2NyZWVuIG1vZGVcbiAqIEBwYXJhbSBmdWxsc2NyZWVuIFRvZ2dsZSBmdWxsc2NyZWVuIG9uICh0cnVlKSBvciBvZmYgKGZhbHNlKVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRnVsbFNjcmVlbih0ZXJtOiBUZXJtaW5hbCwgZnVsbHNjcmVlbjogYm9vbGVhbik6IHZvaWQge1xuICBsZXQgZm46ICguLi50b2tlbnM6IHN0cmluZ1tdKSA9PiB2b2lkO1xuXG4gIGlmICh0eXBlb2YgZnVsbHNjcmVlbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBmbiA9ICh0ZXJtLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmdWxsc2NyZWVuJykpID9cbiAgICAgIHRlcm0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlIDogdGVybS5lbGVtZW50LmNsYXNzTGlzdC5hZGQ7XG4gIH0gZWxzZSBpZiAoIWZ1bGxzY3JlZW4pIHtcbiAgICBmbiA9IHRlcm0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlO1xuICB9IGVsc2Uge1xuICAgIGZuID0gdGVybS5lbGVtZW50LmNsYXNzTGlzdC5hZGQ7XG4gIH1cblxuICBmbiA9IGZuLmJpbmQodGVybS5lbGVtZW50LmNsYXNzTGlzdCk7XG4gIGZuKCdmdWxsc2NyZWVuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseSh0ZXJtaW5hbENvbnN0cnVjdG9yOiB0eXBlb2YgVGVybWluYWwpOiB2b2lkIHtcbiAgKDxhbnk+dGVybWluYWxDb25zdHJ1Y3Rvci5wcm90b3R5cGUpLnRvZ2dsZUZ1bGxTY3JlZW4gPSBmdW5jdGlvbiAoZnVsbHNjcmVlbjogYm9vbGVhbik6IHZvaWQge1xuICAgIHRvZ2dsZUZ1bGxTY3JlZW4odGhpcywgZnVsbHNjcmVlbik7XG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElTZWFyY2hIZWxwZXIsIElTZWFyY2hBZGRvblRlcm1pbmFsLCBJU2VhcmNoT3B0aW9ucywgSVNlYXJjaFJlc3VsdCB9IGZyb20gJy4vSW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ3h0ZXJtJztcblxuY29uc3QgTk9OX1dPUkRfQ0hBUkFDVEVSUyA9ICcgfiFAIyQlXiYqKCkrYC09W117fXxcXDs6XCJcXCcsLi88Pj8nO1xuY29uc3QgTElORVNfQ0FDSEVfVElNRV9UT19MSVZFID0gMTUgKiAxMDAwOyAvLyAxNSBzZWNzXG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGtub3dzIGhvdyB0byBzZWFyY2ggdGhlIHRlcm1pbmFsIGFuZCBob3cgdG8gZGlzcGxheSB0aGUgcmVzdWx0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFNlYXJjaEhlbHBlciBpbXBsZW1lbnRzIElTZWFyY2hIZWxwZXIge1xuICAvKipcbiAgICogdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAgaXMgYSBmYWlybHkgZXhwZW5zaXZlIGNhbGwuXG4gICAqIFdlIG1lbW9pemUgdGhlIGNhbGxzIGludG8gYW4gYXJyYXkgdGhhdCBoYXMgYSB0aW1lIGJhc2VkIHR0bC5cbiAgICogX2xpbmVzQ2FjaGUgaXMgYWxzbyBpbnZhbGlkYXRlZCB3aGVuIHRoZSB0ZXJtaW5hbCBjdXJzb3IgbW92ZXMuXG4gICAqL1xuICBwcml2YXRlIF9saW5lc0NhY2hlOiBzdHJpbmdbXSA9IG51bGw7XG4gIHByaXZhdGUgX2xpbmVzQ2FjaGVUaW1lb3V0SWQgPSAwO1xuICBwcml2YXRlIF9jdXJzb3JNb3ZlTGlzdGVuZXI6IElEaXNwb3NhYmxlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yZXNpemVMaXN0ZW5lcjogSURpc3Bvc2FibGUgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfdGVybWluYWw6IElTZWFyY2hBZGRvblRlcm1pbmFsKSB7XG4gICAgdGhpcy5fZGVzdHJveUxpbmVzQ2FjaGUgPSB0aGlzLl9kZXN0cm95TGluZXNDYWNoZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIG5leHQgaW5zdGFuY2Ugb2YgdGhlIHRlcm0sIHRoZW4gc2Nyb2xsIHRvIGFuZCBzZWxlY3QgaXQuIElmIGl0XG4gICAqIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAqIEBwYXJhbSB0ZXJtIFRoZSBzZWFyY2ggdGVybS5cbiAgICogQHBhcmFtIHNlYXJjaE9wdGlvbnMgU2VhcmNoIG9wdGlvbnMuXG4gICAqIEByZXR1cm4gV2hldGhlciBhIHJlc3VsdCB3YXMgZm91bmQuXG4gICAqL1xuICBwdWJsaWMgZmluZE5leHQodGVybTogc3RyaW5nLCBzZWFyY2hPcHRpb25zPzogSVNlYXJjaE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBjb25zdCBzZWxlY3Rpb25NYW5hZ2VyID0gdGhpcy5fdGVybWluYWwuX2NvcmUuc2VsZWN0aW9uTWFuYWdlcjtcbiAgICBjb25zdCB7aW5jcmVtZW50YWx9ID0gc2VhcmNoT3B0aW9ucztcbiAgICBsZXQgcmVzdWx0OiBJU2VhcmNoUmVzdWx0O1xuXG4gICAgaWYgKCF0ZXJtIHx8IHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxlY3Rpb25NYW5hZ2VyLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0Q29sOiBudW1iZXIgPSAwO1xuICAgIGxldCBzdGFydFJvdyA9IHRoaXMuX3Rlcm1pbmFsLl9jb3JlLmJ1ZmZlci55ZGlzcDtcblxuICAgIGlmIChzZWxlY3Rpb25NYW5hZ2VyLnNlbGVjdGlvbkVuZCkge1xuICAgICAgLy8gU3RhcnQgZnJvbSB0aGUgc2VsZWN0aW9uIGVuZCBpZiB0aGVyZSBpcyBhIHNlbGVjdGlvblxuICAgICAgLy8gRm9yIGluY3JlbWVudGFsIHNlYXJjaCwgdXNlIGV4aXN0aW5nIHJvd1xuICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmdldFNlbGVjdGlvbigpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBzdGFydFJvdyA9IGluY3JlbWVudGFsID8gc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25TdGFydFsxXSA6IHNlbGVjdGlvbk1hbmFnZXIuc2VsZWN0aW9uRW5kWzFdO1xuICAgICAgICBzdGFydENvbCA9IGluY3JlbWVudGFsID8gc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25TdGFydFswXSA6IHNlbGVjdGlvbk1hbmFnZXIuc2VsZWN0aW9uRW5kWzBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2luaXRMaW5lc0NhY2hlKCk7XG5cbiAgICAvLyBBIHJvdyB0aGF0IGhhcyBpc1dyYXBwZWQgPSBmYWxzZVxuICAgIGxldCBmaW5kaW5nUm93ID0gc3RhcnRSb3c7XG4gICAgLy8gaW5kZXggb2YgYmVnaW5uaW5nIGNvbHVtbiB0aGF0IF9maW5kSW5MaW5lIG5lZWQgdG8gc2Nhbi5cbiAgICBsZXQgY3VtdWxhdGl2ZUNvbHMgPSBzdGFydENvbDtcbiAgICAvLyBJZiBzdGFydFJvdyBpcyB3cmFwcGVkIHJvdywgc2NhbiBmb3IgdW53cmFwcGVkIHJvdyBhYm92ZS5cbiAgICAvLyBTbyB3ZSBjYW4gc3RhcnQgbWF0Y2hpbmcgb24gd3JhcHBlZCBsaW5lIGZyb20gbG9uZyB1bndyYXBwZWQgbGluZS5cbiAgICB3aGlsZSAodGhpcy5fdGVybWluYWwuX2NvcmUuYnVmZmVyLmxpbmVzLmdldChmaW5kaW5nUm93KS5pc1dyYXBwZWQpIHtcbiAgICAgIGZpbmRpbmdSb3ctLTtcbiAgICAgIGN1bXVsYXRpdmVDb2xzICs9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgfVxuXG4gICAgLy8gU2VhcmNoIHN0YXJ0Um93XG4gICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBmaW5kaW5nUm93LCBjdW11bGF0aXZlQ29scywgc2VhcmNoT3B0aW9ucyk7XG5cbiAgICAvLyBTZWFyY2ggZnJvbSBzdGFydFJvdyArIDEgdG8gZW5kXG4gICAgaWYgKCFyZXN1bHQpIHtcblxuICAgICAgZm9yIChsZXQgeSA9IHN0YXJ0Um93ICsgMTsgeSA8IHRoaXMuX3Rlcm1pbmFsLl9jb3JlLmJ1ZmZlci55YmFzZSArIHRoaXMuX3Rlcm1pbmFsLnJvd3M7IHkrKykge1xuXG4gICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGxpbmUgaXMgd3JhcHBlZCBsaW5lLCBpbmNyZWFzZSBpbmRleCBvZiBjb2x1bW4gdG8gaWdub3JlIHRoZSBwcmV2aW91cyBzY2FuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgcmVzZXQgYmVnaW5uaW5nIGNvbHVtbiBpbmRleCB0byB6ZXJvIHdpdGggc2V0IG5ldyB1bndyYXBwZWQgbGluZSBpbmRleFxuICAgICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHksIDAsIHNlYXJjaE9wdGlvbnMpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWFyY2ggZnJvbSB0aGUgdG9wIHRvIHRoZSBzdGFydFJvdyAoc2VhcmNoIHRoZSB3aG9sZSBzdGFydFJvdyBhZ2FpbiBpblxuICAgIC8vIGNhc2Ugc3RhcnRDb2wgPiAwKVxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGZpbmRpbmdSb3c7IHkrKykge1xuICAgICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHksIDAsIHNlYXJjaE9wdGlvbnMpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgc2VsZWN0aW9uIGFuZCBzY3JvbGwgaWYgYSByZXN1bHQgd2FzIGZvdW5kXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdFJlc3VsdChyZXN1bHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHByZXZpb3VzIGluc3RhbmNlIG9mIHRoZSB0ZXJtLCB0aGVuIHNjcm9sbCB0byBhbmQgc2VsZWN0IGl0LiBJZiBpdFxuICAgKiBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgKiBAcGFyYW0gdGVybSBUaGUgc2VhcmNoIHRlcm0uXG4gICAqIEBwYXJhbSBzZWFyY2hPcHRpb25zIFNlYXJjaCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZXN1bHQgd2FzIGZvdW5kLlxuICAgKi9cbiAgcHVibGljIGZpbmRQcmV2aW91cyh0ZXJtOiBzdHJpbmcsIHNlYXJjaE9wdGlvbnM/OiBJU2VhcmNoT3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNlbGVjdGlvbk1hbmFnZXIgPSB0aGlzLl90ZXJtaW5hbC5fY29yZS5zZWxlY3Rpb25NYW5hZ2VyO1xuICAgIGxldCByZXN1bHQ6IElTZWFyY2hSZXN1bHQ7XG5cbiAgICBpZiAoIXRlcm0gfHwgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNlbGVjdGlvbk1hbmFnZXIuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1JldmVyc2VTZWFyY2ggPSB0cnVlO1xuICAgIGxldCBzdGFydFJvdyA9IHRoaXMuX3Rlcm1pbmFsLl9jb3JlLmJ1ZmZlci55ZGlzcCArIHRoaXMuX3Rlcm1pbmFsLnJvd3MgLSAxO1xuICAgIGxldCBzdGFydENvbCA9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG5cbiAgICBpZiAoc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgLy8gU3RhcnQgZnJvbSB0aGUgc2VsZWN0aW9uIHN0YXJ0IGlmIHRoZXJlIGlzIGEgc2VsZWN0aW9uXG4gICAgICBpZiAodGhpcy5fdGVybWluYWwuZ2V0U2VsZWN0aW9uKCkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIHN0YXJ0Um93ID0gc2VsZWN0aW9uTWFuYWdlci5zZWxlY3Rpb25TdGFydFsxXTtcbiAgICAgICAgc3RhcnRDb2wgPSBzZWxlY3Rpb25NYW5hZ2VyLnNlbGVjdGlvblN0YXJ0WzBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2luaXRMaW5lc0NhY2hlKCk7XG5cbiAgICAvLyBTZWFyY2ggc3RhcnRSb3dcbiAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHN0YXJ0Um93LCBzdGFydENvbCwgc2VhcmNoT3B0aW9ucywgaXNSZXZlcnNlU2VhcmNoKTtcblxuICAgIC8vIFNlYXJjaCBmcm9tIHN0YXJ0Um93IC0gMSB0byB0b3BcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgLy8gSWYgdGhlIGxpbmUgaXMgd3JhcHBlZCBsaW5lLCBpbmNyZWFzZSBudW1iZXIgb2YgY29sdW1ucyB0aGF0IGlzIG5lZWRlZCB0byBiZSBzY2FubmVkXG4gICAgICAvLyBTZSB3ZSBjYW4gc2NhbiBvbiB3cmFwcGVkIGxpbmUgZnJvbSB1bndyYXBwZWQgbGluZVxuICAgICAgbGV0IGN1bXVsYXRpdmVDb2xzID0gdGhpcy5fdGVybWluYWwuY29scztcbiAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC5fY29yZS5idWZmZXIubGluZXMuZ2V0KHN0YXJ0Um93KS5pc1dyYXBwZWQpIHtcbiAgICAgICAgY3VtdWxhdGl2ZUNvbHMgKz0gc3RhcnRDb2w7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCB5ID0gc3RhcnRSb3cgLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHksIGN1bXVsYXRpdmVDb2xzLCBzZWFyY2hPcHRpb25zLCBpc1JldmVyc2VTZWFyY2gpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbGluZSBpcyB3cmFwcGVkIGxpbmUsIGluY3JlYXNlIHNjYW5uaW5nIHJhbmdlLFxuICAgICAgICAvLyBwcmVwYXJpbmcgZm9yIHNjYW5uaW5nIG9uIHVud3JhcHBlZCBsaW5lXG4gICAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC5fY29yZS5idWZmZXIubGluZXMuZ2V0KHkpLmlzV3JhcHBlZCkge1xuICAgICAgICAgIGN1bXVsYXRpdmVDb2xzICs9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VtdWxhdGl2ZUNvbHMgPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2VhcmNoIGZyb20gdGhlIGJvdHRvbSB0byBzdGFydFJvdyAoc2VhcmNoIHRoZSB3aG9sZSBzdGFydFJvdyBhZ2FpbiBpblxuICAgIC8vIGNhc2Ugc3RhcnRDb2wgPiAwKVxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICBjb25zdCBzZWFyY2hGcm9tID0gdGhpcy5fdGVybWluYWwuX2NvcmUuYnVmZmVyLnliYXNlICsgdGhpcy5fdGVybWluYWwucm93cyAtIDE7XG4gICAgICBsZXQgY3VtdWxhdGl2ZUNvbHMgPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgZm9yIChsZXQgeSA9IHNlYXJjaEZyb207IHkgPj0gc3RhcnRSb3c7IHktLSkge1xuICAgICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHksIGN1bXVsYXRpdmVDb2xzLCBzZWFyY2hPcHRpb25zLCBpc1JldmVyc2VTZWFyY2gpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLl9jb3JlLmJ1ZmZlci5saW5lcy5nZXQoeSkuaXNXcmFwcGVkKSB7XG4gICAgICAgICAgY3VtdWxhdGl2ZUNvbHMgKz0gdGhpcy5fdGVybWluYWwuY29scztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdW11bGF0aXZlQ29scyA9IHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgc2VsZWN0aW9uIGFuZCBzY3JvbGwgaWYgYSByZXN1bHQgd2FzIGZvdW5kXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdFJlc3VsdChyZXN1bHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgYSBsaW5lIGNhY2hlIHdpdGggYSB0dGxcbiAgICovXG4gIHByaXZhdGUgX2luaXRMaW5lc0NhY2hlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fbGluZXNDYWNoZSkge1xuICAgICAgdGhpcy5fbGluZXNDYWNoZSA9IG5ldyBBcnJheSh0aGlzLl90ZXJtaW5hbC5fY29yZS5idWZmZXIubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2N1cnNvck1vdmVMaXN0ZW5lciA9IHRoaXMuX3Rlcm1pbmFsLm9uQ3Vyc29yTW92ZSgoKSA9PiB0aGlzLl9kZXN0cm95TGluZXNDYWNoZSgpKTtcbiAgICAgIHRoaXMuX3Jlc2l6ZUxpc3RlbmVyID0gdGhpcy5fdGVybWluYWwub25SZXNpemUoKCkgPT4gdGhpcy5fZGVzdHJveUxpbmVzQ2FjaGUoKSk7XG4gICAgfVxuXG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9saW5lc0NhY2hlVGltZW91dElkKTtcbiAgICB0aGlzLl9saW5lc0NhY2hlVGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5fZGVzdHJveUxpbmVzQ2FjaGUoKSwgTElORVNfQ0FDSEVfVElNRV9UT19MSVZFKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Rlc3Ryb3lMaW5lc0NhY2hlKCk6IHZvaWQge1xuICAgIHRoaXMuX2xpbmVzQ2FjaGUgPSBudWxsO1xuICAgIGlmICh0aGlzLl9jdXJzb3JNb3ZlTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvck1vdmVMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9jdXJzb3JNb3ZlTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9yZXNpemVMaXN0ZW5lcikge1xuICAgICAgdGhpcy5fcmVzaXplTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fcmVzaXplTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9saW5lc0NhY2hlVGltZW91dElkKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2xpbmVzQ2FjaGVUaW1lb3V0SWQpO1xuICAgICAgdGhpcy5fbGluZXNDYWNoZVRpbWVvdXRJZCA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEEgZm91bmQgc3Vic3RyaW5nIGlzIGEgd2hvbGUgd29yZCBpZiBpdCBkb2Vzbid0IGhhdmUgYW4gYWxwaGFudW1lcmljIGNoYXJhY3RlciBkaXJlY3RseSBhZGphY2VudCB0byBpdC5cbiAgICogQHBhcmFtIHNlYXJjaEluZGV4IHN0YXJ0aW5nIGluZGV4dCBvZiB0aGUgcG90ZW50aWFsIHdob2xlIHdvcmQgc3Vic3RyaW5nXG4gICAqIEBwYXJhbSBsaW5lIGVudGlyZSBzdHJpbmcgaW4gd2hpY2ggdGhlIHBvdGVudGlhbCB3aG9sZSB3b3JkIHdhcyBmb3VuZFxuICAgKiBAcGFyYW0gdGVybSB0aGUgc3Vic3RyaW5nIHRoYXQgc3RhcnRzIGF0IHNlYXJjaEluZGV4XG4gICAqL1xuICBwcml2YXRlIF9pc1dob2xlV29yZChzZWFyY2hJbmRleDogbnVtYmVyLCBsaW5lOiBzdHJpbmcsIHRlcm06IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoKChzZWFyY2hJbmRleCA9PT0gMCkgfHwgKE5PTl9XT1JEX0NIQVJBQ1RFUlMuaW5kZXhPZihsaW5lW3NlYXJjaEluZGV4IC0gMV0pICE9PSAtMSkpICYmXG4gICAgICAgICgoKHNlYXJjaEluZGV4ICsgdGVybS5sZW5ndGgpID09PSBsaW5lLmxlbmd0aCkgfHwgKE5PTl9XT1JEX0NIQVJBQ1RFUlMuaW5kZXhPZihsaW5lW3NlYXJjaEluZGV4ICsgdGVybS5sZW5ndGhdKSAhPT0gLTEpKSk7XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoZXMgYSBsaW5lIGZvciBhIHNlYXJjaCB0ZXJtLiBUYWtlcyB0aGUgcHJvdmlkZWQgdGVybWluYWwgbGluZSBhbmQgc2VhcmNoZXMgdGhlIHRleHQgbGluZSwgd2hpY2ggbWF5IGNvbnRhaW5cbiAgICogc3Vic2VxdWVudCB0ZXJtaW5hbCBsaW5lcyBpZiB0aGUgdGV4dCBpcyB3cmFwcGVkLiBJZiB0aGUgcHJvdmlkZWQgbGluZSBudW1iZXIgaXMgcGFydCBvZiBhIHdyYXBwZWQgdGV4dCBsaW5lIHRoYXRcbiAgICogc3RhcnRlZCBvbiBhbiBlYXJsaWVyIGxpbmUgdGhlbiBpdCBpcyBza2lwcGVkIHNpbmNlIGl0IHdpbGwgYmUgcHJvcGVybHkgc2VhcmNoZWQgd2hlbiB0aGUgdGVybWluYWwgbGluZSB0aGF0IHRoZVxuICAgKiB0ZXh0IHN0YXJ0cyBvbiBpcyBzZWFyY2hlZC5cbiAgICogQHBhcmFtIHRlcm0gVGhlIHNlYXJjaCB0ZXJtLlxuICAgKiBAcGFyYW0gcm93IFRoZSBsaW5lIHRvICBzdGFydCB0aGUgc2VhcmNoIGZyb20uXG4gICAqIEBwYXJhbSBjb2wgVGhlIGNvbHVtbiB0byBzdGFydCB0aGUgc2VhcmNoIGZyb20uXG4gICAqIEBwYXJhbSBzZWFyY2hPcHRpb25zIFNlYXJjaCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIFRoZSBzZWFyY2ggcmVzdWx0IGlmIGl0IHdhcyBmb3VuZC5cbiAgICovXG4gIHByb3RlY3RlZCBfZmluZEluTGluZSh0ZXJtOiBzdHJpbmcsIHJvdzogbnVtYmVyLCBjb2w6IG51bWJlciwgc2VhcmNoT3B0aW9uczogSVNlYXJjaE9wdGlvbnMgPSB7fSwgaXNSZXZlcnNlU2VhcmNoOiBib29sZWFuID0gZmFsc2UpOiBJU2VhcmNoUmVzdWx0IHtcblxuICAgIC8vIElnbm9yZSB3cmFwcGVkIGxpbmVzLCBvbmx5IGNvbnNpZGVyIG9uIHVud3JhcHBlZCBsaW5lIChmaXJzdCByb3cgb2YgY29tbWFuZCBzdHJpbmcpLlxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5fY29yZS5idWZmZXIubGluZXMuZ2V0KHJvdykuaXNXcmFwcGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBzdHJpbmdMaW5lID0gdGhpcy5fbGluZXNDYWNoZSA/IHRoaXMuX2xpbmVzQ2FjaGVbcm93XSA6IHZvaWQgMDtcbiAgICBpZiAoc3RyaW5nTGluZSA9PT0gdm9pZCAwKSB7XG4gICAgICBzdHJpbmdMaW5lID0gdGhpcy50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmdXaXRoV3JhcChyb3csIHRydWUpO1xuICAgICAgaWYgKHRoaXMuX2xpbmVzQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5fbGluZXNDYWNoZVtyb3ddID0gc3RyaW5nTGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hUZXJtID0gc2VhcmNoT3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gdGVybSA6IHRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzZWFyY2hTdHJpbmdMaW5lID0gc2VhcmNoT3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gc3RyaW5nTGluZSA6IHN0cmluZ0xpbmUudG9Mb3dlckNhc2UoKTtcblxuICAgIGxldCByZXN1bHRJbmRleCA9IC0xO1xuICAgIGlmIChzZWFyY2hPcHRpb25zLnJlZ2V4KSB7XG4gICAgICBjb25zdCBzZWFyY2hSZWdleCA9IFJlZ0V4cChzZWFyY2hUZXJtLCAnZycpO1xuICAgICAgbGV0IGZvdW5kVGVybTogUmVnRXhwRXhlY0FycmF5O1xuICAgICAgaWYgKGlzUmV2ZXJzZVNlYXJjaCkge1xuICAgICAgICAvLyBUaGlzIGxvb3Agd2lsbCBnZXQgdGhlIHJlc3VsdEluZGV4IG9mIHRoZSBfbGFzdF8gcmVnZXggbWF0Y2ggaW4gdGhlIHJhbmdlIDAuLmNvbFxuICAgICAgICB3aGlsZSAoZm91bmRUZXJtID0gc2VhcmNoUmVnZXguZXhlYyhzZWFyY2hTdHJpbmdMaW5lLnNsaWNlKDAsIGNvbCkpKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXggPSBzZWFyY2hSZWdleC5sYXN0SW5kZXggLSBmb3VuZFRlcm1bMF0ubGVuZ3RoO1xuICAgICAgICAgIHRlcm0gPSBmb3VuZFRlcm1bMF07XG4gICAgICAgICAgc2VhcmNoUmVnZXgubGFzdEluZGV4IC09ICh0ZXJtLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZFRlcm0gPSBzZWFyY2hSZWdleC5leGVjKHNlYXJjaFN0cmluZ0xpbmUuc2xpY2UoY29sKSk7XG4gICAgICAgIGlmIChmb3VuZFRlcm0gJiYgZm91bmRUZXJtWzBdLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHRJbmRleCA9IGNvbCArIChzZWFyY2hSZWdleC5sYXN0SW5kZXggLSBmb3VuZFRlcm1bMF0ubGVuZ3RoKTtcbiAgICAgICAgICB0ZXJtID0gZm91bmRUZXJtWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc1JldmVyc2VTZWFyY2gpIHtcbiAgICAgICAgaWYgKGNvbCAtIHNlYXJjaFRlcm0ubGVuZ3RoID49IDApIHtcbiAgICAgICAgICByZXN1bHRJbmRleCA9IHNlYXJjaFN0cmluZ0xpbmUubGFzdEluZGV4T2Yoc2VhcmNoVGVybSwgY29sIC0gc2VhcmNoVGVybS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRJbmRleCA9IHNlYXJjaFN0cmluZ0xpbmUuaW5kZXhPZihzZWFyY2hUZXJtLCBjb2wpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHRJbmRleCA+PSAwKSB7XG4gICAgICAvLyBBZGp1c3QgdGhlIHJvdyBudW1iZXIgYW5kIHNlYXJjaCBpbmRleCBpZiBuZWVkZWQgc2luY2UgYSBcImxpbmVcIiBvZiB0ZXh0IGNhbiBzcGFuIG11bHRpcGxlIHJvd3NcbiAgICAgIGlmIChyZXN1bHRJbmRleCA+PSB0aGlzLl90ZXJtaW5hbC5jb2xzKSB7XG4gICAgICAgIHJvdyArPSBNYXRoLmZsb29yKHJlc3VsdEluZGV4IC8gdGhpcy5fdGVybWluYWwuY29scyk7XG4gICAgICAgIHJlc3VsdEluZGV4ID0gcmVzdWx0SW5kZXggJSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgfVxuICAgICAgaWYgKHNlYXJjaE9wdGlvbnMud2hvbGVXb3JkICYmICF0aGlzLl9pc1dob2xlV29yZChyZXN1bHRJbmRleCwgc2VhcmNoU3RyaW5nTGluZSwgdGVybSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5fdGVybWluYWwuX2NvcmUuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdEluZGV4OyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hhckRhdGEgPSBsaW5lLmdldChpKTtcbiAgICAgICAgLy8gQWRqdXN0IHRoZSBzZWFyY2hJbmRleCB0byBub3JtYWxpemUgZW1vamkgaW50byBzaW5nbGUgY2hhcnNcbiAgICAgICAgY29uc3QgY2hhciA9IGNoYXJEYXRhWzEvKkNIQVJfREFUQV9DSEFSX0lOREVYKi9dO1xuICAgICAgICBpZiAoY2hhci5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXggLT0gY2hhci5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkanVzdCB0aGUgc2VhcmNoSW5kZXggZm9yIGVtcHR5IGNoYXJhY3RlcnMgZm9sbG93aW5nIHdpZGUgdW5pY29kZVxuICAgICAgICAvLyBjaGFycyAoZWcuIENKSylcbiAgICAgICAgY29uc3QgY2hhcldpZHRoID0gY2hhckRhdGFbMi8qQ0hBUl9EQVRBX1dJRFRIX0lOREVYKi9dO1xuICAgICAgICBpZiAoY2hhcldpZHRoID09PSAwKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGVybSxcbiAgICAgICAgY29sOiByZXN1bHRJbmRleCxcbiAgICAgICAgcm93XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVHJhbnNsYXRlcyBhIGJ1ZmZlciBsaW5lIHRvIGEgc3RyaW5nLCBpbmNsdWRpbmcgc3Vic2VxdWVudCBsaW5lcyBpZiB0aGV5IGFyZSB3cmFwcy5cbiAgICogV2lkZSBjaGFyYWN0ZXJzIHdpbGwgY291bnQgYXMgdHdvIGNvbHVtbnMgaW4gdGhlIHJlc3VsdGluZyBzdHJpbmcuIFRoaXNcbiAgICogZnVuY3Rpb24gaXMgdXNlZnVsIGZvciBnZXR0aW5nIHRoZSBhY3R1YWwgdGV4dCB1bmRlcm5lYXRoIHRoZSByYXcgc2VsZWN0aW9uXG4gICAqIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gbGluZSBUaGUgbGluZSBiZWluZyB0cmFuc2xhdGVkLlxuICAgKiBAcGFyYW0gdHJpbVJpZ2h0IFdoZXRoZXIgdG8gdHJpbSB3aGl0ZXNwYWNlIHRvIHRoZSByaWdodC5cbiAgICovXG4gIHB1YmxpYyB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmdXaXRoV3JhcChsaW5lSW5kZXg6IG51bWJlciwgdHJpbVJpZ2h0OiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBsZXQgbGluZVN0cmluZyA9ICcnO1xuICAgIGxldCBsaW5lV3JhcHNUb05leHQ6IGJvb2xlYW47XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBuZXh0TGluZSA9IHRoaXMuX3Rlcm1pbmFsLl9jb3JlLmJ1ZmZlci5saW5lcy5nZXQobGluZUluZGV4ICsgMSk7XG4gICAgICBsaW5lV3JhcHNUb05leHQgPSBuZXh0TGluZSA/IG5leHRMaW5lLmlzV3JhcHBlZCA6IGZhbHNlO1xuICAgICAgbGluZVN0cmluZyArPSB0aGlzLl90ZXJtaW5hbC5fY29yZS5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGxpbmVJbmRleCwgIWxpbmVXcmFwc1RvTmV4dCAmJiB0cmltUmlnaHQpLnN1YnN0cmluZygwLCB0aGlzLl90ZXJtaW5hbC5jb2xzKTtcbiAgICAgIGxpbmVJbmRleCsrO1xuICAgIH0gd2hpbGUgKGxpbmVXcmFwc1RvTmV4dCk7XG5cbiAgICByZXR1cm4gbGluZVN0cmluZztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIGFuZCBzY3JvbGxzIHRvIGEgcmVzdWx0LlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSByZXN1bHQgdG8gc2VsZWN0LlxuICAgKiBAcmV0dXJuIFdoZXRoZXJhIHJlc3VsdCB3YXMgc2VsZWN0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9zZWxlY3RSZXN1bHQocmVzdWx0OiBJU2VhcmNoUmVzdWx0KTogYm9vbGVhbiB7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3Rlcm1pbmFsLl9jb3JlLnNlbGVjdGlvbk1hbmFnZXIuc2V0U2VsZWN0aW9uKHJlc3VsdC5jb2wsIHJlc3VsdC5yb3csIHJlc3VsdC50ZXJtLmxlbmd0aCk7XG4gICAgdGhpcy5fdGVybWluYWwuc2Nyb2xsTGluZXMocmVzdWx0LnJvdyAtIHRoaXMuX3Rlcm1pbmFsLl9jb3JlLmJ1ZmZlci55ZGlzcCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgU2VhcmNoSGVscGVyIH0gZnJvbSAnLi9TZWFyY2hIZWxwZXInO1xuaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJU2VhcmNoQWRkb25UZXJtaW5hbCwgSVNlYXJjaE9wdGlvbnMgfSBmcm9tICcuL0ludGVyZmFjZXMnO1xuXG4vKipcbiAqIEZpbmQgdGhlIG5leHQgaW5zdGFuY2Ugb2YgdGhlIHRlcm0sIHRoZW4gc2Nyb2xsIHRvIGFuZCBzZWxlY3QgaXQuIElmIGl0XG4gKiBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICogQHBhcmFtIHRlcm0gVGhlIHNlYXJjaCB0ZXJtLlxuICogQHBhcmFtIHNlYXJjaE9wdGlvbnMgU2VhcmNoIG9wdGlvbnNcbiAqIEByZXR1cm4gV2hldGhlciBhIHJlc3VsdCB3YXMgZm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTmV4dCh0ZXJtaW5hbDogVGVybWluYWwsIHRlcm06IHN0cmluZywgc2VhcmNoT3B0aW9uczogSVNlYXJjaE9wdGlvbnMgPSB7fSk6IGJvb2xlYW4ge1xuICBjb25zdCBhZGRvblRlcm1pbmFsID0gPElTZWFyY2hBZGRvblRlcm1pbmFsPnRlcm1pbmFsO1xuICBpZiAoIWFkZG9uVGVybWluYWwuX19zZWFyY2hIZWxwZXIpIHtcbiAgICBhZGRvblRlcm1pbmFsLl9fc2VhcmNoSGVscGVyID0gbmV3IFNlYXJjaEhlbHBlcihhZGRvblRlcm1pbmFsKTtcbiAgfVxuICByZXR1cm4gYWRkb25UZXJtaW5hbC5fX3NlYXJjaEhlbHBlci5maW5kTmV4dCh0ZXJtLCBzZWFyY2hPcHRpb25zKTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBwcmV2aW91cyBpbnN0YW5jZSBvZiB0aGUgdGVybSwgdGhlbiBzY3JvbGwgdG8gYW5kIHNlbGVjdCBpdC4gSWYgaXRcbiAqIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gKiBAcGFyYW0gdGVybSBUaGUgc2VhcmNoIHRlcm0uXG4gKiBAcGFyYW0gc2VhcmNoT3B0aW9ucyBTZWFyY2ggb3B0aW9uc1xuICogQHJldHVybiBXaGV0aGVyIGEgcmVzdWx0IHdhcyBmb3VuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQcmV2aW91cyh0ZXJtaW5hbDogVGVybWluYWwsIHRlcm06IHN0cmluZywgc2VhcmNoT3B0aW9uczogSVNlYXJjaE9wdGlvbnMpOiBib29sZWFuIHtcbiAgY29uc3QgYWRkb25UZXJtaW5hbCA9IDxJU2VhcmNoQWRkb25UZXJtaW5hbD50ZXJtaW5hbDtcbiAgaWYgKCFhZGRvblRlcm1pbmFsLl9fc2VhcmNoSGVscGVyKSB7XG4gICAgYWRkb25UZXJtaW5hbC5fX3NlYXJjaEhlbHBlciA9IG5ldyBTZWFyY2hIZWxwZXIoYWRkb25UZXJtaW5hbCk7XG4gIH1cbiAgcmV0dXJuIGFkZG9uVGVybWluYWwuX19zZWFyY2hIZWxwZXIuZmluZFByZXZpb3VzKHRlcm0sIHNlYXJjaE9wdGlvbnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHkodGVybWluYWxDb25zdHJ1Y3RvcjogdHlwZW9mIFRlcm1pbmFsKTogdm9pZCB7XG4gICg8YW55PnRlcm1pbmFsQ29uc3RydWN0b3IucHJvdG90eXBlKS5maW5kTmV4dCA9IGZ1bmN0aW9uKHRlcm06IHN0cmluZywgc2VhcmNoT3B0aW9uczogSVNlYXJjaE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmluZE5leHQodGhpcywgdGVybSwgc2VhcmNoT3B0aW9ucyk7XG4gIH07XG5cbiAgKDxhbnk+dGVybWluYWxDb25zdHJ1Y3Rvci5wcm90b3R5cGUpLmZpbmRQcmV2aW91cyA9IGZ1bmN0aW9uKHRlcm06IHN0cmluZywgc2VhcmNoT3B0aW9uczogSVNlYXJjaE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmluZFByZXZpb3VzKHRoaXMsIHRlcm0sIHNlYXJjaE9wdGlvbnMpO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCwgSUxpbmtNYXRjaGVyT3B0aW9ucyB9IGZyb20gJ3h0ZXJtJztcblxuY29uc3QgcHJvdG9jb2xDbGF1c2UgPSAnKGh0dHBzPzpcXFxcL1xcXFwvKSc7XG5jb25zdCBkb21haW5DaGFyYWN0ZXJTZXQgPSAnW1xcXFxkYS16XFxcXC4tXSsnO1xuY29uc3QgbmVnYXRlZERvbWFpbkNoYXJhY3RlclNldCA9ICdbXlxcXFxkYS16XFxcXC4tXSsnO1xuY29uc3QgZG9tYWluQm9keUNsYXVzZSA9ICcoJyArIGRvbWFpbkNoYXJhY3RlclNldCArICcpJztcbmNvbnN0IHRsZENsYXVzZSA9ICcoW2EtelxcXFwuXXsyLDZ9KSc7XG5jb25zdCBpcENsYXVzZSA9ICcoKFxcXFxkezEsM31cXFxcLil7M31cXFxcZHsxLDN9KSc7XG5jb25zdCBsb2NhbEhvc3RDbGF1c2UgPSAnKGxvY2FsaG9zdCknO1xuY29uc3QgcG9ydENsYXVzZSA9ICcoOlxcXFxkezEsNX0pJztcbmNvbnN0IGhvc3RDbGF1c2UgPSAnKCgnICsgZG9tYWluQm9keUNsYXVzZSArICdcXFxcLicgKyB0bGRDbGF1c2UgKyAnKXwnICsgaXBDbGF1c2UgKyAnfCcgKyBsb2NhbEhvc3RDbGF1c2UgKyAnKScgKyBwb3J0Q2xhdXNlICsgJz8nO1xuY29uc3QgcGF0aENoYXJhY3RlclNldCA9ICcoXFxcXC9bXFxcXC9cXFxcd1xcXFwuXFxcXC0lfjpdKikqKFteOlwiXFwnXFxcXHNdKSc7XG5jb25zdCBwYXRoQ2xhdXNlID0gJygnICsgcGF0aENoYXJhY3RlclNldCArICcpPyc7XG5jb25zdCBxdWVyeVN0cmluZ0hhc2hGcmFnbWVudENoYXJhY3RlclNldCA9ICdbMC05XFxcXHdcXFxcW1xcXFxdXFxcXChcXFxcKVxcXFwvXFxcXD9cXFxcISNAJCUmXFwnKissOjt+XFxcXD1cXFxcLlxcXFwtXSonO1xuY29uc3QgcXVlcnlTdHJpbmdDbGF1c2UgPSAnKFxcXFw/JyArIHF1ZXJ5U3RyaW5nSGFzaEZyYWdtZW50Q2hhcmFjdGVyU2V0ICsgJyk/JztcbmNvbnN0IGhhc2hGcmFnbWVudENsYXVzZSA9ICcoIycgKyBxdWVyeVN0cmluZ0hhc2hGcmFnbWVudENoYXJhY3RlclNldCArICcpPyc7XG5jb25zdCBuZWdhdGVkUGF0aENoYXJhY3RlclNldCA9ICdbXlxcXFwvXFxcXHdcXFxcLlxcXFwtJV0rJztcbmNvbnN0IGJvZHlDbGF1c2UgPSBob3N0Q2xhdXNlICsgcGF0aENsYXVzZSArIHF1ZXJ5U3RyaW5nQ2xhdXNlICsgaGFzaEZyYWdtZW50Q2xhdXNlO1xuY29uc3Qgc3RhcnQgPSAnKD86XnwnICsgbmVnYXRlZERvbWFpbkNoYXJhY3RlclNldCArICcpKCc7XG5jb25zdCBlbmQgPSAnKSgkfCcgKyBuZWdhdGVkUGF0aENoYXJhY3RlclNldCArICcpJztcbmNvbnN0IHN0cmljdFVybFJlZ2V4ID0gbmV3IFJlZ0V4cChzdGFydCArIHByb3RvY29sQ2xhdXNlICsgYm9keUNsYXVzZSArIGVuZCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUxpbmsoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKTogdm9pZCB7XG4gIHdpbmRvdy5vcGVuKHVyaSwgJ19ibGFuaycpO1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIHdlYiBsaW5rcyBhZGRvbiwgcmVnaXN0ZXJpbmcgdGhlIGxpbmsgbWF0Y2hlci5cbiAqIEBwYXJhbSB0ZXJtIFRoZSB0ZXJtaW5hbCB0byB1c2Ugd2ViIGxpbmtzIHdpdGhpbi5cbiAqIEBwYXJhbSBoYW5kbGVyIEEgY3VzdG9tIGhhbmRsZXIgdG8gdXNlLlxuICogQHBhcmFtIG9wdGlvbnMgQ3VzdG9tIG9wdGlvbnMgdG8gdXNlLCBtYXRjaEluZGV4IHdpbGwgYWx3YXlzIGJlIGlnbm9yZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3ZWJMaW5rc0luaXQodGVybTogVGVybWluYWwsIGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpID0+IHZvaWQgPSBoYW5kbGVMaW5rLCBvcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zID0ge30pOiB2b2lkIHtcbiAgb3B0aW9ucy5tYXRjaEluZGV4ID0gMTtcbiAgdGVybS5yZWdpc3RlckxpbmtNYXRjaGVyKHN0cmljdFVybFJlZ2V4LCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRlcm1pbmFsQ29uc3RydWN0b3I6IHR5cGVvZiBUZXJtaW5hbCk6IHZvaWQge1xuICAoPGFueT50ZXJtaW5hbENvbnN0cnVjdG9yLnByb3RvdHlwZSkud2ViTGlua3NJbml0ID0gZnVuY3Rpb24gKGhhbmRsZXI/OiAoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKSA9PiB2b2lkLCBvcHRpb25zPzogSUxpbmtNYXRjaGVyT3B0aW9ucyk6IHZvaWQge1xuICAgIHdlYkxpbmtzSW5pdCh0aGlzLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNpcmN1bGFyTGlzdCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyMiwgSUV2ZW50IH0gZnJvbSAnLi9FdmVudEVtaXR0ZXIyJztcblxuZXhwb3J0IGludGVyZmFjZSBJSW5zZXJ0RXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGVsZXRlRXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2lyY3VsYXIgbGlzdDsgYSBsaXN0IHdpdGggYSBtYXhpbXVtIHNpemUgdGhhdCB3cmFwcyBhcm91bmQgd2hlbiBwdXNoIGlzIGNhbGxlZCxcbiAqIG92ZXJyaWRpbmcgdmFsdWVzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGlzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIENpcmN1bGFyTGlzdDxUPiBpbXBsZW1lbnRzIElDaXJjdWxhckxpc3Q8VD4ge1xuICBwcm90ZWN0ZWQgX2FycmF5OiAoVCB8IHVuZGVmaW5lZClbXTtcbiAgcHJpdmF0ZSBfc3RhcnRJbmRleDogbnVtYmVyO1xuICBwcml2YXRlIF9sZW5ndGg6IG51bWJlcjtcblxuICBwdWJsaWMgb25EZWxldGVFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjI8SURlbGV0ZUV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uRGVsZXRlKCk6IElFdmVudDxJRGVsZXRlRXZlbnQ+IHsgcmV0dXJuIHRoaXMub25EZWxldGVFbWl0dGVyLmV2ZW50OyB9XG4gIHB1YmxpYyBvbkluc2VydEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyMjxJSW5zZXJ0RXZlbnQ+KCk7XG4gIHB1YmxpYyBnZXQgb25JbnNlcnQoKTogSUV2ZW50PElJbnNlcnRFdmVudD4geyByZXR1cm4gdGhpcy5vbkluc2VydEVtaXR0ZXIuZXZlbnQ7IH1cbiAgcHVibGljIG9uVHJpbUVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyMjxudW1iZXI+KCk7XG4gIHB1YmxpYyBnZXQgb25UcmltKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMub25UcmltRW1pdHRlci5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX21heExlbmd0aDogbnVtYmVyXG4gICkge1xuICAgIHRoaXMuX2FycmF5ID0gbmV3IEFycmF5PFQ+KHRoaXMuX21heExlbmd0aCk7XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWF4TGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heExlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgbWF4TGVuZ3RoKG5ld01heExlbmd0aDogbnVtYmVyKSB7XG4gICAgLy8gVGhlcmUgd2FzIG5vIGNoYW5nZSBpbiBtYXhMZW5ndGgsIHJldHVybiBlYXJseS5cbiAgICBpZiAodGhpcy5fbWF4TGVuZ3RoID09PSBuZXdNYXhMZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZWNvbnN0cnVjdCBhcnJheSwgc3RhcnRpbmcgYXQgaW5kZXggMC4gT25seSB0cmFuc2ZlciB2YWx1ZXMgZnJvbSB0aGVcbiAgICAvLyBpbmRleGVzIDAgdG8gbGVuZ3RoLlxuICAgIGNvbnN0IG5ld0FycmF5ID0gbmV3IEFycmF5PFQgfCB1bmRlZmluZWQ+KG5ld01heExlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbihuZXdNYXhMZW5ndGgsIHRoaXMubGVuZ3RoKTsgaSsrKSB7XG4gICAgICBuZXdBcnJheVtpXSA9IHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkpXTtcbiAgICB9XG4gICAgdGhpcy5fYXJyYXkgPSBuZXdBcnJheTtcbiAgICB0aGlzLl9tYXhMZW5ndGggPSBuZXdNYXhMZW5ndGg7XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgc2V0IGxlbmd0aChuZXdMZW5ndGg6IG51bWJlcikge1xuICAgIGlmIChuZXdMZW5ndGggPiB0aGlzLl9sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLl9sZW5ndGg7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9hcnJheVtpXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbGVuZ3RoID0gbmV3TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZhbHVlIGF0IGFuIGluZGV4LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdGhlcmUgaXMgbm8gYm91bmRzIGNoZWNraW5nIGhlcmUsIHRoZSBpbmRleCByZWZlcmVuY2UgaXNcbiAgICogY2lyY3VsYXIgc28gdGhpcyBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbHVlIGFuZCBuZXZlciB0aHJvdy5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICAgKiBAcmV0dXJuIFRoZSB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBpbmRleC5cbiAgICovXG4gIHB1YmxpYyBnZXQoaW5kZXg6IG51bWJlcik6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpbmRleCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGF0IGFuIGluZGV4LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdGhlcmUgaXMgbm8gYm91bmRzIGNoZWNraW5nIGhlcmUsIHRoZSBpbmRleCByZWZlcmVuY2UgaXNcbiAgICogY2lyY3VsYXIgc28gdGhpcyBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbHVlIGFuZCBuZXZlciB0aHJvdy5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCB0byBzZXQuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgKi9cbiAgcHVibGljIHNldChpbmRleDogbnVtYmVyLCB2YWx1ZTogVCB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGluZGV4KV0gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoZXMgYSBuZXcgdmFsdWUgb250byB0aGUgbGlzdCwgd3JhcHBpbmcgYXJvdW5kIHRvIHRoZSBzdGFydCBvZiB0aGUgYXJyYXksIG92ZXJyaWRpbmcgaW5kZXggMFxuICAgKiBpZiB0aGUgbWF4aW11bSBsZW5ndGggaXMgcmVhY2hlZC5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBwdXNoIG9udG8gdGhlIGxpc3QuXG4gICAqL1xuICBwdWJsaWMgcHVzaCh2YWx1ZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aCldID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuX2xlbmd0aCA9PT0gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ID0gKyt0aGlzLl9zdGFydEluZGV4ICUgdGhpcy5fbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xlbmd0aCsrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZHZhbmNlIHJpbmdidWZmZXIgaW5kZXggYW5kIHJldHVybiBjdXJyZW50IGVsZW1lbnQgZm9yIHJlY3ljbGluZy5cbiAgICogTm90ZTogVGhlIGJ1ZmZlciBtdXN0IGJlIGZ1bGwgZm9yIHRoaXMgbWV0aG9kIHRvIHdvcmsuXG4gICAqIEB0aHJvd3MgV2hlbiB0aGUgYnVmZmVyIGlzIG5vdCBmdWxsLlxuICAgKi9cbiAgcHVibGljIHJlY3ljbGUoKTogVCB7XG4gICAgaWYgKHRoaXMuX2xlbmd0aCAhPT0gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IHJlY3ljbGUgd2hlbiB0aGUgYnVmZmVyIGlzIGZ1bGwnKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9ICsrdGhpcy5fc3RhcnRJbmRleCAlIHRoaXMuX21heExlbmd0aDtcbiAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKTtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoIC0gMSldITtcbiAgfVxuXG4gIC8qKlxuICAgKiBSaW5nYnVmZmVyIGlzIGF0IG1heCBsZW5ndGguXG4gICAqL1xuICBwdWJsaWMgZ2V0IGlzRnVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoID09PSB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbmQgcmV0dXJucyB0aGUgbGFzdCB2YWx1ZSBvbiB0aGUgbGlzdC5cbiAgICogQHJldHVybiBUaGUgcG9wcGVkIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIHBvcCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLS0gLSAxKV07XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhbmQvb3IgaW5zZXJ0cyBpdGVtcyBhdCBhIHBhcnRpY3VsYXIgaW5kZXggKGluIHRoYXQgb3JkZXIpLiBVbmxpa2VcbiAgICogQXJyYXkucHJvdG90eXBlLnNwbGljZSwgdGhpcyBvcGVyYXRpb24gZG9lcyBub3QgcmV0dXJuIHRoZSBkZWxldGVkIGl0ZW1zIGFzIGEgbmV3IGFycmF5IGluXG4gICAqIG9yZGVyIHRvIHNhdmUgY3JlYXRpbmcgYSBuZXcgYXJyYXkuIE5vdGUgdGhhdCB0aGlzIG9wZXJhdGlvbiBtYXkgc2hpZnQgYWxsIHZhbHVlcyBpbiB0aGUgbGlzdFxuICAgKiBpbiB0aGUgd29yc3QgY2FzZS5cbiAgICogQHBhcmFtIHN0YXJ0IFRoZSBpbmRleCB0byBkZWxldGUgYW5kL29yIGluc2VydC5cbiAgICogQHBhcmFtIGRlbGV0ZUNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZGVsZXRlLlxuICAgKiBAcGFyYW0gaXRlbXMgVGhlIGl0ZW1zIHRvIGluc2VydC5cbiAgICovXG4gIHB1YmxpYyBzcGxpY2Uoc3RhcnQ6IG51bWJlciwgZGVsZXRlQ291bnQ6IG51bWJlciwgLi4uaXRlbXM6IFRbXSk6IHZvaWQge1xuICAgIC8vIERlbGV0ZSBpdGVtc1xuICAgIGlmIChkZWxldGVDb3VudCkge1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgdGhpcy5fbGVuZ3RoIC0gZGVsZXRlQ291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpICsgZGVsZXRlQ291bnQpXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xlbmd0aCAtPSBkZWxldGVDb3VudDtcbiAgICB9XG5cbiAgICAvLyBBZGQgaXRlbXNcbiAgICBmb3IgKGxldCBpID0gdGhpcy5fbGVuZ3RoIC0gMTsgaSA+PSBzdGFydDsgaS0tKSB7XG4gICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpICsgaXRlbXMubGVuZ3RoKV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHN0YXJ0ICsgaSldID0gaXRlbXNbaV07XG4gICAgfVxuXG4gICAgLy8gQWRqdXN0IGxlbmd0aCBhcyBuZWVkZWRcbiAgICBpZiAodGhpcy5fbGVuZ3RoICsgaXRlbXMubGVuZ3RoID4gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICBjb25zdCBjb3VudFRvVHJpbSA9ICh0aGlzLl9sZW5ndGggKyBpdGVtcy5sZW5ndGgpIC0gdGhpcy5fbWF4TGVuZ3RoO1xuICAgICAgdGhpcy5fc3RhcnRJbmRleCArPSBjb3VudFRvVHJpbTtcbiAgICAgIHRoaXMuX2xlbmd0aCA9IHRoaXMuX21heExlbmd0aDtcbiAgICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKGNvdW50VG9UcmltKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGVuZ3RoICs9IGl0ZW1zLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpbXMgYSBudW1iZXIgb2YgaXRlbXMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGxpc3QuXG4gICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIGl0ZW1zIHRvIHJlbW92ZS5cbiAgICovXG4gIHB1YmxpYyB0cmltU3RhcnQoY291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChjb3VudCA+IHRoaXMuX2xlbmd0aCkge1xuICAgICAgY291bnQgPSB0aGlzLl9sZW5ndGg7XG4gICAgfVxuICAgIHRoaXMuX3N0YXJ0SW5kZXggKz0gY291bnQ7XG4gICAgdGhpcy5fbGVuZ3RoIC09IGNvdW50O1xuICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKGNvdW50KTtcbiAgfVxuXG4gIHB1YmxpYyBzaGlmdEVsZW1lbnRzKHN0YXJ0OiBudW1iZXIsIGNvdW50OiBudW1iZXIsIG9mZnNldDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGNvdW50IDw9IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLl9sZW5ndGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnQgYXJndW1lbnQgb3V0IG9mIHJhbmdlJyk7XG4gICAgfVxuICAgIGlmIChzdGFydCArIG9mZnNldCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNoaWZ0IGVsZW1lbnRzIGluIGxpc3QgYmV5b25kIGluZGV4IDAnKTtcbiAgICB9XG5cbiAgICBpZiAob2Zmc2V0ID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IGNvdW50IC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdGhpcy5zZXQoc3RhcnQgKyBpICsgb2Zmc2V0LCB0aGlzLmdldChzdGFydCArIGkpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGV4cGFuZExpc3RCeSA9IChzdGFydCArIGNvdW50ICsgb2Zmc2V0KSAtIHRoaXMuX2xlbmd0aDtcbiAgICAgIGlmIChleHBhbmRMaXN0QnkgPiAwKSB7XG4gICAgICAgIHRoaXMuX2xlbmd0aCArPSBleHBhbmRMaXN0Qnk7XG4gICAgICAgIHdoaWxlICh0aGlzLl9sZW5ndGggPiB0aGlzLl9tYXhMZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9sZW5ndGgtLTtcbiAgICAgICAgICB0aGlzLl9zdGFydEluZGV4Kys7XG4gICAgICAgICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIHRoaXMuc2V0KHN0YXJ0ICsgaSArIG9mZnNldCwgdGhpcy5nZXQoc3RhcnQgKyBpKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN5Y2xpYyBpbmRleCBmb3IgdGhlIHNwZWNpZmllZCByZWd1bGFyIGluZGV4LiBUaGUgY3ljbGljIGluZGV4IGNhbiB0aGVuIGJlIHVzZWQgb24gdGhlXG4gICAqIGJhY2tpbmcgYXJyYXkgdG8gZ2V0IHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVndWxhciBpbmRleC5cbiAgICogQHBhcmFtIGluZGV4IFRoZSByZWd1bGFyIGluZGV4LlxuICAgKiBAcmV0dXJucyBUaGUgY3ljbGljIGluZGV4LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0Q3ljbGljSW5kZXgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLl9zdGFydEluZGV4ICsgaW5kZXgpICUgdGhpcy5fbWF4TGVuZ3RoO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qXG4gKiBBIHNpbXBsZSB1dGlsaXR5IGZvciBjbG9uaW5nIHZhbHVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmU8VD4odmFsOiBULCBkZXB0aDogbnVtYmVyID0gNSk6IFQgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8vIGNsb25pbmcgbnVsbCBhbHdheXMgcmV0dXJucyBudWxsXG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIElmIHdlJ3JlIGNsb25pbmcgYW4gYXJyYXksIHVzZSBhbiBhcnJheSBhcyB0aGUgYmFzZSwgb3RoZXJ3aXNlIHVzZSBhbiBvYmplY3RcbiAgY29uc3QgY2xvbmVkT2JqZWN0OiBhbnkgPSBBcnJheS5pc0FycmF5KHZhbCkgPyBbXSA6IHt9O1xuXG4gIGZvciAoY29uc3Qga2V5IGluIHZhbCkge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IGNsb25lIGVhY2sgaXRlbSB1bmxlc3Mgd2UncmUgYXQgdGhlIG1heGltdW0gZGVwdGhcbiAgICBjbG9uZWRPYmplY3Rba2V5XSA9IGRlcHRoIDw9IDEgPyB2YWxba2V5XSA6IGNsb25lKHZhbFtrZXldLCBkZXB0aCAtIDEpO1xuICB9XG5cbiAgcmV0dXJuIGNsb25lZE9iamVjdCBhcyBUO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSwgSUV2ZW50RW1pdHRlciwgWHRlcm1MaXN0ZW5lciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4vTGlmZWN5Y2xlJztcblxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJRXZlbnRFbWl0dGVyLCBJRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2V2ZW50czoge1t0eXBlOiBzdHJpbmddOiBYdGVybUxpc3RlbmVyW119O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgLy8gUmVzdG9yZSB0aGUgcHJldmlvdXMgZXZlbnRzIGlmIGF2YWlsYWJsZSwgdGhpcyB3aWxsIGhhcHBlbiBpZiB0aGVcbiAgICAvLyBjb25zdHJ1Y3RvciBpcyBjYWxsZWQgbXVsdGlwbGUgdGltZXMgb24gdGhlIHNhbWUgb2JqZWN0ICh0ZXJtaW5hbCByZXNldCkuXG4gICAgdGhpcy5fZXZlbnRzID0gKDxhbnk+dGhpcykuX2V2ZW50cyB8fCB7fTtcbiAgfVxuXG4gIHB1YmxpYyBvbih0eXBlOiBzdHJpbmcsIGxpc3RlbmVyOiBYdGVybUxpc3RlbmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gdGhpcy5fZXZlbnRzW3R5cGVdIHx8IFtdO1xuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgZGlzcG9zYWJsZSBsaXN0ZW5lciB0byB0aGUgRXZlbnRFbWl0dGVyLCByZXR1cm5pbmcgdGhlIGRpc3Bvc2FibGUuXG4gICAqIEBwYXJhbSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgaGFuZGxlciBmb3IgdGhlIGxpc3RlbmVyLlxuICAgKi9cbiAgcHVibGljIGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0eXBlOiBzdHJpbmcsIGhhbmRsZXI6IFh0ZXJtTGlzdGVuZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgLy8gVE9ETzogUmVuYW1lIGFkZERpc3Bvc2FibGVFdmVudExpc3RlbmVyIHRvIG1vcmUgZWFzaWx5IGRpc2FtYmlndWF0ZSBmcm9tIERvbSBsaXN0ZW5lclxuICAgIHRoaXMub24odHlwZSwgaGFuZGxlcik7XG4gICAgbGV0IGRpc3Bvc2VkID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgaWYgKGRpc3Bvc2VkKSB7XG4gICAgICAgICAgLy8gQWxyZWFkeSBkaXNwb3NlZFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgb2ZmKHR5cGU6IHN0cmluZywgbGlzdGVuZXI6IFh0ZXJtTGlzdGVuZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9iaiA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBsZXQgaSA9IG9iai5sZW5ndGg7XG5cbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAob2JqW2ldID09PSBsaXN0ZW5lcikge1xuICAgICAgICBvYmouc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKSB7XG4gICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW1pdCh0eXBlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2JqID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvYmpbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGVtaXRNYXlSZW1vdmVMaXN0ZW5lcnModHlwZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9iaiA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBsZXQgbGVuZ3RoID0gb2JqLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgb2JqW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgaSAtPSBsZW5ndGggLSBvYmoubGVuZ3RoO1xuICAgICAgbGVuZ3RoID0gb2JqLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbGlzdGVuZXJzKHR5cGU6IHN0cmluZyk6IFh0ZXJtTGlzdGVuZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2V2ZW50c1t0eXBlXSB8fCBbXTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJy4vVHlwZXMnO1xuXG5pbnRlcmZhY2UgSUxpc3RlbmVyPFQ+IHtcbiAgKGU6IFQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElFdmVudDxUPiB7XG4gIChsaXN0ZW5lcjogKGU6IFQpID0+IGFueSk6IElEaXNwb3NhYmxlO1xufVxuXG5leHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyMjxUPiB7XG4gIHByaXZhdGUgX2xpc3RlbmVyczogSUxpc3RlbmVyPFQ+W10gPSBbXTtcbiAgcHJpdmF0ZSBfZXZlbnQ/OiBJRXZlbnQ8VD47XG5cbiAgcHVibGljIGdldCBldmVudCgpOiBJRXZlbnQ8VD4ge1xuICAgIGlmICghdGhpcy5fZXZlbnQpIHtcbiAgICAgIHRoaXMuX2V2ZW50ID0gKGxpc3RlbmVyOiAoZTogVCkgPT4gYW55KSA9PiB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgY29uc3QgZGlzcG9zYWJsZSA9IHtcbiAgICAgICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAodGhpcy5fbGlzdGVuZXJzW2ldID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ldmVudDtcbiAgfVxuXG4gIHB1YmxpYyBmaXJlKGRhdGE6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBxdWV1ZTogSUxpc3RlbmVyPFQ+W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgcXVldWUucHVzaCh0aGlzLl9saXN0ZW5lcnNbaV0pO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWV1ZVtpXS5jYWxsKHVuZGVmaW5lZCwgZGF0YSk7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnLi9UeXBlcyc7XG5cbi8qKlxuICogQSBiYXNlIGNsYXNzIHRoYXQgY2FuIGJlIGV4dGVuZGVkIHRvIHByb3ZpZGUgY29udmVuaWVuY2UgbWV0aG9kcyBmb3IgbWFuYWdpbmcgdGhlIGxpZmVjeWNsZSBvZiBhblxuICogb2JqZWN0IGFuZCBpdHMgY29tcG9uZW50cy5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG4gIHByb3RlY3RlZCBfZGlzcG9zYWJsZXM6IElEaXNwb3NhYmxlW10gPSBbXTtcbiAgcHJvdGVjdGVkIF9pc0Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZXMgdGhlIG9iamVjdCwgdHJpZ2dlcmluZyB0aGUgYGRpc3Bvc2VgIG1ldGhvZCBvbiBhbGwgcmVnaXN0ZXJlZCBJRGlzcG9zYWJsZXMuXG4gICAqL1xuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5mb3JFYWNoKGQgPT4gZC5kaXNwb3NlKCkpO1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgZGlzcG9zYWJsZSBvYmplY3QuXG4gICAqIEBwYXJhbSBkIFRoZSBkaXNwb3NhYmxlIHRvIHJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCk6IHZvaWQge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZCk7XG4gIH1cblxuICAvKipcbiAgICogVW5yZWdpc3RlcnMgYSBkaXNwb3NhYmxlIG9iamVjdCBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLCBpZiBub3QgZG9cbiAgICogbm90aGluZy5cbiAgICogQHBhcmFtIGQgVGhlIGRpc3Bvc2FibGUgdG8gdW5yZWdpc3Rlci5cbiAgICovXG4gIHB1YmxpYyB1bnJlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fZGlzcG9zYWJsZXMuaW5kZXhPZihkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICB0aGlzLl9kaXNwb3NhYmxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbnRlcmZhY2UgSU5hdmlnYXRvciB7XG4gIHVzZXJBZ2VudDogc3RyaW5nO1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICBwbGF0Zm9ybTogc3RyaW5nO1xufVxuXG4vLyBXZSdyZSBkZWNsYXJpbmcgYSBuYXZpZ2F0b3IgZ2xvYmFsIGhlcmUgYXMgd2UgZXhwZWN0IGl0IGluIGFsbCBydW50aW1lcyAobm9kZSBhbmQgYnJvd3NlciksIGJ1dFxuLy8gd2Ugd2FudCB0aGlzIG1vZHVsZSB0byBsaXZlIGluIGNvbW1vbi5cbmRlY2xhcmUgY29uc3QgbmF2aWdhdG9yOiBJTmF2aWdhdG9yO1xuXG5jb25zdCBpc05vZGUgPSAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpID8gdHJ1ZSA6IGZhbHNlO1xuY29uc3QgdXNlckFnZW50ID0gKGlzTm9kZSkgPyAnbm9kZScgOiBuYXZpZ2F0b3IudXNlckFnZW50O1xuY29uc3QgcGxhdGZvcm0gPSAoaXNOb2RlKSA/ICdub2RlJyA6IG5hdmlnYXRvci5wbGF0Zm9ybTtcblxuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9ICEhfnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94Jyk7XG5leHBvcnQgY29uc3QgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KHVzZXJBZ2VudCk7XG5leHBvcnQgY29uc3QgaXNNU0lFID0gISF+dXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSB8fCAhIX51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpO1xuXG4vLyBGaW5kIHRoZSB1c2VycyBwbGF0Zm9ybS4gV2UgdXNlIHRoaXMgdG8gaW50ZXJwcmV0IHRoZSBtZXRhIGtleVxuLy8gYW5kIElTTyB0aGlyZCBsZXZlbCBzaGlmdHMuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xOTg3NzkyNC81Nzc1OThcbmV4cG9ydCBjb25zdCBpc01hYyA9IGNvbnRhaW5zKFsnTWFjaW50b3NoJywgJ01hY0ludGVsJywgJ01hY1BQQycsICdNYWM2OEsnXSwgcGxhdGZvcm0pO1xuZXhwb3J0IGNvbnN0IGlzSXBhZCA9IHBsYXRmb3JtID09PSAnaVBhZCc7XG5leHBvcnQgY29uc3QgaXNJcGhvbmUgPSBwbGF0Zm9ybSA9PT0gJ2lQaG9uZSc7XG5leHBvcnQgY29uc3QgaXNNU1dpbmRvd3MgPSBjb250YWlucyhbJ1dpbmRvd3MnLCAnV2luMTYnLCAnV2luMzInLCAnV2luQ0UnXSwgcGxhdGZvcm0pO1xuZXhwb3J0IGNvbnN0IGlzTGludXggPSBwbGF0Zm9ybS5pbmRleE9mKCdMaW51eCcpID49IDA7XG5cbi8qKlxuICogUmV0dXJuIGlmIHRoZSBnaXZlbiBhcnJheSBjb250YWlucyB0aGUgZ2l2ZW4gZWxlbWVudFxuICogQHBhcmFtIGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGZvciB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAqIEBwYXJhbSBlbCBUaGUgZWxlbWVudCB0byBsb29rIGZvciBpbnRvIHRoZSBhcnJheVxuICovXG5mdW5jdGlvbiBjb250YWlucyhhcnI6IGFueVtdLCBlbDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBhcnIuaW5kZXhPZihlbCkgPj0gMDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IHR5cGUgVHlwZWRBcnJheSA9IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5IHwgVWludDhDbGFtcGVkQXJyYXlcbiAgfCBJbnQ4QXJyYXkgfCBJbnQxNkFycmF5IHwgSW50MzJBcnJheVxuICB8IEZsb2F0MzJBcnJheSB8IEZsb2F0NjRBcnJheTtcblxuXG4vKipcbiAqIHBvbHlmaWxsIGZvciBUeXBlZEFycmF5LmZpbGxcbiAqIFRoaXMgaXMgbmVlZGVkIHRvIHN1cHBvcnQgLmZpbGwgaW4gYWxsIHNhZmFyaSB2ZXJzaW9ucyBhbmQgSUUgMTEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWxsPFQgZXh0ZW5kcyBUeXBlZEFycmF5PihhcnJheTogVCwgdmFsdWU6IG51bWJlciwgc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IFQge1xuICAvLyBhbGwgbW9kZXJuIGVuZ2luZXMgdGhhdCBzdXBwb3J0IC5maWxsXG4gIGlmIChhcnJheS5maWxsKSB7XG4gICAgcmV0dXJuIGFycmF5LmZpbGwodmFsdWUsIHN0YXJ0LCBlbmQpIGFzIFQ7XG4gIH1cbiAgcmV0dXJuIGZpbGxGYWxsYmFjayhhcnJheSwgdmFsdWUsIHN0YXJ0LCBlbmQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsbEZhbGxiYWNrPFQgZXh0ZW5kcyBUeXBlZEFycmF5PihhcnJheTogVCwgdmFsdWU6IG51bWJlciwgc3RhcnQ6IG51bWJlciA9IDAsIGVuZDogbnVtYmVyID0gYXJyYXkubGVuZ3RoKTogVCB7XG4gIC8vIHNhZmFyaSBhbmQgSUUgMTFcbiAgLy8gc2luY2UgSUUgMTEgZG9lcyBub3Qgc3VwcG9ydCBBcnJheS5wcm90b3R5cGUuZmlsbCBlaXRoZXJcbiAgLy8gd2UgY2Fubm90IHVzZSB0aGUgc3VnZ2VzdGVkIHBvbHlmaWxsIGZyb20gTUROXG4gIC8vIGluc3RlYWQgd2Ugc2ltcGx5IGZhbGwgYmFjayB0byBsb29waW5nXG4gIGlmIChzdGFydCA+PSBhcnJheS5sZW5ndGgpIHtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgc3RhcnQgPSAoYXJyYXkubGVuZ3RoICsgc3RhcnQpICUgYXJyYXkubGVuZ3RoO1xuICBpZiAoZW5kID49IGFycmF5Lmxlbmd0aCkge1xuICAgIGVuZCA9IGFycmF5Lmxlbmd0aDtcbiAgfSBlbHNlIHtcbiAgICBlbmQgPSAoYXJyYXkubGVuZ3RoICsgZW5kKSAlIGFycmF5Lmxlbmd0aDtcbiAgfVxuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIGFycmF5W2ldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIENvbmNhdCB0d28gdHlwZWQgYXJyYXlzIGBhYCBhbmQgYGJgLlxuICogUmV0dXJucyBhIG5ldyB0eXBlZCBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdDxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYTogVCwgYjogVCk6IFQge1xuICBjb25zdCByZXN1bHQgPSBuZXcgKGEuY29uc3RydWN0b3IgYXMgYW55KShhLmxlbmd0aCArIGIubGVuZ3RoKTtcbiAgcmVzdWx0LnNldChhKTtcbiAgcmVzdWx0LnNldChiLCBhLmxlbmd0aCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogQzAgY29udHJvbCBjb2Rlc1xuICogU2VlID0gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQzBfYW5kX0MxX2NvbnRyb2xfY29kZXNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBDMCB7XG4gIC8qKiBOdWxsIChDYXJldCA9IF5ALCBDID0gXFwwKSAqL1xuICBleHBvcnQgY29uc3QgTlVMID0gJ1xceDAwJztcbiAgLyoqIFN0YXJ0IG9mIEhlYWRpbmcgKENhcmV0ID0gXkEpICovXG4gIGV4cG9ydCBjb25zdCBTT0ggPSAnXFx4MDEnO1xuICAvKiogU3RhcnQgb2YgVGV4dCAoQ2FyZXQgPSBeQikgKi9cbiAgZXhwb3J0IGNvbnN0IFNUWCA9ICdcXHgwMic7XG4gIC8qKiBFbmQgb2YgVGV4dCAoQ2FyZXQgPSBeQykgKi9cbiAgZXhwb3J0IGNvbnN0IEVUWCA9ICdcXHgwMyc7XG4gIC8qKiBFbmQgb2YgVHJhbnNtaXNzaW9uIChDYXJldCA9IF5EKSAqL1xuICBleHBvcnQgY29uc3QgRU9UID0gJ1xceDA0JztcbiAgLyoqIEVucXVpcnkgKENhcmV0ID0gXkUpICovXG4gIGV4cG9ydCBjb25zdCBFTlEgPSAnXFx4MDUnO1xuICAvKiogQWNrbm93bGVkZ2UgKENhcmV0ID0gXkYpICovXG4gIGV4cG9ydCBjb25zdCBBQ0sgPSAnXFx4MDYnO1xuICAvKiogQmVsbCAoQ2FyZXQgPSBeRywgQyA9IFxcYSkgKi9cbiAgZXhwb3J0IGNvbnN0IEJFTCA9ICdcXHgwNyc7XG4gIC8qKiBCYWNrc3BhY2UgKENhcmV0ID0gXkgsIEMgPSBcXGIpICovXG4gIGV4cG9ydCBjb25zdCBCUyAgPSAnXFx4MDgnO1xuICAvKiogQ2hhcmFjdGVyIFRhYnVsYXRpb24sIEhvcml6b250YWwgVGFidWxhdGlvbiAoQ2FyZXQgPSBeSSwgQyA9IFxcdCkgKi9cbiAgZXhwb3J0IGNvbnN0IEhUICA9ICdcXHgwOSc7XG4gIC8qKiBMaW5lIEZlZWQgKENhcmV0ID0gXkosIEMgPSBcXG4pICovXG4gIGV4cG9ydCBjb25zdCBMRiAgPSAnXFx4MGEnO1xuICAvKiogTGluZSBUYWJ1bGF0aW9uLCBWZXJ0aWNhbCBUYWJ1bGF0aW9uIChDYXJldCA9IF5LLCBDID0gXFx2KSAqL1xuICBleHBvcnQgY29uc3QgVlQgID0gJ1xceDBiJztcbiAgLyoqIEZvcm0gRmVlZCAoQ2FyZXQgPSBeTCwgQyA9IFxcZikgKi9cbiAgZXhwb3J0IGNvbnN0IEZGICA9ICdcXHgwYyc7XG4gIC8qKiBDYXJyaWFnZSBSZXR1cm4gKENhcmV0ID0gXk0sIEMgPSBcXHIpICovXG4gIGV4cG9ydCBjb25zdCBDUiAgPSAnXFx4MGQnO1xuICAvKiogU2hpZnQgT3V0IChDYXJldCA9IF5OKSAqL1xuICBleHBvcnQgY29uc3QgU08gID0gJ1xceDBlJztcbiAgLyoqIFNoaWZ0IEluIChDYXJldCA9IF5PKSAqL1xuICBleHBvcnQgY29uc3QgU0kgID0gJ1xceDBmJztcbiAgLyoqIERhdGEgTGluayBFc2NhcGUgKENhcmV0ID0gXlApICovXG4gIGV4cG9ydCBjb25zdCBETEUgPSAnXFx4MTAnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgT25lIChYT04pIChDYXJldCA9IF5RKSAqL1xuICBleHBvcnQgY29uc3QgREMxID0gJ1xceDExJztcbiAgLyoqIERldmljZSBDb250cm9sIFR3byAoQ2FyZXQgPSBeUikgKi9cbiAgZXhwb3J0IGNvbnN0IERDMiA9ICdcXHgxMic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBUaHJlZSAoWE9GRikgKENhcmV0ID0gXlMpICovXG4gIGV4cG9ydCBjb25zdCBEQzMgPSAnXFx4MTMnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgRm91ciAoQ2FyZXQgPSBeVCkgKi9cbiAgZXhwb3J0IGNvbnN0IERDNCA9ICdcXHgxNCc7XG4gIC8qKiBOZWdhdGl2ZSBBY2tub3dsZWRnZSAoQ2FyZXQgPSBeVSkgKi9cbiAgZXhwb3J0IGNvbnN0IE5BSyA9ICdcXHgxNSc7XG4gIC8qKiBTeW5jaHJvbm91cyBJZGxlIChDYXJldCA9IF5WKSAqL1xuICBleHBvcnQgY29uc3QgU1lOID0gJ1xceDE2JztcbiAgLyoqIEVuZCBvZiBUcmFuc21pc3Npb24gQmxvY2sgKENhcmV0ID0gXlcpICovXG4gIGV4cG9ydCBjb25zdCBFVEIgPSAnXFx4MTcnO1xuICAvKiogQ2FuY2VsIChDYXJldCA9IF5YKSAqL1xuICBleHBvcnQgY29uc3QgQ0FOID0gJ1xceDE4JztcbiAgLyoqIEVuZCBvZiBNZWRpdW0gKENhcmV0ID0gXlkpICovXG4gIGV4cG9ydCBjb25zdCBFTSAgPSAnXFx4MTknO1xuICAvKiogU3Vic3RpdHV0ZSAoQ2FyZXQgPSBeWikgKi9cbiAgZXhwb3J0IGNvbnN0IFNVQiA9ICdcXHgxYSc7XG4gIC8qKiBFc2NhcGUgKENhcmV0ID0gXlssIEMgPSBcXGUpICovXG4gIGV4cG9ydCBjb25zdCBFU0MgPSAnXFx4MWInO1xuICAvKiogRmlsZSBTZXBhcmF0b3IgKENhcmV0ID0gXlxcKSAqL1xuICBleHBvcnQgY29uc3QgRlMgID0gJ1xceDFjJztcbiAgLyoqIEdyb3VwIFNlcGFyYXRvciAoQ2FyZXQgPSBeXSkgKi9cbiAgZXhwb3J0IGNvbnN0IEdTICA9ICdcXHgxZCc7XG4gIC8qKiBSZWNvcmQgU2VwYXJhdG9yIChDYXJldCA9IF5eKSAqL1xuICBleHBvcnQgY29uc3QgUlMgID0gJ1xceDFlJztcbiAgLyoqIFVuaXQgU2VwYXJhdG9yIChDYXJldCA9IF5fKSAqL1xuICBleHBvcnQgY29uc3QgVVMgID0gJ1xceDFmJztcbiAgLyoqIFNwYWNlICovXG4gIGV4cG9ydCBjb25zdCBTUCAgPSAnXFx4MjAnO1xuICAvKiogRGVsZXRlIChDYXJldCA9IF4/KSAqL1xuICBleHBvcnQgY29uc3QgREVMID0gJ1xceDdmJztcbn1cblxuLyoqXG4gKiBDMSBjb250cm9sIGNvZGVzXG4gKiBTZWUgPSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DMF9hbmRfQzFfY29udHJvbF9jb2Rlc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIEMxIHtcbiAgLyoqIHBhZGRpbmcgY2hhcmFjdGVyICovXG4gIGV4cG9ydCBjb25zdCBQQUQgPSAnXFx4ODAnO1xuICAvKiogSGlnaCBPY3RldCBQcmVzZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhPUCA9ICdcXHg4MSc7XG4gIC8qKiBCcmVhayBQZXJtaXR0ZWQgSGVyZSAqL1xuICBleHBvcnQgY29uc3QgQlBIID0gJ1xceDgyJztcbiAgLyoqIE5vIEJyZWFrIEhlcmUgKi9cbiAgZXhwb3J0IGNvbnN0IE5CSCA9ICdcXHg4Myc7XG4gIC8qKiBJbmRleCAqL1xuICBleHBvcnQgY29uc3QgSU5EID0gJ1xceDg0JztcbiAgLyoqIE5leHQgTGluZSAqL1xuICBleHBvcnQgY29uc3QgTkVMID0gJ1xceDg1JztcbiAgLyoqIFN0YXJ0IG9mIFNlbGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNTQSA9ICdcXHg4Nic7XG4gIC8qKiBFbmQgb2YgU2VsZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgRVNBID0gJ1xceDg3JztcbiAgLyoqIEhvcml6b250YWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhUUyA9ICdcXHg4OCc7XG4gIC8qKiBIb3Jpem9udGFsIFRhYnVsYXRpb24gV2l0aCBKdXN0aWZpY2F0aW9uICovXG4gIGV4cG9ydCBjb25zdCBIVEogPSAnXFx4ODknO1xuICAvKiogVmVydGljYWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IFZUUyA9ICdcXHg4YSc7XG4gIC8qKiBQYXJ0aWFsIExpbmUgRG93biAqL1xuICBleHBvcnQgY29uc3QgUExEID0gJ1xceDhiJztcbiAgLyoqIFBhcnRpYWwgTGluZSBVcCAqL1xuICBleHBvcnQgY29uc3QgUExVID0gJ1xceDhjJztcbiAgLyoqIFJldmVyc2UgSW5kZXggKi9cbiAgZXhwb3J0IGNvbnN0IFJJID0gJ1xceDhkJztcbiAgLyoqIFNpbmdsZS1TaGlmdCAyICovXG4gIGV4cG9ydCBjb25zdCBTUzIgPSAnXFx4OGUnO1xuICAvKiogU2luZ2xlLVNoaWZ0IDMgKi9cbiAgZXhwb3J0IGNvbnN0IFNTMyA9ICdcXHg4Zic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IERDUyA9ICdcXHg5MCc7XG4gIC8qKiBQcml2YXRlIFVzZSAxICovXG4gIGV4cG9ydCBjb25zdCBQVTEgPSAnXFx4OTEnO1xuICAvKiogUHJpdmF0ZSBVc2UgMiAqL1xuICBleHBvcnQgY29uc3QgUFUyID0gJ1xceDkyJztcbiAgLyoqIFNldCBUcmFuc21pdCBTdGF0ZSAqL1xuICBleHBvcnQgY29uc3QgU1RTID0gJ1xceDkzJztcbiAgLyoqIERlc3RydWN0aXZlIGJhY2tzcGFjZSwgaW50ZW5kZWQgdG8gZWxpbWluYXRlIGFtYmlndWl0eSBhYm91dCBtZWFuaW5nIG9mIEJTLiAqL1xuICBleHBvcnQgY29uc3QgQ0NIID0gJ1xceDk0JztcbiAgLyoqIE1lc3NhZ2UgV2FpdGluZyAqL1xuICBleHBvcnQgY29uc3QgTVcgPSAnXFx4OTUnO1xuICAvKiogU3RhcnQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNQQSA9ICdcXHg5Nic7XG4gIC8qKiBFbmQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IEVQQSA9ICdcXHg5Nyc7XG4gIC8qKiBTdGFydCBvZiBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IFNPUyA9ICdcXHg5OCc7XG4gIC8qKiBTaW5nbGUgR3JhcGhpYyBDaGFyYWN0ZXIgSW50cm9kdWNlciAqL1xuICBleHBvcnQgY29uc3QgU0dDSSA9ICdcXHg5OSc7XG4gIC8qKiBTaW5nbGUgQ2hhcmFjdGVyIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IFNDSSA9ICdcXHg5YSc7XG4gIC8qKiBDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IENTSSA9ICdcXHg5Yic7XG4gIC8qKiBTdHJpbmcgVGVybWluYXRvciAqL1xuICBleHBvcnQgY29uc3QgU1QgPSAnXFx4OWMnO1xuICAvKiogT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kICovXG4gIGV4cG9ydCBjb25zdCBPU0MgPSAnXFx4OWQnO1xuICAvKiogUHJpdmFjeSBNZXNzYWdlICovXG4gIGV4cG9ydCBjb25zdCBQTSA9ICdcXHg5ZSc7XG4gIC8qKiBBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmQgKi9cbiAgZXhwb3J0IGNvbnN0IEFQQyA9ICdcXHg5Zic7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyc2V0IH0gZnJvbSAnLi4vVHlwZXMnO1xuXG4vKipcbiAqIFRoZSBjaGFyYWN0ZXIgc2V0cyBzdXBwb3J0ZWQgYnkgdGhlIHRlcm1pbmFsLiBUaGVzZSBlbmFibGUgc2V2ZXJhbCBsYW5ndWFnZXNcbiAqIHRvIGJlIHJlcHJlc2VudGVkIHdpdGhpbiB0aGUgdGVybWluYWwgd2l0aCBvbmx5IDgtYml0IGVuY29kaW5nLiBTZWUgSVNPIDIwMjJcbiAqIGZvciBhIGRpc2N1c3Npb24gb24gY2hhcmFjdGVyIHNldHMuIE9ubHkgVlQxMDAgY2hhcmFjdGVyIHNldHMgYXJlIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENIQVJTRVRTOiB7IFtrZXk6IHN0cmluZ106IElDaGFyc2V0IHwgbnVsbCB9ID0ge307XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgY2hhcmFjdGVyIHNldCwgVVMuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NIQVJTRVQ6IElDaGFyc2V0IHwgbnVsbCA9IENIQVJTRVRTWydCJ107XG5cbi8qKlxuICogREVDIFNwZWNpYWwgQ2hhcmFjdGVyIGFuZCBMaW5lIERyYXdpbmcgU2V0LlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQxMDItdWcvdGFibGU1LTEzLmh0bWxcbiAqIEEgbG90IG9mIGN1cnNlcyBhcHBzIHVzZSB0aGlzIGlmIHRoZXkgc2VlIFRFUk09eHRlcm0uXG4gKiB0ZXN0aW5nOiBlY2hvIC1lICdcXGUoMGFcXGUoQidcbiAqIFRoZSB4dGVybSBvdXRwdXQgc29tZXRpbWVzIHNlZW1zIHRvIGNvbmZsaWN0IHdpdGggdGhlXG4gKiByZWZlcmVuY2UgYWJvdmUuIHh0ZXJtIHNlZW1zIGluIGxpbmUgd2l0aCB0aGUgcmVmZXJlbmNlXG4gKiB3aGVuIHJ1bm5pbmcgdnR0ZXN0IGhvd2V2ZXIuXG4gKiBUaGUgdGFibGUgYmVsb3cgbm93IHVzZXMgeHRlcm0ncyBvdXRwdXQgZnJvbSB2dHRlc3QuXG4gKi9cbkNIQVJTRVRTWycwJ10gPSB7XG4gICdgJzogJ1xcdTI1YzYnLCAvLyAn4peGJ1xuICAnYSc6ICdcXHUyNTkyJywgLy8gJ+KWkidcbiAgJ2InOiAnXFx1MDAwOScsIC8vICdcXHQnXG4gICdjJzogJ1xcdTAwMGMnLCAvLyAnXFxmJ1xuICAnZCc6ICdcXHUwMDBkJywgLy8gJ1xccidcbiAgJ2UnOiAnXFx1MDAwYScsIC8vICdcXG4nXG4gICdmJzogJ1xcdTAwYjAnLCAvLyAnwrAnXG4gICdnJzogJ1xcdTAwYjEnLCAvLyAnwrEnXG4gICdoJzogJ1xcdTI0MjQnLCAvLyAnXFx1MjQyNCcgKE5MKVxuICAnaSc6ICdcXHUwMDBiJywgLy8gJ1xcdidcbiAgJ2onOiAnXFx1MjUxOCcsIC8vICfilJgnXG4gICdrJzogJ1xcdTI1MTAnLCAvLyAn4pSQJ1xuICAnbCc6ICdcXHUyNTBjJywgLy8gJ+KUjCdcbiAgJ20nOiAnXFx1MjUxNCcsIC8vICfilJQnXG4gICduJzogJ1xcdTI1M2MnLCAvLyAn4pS8J1xuICAnbyc6ICdcXHUyM2JhJywgLy8gJ+KOuidcbiAgJ3AnOiAnXFx1MjNiYicsIC8vICfijrsnXG4gICdxJzogJ1xcdTI1MDAnLCAvLyAn4pSAJ1xuICAncic6ICdcXHUyM2JjJywgLy8gJ+KOvCdcbiAgJ3MnOiAnXFx1MjNiZCcsIC8vICfijr0nXG4gICd0JzogJ1xcdTI1MWMnLCAvLyAn4pScJ1xuICAndSc6ICdcXHUyNTI0JywgLy8gJ+KUpCdcbiAgJ3YnOiAnXFx1MjUzNCcsIC8vICfilLQnXG4gICd3JzogJ1xcdTI1MmMnLCAvLyAn4pSsJ1xuICAneCc6ICdcXHUyNTAyJywgLy8gJ+KUgidcbiAgJ3knOiAnXFx1MjI2NCcsIC8vICfiiaQnXG4gICd6JzogJ1xcdTIyNjUnLCAvLyAn4omlJ1xuICAneyc6ICdcXHUwM2MwJywgLy8gJ8+AJ1xuICAnfCc6ICdcXHUyMjYwJywgLy8gJ+KJoCdcbiAgJ30nOiAnXFx1MDBhMycsIC8vICfCoydcbiAgJ34nOiAnXFx1MDBiNycgIC8vICfCtydcbn07XG5cbi8qKlxuICogQnJpdGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi01Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0EnXSA9IHtcbiAgJyMnOiAnwqMnXG59O1xuXG4vKipcbiAqIFVuaXRlZCBTdGF0ZXMgY2hhcmFjdGVyIHNldFxuICogRVNDIChCXG4gKi9cbkNIQVJTRVRTWydCJ10gPSBudWxsO1xuXG4vKipcbiAqIER1dGNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoNFxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTYuaHRtbFxuICovXG5DSEFSU0VUU1snNCddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8K+JyxcbiAgJ1snOiAnaWonLFxuICAnXFxcXCc6ICfCvScsXG4gICddJzogJ3wnLFxuICAneyc6ICfCqCcsXG4gICd8JzogJ2YnLFxuICAnfSc6ICfCvCcsXG4gICd+JzogJ8K0J1xufTtcblxuLyoqXG4gKiBGaW5uaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoQyBvciBFU0MgKDVcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi03Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0MnXSA9XG5DSEFSU0VUU1snNSddID0ge1xuICAnWyc6ICfDhCcsXG4gICdcXFxcJzogJ8OWJyxcbiAgJ10nOiAnw4UnLFxuICAnXic6ICfDnCcsXG4gICdgJzogJ8OpJyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8OlJyxcbiAgJ34nOiAnw7wnXG59O1xuXG4vKipcbiAqIEZyZW5jaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFJcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi04Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1InXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfDoCcsXG4gICdbJzogJ8KwJyxcbiAgJ1xcXFwnOiAnw6cnLFxuICAnXSc6ICfCpycsXG4gICd7JzogJ8OpJyxcbiAgJ3wnOiAnw7knLFxuICAnfSc6ICfDqCcsXG4gICd+JzogJ8KoJ1xufTtcblxuLyoqXG4gKiBGcmVuY2ggQ2FuYWRpYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChRXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItOS5odG1sXG4gKi9cbkNIQVJTRVRTWydRJ10gPSB7XG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnw6InLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OqJyxcbiAgJ14nOiAnw64nLFxuICAnYCc6ICfDtCcsXG4gICd7JzogJ8OpJyxcbiAgJ3wnOiAnw7knLFxuICAnfSc6ICfDqCcsXG4gICd+JzogJ8O7J1xufTtcblxuLyoqXG4gKiBHZXJtYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChLXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTAuaHRtbFxuICovXG5DSEFSU0VUU1snSyddID0ge1xuICAnQCc6ICfCpycsXG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDnCcsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDvCcsXG4gICd+JzogJ8OfJ1xufTtcblxuLyoqXG4gKiBJdGFsaWFuIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTExLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1knXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfCpycsXG4gICdbJzogJ8KwJyxcbiAgJ1xcXFwnOiAnw6cnLFxuICAnXSc6ICfDqScsXG4gICdgJzogJ8O5JyxcbiAgJ3snOiAnw6AnLFxuICAnfCc6ICfDsicsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnw6wnXG59O1xuXG4vKipcbiAqIE5vcndlZ2lhbi9EYW5pc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChFIG9yIEVTQyAoNlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEyLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0UnXSA9XG5DSEFSU0VUU1snNiddID0ge1xuICAnQCc6ICfDhCcsXG4gICdbJzogJ8OGJyxcbiAgJ1xcXFwnOiAnw5gnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6QnLFxuICAneyc6ICfDpicsXG4gICd8JzogJ8O4JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogU3BhbmlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFpcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xMy5odG1sXG4gKi9cbkNIQVJTRVRTWydaJ10gPSB7XG4gICcjJzogJ8KjJyxcbiAgJ0AnOiAnwqcnLFxuICAnWyc6ICfCoScsXG4gICdcXFxcJzogJ8ORJyxcbiAgJ10nOiAnwr8nLFxuICAneyc6ICfCsCcsXG4gICd8JzogJ8OxJyxcbiAgJ30nOiAnw6cnXG59O1xuXG4vKipcbiAqIFN3ZWRpc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChIIG9yIEVTQyAoN1xuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTE0Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0gnXSA9XG5DSEFSU0VUU1snNyddID0ge1xuICAnQCc6ICfDiScsXG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6knLFxuICAneyc6ICfDpCcsXG4gICd8JzogJ8O2JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogU3dpc3MgY2hhcmFjdGVyIHNldFxuICogRVNDICg9XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTUuaHRtbFxuICovXG5DSEFSU0VUU1snPSddID0ge1xuICAnIyc6ICfDuScsXG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnw6knLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OqJyxcbiAgJ14nOiAnw64nLFxuICAnXyc6ICfDqCcsXG4gICdgJzogJ8O0JyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8O8JyxcbiAgJ34nOiAnw7snXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJS2V5Ym9hcmRFdmVudCB9IGZyb20gJy4uLy4uL2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJS2V5Ym9hcmRSZXN1bHQsIEtleWJvYXJkUmVzdWx0VHlwZSB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IEMwIH0gZnJvbSAnLi4vLi4vY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcblxuLy8gcmVnICsgc2hpZnQga2V5IG1hcHBpbmdzIGZvciBkaWdpdHMgYW5kIHNwZWNpYWwgY2hhcnNcbmNvbnN0IEtFWUNPREVfS0VZX01BUFBJTkdTOiB7IFtrZXk6IG51bWJlcl06IFtzdHJpbmcsIHN0cmluZ119ID0ge1xuICAvLyBkaWdpdHMgMC05XG4gIDQ4OiBbJzAnLCAnKSddLFxuICA0OTogWycxJywgJyEnXSxcbiAgNTA6IFsnMicsICdAJ10sXG4gIDUxOiBbJzMnLCAnIyddLFxuICA1MjogWyc0JywgJyQnXSxcbiAgNTM6IFsnNScsICclJ10sXG4gIDU0OiBbJzYnLCAnXiddLFxuICA1NTogWyc3JywgJyYnXSxcbiAgNTY6IFsnOCcsICcqJ10sXG4gIDU3OiBbJzknLCAnKCddLFxuXG4gIC8vIHNwZWNpYWwgY2hhcnNcbiAgMTg2OiBbJzsnLCAnOiddLFxuICAxODc6IFsnPScsICcrJ10sXG4gIDE4ODogWycsJywgJzwnXSxcbiAgMTg5OiBbJy0nLCAnXyddLFxuICAxOTA6IFsnLicsICc+J10sXG4gIDE5MTogWycvJywgJz8nXSxcbiAgMTkyOiBbJ2AnLCAnfiddLFxuICAyMTk6IFsnWycsICd7J10sXG4gIDIyMDogWydcXFxcJywgJ3wnXSxcbiAgMjIxOiBbJ10nLCAnfSddLFxuICAyMjI6IFsnXFwnJywgJ1wiJ11cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBldmFsdWF0ZUtleWJvYXJkRXZlbnQoXG4gIGV2OiBJS2V5Ym9hcmRFdmVudCxcbiAgYXBwbGljYXRpb25DdXJzb3JNb2RlOiBib29sZWFuLFxuICBpc01hYzogYm9vbGVhbixcbiAgbWFjT3B0aW9uSXNNZXRhOiBib29sZWFuXG4pOiBJS2V5Ym9hcmRSZXN1bHQge1xuICBjb25zdCByZXN1bHQ6IElLZXlib2FyZFJlc3VsdCA9IHtcbiAgICB0eXBlOiBLZXlib2FyZFJlc3VsdFR5cGUuU0VORF9LRVksXG4gICAgLy8gV2hldGhlciB0byBjYW5jZWwgZXZlbnQgcHJvcGFnYXRpb24gKE5PVEU6IHRoaXMgbWF5IG5vdCBiZSBuZWVkZWQgc2luY2UgdGhlIGV2ZW50IGlzXG4gICAgLy8gY2FuY2VsZWQgYXQgdGhlIGVuZCBvZiBrZXlEb3duXG4gICAgY2FuY2VsOiBmYWxzZSxcbiAgICAvLyBUaGUgbmV3IGtleSBldmVuIHRvIGVtaXRcbiAgICBrZXk6IHVuZGVmaW5lZFxuICB9O1xuICBjb25zdCBtb2RpZmllcnMgPSAoZXYuc2hpZnRLZXkgPyAxIDogMCkgfCAoZXYuYWx0S2V5ID8gMiA6IDApIHwgKGV2LmN0cmxLZXkgPyA0IDogMCkgfCAoZXYubWV0YUtleSA/IDggOiAwKTtcbiAgc3dpdGNoIChldi5rZXlDb2RlKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRVcEFycm93Jykge1xuICAgICAgICBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRMZWZ0QXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09EJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tEJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dFJpZ2h0QXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09DJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tDJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dERvd25BcnJvdycpIHtcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0InO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0InO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDg6XG4gICAgICAvLyBiYWNrc3BhY2VcbiAgICAgIGlmIChldi5zaGlmdEtleSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuQlM7IC8vIF5IXG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmIChldi5hbHRLZXkpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArIEMwLkRFTDsgLy8gXFxlIF4/XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmtleSA9IEMwLkRFTDsgLy8gXj9cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgOTpcbiAgICAgIC8vIHRhYlxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW1onO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5rZXkgPSBDMC5IVDtcbiAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMzpcbiAgICAgIC8vIHJldHVybi9lbnRlclxuICAgICAgcmVzdWx0LmtleSA9IEMwLkNSO1xuICAgICAgcmVzdWx0LmNhbmNlbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI3OlxuICAgICAgLy8gZXNjYXBlXG4gICAgICByZXN1bHQua2V5ID0gQzAuRVNDO1xuICAgICAgcmVzdWx0LmNhbmNlbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM3OlxuICAgICAgLy8gbGVmdC1hcnJvd1xuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnRCc7XG4gICAgICAgIC8vIEhBQ0s6IE1ha2UgQWx0ICsgbGVmdC1hcnJvdyBiZWhhdmUgbGlrZSBDdHJsICsgbGVmdC1hcnJvdzogbW92ZSBvbmUgd29yZCBiYWNrd2FyZHNcbiAgICAgICAgLy8gaHR0cDovL3VuaXguc3RhY2tleGNoYW5nZS5jb20vYS8xMDgxMDZcbiAgICAgICAgLy8gbWFjT1MgdXNlcyBkaWZmZXJlbnQgZXNjYXBlIHNlcXVlbmNlcyB0aGFuIGxpbnV4XG4gICAgICAgIGlmIChyZXN1bHQua2V5ID09PSBDMC5FU0MgKyAnWzE7M0QnKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IGlzTWFjID8gQzAuRVNDICsgJ2InIDogQzAuRVNDICsgJ1sxOzVEJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPRCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tEJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzk6XG4gICAgICAvLyByaWdodC1hcnJvd1xuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnQyc7XG4gICAgICAgIC8vIEhBQ0s6IE1ha2UgQWx0ICsgcmlnaHQtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIHJpZ2h0LWFycm93OiBtb3ZlIG9uZSB3b3JkIGZvcndhcmRcbiAgICAgICAgLy8gaHR0cDovL3VuaXguc3RhY2tleGNoYW5nZS5jb20vYS8xMDgxMDZcbiAgICAgICAgLy8gbWFjT1MgdXNlcyBkaWZmZXJlbnQgZXNjYXBlIHNlcXVlbmNlcyB0aGFuIGxpbnV4XG4gICAgICAgIGlmIChyZXN1bHQua2V5ID09PSBDMC5FU0MgKyAnWzE7M0MnKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IGlzTWFjID8gQzAuRVNDICsgJ2YnIDogQzAuRVNDICsgJ1sxOzVDJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tDJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzg6XG4gICAgICAvLyB1cC1hcnJvd1xuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnQSc7XG4gICAgICAgIC8vIEhBQ0s6IE1ha2UgQWx0ICsgdXAtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIHVwLWFycm93XG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIGlmIChyZXN1bHQua2V5ID09PSBDMC5FU0MgKyAnWzE7M0EnKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTs1QSc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0EnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQSc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQwOlxuICAgICAgLy8gZG93bi1hcnJvd1xuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnQic7XG4gICAgICAgIC8vIEhBQ0s6IE1ha2UgQWx0ICsgZG93bi1hcnJvdyBiZWhhdmUgbGlrZSBDdHJsICsgZG93bi1hcnJvd1xuICAgICAgICAvLyBodHRwOi8vdW5peC5zdGFja2V4Y2hhbmdlLmNvbS9hLzEwODEwNlxuICAgICAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNCJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7NUInO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09CJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0InO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0NTpcbiAgICAgIC8vIGluc2VydFxuICAgICAgaWYgKCFldi5zaGlmdEtleSAmJiAhZXYuY3RybEtleSkge1xuICAgICAgICAvLyA8Q3RybD4gb3IgPFNoaWZ0PiArIDxJbnNlcnQ+IGFyZSB1c2VkIHRvXG4gICAgICAgIC8vIGNvcHktcGFzdGUgb24gc29tZSBzeXN0ZW1zLlxuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ2OlxuICAgICAgLy8gZGVsZXRlXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzM7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzN+JztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzY6XG4gICAgICAvLyBob21lXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdIJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0gnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbSCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM1OlxuICAgICAgLy8gZW5kXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdGJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0YnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbRic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDMzOlxuICAgICAgLy8gcGFnZSB1cFxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC50eXBlID0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfVVA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1s1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM0OlxuICAgICAgLy8gcGFnZSBkb3duXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LnR5cGUgPSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9ET1dOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbNn4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTI6XG4gICAgICAvLyBGMS1GMTJcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1AnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExMzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1EnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUSc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNDpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1InO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ1MnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPUyc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNjpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTU7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExNzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTc7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE3fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExODpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTg7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE4fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExOTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTk7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE5fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMDpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjA7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIwfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMTpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjE7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIxfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMjpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjM7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIzfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMzpcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMjQ7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzI0fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgLy8gYS16IGFuZCBzcGFjZVxuICAgICAgaWYgKGV2LmN0cmxLZXkgJiYgIWV2LnNoaWZ0S2V5ICYmICFldi5hbHRLZXkgJiYgIWV2Lm1ldGFLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPj0gNjUgJiYgZXYua2V5Q29kZSA8PSA5MCkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2LmtleUNvZGUgLSA2NCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgICAgICAvLyBOVUxcbiAgICAgICAgICByZXN1bHQua2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZSgwKTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID49IDUxICYmIGV2LmtleUNvZGUgPD0gNTUpIHtcbiAgICAgICAgICAvLyBlc2NhcGUsIGZpbGUgc2VwLCBncm91cCBzZXAsIHJlY29yZCBzZXAsIHVuaXQgc2VwXG4gICAgICAgICAgcmVzdWx0LmtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXYua2V5Q29kZSAtIDUxICsgMjcpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDU2KSB7XG4gICAgICAgICAgLy8gZGVsZXRlXG4gICAgICAgICAgcmVzdWx0LmtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTI3KTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAyMTkpIHtcbiAgICAgICAgICAvLyBeWyAtIENvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlciAoQ1NJKVxuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI3KTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAyMjApIHtcbiAgICAgICAgICAvLyBeXFwgLSBTdHJpbmcgVGVybWluYXRvciAoU1QpXG4gICAgICAgICAgcmVzdWx0LmtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMjgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDIyMSkge1xuICAgICAgICAgIC8vIF5dIC0gT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kIChPU0MpXG4gICAgICAgICAgcmVzdWx0LmtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMjkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCghaXNNYWMgfHwgbWFjT3B0aW9uSXNNZXRhKSAmJiBldi5hbHRLZXkgJiYgIWV2Lm1ldGFLZXkpIHtcbiAgICAgICAgLy8gT24gbWFjT1MgdGhpcyBpcyBhIHRoaXJkIGxldmVsIHNoaWZ0IHdoZW4gIW1hY09wdGlvbklzTWV0YS4gVXNlIDxFc2M+IGluc3RlYWQuXG4gICAgICAgIGNvbnN0IGtleU1hcHBpbmcgPSBLRVlDT0RFX0tFWV9NQVBQSU5HU1tldi5rZXlDb2RlXTtcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5TWFwcGluZyAmJiBrZXlNYXBwaW5nWyFldi5zaGlmdEtleSA/IDAgOiAxXTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyBrZXk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA+PSA2NSAmJiBldi5rZXlDb2RlIDw9IDkwKSB7XG4gICAgICAgICAgY29uc3Qga2V5Q29kZSA9IGV2LmN0cmxLZXkgPyBldi5rZXlDb2RlIC0gNjQgOiBldi5rZXlDb2RlICsgMzI7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArIFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5Q29kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNNYWMgJiYgIWV2LmFsdEtleSAmJiAhZXYuY3RybEtleSAmJiBldi5tZXRhS2V5KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID09PSA2NSkgeyAvLyBjbWQgKyBhXG4gICAgICAgICAgcmVzdWx0LnR5cGUgPSBLZXlib2FyZFJlc3VsdFR5cGUuU0VMRUNUX0FMTDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldi5rZXkgJiYgIWV2LmN0cmxLZXkgJiYgIWV2LmFsdEtleSAmJiAhZXYubWV0YUtleSAmJiBldi5rZXlDb2RlID49IDQ4ICYmIGV2LmtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gSW5jbHVkZSBvbmx5IGtleXMgdGhhdCB0aGF0IHJlc3VsdCBpbiBhIF9zaW5nbGVfIGNoYXJhY3RlcjsgZG9uJ3QgaW5jbHVkZSBudW0gbG9jaywgdm9sdW1lIHVwLCBldGMuXG4gICAgICAgIHJlc3VsdC5rZXkgPSBldi5rZXk7XG4gICAgICB9IGVsc2UgaWYgKGV2LmtleSAmJiBldi5jdHJsS2V5KSB7XG4gICAgICAgIGlmIChldi5rZXkgPT09ICdfJykgeyAvLyBeX1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5VUztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vKipcbiAqIFN0cmluZ1RvVXRmMzIgLSBkZWNvZGVzIFVURjE2IHNlcXVlbmNlcyBpbnRvIFVURjMyIGNvZGVwb2ludHMuXG4gKiBUbyBrZWVwIHRoZSBkZWNvZGVyIGluIGxpbmUgd2l0aCBKUyBzdHJpbmdzIGl0IGhhbmRsZXMgc2luZ2xlIHN1cnJvZ2F0ZXMgYXMgVUNTMi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmluZ1RvVXRmMzIge1xuICBwcml2YXRlIF9pbnRlcmltOiBudW1iZXIgPSAwO1xuXG4gIC8qKlxuICAgKiBDbGVhcnMgaW50ZXJpbSBhbmQgcmVzZXRzIGRlY29kZXIgdG8gY2xlYW4gc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5faW50ZXJpbSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlIEpTIHN0cmluZyB0byBVVEYzMiBjb2RlcG9pbnRzLlxuICAgKiBUaGUgbWV0aG9kcyBhc3N1bWVzIHN0cmVhbSBpbnB1dCBhbmQgd2lsbCBzdG9yZSBwYXJ0bHkgdHJhbnNtaXR0ZWRcbiAgICogc3Vycm9nYXRlIHBhaXJzIGFuZCBkZWNvZGUgdGhlbSB3aXRoIHRoZSBuZXh0IGRhdGEgY2h1bmsuXG4gICAqIE5vdGU6IFRoZSBtZXRob2QgZG9lcyBubyBib3VuZCBjaGVja3MgZm9yIHRhcmdldCwgdGhlcmVmb3JlIG1ha2Ugc3VyZVxuICAgKiB0aGUgcHJvdmlkZWQgaW5wdXQgZGF0YSBkb2VzIG5vdCBleGNlZWQgdGhlIHNpemUgb2YgYHRhcmdldGAuXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3cml0dGVuIGNvZGVwb2ludHMgaW4gYHRhcmdldGAuXG4gICAqL1xuICBkZWNvZGUoaW5wdXQ6IHN0cmluZywgdGFyZ2V0OiBVaW50MzJBcnJheSk6IG51bWJlciB7XG4gICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGxldCBzaXplID0gMDtcbiAgICBsZXQgc3RhcnRQb3MgPSAwO1xuXG4gICAgLy8gaGFuZGxlIGxlZnRvdmVyIHN1cnJvZ2F0ZSBoaWdoXG4gICAgaWYgKHRoaXMuX2ludGVyaW0pIHtcbiAgICAgIGNvbnN0IHNlY29uZCA9IGlucHV0LmNoYXJDb2RlQXQoc3RhcnRQb3MrKyk7XG4gICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gKHRoaXMuX2ludGVyaW0gLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgKFVTQzIgaGFuZGxpbmcpXG4gICAgICAgIHRhcmdldFtzaXplKytdID0gdGhpcy5faW50ZXJpbTtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBzZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLl9pbnRlcmltID0gMDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gc3RhcnRQb3M7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAvLyBzdXJyb2dhdGUgcGFpciBmaXJzdFxuICAgICAgaWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEQkZGKSB7XG4gICAgICAgIGlmICgrK2kgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5faW50ZXJpbSA9IGNvZGU7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vjb25kID0gaW5wdXQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50IChVU0MyIGhhbmRsaW5nKVxuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gY29kZTtcbiAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IHNlY29uZDtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRhcmdldFtzaXplKytdID0gY29kZTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IFVURjMyIGNvZGVwb2ludCBpbnRvIEpTIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50OiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgLy8gVVRGMzIgdG8gVVRGMTYgY29udmVyc2lvbiAoc2VlIGNvbW1lbnRzIGluIHV0ZjMyVG9TdHJpbmcpXG4gICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVQb2ludCA+PiAxMCkgKyAweEQ4MDApICsgU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwKTtcbiAgfVxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlUG9pbnQpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgVVRGMzIgY2hhciBjb2RlcyBpbnRvIEpTIHN0cmluZy5cbiAqIEJhc2ljYWxseSB0aGUgc2FtZSBhcyBgc3RyaW5nRnJvbUNvZGVQb2ludGAgYnV0IGZvciBtdWx0aXBsZSBjb2RlcG9pbnRzXG4gKiBpbiBhIGxvb3AgKHdoaWNoIGlzIGEgbG90IGZhc3RlcikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGYzMlRvU3RyaW5nKGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyID0gMCwgZW5kOiBudW1iZXIgPSBkYXRhLmxlbmd0aCk6IHN0cmluZyB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBsZXQgY29kZXBvaW50ID0gZGF0YVtpXTtcbiAgICBpZiAoY29kZXBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBKUyBzdHJpbmcgYXJlIGVuY29kZWQgYXMgVVRGMTYsIHRodXMgYSBub24gQk1QIGNvZGVwb2ludCBnZXRzIGNvbnZlcnRlZCBpbnRvIGEgc3Vycm9nYXRlIHBhaXJcbiAgICAgIC8vIGNvbnZlcnNpb24gcnVsZXM6XG4gICAgICAvLyAgLSBzdWJ0cmFjdCAweDEwMDAwIGZyb20gY29kZSBwb2ludCwgbGVhdmluZyBhIDIwIGJpdCBudW1iZXJcbiAgICAgIC8vICAtIGFkZCBoaWdoIDEwIGJpdHMgdG8gMHhEODAwICAtLT4gZmlyc3Qgc3Vycm9nYXRlXG4gICAgICAvLyAgLSBhZGQgbG93IDEwIGJpdHMgdG8gMHhEQzAwICAgLS0+IHNlY29uZCBzdXJyb2dhdGVcbiAgICAgIGNvZGVwb2ludCAtPSAweDEwMDAwO1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVwb2ludCA+PiAxMCkgKyAweEQ4MDApICsgU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZXBvaW50ICUgMHg0MDApICsgMHhEQzAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZXBvaW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsLCBJQnVmZmVyTGluZSB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IElDaXJjdWxhckxpc3QgfSBmcm9tICcuLi9jb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQzAgfSBmcm9tICcuLi9jb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuXG5jb25zdCBlbnVtIERpcmVjdGlvbiB7XG4gIFVQID0gJ0EnLFxuICBET1dOID0gJ0InLFxuICBSSUdIVCA9ICdDJyxcbiAgTEVGVCA9ICdEJ1xufVxuXG5leHBvcnQgY2xhc3MgQWx0Q2xpY2tIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfc3RhcnRSb3c6IG51bWJlcjtcbiAgcHJpdmF0ZSBfc3RhcnRDb2w6IG51bWJlcjtcbiAgcHJpdmF0ZSBfZW5kUm93OiBudW1iZXI7XG4gIHByaXZhdGUgX2VuZENvbDogbnVtYmVyO1xuICBwcml2YXRlIF9saW5lczogSUNpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfbW91c2VFdmVudDogTW91c2VFdmVudCxcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogSVRlcm1pbmFsXG4gICkge1xuICAgIHRoaXMuX2xpbmVzID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLmxpbmVzO1xuICAgIHRoaXMuX3N0YXJ0Q29sID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLng7XG4gICAgdGhpcy5fc3RhcnRSb3cgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIueTtcblxuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gdGhpcy5fdGVybWluYWwubW91c2VIZWxwZXIuZ2V0Q29vcmRzKFxuICAgICAgdGhpcy5fbW91c2VFdmVudCxcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQsXG4gICAgICB0aGlzLl90ZXJtaW5hbC5jaGFyTWVhc3VyZSxcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmNvbHMsXG4gICAgICB0aGlzLl90ZXJtaW5hbC5yb3dzLFxuICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgaWYgKGNvb3JkaW5hdGVzKSB7XG4gICAgICBbdGhpcy5fZW5kQ29sLCB0aGlzLl9lbmRSb3ddID0gY29vcmRpbmF0ZXMubWFwKChjb29yZGluYXRlOiBudW1iZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGUgLSAxO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlcyB0aGUgZXNjYXBlIHNlcXVlbmNlcyBvZiBhcnJvd3MgdG8gdGhlIHRlcm1pbmFsXG4gICAqL1xuICBwdWJsaWMgbW92ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbW91c2VFdmVudC5hbHRLZXkgJiYgdGhpcy5fZW5kQ29sICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fZW5kUm93ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmhhbmRsZXIodGhpcy5fYXJyb3dTZXF1ZW5jZXMoKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbGwgdGhlIGFycm93IHNlcXVlbmNlcyB0b2dldGhlci5cbiAgICogUmVzZXRzIHRoZSBzdGFydGluZyByb3cgdG8gYW4gdW53cmFwcGVkIHJvdywgbW92ZXMgdG8gdGhlIHJlcXVlc3RlZCByb3csXG4gICAqIHRoZW4gbW92ZXMgdG8gcmVxdWVzdGVkIGNvbC5cbiAgICovXG4gIHByaXZhdGUgX2Fycm93U2VxdWVuY2VzKCk6IHN0cmluZyB7XG4gICAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIHRyeSB0byBuYXZpZ2F0ZSBiZXR3ZWVuIHJvd3NcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcmVzZXRTdGFydGluZ1JvdygpICsgdGhpcy5fbW92ZVRvUmVxdWVzdGVkUm93KCkgKyB0aGlzLl9tb3ZlVG9SZXF1ZXN0ZWRDb2woKTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IG1vdmUgaG9yaXpvbnRhbGx5IGZvciB0aGUgbm9ybWFsIGJ1ZmZlclxuICAgIHJldHVybiB0aGlzLl9tb3ZlSG9yaXpvbnRhbGx5T25seSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBpbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBjdXJzb3IgaXMgb24gYSByb3cgdGhhdCBpcyB3cmFwcGVkLCBtb3ZlIHRoZVxuICAgKiBjdXJzb3IgdXAgdG8gdGhlIGZpcnN0IHJvdyB0aGF0IGlzIG5vdCB3cmFwcGVkIHRvIGhhdmUgYWNjdXJhdGUgdmVydGljYWxcbiAgICogcG9zaXRpb25pbmcuXG4gICAqL1xuICBwcml2YXRlIF9yZXNldFN0YXJ0aW5nUm93KCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuX21vdmVUb1JlcXVlc3RlZFJvdygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gcmVwZWF0KHRoaXMuX2J1ZmZlckxpbmUoXG4gICAgICB0aGlzLl9zdGFydENvbCwgdGhpcy5fc3RhcnRSb3csIHRoaXMuX3N0YXJ0Q29sLFxuICAgICAgdGhpcy5fc3RhcnRSb3cgLSB0aGlzLl93cmFwcGVkUm93c0ZvclJvdyh0aGlzLl9zdGFydFJvdyksIGZhbHNlXG4gICAgKS5sZW5ndGgsIHRoaXMuX3NlcXVlbmNlKERpcmVjdGlvbi5MRUZUKSk7XG4gIH1cblxuICAvKipcbiAgICogVXNpbmcgdGhlIHJlc2V0IHN0YXJ0aW5nIGFuZCBlbmRpbmcgcm93LCBtb3ZlIHRvIHRoZSByZXF1ZXN0ZWQgcm93LFxuICAgKiBpZ25vcmluZyB3cmFwcGVkIHJvd3NcbiAgICovXG4gIHByaXZhdGUgX21vdmVUb1JlcXVlc3RlZFJvdygpOiBzdHJpbmcge1xuICAgIGNvbnN0IHN0YXJ0Um93ID0gdGhpcy5fc3RhcnRSb3cgLSB0aGlzLl93cmFwcGVkUm93c0ZvclJvdyh0aGlzLl9zdGFydFJvdyk7XG4gICAgY29uc3QgZW5kUm93ID0gdGhpcy5fZW5kUm93IC0gdGhpcy5fd3JhcHBlZFJvd3NGb3JSb3codGhpcy5fZW5kUm93KTtcblxuICAgIGNvbnN0IHJvd3NUb01vdmUgPSBNYXRoLmFicyhzdGFydFJvdyAtIGVuZFJvdykgLSB0aGlzLl93cmFwcGVkUm93c0NvdW50KCk7XG5cbiAgICByZXR1cm4gcmVwZWF0KHJvd3NUb01vdmUsIHRoaXMuX3NlcXVlbmNlKHRoaXMuX3ZlcnRpY2FsRGlyZWN0aW9uKCkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHRvIHRoZSByZXF1ZXN0ZWQgY29sIG9uIHRoZSBlbmRpbmcgcm93XG4gICAqL1xuICBwcml2YXRlIF9tb3ZlVG9SZXF1ZXN0ZWRDb2woKTogc3RyaW5nIHtcbiAgICBsZXQgc3RhcnRSb3c7XG4gICAgaWYgKHRoaXMuX21vdmVUb1JlcXVlc3RlZFJvdygpLmxlbmd0aCA+IDApIHtcbiAgICAgIHN0YXJ0Um93ID0gdGhpcy5fZW5kUm93IC0gdGhpcy5fd3JhcHBlZFJvd3NGb3JSb3codGhpcy5fZW5kUm93KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRSb3cgPSB0aGlzLl9zdGFydFJvdztcbiAgICB9XG5cbiAgICBjb25zdCBlbmRSb3cgPSB0aGlzLl9lbmRSb3c7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5faG9yaXpvbnRhbERpcmVjdGlvbigpO1xuXG4gICAgcmV0dXJuIHJlcGVhdCh0aGlzLl9idWZmZXJMaW5lKFxuICAgICAgdGhpcy5fc3RhcnRDb2wsIHN0YXJ0Um93LCB0aGlzLl9lbmRDb2wsIGVuZFJvdyxcbiAgICAgIGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJJR0hUXG4gICAgKS5sZW5ndGgsIHRoaXMuX3NlcXVlbmNlKGRpcmVjdGlvbikpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbW92ZUhvcml6b250YWxseU9ubHkoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLl9ob3Jpem9udGFsRGlyZWN0aW9uKCk7XG4gICAgcmV0dXJuIHJlcGVhdChNYXRoLmFicyh0aGlzLl9zdGFydENvbCAtIHRoaXMuX2VuZENvbCksIHRoaXMuX3NlcXVlbmNlKGRpcmVjdGlvbikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFV0aWxpdHkgZnVuY3Rpb25zXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2Ygd3JhcHBlZCByb3dzIGJldHdlZW4gdGhlIHVud3JhcHBlZCBzdGFydGluZyBhbmRcbiAgICogZW5kaW5nIHJvd3MuIFRoZXNlIHJvd3MgbmVlZCB0byBpZ25vcmVkIHNpbmNlIHRoZSBjdXJzb3Igc2tpcHMgb3ZlciB0aGVtLlxuICAgKi9cbiAgcHJpdmF0ZSBfd3JhcHBlZFJvd3NDb3VudCgpOiBudW1iZXIge1xuICAgIGxldCB3cmFwcGVkUm93cyA9IDA7XG4gICAgY29uc3Qgc3RhcnRSb3cgPSB0aGlzLl9zdGFydFJvdyAtIHRoaXMuX3dyYXBwZWRSb3dzRm9yUm93KHRoaXMuX3N0YXJ0Um93KTtcbiAgICBjb25zdCBlbmRSb3cgPSB0aGlzLl9lbmRSb3cgLSB0aGlzLl93cmFwcGVkUm93c0ZvclJvdyh0aGlzLl9lbmRSb3cpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmFicyhzdGFydFJvdyAtIGVuZFJvdyk7IGkrKykge1xuICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5fdmVydGljYWxEaXJlY3Rpb24oKSA9PT0gRGlyZWN0aW9uLlVQID8gLTEgOiAxO1xuXG4gICAgICBpZiAodGhpcy5fbGluZXMuZ2V0KHN0YXJ0Um93ICsgKGRpcmVjdGlvbiAqIGkpKS5pc1dyYXBwZWQpIHtcbiAgICAgICAgd3JhcHBlZFJvd3MrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gd3JhcHBlZFJvd3M7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHdyYXBwZWQgcm93cyB0aGF0IG1ha2UgdXAgYSBnaXZlbiByb3cuXG4gICAqIEBwYXJhbSBjdXJyZW50Um93IFRoZSByb3cgdG8gZGV0ZXJtaW5lIGhvdyBtYW55IHdyYXBwZWQgcm93cyBtYWtlIGl0IHVwXG4gICAqL1xuICBwcml2YXRlIF93cmFwcGVkUm93c0ZvclJvdyhjdXJyZW50Um93OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGxldCByb3dDb3VudCA9IDA7XG4gICAgbGV0IGxpbmVXcmFwcyA9IHRoaXMuX2xpbmVzLmdldChjdXJyZW50Um93KS5pc1dyYXBwZWQ7XG5cbiAgICB3aGlsZSAobGluZVdyYXBzICYmIGN1cnJlbnRSb3cgPj0gMCAmJiBjdXJyZW50Um93IDwgdGhpcy5fdGVybWluYWwucm93cykge1xuICAgICAgcm93Q291bnQrKztcbiAgICAgIGN1cnJlbnRSb3ctLTtcbiAgICAgIGxpbmVXcmFwcyA9IHRoaXMuX2xpbmVzLmdldChjdXJyZW50Um93KS5pc1dyYXBwZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvd0NvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIERpcmVjdGlvbiBkZXRlcm1pbmVyc1xuICAgKi9cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGUgcmlnaHQgb3IgbGVmdCBhcnJvdyBpcyBuZWVkZWRcbiAgICovXG4gIHByaXZhdGUgX2hvcml6b250YWxEaXJlY3Rpb24oKTogRGlyZWN0aW9uIHtcbiAgICBsZXQgc3RhcnRSb3c7XG4gICAgaWYgKHRoaXMuX21vdmVUb1JlcXVlc3RlZFJvdygpLmxlbmd0aCA+IDApIHtcbiAgICAgIHN0YXJ0Um93ID0gdGhpcy5fZW5kUm93IC0gdGhpcy5fd3JhcHBlZFJvd3NGb3JSb3codGhpcy5fZW5kUm93KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRSb3cgPSB0aGlzLl9zdGFydFJvdztcbiAgICB9XG5cbiAgICBpZiAoKHRoaXMuX3N0YXJ0Q29sIDwgdGhpcy5fZW5kQ29sICYmXG4gICAgICBzdGFydFJvdyA8PSB0aGlzLl9lbmRSb3cpIHx8IC8vIGRvd24vcmlnaHQgb3Igc2FtZSB5L3JpZ2h0XG4gICAgICAodGhpcy5fc3RhcnRDb2wgPj0gdGhpcy5fZW5kQ29sICYmXG4gICAgICBzdGFydFJvdyA8IHRoaXMuX2VuZFJvdykpIHsgIC8vIGRvd24vbGVmdCBvciBzYW1lIHkvbGVmdFxuICAgICAgcmV0dXJuIERpcmVjdGlvbi5SSUdIVDtcbiAgICB9XG4gICAgcmV0dXJuIERpcmVjdGlvbi5MRUZUO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhlIHVwIG9yIGRvd24gYXJyb3cgaXMgbmVlZGVkXG4gICAqL1xuICBwcml2YXRlIF92ZXJ0aWNhbERpcmVjdGlvbigpOiBEaXJlY3Rpb24ge1xuICAgIGlmICh0aGlzLl9zdGFydFJvdyA+IHRoaXMuX2VuZFJvdykge1xuICAgICAgcmV0dXJuIERpcmVjdGlvbi5VUDtcbiAgICB9XG4gICAgcmV0dXJuIERpcmVjdGlvbi5ET1dOO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIHN0cmluZyBvZiBjaGFycyBpbiB0aGUgYnVmZmVyIGZyb20gYSBzdGFydGluZyByb3cgYW5kIGNvbFxuICAgKiB0byBhbiBlbmRpbmcgcm93IGFuZCBjb2xcbiAgICogQHBhcmFtIHN0YXJ0Q29sIFRoZSBzdGFydGluZyBjb2x1bW4gcG9zaXRpb25cbiAgICogQHBhcmFtIHN0YXJ0Um93IFRoZSBzdGFydGluZyByb3cgcG9zaXRpb25cbiAgICogQHBhcmFtIGVuZENvbCBUaGUgZW5kaW5nIGNvbHVtbiBwb3NpdGlvblxuICAgKiBAcGFyYW0gZW5kUm93IFRoZSBlbmRpbmcgcm93IHBvc2l0aW9uXG4gICAqIEBwYXJhbSBmb3J3YXJkIERpcmVjdGlvbiB0byBtb3ZlXG4gICAqL1xuICBwcml2YXRlIF9idWZmZXJMaW5lKFxuICAgIHN0YXJ0Q29sOiBudW1iZXIsXG4gICAgc3RhcnRSb3c6IG51bWJlcixcbiAgICBlbmRDb2w6IG51bWJlcixcbiAgICBlbmRSb3c6IG51bWJlcixcbiAgICBmb3J3YXJkOiBib29sZWFuXG4gICk6IHN0cmluZyB7XG4gICAgbGV0IGN1cnJlbnRDb2wgPSBzdGFydENvbDtcbiAgICBsZXQgY3VycmVudFJvdyA9IHN0YXJ0Um93O1xuICAgIGxldCBidWZmZXJTdHIgPSAnJztcblxuICAgIHdoaWxlIChjdXJyZW50Q29sICE9PSBlbmRDb2wgfHwgY3VycmVudFJvdyAhPT0gZW5kUm93KSB7XG4gICAgICBjdXJyZW50Q29sICs9IGZvcndhcmQgPyAxIDogLTE7XG5cbiAgICAgIGlmIChmb3J3YXJkICYmIGN1cnJlbnRDb2wgPiB0aGlzLl90ZXJtaW5hbC5jb2xzIC0gMSkge1xuICAgICAgICBidWZmZXJTdHIgKz0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgICBjdXJyZW50Um93LCBmYWxzZSwgc3RhcnRDb2wsIGN1cnJlbnRDb2xcbiAgICAgICAgKTtcbiAgICAgICAgY3VycmVudENvbCA9IDA7XG4gICAgICAgIHN0YXJ0Q29sID0gMDtcbiAgICAgICAgY3VycmVudFJvdysrO1xuICAgICAgfSBlbHNlIGlmICghZm9yd2FyZCAmJiBjdXJyZW50Q29sIDwgMCkge1xuICAgICAgICBidWZmZXJTdHIgKz0gdGhpcy5fdGVybWluYWwuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgICBjdXJyZW50Um93LCBmYWxzZSwgMCwgc3RhcnRDb2wgKyAxXG4gICAgICAgICk7XG4gICAgICAgIGN1cnJlbnRDb2wgPSB0aGlzLl90ZXJtaW5hbC5jb2xzIC0gMTtcbiAgICAgICAgc3RhcnRDb2wgPSBjdXJyZW50Q29sO1xuICAgICAgICBjdXJyZW50Um93LS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZmZlclN0ciArIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoXG4gICAgICBjdXJyZW50Um93LCBmYWxzZSwgc3RhcnRDb2wsIGN1cnJlbnRDb2xcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIGVzY2FwZSBzZXF1ZW5jZSBmb3IgY2xpY2tpbmcgYW4gYXJyb3dcbiAgICogQHBhcmFtIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIHRvIG1vdmVcbiAgICovXG4gIHByaXZhdGUgX3NlcXVlbmNlKGRpcmVjdGlvbjogRGlyZWN0aW9uKTogc3RyaW5nIHtcbiAgICBjb25zdCBtb2QgPSB0aGlzLl90ZXJtaW5hbC5hcHBsaWNhdGlvbkN1cnNvciA/ICdPJyA6ICdbJztcbiAgICByZXR1cm4gQzAuRVNDICsgbW9kICsgZGlyZWN0aW9uO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHN0cmluZyByZXBlYXRlZCBhIGdpdmVuIG51bWJlciBvZiB0aW1lc1xuICogUG9seWZpbGwgZnJvbSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9TdHJpbmcvcmVwZWF0XG4gKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHN0cmluZ1xuICogQHBhcmFtIHN0cmluZyBUaGUgc3RyaW5nIHRoYXQgaXMgdG8gYmUgcmVwZWF0ZWRcbiAqL1xuZnVuY3Rpb24gcmVwZWF0KGNvdW50OiBudW1iZXIsIHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY291bnQgPSBNYXRoLmZsb29yKGNvdW50KTtcbiAgbGV0IHJwdCA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICBycHQgKz0gc3RyO1xuICB9XG4gIHJldHVybiBycHQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsIGFzIElUZXJtaW5hbEFwaSwgSVRlcm1pbmFsT3B0aW9ucywgSU1hcmtlciwgSURpc3Bvc2FibGUsIElMaW5rTWF0Y2hlck9wdGlvbnMsIElUaGVtZSwgSUxvY2FsaXphYmxlU3RyaW5ncyB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElUZXJtaW5hbCB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IFRlcm1pbmFsIGFzIFRlcm1pbmFsQ29yZSB9IGZyb20gJy4uL1Rlcm1pbmFsJztcbmltcG9ydCAqIGFzIFN0cmluZ3MgZnJvbSAnLi4vU3RyaW5ncyc7XG5pbXBvcnQgeyBJRXZlbnQgfSBmcm9tICcuLi9jb21tb24vRXZlbnRFbWl0dGVyMic7XG5cbmV4cG9ydCBjbGFzcyBUZXJtaW5hbCBpbXBsZW1lbnRzIElUZXJtaW5hbEFwaSB7XG4gIHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogSVRlcm1pbmFsT3B0aW9ucykge1xuICAgIHRoaXMuX2NvcmUgPSBuZXcgVGVybWluYWxDb3JlKG9wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIGdldCBvbkN1cnNvck1vdmUoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25DdXJzb3JNb3ZlOyB9XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkxpbmVGZWVkOyB9XG4gIHB1YmxpYyBnZXQgb25TZWxlY3Rpb25DaGFuZ2UoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TZWxlY3Rpb25DaGFuZ2U7IH1cbiAgcHVibGljIGdldCBvbkRhdGEoKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fY29yZS5vbkRhdGE7IH1cbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25UaXRsZUNoYW5nZTsgfVxuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TY3JvbGw7IH1cbiAgcHVibGljIGdldCBvbktleSgpOiBJRXZlbnQ8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vbktleTsgfVxuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25SZW5kZXI7IH1cbiAgcHVibGljIGdldCBvblJlc2l6ZSgpOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9jb3JlLm9uUmVzaXplOyB9XG5cbiAgcHVibGljIGdldCBlbGVtZW50KCk6IEhUTUxFbGVtZW50IHsgcmV0dXJuIHRoaXMuX2NvcmUuZWxlbWVudDsgfVxuICBwdWJsaWMgZ2V0IHRleHRhcmVhKCk6IEhUTUxUZXh0QXJlYUVsZW1lbnQgeyByZXR1cm4gdGhpcy5fY29yZS50ZXh0YXJlYTsgfVxuICBwdWJsaWMgZ2V0IHJvd3MoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUucm93czsgfVxuICBwdWJsaWMgZ2V0IGNvbHMoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUuY29sczsgfVxuICBwdWJsaWMgZ2V0IG1hcmtlcnMoKTogUmVhZG9ubHlBcnJheTxJTWFya2VyPiB7IHJldHVybiB0aGlzLl9jb3JlLm1hcmtlcnM7IH1cbiAgcHVibGljIGJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5ibHVyKCk7XG4gIH1cbiAgcHVibGljIGZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuZm9jdXMoKTtcbiAgfVxuICBwdWJsaWMgb24odHlwZTogJ2JsdXInIHwgJ2ZvY3VzJyB8ICdsaW5lZmVlZCcgfCAnc2VsZWN0aW9uJywgbGlzdGVuZXI6ICgpID0+IHZvaWQpOiB2b2lkO1xuICBwdWJsaWMgb24odHlwZTogJ2RhdGEnLCBsaXN0ZW5lcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIG9uKHR5cGU6ICdrZXknLCBsaXN0ZW5lcjogKGtleT86IHN0cmluZywgZXZlbnQ/OiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIG9uKHR5cGU6ICdrZXlwcmVzcycgfCAna2V5ZG93bicsIGxpc3RlbmVyOiAoZXZlbnQ/OiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIG9uKHR5cGU6ICdyZWZyZXNoJywgbGlzdGVuZXI6IChkYXRhPzogeyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlcjsgfSkgPT4gdm9pZCk6IHZvaWQ7XG4gIHB1YmxpYyBvbih0eXBlOiAncmVzaXplJywgbGlzdGVuZXI6IChkYXRhPzogeyBjb2xzOiBudW1iZXI7IHJvd3M6IG51bWJlcjsgfSkgPT4gdm9pZCk6IHZvaWQ7XG4gIHB1YmxpYyBvbih0eXBlOiAnc2Nyb2xsJywgbGlzdGVuZXI6ICh5ZGlzcD86IG51bWJlcikgPT4gdm9pZCk6IHZvaWQ7XG4gIHB1YmxpYyBvbih0eXBlOiAndGl0bGUnLCBsaXN0ZW5lcjogKHRpdGxlPzogc3RyaW5nKSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIG9uKHR5cGU6IHN0cmluZywgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQ7XG4gIHB1YmxpYyBvbih0eXBlOiBhbnksIGxpc3RlbmVyOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLm9uKHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuICBwdWJsaWMgb2ZmKHR5cGU6IHN0cmluZywgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUub2ZmKHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuICBwdWJsaWMgZW1pdCh0eXBlOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmVtaXQodHlwZSwgZGF0YSk7XG4gIH1cbiAgcHVibGljIGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0eXBlOiBzdHJpbmcsIGhhbmRsZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGREaXNwb3NhYmxlTGlzdGVuZXIodHlwZSwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIHJlc2l6ZShjb2x1bW5zOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUucmVzaXplKGNvbHVtbnMsIHJvd3MpO1xuICB9XG4gIHB1YmxpYyB3cml0ZWxuKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUud3JpdGVsbihkYXRhKTtcbiAgfVxuICBwdWJsaWMgb3BlbihwYXJlbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5vcGVuKHBhcmVudCk7XG4gIH1cbiAgcHVibGljIGF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihjdXN0b21LZXlFdmVudEhhbmRsZXI6IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGN1c3RvbUtleUV2ZW50SGFuZGxlcik7XG4gIH1cbiAgcHVibGljIGFkZENzaUhhbmRsZXIoZmxhZzogc3RyaW5nLCBjYWxsYmFjazogKHBhcmFtczogbnVtYmVyW10sIGNvbGxlY3Q6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGRDc2lIYW5kbGVyKGZsYWcsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGRPc2NIYW5kbGVyKGlkZW50LCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXg6IFJlZ0V4cCwgaGFuZGxlcjogKGV2ZW50OiBNb3VzZUV2ZW50LCB1cmk6IHN0cmluZykgPT4gdm9pZCwgb3B0aW9ucz86IElMaW5rTWF0Y2hlck9wdGlvbnMpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXgsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICB9XG4gIHB1YmxpYyBkZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihtYXRjaGVySWQpO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiAodGV4dDogc3RyaW5nKSA9PiBbbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQpO1xuICB9XG4gIHB1YmxpYyBhZGRNYXJrZXIoY3Vyc29yWU9mZnNldDogbnVtYmVyKTogSU1hcmtlciB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuYWRkTWFya2VyKGN1cnNvcllPZmZzZXQpO1xuICB9XG4gIHB1YmxpYyBoYXNTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuaGFzU2VsZWN0aW9uKCk7XG4gIH1cbiAgcHVibGljIGdldFNlbGVjdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmdldFNlbGVjdGlvbigpO1xuICB9XG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH1cbiAgcHVibGljIHNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNlbGVjdEFsbCgpO1xuICB9XG4gIHB1YmxpYyBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2VsZWN0TGluZXMoc3RhcnQsIGVuZCk7XG4gIH1cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5kaXNwb3NlKCk7XG4gIH1cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5kZXN0cm95KCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbExpbmVzKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxMaW5lcyhhbW91bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxQYWdlcyhwYWdlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsUGFnZXMocGFnZUNvdW50KTtcbiAgfVxuICBwdWJsaWMgc2Nyb2xsVG9Ub3AoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxUb1RvcCgpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFRvTGluZShsaW5lKTtcbiAgfVxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5jbGVhcigpO1xuICB9XG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLndyaXRlKGRhdGEpO1xuICB9XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiAnYmVsbFNvdW5kJyB8ICdiZWxsU3R5bGUnIHwgJ2N1cnNvclN0eWxlJyB8ICdmb250RmFtaWx5JyB8ICdmb250V2VpZ2h0JyB8ICdmb250V2VpZ2h0Qm9sZCcgfCAncmVuZGVyZXJUeXBlJyB8ICd0ZXJtTmFtZScpOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiAnYWxsb3dUcmFuc3BhcmVuY3knIHwgJ2NhbmNlbEV2ZW50cycgfCAnY29udmVydEVvbCcgfCAnY3Vyc29yQmxpbmsnIHwgJ2RlYnVnJyB8ICdkaXNhYmxlU3RkaW4nIHwgJ2VuYWJsZUJvbGQnIHwgJ21hY09wdGlvbklzTWV0YScgfCAncmlnaHRDbGlja1NlbGVjdHNXb3JkJyB8ICdwb3BPbkJlbGwnIHwgJ3NjcmVlbktleXMnIHwgJ3VzZUZsb3dDb250cm9sJyB8ICd2aXN1YWxCZWxsJyk6IGJvb2xlYW47XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiAnY29sb3JzJyk6IHN0cmluZ1tdO1xuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogJ2NvbHMnIHwgJ2ZvbnRTaXplJyB8ICdsZXR0ZXJTcGFjaW5nJyB8ICdsaW5lSGVpZ2h0JyB8ICdyb3dzJyB8ICd0YWJTdG9wV2lkdGgnIHwgJ3Njcm9sbGJhY2snKTogbnVtYmVyO1xuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogJ2hhbmRsZXInKTogKGRhdGE6IHN0cmluZykgPT4gdm9pZDtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6IHN0cmluZyk6IGFueTtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6IGFueSk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuZ2V0T3B0aW9uKGtleSk7XG4gIH1cbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdiZWxsU291bmQnIHwgJ2ZvbnRGYW1pbHknIHwgJ3Rlcm1OYW1lJywgdmFsdWU6IHN0cmluZyk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnZm9udFdlaWdodCcgfCAnZm9udFdlaWdodEJvbGQnLCB2YWx1ZTogJ25vcm1hbCcgfCAnYm9sZCcgfCAnMTAwJyB8ICcyMDAnIHwgJzMwMCcgfCAnNDAwJyB8ICc1MDAnIHwgJzYwMCcgfCAnNzAwJyB8ICc4MDAnIHwgJzkwMCcpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2JlbGxTdHlsZScsIHZhbHVlOiAnbm9uZScgfCAndmlzdWFsJyB8ICdzb3VuZCcgfCAnYm90aCcpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2N1cnNvclN0eWxlJywgdmFsdWU6ICdibG9jaycgfCAndW5kZXJsaW5lJyB8ICdiYXInKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdhbGxvd1RyYW5zcGFyZW5jeScgfCAnY2FuY2VsRXZlbnRzJyB8ICdjb252ZXJ0RW9sJyB8ICdjdXJzb3JCbGluaycgfCAnZGVidWcnIHwgJ2Rpc2FibGVTdGRpbicgfCAnZW5hYmxlQm9sZCcgfCAnbWFjT3B0aW9uSXNNZXRhJyB8ICdyaWdodENsaWNrU2VsZWN0c1dvcmQnIHwgJ3BvcE9uQmVsbCcgfCAnc2NyZWVuS2V5cycgfCAndXNlRmxvd0NvbnRyb2wnIHwgJ3Zpc3VhbEJlbGwnLCB2YWx1ZTogYm9vbGVhbik6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnY29sb3JzJywgdmFsdWU6IHN0cmluZ1tdKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdmb250U2l6ZScgfCAnbGV0dGVyU3BhY2luZycgfCAnbGluZUhlaWdodCcgfCAndGFiU3RvcFdpZHRoJyB8ICdzY3JvbGxiYWNrJywgdmFsdWU6IG51bWJlcik6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnaGFuZGxlcicsIHZhbHVlOiAoZGF0YTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICd0aGVtZScsIHZhbHVlOiBJVGhlbWUpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2NvbHMnIHwgJ3Jvd3MnLCB2YWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiBhbnksIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNldE9wdGlvbihrZXksIHZhbHVlKTtcbiAgfVxuICBwdWJsaWMgcmVmcmVzaChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUucmVmcmVzaChzdGFydCwgZW5kKTtcbiAgfVxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5yZXNldCgpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgYXBwbHlBZGRvbihhZGRvbjogYW55KTogdm9pZCB7XG4gICAgYWRkb24uYXBwbHkoVGVybWluYWwpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0cmluZ3MoKTogSUxvY2FsaXphYmxlU3RyaW5ncyB7XG4gICAgcmV0dXJuIFN0cmluZ3M7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckxheWVyLCBJQ29sb3JTZXQsIElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBJVGVybWluYWwsIElDZWxsRGF0YSB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IERJTV9PUEFDSVRZLCBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SLCBJR2x5cGhJZGVudGlmaWVyLCBERUZBVUxUX0NPTE9SIH0gZnJvbSAnLi9hdGxhcy9UeXBlcyc7XG5pbXBvcnQgQmFzZUNoYXJBdGxhcyBmcm9tICcuL2F0bGFzL0Jhc2VDaGFyQXRsYXMnO1xuaW1wb3J0IHsgYWNxdWlyZUNoYXJBdGxhcyB9IGZyb20gJy4vYXRsYXMvQ2hhckF0bGFzQ2FjaGUnO1xuaW1wb3J0IHsgQ2VsbERhdGEsIEF0dHJpYnV0ZURhdGEgfSBmcm9tICcuLi9CdWZmZXJMaW5lJztcbmltcG9ydCB7IFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBXSElURVNQQUNFX0NFTExfQ09ERSB9IGZyb20gJy4uL0J1ZmZlcic7XG5pbXBvcnQgeyBKb2luZWRDZWxsRGF0YSB9IGZyb20gJy4vQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnknO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVJlbmRlckxheWVyIGltcGxlbWVudHMgSVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJvdGVjdGVkIF9jdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDZWxsV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENlbGxIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJMZWZ0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyVG9wOiBudW1iZXIgPSAwO1xuXG4gIHByb3RlY3RlZCBfY2hhckF0bGFzOiBCYXNlQ2hhckF0bGFzO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCdzIHJldXNlZCB3aGVuIGRyYXdpbmcgZ2x5cGhzIGluIG9yZGVyIHRvIHJlZHVjZSBHQy5cbiAgICovXG4gIHByaXZhdGUgX2N1cnJlbnRHbHlwaElkZW50aWZpZXI6IElHbHlwaElkZW50aWZpZXIgPSB7XG4gICAgY2hhcnM6ICcnLFxuICAgIGNvZGU6IDAsXG4gICAgYmc6IDAsXG4gICAgZmc6IDAsXG4gICAgYm9sZDogZmFsc2UsXG4gICAgZGltOiBmYWxzZSxcbiAgICBpdGFsaWM6IGZhbHNlXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBpZDogc3RyaW5nLFxuICAgIHpJbmRleDogbnVtYmVyLFxuICAgIHByaXZhdGUgX2FscGhhOiBib29sZWFuLFxuICAgIHByb3RlY3RlZCBfY29sb3JzOiBJQ29sb3JTZXRcbiAgKSB7XG4gICAgdGhpcy5fY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5fY2FudmFzLmNsYXNzTGlzdC5hZGQoYHh0ZXJtLSR7aWR9LWxheWVyYCk7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLnpJbmRleCA9IHpJbmRleC50b1N0cmluZygpO1xuICAgIHRoaXMuX2luaXRDYW52YXMoKTtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY2FudmFzKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9jYW52YXMpO1xuICAgIGlmICh0aGlzLl9jaGFyQXRsYXMpIHtcbiAgICAgIHRoaXMuX2NoYXJBdGxhcy5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfaW5pdENhbnZhcygpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHggPSB0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7YWxwaGE6IHRoaXMuX2FscGhhfSk7XG4gICAgLy8gRHJhdyB0aGUgYmFja2dyb3VuZCBpZiB0aGlzIGlzIGFuIG9wYXF1ZSBsYXllclxuICAgIGlmICghdGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuY2xlYXJBbGwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCh0ZXJtaW5hbDogSVRlcm1pbmFsKTogdm9pZCB7fVxuICBwdWJsaWMgb25CbHVyKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkZvY3VzKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkN1cnNvck1vdmUodGVybWluYWw6IElUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uR3JpZENoYW5nZWQodGVybWluYWw6IElUZXJtaW5hbCwgc3RhcnRSb3c6IG51bWJlciwgZW5kUm93OiBudW1iZXIpOiB2b2lkIHt9XG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQodGVybWluYWw6IElUZXJtaW5hbCwgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7fVxuXG4gIHB1YmxpYyBvblRoZW1lQ2hhbmdlZCh0ZXJtaW5hbDogSVRlcm1pbmFsLCBjb2xvclNldDogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0ZXJtaW5hbCwgY29sb3JTZXQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNldFRyYW5zcGFyZW5jeSh0ZXJtaW5hbDogSVRlcm1pbmFsLCBhbHBoYTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIERvIG5vdGhpbmcgd2hlbiBhbHBoYSBkb2Vzbid0IGNoYW5nZVxuICAgIGlmIChhbHBoYSA9PT0gdGhpcy5fYWxwaGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgbmV3IGNhbnZhcyBhbmQgcmVwbGFjZSBvbGQgb25lXG4gICAgY29uc3Qgb2xkQ2FudmFzID0gdGhpcy5fY2FudmFzO1xuICAgIHRoaXMuX2FscGhhID0gYWxwaGE7XG4gICAgLy8gQ2xvbmluZyBwcmVzZXJ2ZXMgcHJvcGVydGllc1xuICAgIHRoaXMuX2NhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD50aGlzLl9jYW52YXMuY2xvbmVOb2RlKCk7XG4gICAgdGhpcy5faW5pdENhbnZhcygpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5yZXBsYWNlQ2hpbGQodGhpcy5fY2FudmFzLCBvbGRDYW52YXMpO1xuXG4gICAgLy8gUmVnZW5lcmF0ZSBjaGFyIGF0bGFzIGFuZCBmb3JjZSBhIGZ1bGwgcmVkcmF3XG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0ZXJtaW5hbCwgdGhpcy5fY29sb3JzKTtcbiAgICB0aGlzLm9uR3JpZENoYW5nZWQodGVybWluYWwsIDAsIHRlcm1pbmFsLnJvd3MgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIGNoYXIgYXRsYXMsIGFxdWlyaW5nIGEgbmV3IG9uZSBpZiBuZWNlc3NhcnkuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjb2xvclNldCBUaGUgY29sb3Igc2V0IHRvIHVzZSBmb3IgdGhlIGNoYXIgYXRsYXMuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQ2hhckF0bGFzKHRlcm1pbmFsOiBJVGVybWluYWwsIGNvbG9yU2V0OiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2NhbGVkQ2hhcldpZHRoIDw9IDAgJiYgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NoYXJBdGxhcyA9IGFjcXVpcmVDaGFyQXRsYXModGVybWluYWwsIGNvbG9yU2V0LCB0aGlzLl9zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQpO1xuICAgIHRoaXMuX2NoYXJBdGxhcy53YXJtVXAoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IElUZXJtaW5hbCwgZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX3NjYWxlZENlbGxXaWR0aCA9IGRpbS5zY2FsZWRDZWxsV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCA9IGRpbS5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJXaWR0aCA9IGRpbS5zY2FsZWRDaGFyV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCA9IGRpbS5zY2FsZWRDaGFySGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJMZWZ0ID0gZGltLnNjYWxlZENoYXJMZWZ0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJUb3AgPSBkaW0uc2NhbGVkQ2hhclRvcDtcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSBkaW0uc2NhbGVkQ2FudmFzV2lkdGg7XG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGRpbS5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7ZGltLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7ZGltLmNhbnZhc0hlaWdodH1weGA7XG5cbiAgICAvLyBEcmF3IHRoZSBiYWNrZ3JvdW5kIGlmIHRoaXMgaXMgYW4gb3BhcXVlIGxheWVyXG4gICAgaWYgKCF0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5jbGVhckFsbCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGVybWluYWwsIHRoaXMuX2NvbG9ycyk7XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgcmVzZXQodGVybWluYWw6IElUZXJtaW5hbCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEZpbGxzIDErIGNlbGxzIGNvbXBsZXRlbHkuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0XG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gZmlsbC5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBmaWxsQ2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIGEgMXB4IGxpbmUgKDJweCBvbiBIRFBJKSBhdCB0aGUgYm90dG9tIG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgZmlsbEJvdHRvbUxpbmVBdENlbGxzKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyID0gMSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgKHkgKyAxKSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAtIDEgLyogRW5zdXJlIGl0J3MgZHJhd24gd2l0aGluIHRoZSBjZWxsICovLFxuICAgICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbGxzIGEgMXB4IGxpbmUgKDJweCBvbiBIRFBJKSBhdCB0aGUgbGVmdCBvZiB0aGUgY2VsbC4gVGhpcyB1c2VzIHRoZVxuICAgKiBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIGZpbGxMZWZ0TGluZUF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJva2VzIGEgMXB4IHJlY3RhbmdsZSAoMnB4IG9uIEhEUEkpIGFyb3VuZCBhIGNlbGwuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmdcbiAgICogc3Ryb2tlU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIHN0cm9rZVJlY3RBdENlbGwoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmxpbmVXaWR0aCA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX2N0eC5zdHJva2VSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgd2luZG93LmRldmljZVBpeGVsUmF0aW8gLyAyLFxuICAgICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCArICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAvIDIpLFxuICAgICAgICB3aWR0aCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCAtIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICAoaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCkgLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBlbnRpcmUgY2FudmFzLlxuICAgKi9cbiAgcHJvdGVjdGVkIGNsZWFyQWxsKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyAxKyBjZWxscyBjb21wbGV0ZWx5LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGNsZWFyLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBudW1iZXIgb2Ygcm93cyB0byBjbGVhci5cbiAgICovXG4gIHByb3RlY3RlZCBjbGVhckNlbGxzKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdChcbiAgICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGEgdHJ1ZWNvbG9yIGNoYXJhY3RlciBhdCB0aGUgY2VsbC4gVGhlIGNoYXJhY3RlciB3aWxsIGJlIGNsaXBwZWQgdG9cbiAgICogZW5zdXJlIHRoYXQgaXQgZml0cyB3aXRoIHRoZSBjZWxsLCBpbmNsdWRpbmcgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGlmIGl0J3NcbiAgICogYSB3aWRlIGNoYXJhY3Rlci4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjZWxsIFRoZSBjZWxsIGRhdGEgZm9yIHRoZSBjaGFyYWN0ZXIgdG8gZHJhdy5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIGNoYXJhY3Rlci5cbiAgICovXG4gIHByb3RlY3RlZCBmaWxsQ2hhclRydWVDb2xvcih0ZXJtaW5hbDogSVRlcm1pbmFsLCBjZWxsOiBDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZm9udCA9IHRoaXMuX2dldEZvbnQodGVybWluYWwsIGZhbHNlLCBmYWxzZSk7XG4gICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgIHRoaXMuX2NsaXBSb3codGVybWluYWwsIHkpO1xuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJzIGF0IGEgY2VsbC4gSWYgcG9zc2libGUgdGhpcyB3aWxsIGRyYXcgdXNpbmdcbiAgICogdGhlIGNoYXJhY3RlciBhdGxhcyB0byByZWR1Y2UgZHJhdyB0aW1lLlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gY2hhcnMgVGhlIGNoYXJhY3RlciBvciBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0gY29kZSBUaGUgY2hhcmFjdGVyIGNvZGUuXG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIGNoYXJhY3RlcnMuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0gZmcgVGhlIGZvcmVncm91bmQgY29sb3IsIGluIHRoZSBmb3JtYXQgc3RvcmVkIHdpdGhpbiB0aGUgYXR0cmlidXRlcy5cbiAgICogQHBhcmFtIGJnIFRoZSBiYWNrZ3JvdW5kIGNvbG9yLCBpbiB0aGUgZm9ybWF0IHN0b3JlZCB3aXRoaW4gdGhlIGF0dHJpYnV0ZXMuXG4gICAqIFRoaXMgaXMgdXNlZCB0byB2YWxpZGF0ZSB3aGV0aGVyIGEgY2FjaGVkIGltYWdlIGNhbiBiZSB1c2VkLlxuICAgKiBAcGFyYW0gYm9sZCBXaGV0aGVyIHRoZSB0ZXh0IGlzIGJvbGQuXG4gICAqL1xuICBwcm90ZWN0ZWQgZHJhd0NoYXJzKHRlcm1pbmFsOiBJVGVybWluYWwsIGNlbGw6IElDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcblxuICAgIC8vIHNraXAgY2FjaGUgcmlnaHQgYXdheSBpZiB3ZSBkcmF3IGluIFJHQlxuICAgIC8vIE5vdGU6IHRvIGF2b2lkIGJhZCBydW50aW1lIEpvaW5lZENlbGxEYXRhIHdpbGwgYmUgc2tpcHBlZFxuICAgIC8vICAgICAgIGluIHRoZSBjYWNoZSBoYW5kbGVyIChhdGxhc0RpZERyYXcgPT0gZmFsc2UpIGl0c2VsZiBhbmRcbiAgICAvLyAgICAgICBmYWxsIHRocm91Z2ggdG8gdW5jYWNoZWQgbGF0ZXIgZG93biBiZWxvd1xuICAgIGlmIChjZWxsLmlzRmdSR0IoKSB8fCBjZWxsLmlzQmdSR0IoKSB8fCBjZWxsIGluc3RhbmNlb2YgSm9pbmVkQ2VsbERhdGEpIHtcbiAgICAgIHRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKHRlcm1pbmFsLCBjZWxsLCB4LCB5KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZmc7XG4gICAgbGV0IGJnO1xuICAgIGlmIChjZWxsLmlzSW52ZXJzZSgpKSB7XG4gICAgICBmZyA9IChjZWxsLmlzQmdEZWZhdWx0KCkpID8gSU5WRVJURURfREVGQVVMVF9DT0xPUiA6IGNlbGwuZ2V0QmdDb2xvcigpO1xuICAgICAgYmcgPSAoY2VsbC5pc0ZnRGVmYXVsdCgpKSA/IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgOiBjZWxsLmdldEZnQ29sb3IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYmcgPSAoY2VsbC5pc0JnRGVmYXVsdCgpKSA/IERFRkFVTFRfQ09MT1IgOiBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICAgIGZnID0gKGNlbGwuaXNGZ0RlZmF1bHQoKSkgPyBERUZBVUxUX0NPTE9SIDogY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZHJhd0luQnJpZ2h0Q29sb3IgPSB0ZXJtaW5hbC5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgZmcgPCA4ICYmIGZnICE9PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SO1xuXG4gICAgZmcgKz0gZHJhd0luQnJpZ2h0Q29sb3IgPyA4IDogMDtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNoYXJzID0gY2VsbC5nZXRDaGFycygpIHx8IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuY29kZSA9IGNlbGwuZ2V0Q29kZSgpIHx8IFdISVRFU1BBQ0VfQ0VMTF9DT0RFO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuYmcgPSBiZztcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmZnID0gZmc7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5ib2xkID0gY2VsbC5pc0JvbGQoKSAmJiB0ZXJtaW5hbC5vcHRpb25zLmVuYWJsZUJvbGQ7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5kaW0gPSAhIWNlbGwuaXNEaW0oKTtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLml0YWxpYyA9ICEhY2VsbC5pc0l0YWxpYygpO1xuICAgIGNvbnN0IGF0bGFzRGlkRHJhdyA9IHRoaXMuX2NoYXJBdGxhcyAmJiB0aGlzLl9jaGFyQXRsYXMuZHJhdyhcbiAgICAgIHRoaXMuX2N0eCxcbiAgICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIsXG4gICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICB5ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCArIHRoaXMuX3NjYWxlZENoYXJUb3BcbiAgICApO1xuXG4gICAgaWYgKCFhdGxhc0RpZERyYXcpIHtcbiAgICAgIHRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKHRlcm1pbmFsLCBjZWxsLCB4LCB5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRHJhd3Mgb25lIG9yIG1vcmUgY2hhcmFjdGVycyBhdCBvbmUgb3IgbW9yZSBjZWxscy4gVGhlIGNoYXJhY3RlcihzKSB3aWxsIGJlXG4gICAqIGNsaXBwZWQgdG8gZW5zdXJlIHRoYXQgdGhleSBmaXQgd2l0aCB0aGUgY2VsbChzKSwgaW5jbHVkaW5nIHRoZSBjZWxsIHRvIHRoZVxuICAgKiByaWdodCBpZiB0aGUgbGFzdCBjaGFyYWN0ZXIgaXMgYSB3aWRlIGNoYXJhY3Rlci5cbiAgICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGNoYXJzIFRoZSBjaGFyYWN0ZXIuXG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIGNoYXJhY3Rlci5cbiAgICogQHBhcmFtIGZnIFRoZSBmb3JlZ3JvdW5kIGNvbG9yLCBpbiB0aGUgZm9ybWF0IHN0b3JlZCB3aXRoaW4gdGhlIGF0dHJpYnV0ZXMuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZHJhdyBhdC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBkcmF3IGF0LlxuICAgKi9cbiAgcHJpdmF0ZSBfZHJhd1VuY2FjaGVkQ2hhcnModGVybWluYWw6IElUZXJtaW5hbCwgY2VsbDogSUNlbGxEYXRhLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZvbnQgPSB0aGlzLl9nZXRGb250KHRlcm1pbmFsLCBjZWxsLmlzQm9sZCgpICYmIHRlcm1pbmFsLm9wdGlvbnMuZW5hYmxlQm9sZCwgISFjZWxsLmlzSXRhbGljKCkpO1xuICAgIHRoaXMuX2N0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuICAgIGlmIChjZWxsLmlzSW52ZXJzZSgpKSB7XG4gICAgICBpZiAoY2VsbC5pc0JnRGVmYXVsdCgpKSB7XG4gICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1JHQigpKSB7XG4gICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0QmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbY2VsbC5nZXRCZ0NvbG9yKCldLmNzcztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNlbGwuaXNGZ0RlZmF1bHQoKSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzRmdSR0IoKSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEZnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGZnID0gY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgICAgIGlmICh0ZXJtaW5hbC5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgZmcgPCA4KSB7XG4gICAgICAgICAgZmcgKz0gODtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbZmddLmNzcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9jbGlwUm93KHRlcm1pbmFsLCB5KTtcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgdGhpcy5fY3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuICAgIC8vIERyYXcgdGhlIGNoYXJhY3RlclxuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsaXBzIGEgcm93IHRvIGVuc3VyZSBubyBwaXhlbHMgd2lsbCBiZSBkcmF3biBvdXRzaWRlIHRoZSBjZWxscyBpbiB0aGUgcm93LlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGNsaXAuXG4gICAqL1xuICBwcml2YXRlIF9jbGlwUm93KHRlcm1pbmFsOiBJVGVybWluYWwsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLl9jdHgucmVjdChcbiAgICAgICAgMCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHRlcm1pbmFsLmNvbHMgKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIHRoaXMuX2N0eC5jbGlwKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBmb250LlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gaXNCb2xkIElmIHdlIHNob3VsZCB1c2UgdGhlIGJvbGQgZm9udFdlaWdodC5cbiAgICovXG4gIHByb3RlY3RlZCBfZ2V0Rm9udCh0ZXJtaW5hbDogSVRlcm1pbmFsLCBpc0JvbGQ6IGJvb2xlYW4sIGlzSXRhbGljOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBjb25zdCBmb250V2VpZ2h0ID0gaXNCb2xkID8gdGVybWluYWwub3B0aW9ucy5mb250V2VpZ2h0Qm9sZCA6IHRlcm1pbmFsLm9wdGlvbnMuZm9udFdlaWdodDtcbiAgICBjb25zdCBmb250U3R5bGUgPSBpc0l0YWxpYyA/ICdpdGFsaWMnIDogJyc7XG5cbiAgICByZXR1cm4gYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7dGVybWluYWwub3B0aW9ucy5mb250U2l6ZSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfXB4ICR7dGVybWluYWwub3B0aW9ucy5mb250RmFtaWx5fWA7XG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgSVRlcm1pbmFsLCBJQnVmZmVyTGluZSwgSUNlbGxEYXRhLCBDaGFyRGF0YSB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSwgSUNoYXJhY3RlckpvaW5lciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEsIENvbnRlbnQsIEF0dHJpYnV0ZURhdGEgfSBmcm9tICcuLi9CdWZmZXJMaW5lJztcbmltcG9ydCB7IFdISVRFU1BBQ0VfQ0VMTF9DSEFSIH0gZnJvbSAnLi4vQnVmZmVyJztcblxuZXhwb3J0IGNsYXNzIEpvaW5lZENlbGxEYXRhIGV4dGVuZHMgQXR0cmlidXRlRGF0YSBpbXBsZW1lbnRzIElDZWxsRGF0YSB7XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIC8vIC5jb250ZW50IGNhcnJpZXMgbm8gbWVhbmluZyBmb3Igam9pbmVkIENlbGxEYXRhLCBzaW1wbHkgbnVsbGlmeSBpdFxuICAvLyB0aHVzIHdlIGhhdmUgdG8gb3ZlcmxvYWQgYWxsIG90aGVyIC5jb250ZW50IGFjY2Vzc29yc1xuICBwdWJsaWMgY29udGVudDogbnVtYmVyID0gMDtcbiAgcHVibGljIGZnOiBudW1iZXI7XG4gIHB1YmxpYyBiZzogbnVtYmVyO1xuICBwdWJsaWMgY29tYmluZWREYXRhOiBzdHJpbmcgPSAnJztcblxuICBjb25zdHJ1Y3RvcihmaXJzdENlbGw6IElDZWxsRGF0YSwgY2hhcnM6IHN0cmluZywgd2lkdGg6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5mZyA9IGZpcnN0Q2VsbC5mZztcbiAgICB0aGlzLmJnID0gZmlyc3RDZWxsLmJnO1xuICAgIHRoaXMuY29tYmluZWREYXRhID0gY2hhcnM7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBpc0NvbWJpbmVkKCk6IG51bWJlciB7XG4gICAgLy8gYWx3YXlzIG1hcmsgam9pbmVkIGNlbGwgZGF0YSBhcyBjb21iaW5lZFxuICAgIHJldHVybiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hhcnMoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb21iaW5lZERhdGE7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29kZSgpOiBudW1iZXIge1xuICAgIC8vIGNvZGUgYWx3YXlzIGdldHMgdGhlIGhpZ2hlc3QgcG9zc2libGUgZmFrZSBjb2RlcG9pbnQgKHJlYWQgYXMgLTEpXG4gICAgLy8gdGhpcyBpcyBuZWVkZWQgYXMgY29kZSBpcyB1c2VkIGJ5IGNhY2hlcyBhcyBpZGVudGlmaWVyXG4gICAgcmV0dXJuIDB4MUZGRkZGO1xuICB9XG5cbiAgcHVibGljIHNldEZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgcHVibGljIGdldEFzQ2hhckRhdGEoKTogQ2hhckRhdGEge1xuICAgIHJldHVybiBbdGhpcy5mZywgdGhpcy5nZXRDaGFycygpLCB0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0Q29kZSgpXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgaW1wbGVtZW50cyBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkge1xuXG4gIHByaXZhdGUgX2NoYXJhY3RlckpvaW5lcnM6IElDaGFyYWN0ZXJKb2luZXJbXSA9IFtdO1xuICBwcml2YXRlIF9uZXh0Q2hhcmFjdGVySm9pbmVySWQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3Rlcm1pbmFsOiBJVGVybWluYWwpIHtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiAodGV4dDogc3RyaW5nKSA9PiBbbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXIge1xuICAgIGNvbnN0IGpvaW5lcjogSUNoYXJhY3RlckpvaW5lciA9IHtcbiAgICAgIGlkOiB0aGlzLl9uZXh0Q2hhcmFjdGVySm9pbmVySWQrKyxcbiAgICAgIGhhbmRsZXJcbiAgICB9O1xuXG4gICAgdGhpcy5fY2hhcmFjdGVySm9pbmVycy5wdXNoKGpvaW5lcik7XG4gICAgcmV0dXJuIGpvaW5lci5pZDtcbiAgfVxuXG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9jaGFyYWN0ZXJKb2luZXJzW2ldLmlkID09PSBqb2luZXJJZCkge1xuICAgICAgICB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGdldEpvaW5lZENoYXJhY3RlcnMocm93OiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdW10ge1xuICAgIGlmICh0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgaWYgKGxpbmUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgcmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcbiAgICBjb25zdCBsaW5lU3RyID0gbGluZS50cmFuc2xhdGVUb1N0cmluZyh0cnVlKTtcblxuICAgIC8vIEJlY2F1c2Ugc29tZSBjZWxscyBjYW4gYmUgcmVwcmVzZW50ZWQgYnkgbXVsdGlwbGUgamF2YXNjcmlwdCBjaGFyYWN0ZXJzLFxuICAgIC8vIHdlIHRyYWNrIHRoZSBjZWxsIGFuZCB0aGUgc3RyaW5nIGluZGV4ZXMgc2VwYXJhdGVseS4gVGhpcyBhbGxvd3MgdXMgdG9cbiAgICAvLyB0cmFuc2xhdGUgdGhlIHN0cmluZyByYW5nZXMgd2UgZ2V0IGZyb20gdGhlIGpvaW5lcnMgYmFjayBpbnRvIGNlbGwgcmFuZ2VzXG4gICAgLy8gZm9yIHVzZSB3aGVuIHJlbmRlcmluZ1xuICAgIGxldCByYW5nZVN0YXJ0Q29sdW1uID0gMDtcbiAgICBsZXQgY3VycmVudFN0cmluZ0luZGV4ID0gMDtcbiAgICBsZXQgcmFuZ2VTdGFydFN0cmluZ0luZGV4ID0gMDtcbiAgICBsZXQgcmFuZ2VBdHRyRkcgPSBsaW5lLmdldEZnKDApO1xuICAgIGxldCByYW5nZUF0dHJCRyA9IGxpbmUuZ2V0QmcoMCk7XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGxpbmUuZ2V0VHJpbW1lZExlbmd0aCgpOyB4KyspIHtcbiAgICAgIGxpbmUubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpO1xuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBpcyBvZiB3aWR0aCAwLCBza2lwIGl0LlxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5kIG9mIHJhbmdlXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuZmcgIT09IHJhbmdlQXR0ckZHIHx8IHRoaXMuX3dvcmtDZWxsLmJnICE9PSByYW5nZUF0dHJCRykge1xuICAgICAgICAvLyBJZiB3ZSBlbmRlZCB1cCB3aXRoIGEgc2VxdWVuY2Ugb2YgbW9yZSB0aGFuIG9uZSBjaGFyYWN0ZXIsXG4gICAgICAgIC8vIGxvb2sgZm9yIHJhbmdlcyB0byBqb2luLlxuICAgICAgICBpZiAoeCAtIHJhbmdlU3RhcnRDb2x1bW4gPiAxKSB7XG4gICAgICAgICAgY29uc3Qgam9pbmVkUmFuZ2VzID0gdGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKFxuICAgICAgICAgICAgbGluZVN0cixcbiAgICAgICAgICAgIHJhbmdlU3RhcnRTdHJpbmdJbmRleCxcbiAgICAgICAgICAgIGN1cnJlbnRTdHJpbmdJbmRleCxcbiAgICAgICAgICAgIGxpbmUsXG4gICAgICAgICAgICByYW5nZVN0YXJ0Q29sdW1uXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpvaW5lZFJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmFuZ2VzLnB1c2goam9pbmVkUmFuZ2VzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNldCBvdXIgbWFya2VycyBmb3IgYSBuZXcgcmFuZ2UuXG4gICAgICAgIHJhbmdlU3RhcnRDb2x1bW4gPSB4O1xuICAgICAgICByYW5nZVN0YXJ0U3RyaW5nSW5kZXggPSBjdXJyZW50U3RyaW5nSW5kZXg7XG4gICAgICAgIHJhbmdlQXR0ckZHID0gdGhpcy5fd29ya0NlbGwuZmc7XG4gICAgICAgIHJhbmdlQXR0ckJHID0gdGhpcy5fd29ya0NlbGwuYmc7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRTdHJpbmdJbmRleCArPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aCB8fCBXSElURVNQQUNFX0NFTExfQ0hBUi5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gUHJvY2VzcyBhbnkgdHJhaWxpbmcgcmFuZ2VzLlxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5jb2xzIC0gcmFuZ2VTdGFydENvbHVtbiA+IDEpIHtcbiAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgbGluZVN0cixcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4LFxuICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgIGxpbmUsXG4gICAgICAgIHJhbmdlU3RhcnRDb2x1bW5cbiAgICAgICk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpvaW5lZFJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByYW5nZXMucHVzaChqb2luZWRSYW5nZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBzZWdtZW50IG9mIGEgbGluZSBvZiB0ZXh0LCBmaW5kIGFsbCByYW5nZXMgb2YgdGV4dCB0aGF0IHNob3VsZCBiZVxuICAgKiBqb2luZWQgaW4gYSBzaW5nbGUgcmVuZGVyaW5nIHVuaXQuIFJhbmdlcyBhcmUgaW50ZXJuYWxseSBjb252ZXJ0ZWQgdG9cbiAgICogY29sdW1uIHJhbmdlcywgcmF0aGVyIHRoYW4gc3RyaW5nIHJhbmdlcy5cbiAgICogQHBhcmFtIGxpbmUgU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmdWxsIGxpbmUgb2YgdGV4dFxuICAgKiBAcGFyYW0gc3RhcnRJbmRleCBTdGFydCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGluY2x1c2l2ZSlcbiAgICogQHBhcmFtIGVuZEluZGV4IEVuZCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGV4Y2x1c2l2ZSlcbiAgICovXG4gIHByaXZhdGUgX2dldEpvaW5lZFJhbmdlcyhsaW5lOiBzdHJpbmcsIHN0YXJ0SW5kZXg6IG51bWJlciwgZW5kSW5kZXg6IG51bWJlciwgbGluZURhdGE6IElCdWZmZXJMaW5lLCBzdGFydENvbDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdIHtcbiAgICBjb25zdCB0ZXh0ID0gbGluZS5zdWJzdHJpbmcoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuICAgIC8vIEF0IHRoaXMgcG9pbnQgd2UgYWxyZWFkeSBrbm93IHRoYXQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGpvaW5lciBzb1xuICAgIC8vIHdlIGNhbiBqdXN0IHB1bGwgaXRzIHZhbHVlIGFuZCBhc3NpZ24gaXQgZGlyZWN0bHkgcmF0aGVyIHRoYW5cbiAgICAvLyBtZXJnaW5nIGl0IGludG8gYW4gZW1wdHkgYXJyYXksIHdoaWNoIGluY3VycyB1bm5lY2Vzc2FyeSB3cml0ZXMuXG4gICAgY29uc3Qgam9pbmVkUmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzWzBdLmhhbmRsZXIodGV4dCk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBXZSBtZXJnZSBhbnkgb3ZlcmxhcHBpbmcgcmFuZ2VzIGFjcm9zcyB0aGUgZGlmZmVyZW50IGpvaW5lcnNcbiAgICAgIGNvbnN0IGpvaW5lclJhbmdlcyA9IHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbaV0uaGFuZGxlcih0ZXh0KTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgam9pbmVyUmFuZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIENoYXJhY3RlckpvaW5lclJlZ2lzdHJ5Ll9tZXJnZVJhbmdlcyhqb2luZWRSYW5nZXMsIGpvaW5lclJhbmdlc1tqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhqb2luZWRSYW5nZXMsIGxpbmVEYXRhLCBzdGFydENvbCk7XG4gICAgcmV0dXJuIGpvaW5lZFJhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgcmFuZ2VzIGluLXBsYWNlIHRvIGFkanVzdCBmb3IgdmFyaWF0aW9ucyBiZXR3ZWVuXG4gICAqIHN0cmluZyBsZW5ndGggYW5kIGNlbGwgd2lkdGggc28gdGhhdCB0aGUgcmFuZ2UgcmVwcmVzZW50cyBhIGNlbGwgcmFuZ2UsXG4gICAqIHJhdGhlciB0aGFuIHRoZSBzdHJpbmcgcmFuZ2UgdGhlIGpvaW5lciBwcm92aWRlcy5cbiAgICogQHBhcmFtIHJhbmdlcyBTdHJpbmcgcmFuZ2VzIGNvbnRhaW5pbmcgc3RhcnQgKGluY2x1c2l2ZSkgYW5kIGVuZCAoZXhjbHVzaXZlKSBpbmRleFxuICAgKiBAcGFyYW0gbGluZSBDZWxsIGRhdGEgZm9yIHRoZSByZWxldmFudCBsaW5lIGluIHRoZSB0ZXJtaW5hbFxuICAgKiBAcGFyYW0gc3RhcnRDb2wgT2Zmc2V0IHdpdGhpbiB0aGUgbGluZSB0byBzdGFydCBmcm9tXG4gICAqL1xuICBwcml2YXRlIF9zdHJpbmdSYW5nZXNUb0NlbGxSYW5nZXMocmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10sIGxpbmU6IElCdWZmZXJMaW5lLCBzdGFydENvbDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGN1cnJlbnRSYW5nZUluZGV4ID0gMDtcbiAgICBsZXQgY3VycmVudFJhbmdlU3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBjdXJyZW50U3RyaW5nSW5kZXggPSAwO1xuICAgIGxldCBjdXJyZW50UmFuZ2UgPSByYW5nZXNbY3VycmVudFJhbmdlSW5kZXhdO1xuXG4gICAgLy8gSWYgd2UgZ290IHRocm91Z2ggYWxsIG9mIHRoZSByYW5nZXMsIHN0b3Agc2VhcmNoaW5nXG4gICAgaWYgKCFjdXJyZW50UmFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gc3RhcnRDb2w7IHggPCB0aGlzLl90ZXJtaW5hbC5jb2xzOyB4KyspIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gbGluZS5nZXRXaWR0aCh4KTtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGxpbmUuZ2V0U3RyaW5nKHgpLmxlbmd0aCB8fCBXSElURVNQQUNFX0NFTExfQ0hBUi5sZW5ndGg7XG5cbiAgICAgIC8vIFdlIHNraXAgemVyby13aWR0aCBjaGFyYWN0ZXJzIHdoZW4gY3JlYXRpbmcgdGhlIHN0cmluZyB0byBqb2luIHRoZSB0ZXh0XG4gICAgICAvLyBzbyB3ZSBkbyB0aGUgc2FtZSBoZXJlXG4gICAgICBpZiAod2lkdGggPT09IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlXG4gICAgICBpZiAoIWN1cnJlbnRSYW5nZVN0YXJ0ZWQgJiYgY3VycmVudFJhbmdlWzBdIDw9IGN1cnJlbnRTdHJpbmdJbmRleCkge1xuICAgICAgICBjdXJyZW50UmFuZ2VbMF0gPSB4O1xuICAgICAgICBjdXJyZW50UmFuZ2VTdGFydGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHRoZSBlbmQgb2YgdGhlIHJhbmdlXG4gICAgICBpZiAoY3VycmVudFJhbmdlWzFdIDw9IGN1cnJlbnRTdHJpbmdJbmRleCkge1xuICAgICAgICBjdXJyZW50UmFuZ2VbMV0gPSB4O1xuXG4gICAgICAgIC8vIFdlJ3JlIGZpbmlzaGVkIHdpdGggdGhpcyByYW5nZSwgc28gd2UgbW92ZSB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgY3VycmVudFJhbmdlID0gcmFuZ2VzWysrY3VycmVudFJhbmdlSW5kZXhdO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBtb3JlIHJhbmdlcyBsZWZ0LCBzdG9wIHNlYXJjaGluZ1xuICAgICAgICBpZiAoIWN1cnJlbnRSYW5nZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmFuZ2VzIGNhbiBiZSBvbiBhZGphY2VudCBjaGFyYWN0ZXJzLiBCZWNhdXNlIHRoZSBlbmQgaW5kZXggb2YgdGhlXG4gICAgICAgIC8vIHJhbmdlcyBhcmUgZXhjbHVzaXZlLCB0aGlzIG1lYW5zIHRoYXQgdGhlIGluZGV4IGZvciB0aGUgc3RhcnQgb2YgYVxuICAgICAgICAvLyByYW5nZSBjYW4gYmUgdGhlIHNhbWUgYXMgdGhlIGVuZCBpbmRleCBvZiB0aGUgcHJldmlvdXMgcmFuZ2UuIFRvXG4gICAgICAgIC8vIGFjY291bnQgZm9yIHRoZSBzdGFydCBvZiB0aGUgbmV4dCByYW5nZSwgd2UgY2hlY2sgaGVyZSBqdXN0IGluIGNhc2UuXG4gICAgICAgIGlmIChjdXJyZW50UmFuZ2VbMF0gPD0gY3VycmVudFN0cmluZ0luZGV4KSB7XG4gICAgICAgICAgY3VycmVudFJhbmdlWzBdID0geDtcbiAgICAgICAgICBjdXJyZW50UmFuZ2VTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50UmFuZ2VTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHRoZSBzdHJpbmcgaW5kZXggYmFzZWQgb24gdGhlIGNoYXJhY3RlciBsZW5ndGggdG8gbGluZSB1cCB3aXRoXG4gICAgICAvLyB0aGUgY29sdW1uIGFkanVzdG1lbnRcbiAgICAgIGN1cnJlbnRTdHJpbmdJbmRleCArPSBsZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgc3RpbGwgYSByYW5nZSBsZWZ0IGF0IHRoZSBlbmQsIGl0IG11c3QgZXh0ZW5kIGFsbCB0aGUgd2F5IHRvXG4gICAgLy8gdGhlIGVuZCBvZiB0aGUgbGluZS5cbiAgICBpZiAoY3VycmVudFJhbmdlKSB7XG4gICAgICBjdXJyZW50UmFuZ2VbMV0gPSB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlIHByb3ZpZGVkIHN0YXJ0IGFuZCBlbmQgaW50byB0aGUgbGlzdCBvZlxuICAgKiBleGlzdGluZyByYW5nZXMuIFRoZSBtZXJnZSBpcyBkb25lIGluIHBsYWNlIG9uIHRoZSBleGlzdGluZyByYW5nZSBmb3JcbiAgICogcGVyZm9ybWFuY2UgYW5kIGlzIGFsc28gcmV0dXJuZWQuXG4gICAqIEBwYXJhbSByYW5nZXMgRXhpc3RpbmcgcmFuZ2UgbGlzdFxuICAgKiBAcGFyYW0gbmV3UmFuZ2UgVHVwbGUgb2YgdHdvIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBuZXcgcmFuZ2UgdG8gbWVyZ2UgaW4uXG4gICAqIEByZXR1cm5zIFRoZSByYW5nZXMgaW5wdXQgd2l0aCB0aGUgbmV3IHJhbmdlIG1lcmdlZCBpbiBwbGFjZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX21lcmdlUmFuZ2VzKHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdLCBuZXdSYW5nZTogW251bWJlciwgbnVtYmVyXSk6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgbGV0IGluUmFuZ2UgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICBpZiAoIWluUmFuZ2UpIHtcbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzBdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAxOiBOZXcgcmFuZ2UgaXMgYmVmb3JlIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICByYW5nZXMuc3BsaWNlKGksIDAsIG5ld1JhbmdlKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAyOiBOZXcgcmFuZ2UgaXMgZWl0aGVyIHdob2xseSBjb250YWluZWQgd2l0aGluIHRoZVxuICAgICAgICAgIC8vIHNlYXJjaCByYW5nZSBvciBvdmVybGFwcyB3aXRoIHRoZSBmcm9udCBvZiBpdFxuICAgICAgICAgIHJhbmdlWzBdID0gTWF0aC5taW4obmV3UmFuZ2VbMF0sIHJhbmdlWzBdKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzBdIDwgcmFuZ2VbMV0pIHtcbiAgICAgICAgICAvLyBDYXNlIDM6IE5ldyByYW5nZSBlaXRoZXIgd2hvbGx5IGNvbnRhaW5zIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICAvLyBvciBvdmVybGFwcyB3aXRoIHRoZSBlbmQgb2YgaXRcbiAgICAgICAgICByYW5nZVswXSA9IE1hdGgubWluKG5ld1JhbmdlWzBdLCByYW5nZVswXSk7XG4gICAgICAgICAgaW5SYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXNlIDQ6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIHNlYXJjaCByYW5nZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVswXSkge1xuICAgICAgICAgIC8vIENhc2UgNTogTmV3IHJhbmdlIGV4dGVuZHMgZnJvbSBwcmV2aW91cyByYW5nZSBidXQgZG9lc24ndFxuICAgICAgICAgIC8vIHJlYWNoIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgIHJhbmdlc1tpIC0gMV1bMV0gPSBuZXdSYW5nZVsxXTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSA2OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHBydmlvdXMgcmFuZ2UgaW50byB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IHJhbmdlXG4gICAgICAgICAgcmFuZ2VzW2kgLSAxXVsxXSA9IE1hdGgubWF4KG5ld1JhbmdlWzFdLCByYW5nZVsxXSk7XG4gICAgICAgICAgcmFuZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBpblJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhc2UgNzogTmV3IHJhbmdlIGV4dGVuZHMgZnJvbSBwcmV2aW91cyByYW5nZSBwYXN0IHRoZVxuICAgICAgICAvLyBlbmQgb2YgdGhlIGN1cnJlbnQgcmFuZ2VcbiAgICAgICAgcmFuZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpblJhbmdlKSB7XG4gICAgICAvLyBDYXNlIDg6IE5ldyByYW5nZSBleHRlbmRzIHBhc3QgdGhlIGxhc3QgZXhpc3RpbmcgcmFuZ2VcbiAgICAgIHJhbmdlc1tyYW5nZXMubGVuZ3RoIC0gMV1bMV0gPSBuZXdSYW5nZVsxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FzZSA5OiBOZXcgcmFuZ2Ugc3RhcnRzIGFmdGVyIHRoZSBsYXN0IGV4aXN0aW5nIHJhbmdlXG4gICAgICByYW5nZXMucHVzaChuZXdSYW5nZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlcztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ29sb3JNYW5hZ2VyLCBJQ29sb3IsIElDb2xvclNldCB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgSVRoZW1lIH0gZnJvbSAneHRlcm0nO1xuXG5jb25zdCBERUZBVUxUX0ZPUkVHUk9VTkQgPSBmcm9tSGV4KCcjZmZmZmZmJyk7XG5jb25zdCBERUZBVUxUX0JBQ0tHUk9VTkQgPSBmcm9tSGV4KCcjMDAwMDAwJyk7XG5jb25zdCBERUZBVUxUX0NVUlNPUiA9IGZyb21IZXgoJyNmZmZmZmYnKTtcbmNvbnN0IERFRkFVTFRfQ1VSU09SX0FDQ0VOVCA9IGZyb21IZXgoJyMwMDAwMDAnKTtcbmNvbnN0IERFRkFVTFRfU0VMRUNUSU9OID0ge1xuICBjc3M6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyknLFxuICByZ2JhOiAweEZGRkZGRjc3XG59O1xuXG4vLyBBbiBJSUZFIHRvIGdlbmVyYXRlIERFRkFVTFRfQU5TSV9DT0xPUlMuIERvIG5vdCBtdXRhdGUgREVGQVVMVF9BTlNJX0NPTE9SUywgaW5zdGVhZCBtYWtlIGEgY29weVxuLy8gYW5kIG11dGF0ZSB0aGF0LlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQU5TSV9DT0xPUlMgPSAoKCkgPT4ge1xuICBjb25zdCBjb2xvcnMgPSBbXG4gICAgLy8gZGFyazpcbiAgICBmcm9tSGV4KCcjMmUzNDM2JyksXG4gICAgZnJvbUhleCgnI2NjMDAwMCcpLFxuICAgIGZyb21IZXgoJyM0ZTlhMDYnKSxcbiAgICBmcm9tSGV4KCcjYzRhMDAwJyksXG4gICAgZnJvbUhleCgnIzM0NjVhNCcpLFxuICAgIGZyb21IZXgoJyM3NTUwN2InKSxcbiAgICBmcm9tSGV4KCcjMDY5ODlhJyksXG4gICAgZnJvbUhleCgnI2QzZDdjZicpLFxuICAgIC8vIGJyaWdodDpcbiAgICBmcm9tSGV4KCcjNTU1NzUzJyksXG4gICAgZnJvbUhleCgnI2VmMjkyOScpLFxuICAgIGZyb21IZXgoJyM4YWUyMzQnKSxcbiAgICBmcm9tSGV4KCcjZmNlOTRmJyksXG4gICAgZnJvbUhleCgnIzcyOWZjZicpLFxuICAgIGZyb21IZXgoJyNhZDdmYTgnKSxcbiAgICBmcm9tSGV4KCcjMzRlMmUyJyksXG4gICAgZnJvbUhleCgnI2VlZWVlYycpXG4gIF07XG5cbiAgLy8gRmlsbCBpbiB0aGUgcmVtYWluaW5nIDI0MCBBTlNJIGNvbG9ycy5cbiAgLy8gR2VuZXJhdGUgY29sb3JzICgxNi0yMzEpXG4gIGNvbnN0IHYgPSBbMHgwMCwgMHg1ZiwgMHg4NywgMHhhZiwgMHhkNywgMHhmZl07XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjE2OyBpKyspIHtcbiAgICBjb25zdCByID0gdlsoaSAvIDM2KSAlIDYgfCAwXTtcbiAgICBjb25zdCBnID0gdlsoaSAvIDYpICUgNiB8IDBdO1xuICAgIGNvbnN0IGIgPSB2W2kgJSA2XTtcbiAgICBjb2xvcnMucHVzaCh7XG4gICAgICBjc3M6IGAjJHt0b1BhZGRlZEhleChyKX0ke3RvUGFkZGVkSGV4KGcpfSR7dG9QYWRkZWRIZXgoYil9YCxcbiAgICAgIC8vIFVzZSA+Pj4gMCB0byBmb3JjZSBhIGNvbnZlcnNpb24gdG8gYW4gdW5zaWduZWQgaW50XG4gICAgICByZ2JhOiAoKHIgPDwgMjQpIHwgKGcgPDwgMTYpIHwgKGIgPDwgOCkgfCAweEZGKSA+Pj4gMFxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgZ3JleXMgKDIzMi0yNTUpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkrKykge1xuICAgIGNvbnN0IGMgPSA4ICsgaSAqIDEwO1xuICAgIGNvbnN0IGNoID0gdG9QYWRkZWRIZXgoYyk7XG4gICAgY29sb3JzLnB1c2goe1xuICAgICAgY3NzOiBgIyR7Y2h9JHtjaH0ke2NofWAsXG4gICAgICByZ2JhOiAoKGMgPDwgMjQpIHwgKGMgPDwgMTYpIHwgKGMgPDwgOCkgfCAweEZGKSA+Pj4gMFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGNvbG9ycztcbn0pKCk7XG5cbmZ1bmN0aW9uIGZyb21IZXgoY3NzOiBzdHJpbmcpOiBJQ29sb3Ige1xuICByZXR1cm4ge1xuICAgIGNzcyxcbiAgICByZ2JhOiBwYXJzZUludChjc3Muc2xpY2UoMSksIDE2KSA8PCA4IHwgMHhGRlxuICB9O1xufVxuXG5mdW5jdGlvbiB0b1BhZGRlZEhleChjOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzID0gYy50b1N0cmluZygxNik7XG4gIHJldHVybiBzLmxlbmd0aCA8IDIgPyAnMCcgKyBzIDogcztcbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGEgdGVybWluYWwncyBjb2xvcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb2xvck1hbmFnZXIgaW1wbGVtZW50cyBJQ29sb3JNYW5hZ2VyIHtcbiAgcHVibGljIGNvbG9yczogSUNvbG9yU2V0O1xuICBwcml2YXRlIF9jdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHJpdmF0ZSBfbGl0bXVzQ29sb3I6IENhbnZhc0dyYWRpZW50O1xuXG4gIGNvbnN0cnVjdG9yKGRvY3VtZW50OiBEb2N1bWVudCwgcHVibGljIGFsbG93VHJhbnNwYXJlbmN5OiBib29sZWFuKSB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gMTtcbiAgICBjYW52YXMuaGVpZ2h0ID0gMTtcbiAgICB0aGlzLl9jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB0aGlzLl9jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2NvcHknO1xuICAgIHRoaXMuX2xpdG11c0NvbG9yID0gdGhpcy5fY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDEsIDEpO1xuICAgIHRoaXMuY29sb3JzID0ge1xuICAgICAgZm9yZWdyb3VuZDogREVGQVVMVF9GT1JFR1JPVU5ELFxuICAgICAgYmFja2dyb3VuZDogREVGQVVMVF9CQUNLR1JPVU5ELFxuICAgICAgY3Vyc29yOiBERUZBVUxUX0NVUlNPUixcbiAgICAgIGN1cnNvckFjY2VudDogREVGQVVMVF9DVVJTT1JfQUNDRU5ULFxuICAgICAgc2VsZWN0aW9uOiBERUZBVUxUX1NFTEVDVElPTixcbiAgICAgIGFuc2k6IERFRkFVTFRfQU5TSV9DT0xPUlMuc2xpY2UoKVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdGVybWluYWwncyB0aGVtZS5cbiAgICogQHBhcmFtIHRoZW1lIFRoZSAgdGhlbWUgdG8gdXNlLiBJZiBhIHBhcnRpYWwgdGhlbWUgaXMgcHJvdmlkZWQgdGhlbiBkZWZhdWx0XG4gICAqIGNvbG9ycyB3aWxsIGJlIHVzZWQgd2hlcmUgY29sb3JzIGFyZSBub3QgZGVmaW5lZC5cbiAgICovXG4gIHB1YmxpYyBzZXRUaGVtZSh0aGVtZTogSVRoZW1lKTogdm9pZCB7XG4gICAgdGhpcy5jb2xvcnMuZm9yZWdyb3VuZCA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuZm9yZWdyb3VuZCwgREVGQVVMVF9GT1JFR1JPVU5EKTtcbiAgICB0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5iYWNrZ3JvdW5kLCBERUZBVUxUX0JBQ0tHUk9VTkQpO1xuICAgIHRoaXMuY29sb3JzLmN1cnNvciA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuY3Vyc29yLCBERUZBVUxUX0NVUlNPUiwgdHJ1ZSk7XG4gICAgdGhpcy5jb2xvcnMuY3Vyc29yQWNjZW50ID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5jdXJzb3JBY2NlbnQsIERFRkFVTFRfQ1VSU09SX0FDQ0VOVCwgdHJ1ZSk7XG4gICAgdGhpcy5jb2xvcnMuc2VsZWN0aW9uID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5zZWxlY3Rpb24sIERFRkFVTFRfU0VMRUNUSU9OLCB0cnVlKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzBdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5ibGFjaywgREVGQVVMVF9BTlNJX0NPTE9SU1swXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUucmVkLCBERUZBVUxUX0FOU0lfQ09MT1JTWzFdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzJdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5ncmVlbiwgREVGQVVMVF9BTlNJX0NPTE9SU1syXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVszXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUueWVsbG93LCBERUZBVUxUX0FOU0lfQ09MT1JTWzNdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzRdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5ibHVlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzRdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzVdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5tYWdlbnRhLCBERUZBVUxUX0FOU0lfQ09MT1JTWzVdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzZdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5jeWFuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzZdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzddID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS53aGl0ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1s3XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs4XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0QmxhY2ssIERFRkFVTFRfQU5TSV9DT0xPUlNbOF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbOV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodFJlZCwgREVGQVVMVF9BTlNJX0NPTE9SU1s5XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxMF0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodEdyZWVuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzEwXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxMV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodFllbGxvdywgREVGQVVMVF9BTlNJX0NPTE9SU1sxMV0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTJdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRCbHVlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzEyXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxM10gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodE1hZ2VudGEsIERFRkFVTFRfQU5TSV9DT0xPUlNbMTNdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzE0XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0Q3lhbiwgREVGQVVMVF9BTlNJX0NPTE9SU1sxNF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTVdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRXaGl0ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1sxNV0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfcGFyc2VDb2xvcihcbiAgICBjc3M6IHN0cmluZyxcbiAgICBmYWxsYmFjazogSUNvbG9yLFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiBib29sZWFuID0gdGhpcy5hbGxvd1RyYW5zcGFyZW5jeVxuICApOiBJQ29sb3Ige1xuICAgIGlmICghY3NzKSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxuXG4gICAgLy8gSWYgcGFyc2luZyB0aGUgdmFsdWUgcmVzdWx0cyBpbiBmYWlsdXJlLCB0aGVuIGl0IG11c3QgYmUgaWdub3JlZCwgYW5kIHRoZSBhdHRyaWJ1dGUgbXVzdFxuICAgIC8vIHJldGFpbiBpdHMgcHJldmlvdXMgdmFsdWUuXG4gICAgLy8gLS0gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY2FudmFzLmh0bWwjZmlsbC1hbmQtc3Ryb2tlLXN0eWxlc1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9saXRtdXNDb2xvcjtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gY3NzO1xuICAgIGlmICh0eXBlb2YgdGhpcy5fY3R4LmZpbGxTdHlsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ29sb3I6ICR7Y3NzfSBpcyBpbnZhbGlkIHVzaW5nIGZhbGxiYWNrICR7ZmFsbGJhY2suY3NzfWApO1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5fY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuXG4gICAgaWYgKCFhbGxvd1RyYW5zcGFyZW5jeSAmJiBkYXRhWzNdICE9PSAweEZGKSB7XG4gICAgICAvLyBJZGVhbGx5IHdlJ2QganVzdCBpZ25vcmUgdGhlIGFscGhhIGNoYW5uZWwsIGJ1dC4uLlxuICAgICAgLy9cbiAgICAgIC8vIEJyb3dzZXJzIG1heSBub3QgZ2l2ZSBiYWNrIGV4YWN0bHkgdGhlIHNhbWUgUkdCIHZhbHVlcyB3ZSBwdXQgaW4sIGJlY2F1c2UgbW9zdC9hbGxcbiAgICAgIC8vIGNvbnZlcnQgdGhlIGNvbG9yIHRvIGEgcHJlLW11bHRpcGxpZWQgcmVwcmVzZW50YXRpb24uIGdldEltYWdlRGF0YSBjb252ZXJ0cyB0aGF0IGJhY2sgdG9cbiAgICAgIC8vIGEgdW4tcHJlbXVsdGlwbGVkIHJlcHJlc2VudGF0aW9uLCBidXQgdGhlIHByZWNpc2lvbiBsb3NzIG1heSBtYWtlIHRoZSBSR0IgY2hhbm5lbHMgdW51YWJsZVxuICAgICAgLy8gb24gdGhlaXIgb3duLlxuICAgICAgLy9cbiAgICAgIC8vIEUuZy4gSW4gQ2hyb21lICMxMjM0NTYxMCB0dXJucyBpbnRvICMxMDMwNTAxMCwgYW5kIGluIHRoZSBleHRyZW1lIGNhc2UsIDB4RkZGRkZGMDAgdHVybnNcbiAgICAgIC8vIGludG8gMHgwMDAwMDAwMC5cbiAgICAgIC8vXG4gICAgICAvLyBcIk5vdGU6IER1ZSB0byB0aGUgbG9zc3kgbmF0dXJlIG9mIGNvbnZlcnRpbmcgdG8gYW5kIGZyb20gcHJlbXVsdGlwbGllZCBhbHBoYSBjb2xvciB2YWx1ZXMsXG4gICAgICAvLyBwaXhlbHMgdGhhdCBoYXZlIGp1c3QgYmVlbiBzZXQgdXNpbmcgcHV0SW1hZ2VEYXRhKCkgbWlnaHQgYmUgcmV0dXJuZWQgdG8gYW4gZXF1aXZhbGVudFxuICAgICAgLy8gZ2V0SW1hZ2VEYXRhKCkgYXMgZGlmZmVyZW50IHZhbHVlcy5cIlxuICAgICAgLy8gLS0gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY2FudmFzLmh0bWwjcGl4ZWwtbWFuaXB1bGF0aW9uXG4gICAgICAvL1xuICAgICAgLy8gU28gbGV0J3MganVzdCB1c2UgdGhlIGZhbGxiYWNrIGNvbG9yIGluIHRoaXMgY2FzZSBpbnN0ZWFkLlxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgQ29sb3I6ICR7Y3NzfSBpcyB1c2luZyB0cmFuc3BhcmVuY3ksIGJ1dCBhbGxvd1RyYW5zcGFyZW5jeSBpcyBmYWxzZS4gYCArXG4gICAgICAgIGBVc2luZyBmYWxsYmFjayAke2ZhbGxiYWNrLmNzc30uYFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgY3NzLFxuICAgICAgcmdiYTogKGRhdGFbMF0gPDwgMjQgfCBkYXRhWzFdIDw8IDE2IHwgZGF0YVsyXSA8PCA4IHwgZGF0YVszXSkgPj4+IDBcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb2xvclNldCwgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJy4vQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElUZXJtaW5hbCwgSUNlbGxEYXRhIH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICcuLi9CdWZmZXJMaW5lJztcblxuaW50ZXJmYWNlIElDdXJzb3JTdGF0ZSB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gIHN0eWxlOiBzdHJpbmc7XG4gIHdpZHRoOiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhlIHRpbWUgYmV0d2VlbiBjdXJzb3IgYmxpbmtzLlxuICovXG5jb25zdCBCTElOS19JTlRFUlZBTCA9IDYwMDtcblxuZXhwb3J0IGNsYXNzIEN1cnNvclJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IElDdXJzb3JTdGF0ZTtcbiAgcHJpdmF0ZSBfY3Vyc29yUmVuZGVyZXJzOiB7W2tleTogc3RyaW5nXTogKHRlcm1pbmFsOiBJVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpID0+IHZvaWR9O1xuICBwcml2YXRlIF9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcjogQ3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXI7XG4gIHByaXZhdGUgX2NlbGw6IElDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHpJbmRleDogbnVtYmVyLCBjb2xvcnM6IElDb2xvclNldCkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ2N1cnNvcicsIHpJbmRleCwgdHJ1ZSwgY29sb3JzKTtcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IG51bGwsXG4gICAgICB5OiBudWxsLFxuICAgICAgaXNGb2N1c2VkOiBudWxsLFxuICAgICAgc3R5bGU6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbFxuICAgIH07XG4gICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzID0ge1xuICAgICAgJ2Jhcic6IHRoaXMuX3JlbmRlckJhckN1cnNvci5iaW5kKHRoaXMpLFxuICAgICAgJ2Jsb2NrJzogdGhpcy5fcmVuZGVyQmxvY2tDdXJzb3IuYmluZCh0aGlzKSxcbiAgICAgICd1bmRlcmxpbmUnOiB0aGlzLl9yZW5kZXJVbmRlcmxpbmVDdXJzb3IuYmluZCh0aGlzKVxuICAgIH07XG4gICAgLy8gVE9ETzogQ29uc2lkZXIgaW5pdGlhbCBvcHRpb25zPyBNYXliZSBvbk9wdGlvbnNDaGFuZ2VkIHNob3VsZCBiZSBjYWxsZWQgYXQgdGhlIGVuZCBvZiBvcGVuP1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZSh0ZXJtaW5hbDogSVRlcm1pbmFsLCBkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKHRlcm1pbmFsLCBkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IG51bGwsXG4gICAgICB5OiBudWxsLFxuICAgICAgaXNGb2N1c2VkOiBudWxsLFxuICAgICAgc3R5bGU6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgcmVzZXQodGVybWluYWw6IElUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG51bGw7XG4gICAgICB0aGlzLm9uT3B0aW9uc0NoYW5nZWQodGVybWluYWwpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIodGVybWluYWw6IElUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucGF1c2UoKTtcbiAgICB9XG4gICAgdGVybWluYWwucmVmcmVzaCh0ZXJtaW5hbC5idWZmZXIueSwgdGVybWluYWwuYnVmZmVyLnkpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXModGVybWluYWw6IElUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdW1lKHRlcm1pbmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVybWluYWwucmVmcmVzaCh0ZXJtaW5hbC5idWZmZXIueSwgdGVybWluYWwuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICBpZiAodGVybWluYWwub3B0aW9ucy5jdXJzb3JCbGluaykge1xuICAgICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG5ldyBDdXJzb3JCbGlua1N0YXRlTWFuYWdlcih0ZXJtaW5hbCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3JlbmRlcih0ZXJtaW5hbCwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG51bGw7XG4gICAgICB9XG4gICAgICAvLyBSZXF1ZXN0IGEgcmVmcmVzaCBmcm9tIHRoZSB0ZXJtaW5hbCBhcyBtYW5hZ2VtZW50IG9mIHJlbmRlcmluZyBpcyBiZWluZ1xuICAgICAgLy8gbW92ZWQgYmFjayB0byB0aGUgdGVybWluYWxcbiAgICAgIHRlcm1pbmFsLnJlZnJlc2godGVybWluYWwuYnVmZmVyLnksIHRlcm1pbmFsLmJ1ZmZlci55KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uR3JpZENoYW5nZWQodGVybWluYWw6IElUZXJtaW5hbCwgc3RhcnRSb3c6IG51bWJlciwgZW5kUm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHx8IHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmlzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9yZW5kZXIodGVybWluYWwsIGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKHRlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXIodGVybWluYWw6IElUZXJtaW5hbCwgdHJpZ2dlcmVkQnlBbmltYXRpb25GcmFtZTogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGhpZGRlblxuICAgIGlmICghdGVybWluYWwuY3Vyc29yU3RhdGUgfHwgdGVybWluYWwuY3Vyc29ySGlkZGVuKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvclkgPSB0ZXJtaW5hbC5idWZmZXIueWJhc2UgKyB0ZXJtaW5hbC5idWZmZXIueTtcbiAgICBjb25zdCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA9IGN1cnNvclkgLSB0ZXJtaW5hbC5idWZmZXIueWRpc3A7XG5cbiAgICAvLyBEb24ndCBkcmF3IHRoZSBjdXJzb3IgaWYgaXQncyBvZmYtc2NyZWVuXG4gICAgaWYgKHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZIDwgMCB8fCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA+PSB0ZXJtaW5hbC5yb3dzKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQoY3Vyc29yWSkubG9hZENlbGwodGVybWluYWwuYnVmZmVyLngsIHRoaXMuX2NlbGwpO1xuICAgIGlmICh0aGlzLl9jZWxsLmNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGVybWluYWwuaXNGb2N1c2VkKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICAgIHRoaXMuX3JlbmRlckJsdXJDdXJzb3IodGVybWluYWwsIHRlcm1pbmFsLmJ1ZmZlci54LCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy5fc3RhdGUueCA9IHRlcm1pbmFsLmJ1ZmZlci54O1xuICAgICAgdGhpcy5fc3RhdGUueSA9IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZO1xuICAgICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9IHRlcm1pbmFsLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgICB0aGlzLl9zdGF0ZS53aWR0aCA9IHRoaXMuX2NlbGwuZ2V0V2lkdGgoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBkcmF3IHRoZSBjdXJzb3IgaWYgaXQncyBibGlua2luZ1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciAmJiAhdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuaXNDdXJzb3JWaXNpYmxlKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdGF0ZSkge1xuICAgICAgLy8gVGhlIGN1cnNvciBpcyBhbHJlYWR5IGluIHRoZSBjb3JyZWN0IHNwb3QsIGRvbid0IHJlZHJhd1xuICAgICAgaWYgKHRoaXMuX3N0YXRlLnggPT09IHRlcm1pbmFsLmJ1ZmZlci54ICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUueSA9PT0gdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQgPT09IHRlcm1pbmFsLmlzRm9jdXNlZCAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLnN0eWxlID09PSB0ZXJtaW5hbC5vcHRpb25zLmN1cnNvclN0eWxlICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUud2lkdGggPT09IHRoaXMuX2NlbGwuZ2V0V2lkdGgoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzW3Rlcm1pbmFsLm9wdGlvbnMuY3Vyc29yU3R5bGUgfHwgJ2Jsb2NrJ10odGVybWluYWwsIHRlcm1pbmFsLmJ1ZmZlci54LCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcblxuICAgIHRoaXMuX3N0YXRlLnggPSB0ZXJtaW5hbC5idWZmZXIueDtcbiAgICB0aGlzLl9zdGF0ZS55ID0gdmlld3BvcnRSZWxhdGl2ZUN1cnNvclk7XG4gICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5fc3RhdGUuc3R5bGUgPSB0ZXJtaW5hbC5vcHRpb25zLmN1cnNvclN0eWxlO1xuICAgIHRoaXMuX3N0YXRlLndpZHRoID0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJzb3IoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICB0aGlzLmNsZWFyQ2VsbHModGhpcy5fc3RhdGUueCwgdGhpcy5fc3RhdGUueSwgdGhpcy5fc3RhdGUud2lkdGgsIDEpO1xuICAgICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICAgIHg6IG51bGwsXG4gICAgICAgIHk6IG51bGwsXG4gICAgICAgIGlzRm9jdXNlZDogbnVsbCxcbiAgICAgICAgc3R5bGU6IG51bGwsXG4gICAgICAgIHdpZHRoOiBudWxsXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJhckN1cnNvcih0ZXJtaW5hbDogSVRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5maWxsTGVmdExpbmVBdENlbGwoeCwgeSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJsb2NrQ3Vyc29yKHRlcm1pbmFsOiBJVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLmZpbGxDZWxscyh4LCB5LCBjZWxsLmdldFdpZHRoKCksIDEpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcztcbiAgICB0aGlzLmZpbGxDaGFyVHJ1ZUNvbG9yKHRlcm1pbmFsLCBjZWxsLCB4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyVW5kZXJsaW5lQ3Vyc29yKHRlcm1pbmFsOiBJVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLmZpbGxCb3R0b21MaW5lQXRDZWxscyh4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmx1ckN1cnNvcih0ZXJtaW5hbDogSVRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLnN0cm9rZVJlY3RBdENlbGwoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG59XG5cbmNsYXNzIEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHtcbiAgcHVibGljIGlzQ3Vyc29yVmlzaWJsZTogYm9vbGVhbjtcblxuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyO1xuICBwcml2YXRlIF9ibGlua1N0YXJ0VGltZW91dDogbnVtYmVyO1xuICBwcml2YXRlIF9ibGlua0ludGVydmFsOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gZnJhbWUgd2FzIHJlc3RhcnRlZCwgdGhpcyBpcyB1c2VkIG9uIHRoZVxuICAgKiBuZXh0IHJlbmRlciB0byByZXN0YXJ0IHRoZSB0aW1lcnMgc28gdGhleSBkb24ndCBuZWVkIHRvIHJlc3RhcnQgdGhlIHRpbWVyc1xuICAgKiBtdWx0aXBsZSB0aW1lcyBvdmVyIGEgc2hvcnQgcGVyaW9kLlxuICAgKi9cbiAgcHJpdmF0ZSBfYW5pbWF0aW9uVGltZVJlc3RhcnRlZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHRlcm1pbmFsOiBJVGVybWluYWwsXG4gICAgcHJpdmF0ZSBfcmVuZGVyQ2FsbGJhY2s6ICgpID0+IHZvaWRcbiAgKSB7XG4gICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSB0cnVlO1xuICAgIGlmICh0ZXJtaW5hbC5pc0ZvY3VzZWQpIHtcbiAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNQYXVzZWQoKTogYm9vbGVhbiB7IHJldHVybiAhKHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0IHx8IHRoaXMuX2JsaW5rSW50ZXJ2YWwpOyB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2JsaW5rSW50ZXJ2YWwpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5fYmxpbmtJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCk7XG4gICAgICB0aGlzLl9ibGlua1N0YXJ0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVzdGFydEJsaW5rQW5pbWF0aW9uKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBTYXZlIGEgdGltZXN0YW1wIHNvIHRoYXQgdGhlIHJlc3RhcnQgY2FuIGJlIGRvbmUgb24gdGhlIG5leHQgaW50ZXJ2YWxcbiAgICB0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkID0gRGF0ZS5ub3coKTtcbiAgICAvLyBGb3JjZSBhIGN1cnNvciByZW5kZXIgdG8gZW5zdXJlIGl0J3MgdmlzaWJsZSBhbmQgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVzdGFydEludGVydmFsKHRpbWVUb1N0YXJ0OiBudW1iZXIgPSBCTElOS19JTlRFUlZBTCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgaW5pdGlhbCB0aW1lb3V0IHdoaWNoIHdpbGwgaGlkZSB0aGUgY3Vyc29yLCB0aGlzIGlzIGRvbmUgYmVmb3JlXG4gICAgLy8gdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgaXMgc2V0dXAgaW4gb3JkZXIgdG8gc3VwcG9ydCByZXN0YXJ0aW5nIHRoZSBibGlua1xuICAgIC8vIGFuaW1hdGlvbiBpbiBhIGxpZ2h0d2VpZ2h0IHdheSAod2l0aG91dCB0aHJhc2hpbmcgY2xlYXJJbnRlcnZhbCBhbmRcbiAgICAvLyBzZXRJbnRlcnZhbCkuXG4gICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBhbm90aGVyIGFuaW1hdGlvbiByZXN0YXJ0IHdhcyByZXF1ZXN0ZWQgd2hpbGUgdGhpcyB3YXMgYmVpbmdcbiAgICAgIC8vIHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSBudWxsO1xuICAgICAgICBpZiAodGltZSA+IDApIHtcbiAgICAgICAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwodGltZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhpZGUgdGhlIGN1cnNvclxuICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgYmxpbmsgaW50ZXJ2YWxcbiAgICAgIHRoaXMuX2JsaW5rSW50ZXJ2YWwgPSA8bnVtYmVyPjxhbnk+c2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAvLyBBZGp1c3QgdGhlIGFuaW1hdGlvbiB0aW1lIGlmIGl0IHdhcyByZXN0YXJ0ZWRcbiAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpIHtcbiAgICAgICAgICAvLyBjYWxjIHRpbWUgZGlmZlxuICAgICAgICAgIC8vIE1ha2UgcmVzdGFydCBpbnRlcnZhbCBkbyBhIHNldFRpbWVvdXQgaW5pdGlhbGx5P1xuICAgICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IG51bGw7XG4gICAgICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKHRpbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludmVydCB2aXNpYmlsaXR5IGFuZCByZW5kZXJcbiAgICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSAhdGhpcy5pc0N1cnNvclZpc2libGU7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfSwgQkxJTktfSU5URVJWQUwpO1xuICAgIH0sIHRpbWVUb1N0YXJ0KTtcbiAgfVxuXG4gIHB1YmxpYyBwYXVzZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuX2JsaW5rSW50ZXJ2YWwpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5fYmxpbmtJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCk7XG4gICAgICB0aGlzLl9ibGlua1N0YXJ0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVzdW1lKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkID0gbnVsbDtcbiAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKTtcbiAgICB0aGlzLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGNsYXNzIEdyaWRDYWNoZTxUPiB7XG4gIHB1YmxpYyBjYWNoZTogVFtdW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2FjaGUgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgIGlmICh0aGlzLmNhY2hlLmxlbmd0aCA8PSB4KSB7XG4gICAgICAgIHRoaXMuY2FjaGUucHVzaChbXSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCB5ID0gdGhpcy5jYWNoZVt4XS5sZW5ndGg7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICB0aGlzLmNhY2hlW3hdLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlW3hdLmxlbmd0aCA9IGhlaWdodDtcbiAgICB9XG4gICAgdGhpcy5jYWNoZS5sZW5ndGggPSB3aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuY2FjaGUubGVuZ3RoOyB4KyspIHtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGhpcy5jYWNoZVt4XS5sZW5ndGg7IHkrKykge1xuICAgICAgICB0aGlzLmNhY2hlW3hdW3ldID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxpbmtpZmllckV2ZW50LCBJVGVybWluYWwsIElMaW5raWZpZXJBY2Nlc3NvciB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IElDb2xvclNldCwgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJy4vQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICcuL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IGlzMjU2Q29sb3IgfSBmcm9tICcuL2F0bGFzL0NoYXJBdGxhc1V0aWxzJztcblxuZXhwb3J0IGNsYXNzIExpbmtSZW5kZXJMYXllciBleHRlbmRzIEJhc2VSZW5kZXJMYXllciB7XG4gIHByaXZhdGUgX3N0YXRlOiBJTGlua2lmaWVyRXZlbnQgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHpJbmRleDogbnVtYmVyLCBjb2xvcnM6IElDb2xvclNldCwgdGVybWluYWw6IElMaW5raWZpZXJBY2Nlc3Nvcikge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ2xpbmsnLCB6SW5kZXgsIHRydWUsIGNvbG9ycyk7XG4gICAgdGVybWluYWwubGlua2lmaWVyLm9uTGlua0hvdmVyKGUgPT4gdGhpcy5fb25MaW5rSG92ZXIoZSkpO1xuICAgIHRlcm1pbmFsLmxpbmtpZmllci5vbkxpbmtMZWF2ZShlID0+IHRoaXMuX29uTGlua0xlYXZlKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IElUZXJtaW5hbCwgZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZSh0ZXJtaW5hbCwgZGltKTtcbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUgPSBudWxsO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCk7XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckN1cnJlbnRMaW5rKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zdGF0ZSkge1xuICAgICAgdGhpcy5jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngxLCB0aGlzLl9zdGF0ZS55MSwgdGhpcy5fc3RhdGUuY29scyAtIHRoaXMuX3N0YXRlLngxLCAxKTtcbiAgICAgIGNvbnN0IG1pZGRsZVJvd0NvdW50ID0gdGhpcy5fc3RhdGUueTIgLSB0aGlzLl9zdGF0ZS55MSAtIDE7XG4gICAgICBpZiAobWlkZGxlUm93Q291bnQgPiAwKSB7XG4gICAgICAgIHRoaXMuY2xlYXJDZWxscygwLCB0aGlzLl9zdGF0ZS55MSArIDEsIHRoaXMuX3N0YXRlLmNvbHMsIG1pZGRsZVJvd0NvdW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2xlYXJDZWxscygwLCB0aGlzLl9zdGF0ZS55MiwgdGhpcy5fc3RhdGUueDIsIDEpO1xuICAgICAgdGhpcy5fc3RhdGUgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0hvdmVyKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIGlmIChlLmZnID09PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgIH0gZWxzZSBpZiAoaXMyNTZDb2xvcihlLmZnKSkge1xuICAgICAgLy8gMjU2IGNvbG9yIHN1cHBvcnRcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtlLmZnXS5jc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgfVxuXG4gICAgaWYgKGUueTEgPT09IGUueTIpIHtcbiAgICAgIC8vIFNpbmdsZSBsaW5lIGxpbmtcbiAgICAgIHRoaXMuZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsIGUueTEsIGUueDIgLSBlLngxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTXVsdGktbGluZSBsaW5rXG4gICAgICB0aGlzLmZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLCBlLnkxLCBlLmNvbHMgLSBlLngxKTtcbiAgICAgIGZvciAobGV0IHkgPSBlLnkxICsgMTsgeSA8IGUueTI7IHkrKykge1xuICAgICAgICB0aGlzLmZpbGxCb3R0b21MaW5lQXRDZWxscygwLCB5LCBlLmNvbHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5maWxsQm90dG9tTGluZUF0Q2VsbHMoMCwgZS55MiwgZS54Mik7XG4gICAgfVxuICAgIHRoaXMuX3N0YXRlID0gZTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0xlYXZlKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXh0UmVuZGVyTGF5ZXIgfSBmcm9tICcuL1RleHRSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBTZWxlY3Rpb25SZW5kZXJMYXllciB9IGZyb20gJy4vU2VsZWN0aW9uUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgQ3Vyc29yUmVuZGVyTGF5ZXIgfSBmcm9tICcuL0N1cnNvclJlbmRlckxheWVyJztcbmltcG9ydCB7IENvbG9yTWFuYWdlciB9IGZyb20gJy4vQ29sb3JNYW5hZ2VyJztcbmltcG9ydCB7IElSZW5kZXJMYXllciwgSUNvbG9yU2V0LCBJUmVuZGVyZXIsIElSZW5kZXJEaW1lbnNpb25zLCBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IElUZXJtaW5hbCwgQ2hhcmFjdGVySm9pbmVySGFuZGxlciB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IExpbmtSZW5kZXJMYXllciB9IGZyb20gJy4vTGlua1JlbmRlckxheWVyJztcbmltcG9ydCB7IFJlbmRlckRlYm91bmNlciB9IGZyb20gJy4uL3VpL1JlbmRlckRlYm91bmNlcic7XG5pbXBvcnQgeyBTY3JlZW5EcHJNb25pdG9yIH0gZnJvbSAnLi4vdWkvU2NyZWVuRHByTW9uaXRvcic7XG5pbXBvcnQgeyBJVGhlbWUgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSB9IGZyb20gJy4uL3JlbmRlcmVyL0NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5JztcbmltcG9ydCB7IEV2ZW50RW1pdHRlcjIsIElFdmVudCB9IGZyb20gJy4uL2NvbW1vbi9FdmVudEVtaXR0ZXIyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi9jb21tb24vTGlmZWN5Y2xlJztcblxuZXhwb3J0IGNsYXNzIFJlbmRlcmVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElSZW5kZXJlciB7XG4gIHByaXZhdGUgX3JlbmRlckRlYm91bmNlcjogUmVuZGVyRGVib3VuY2VyO1xuXG4gIHByaXZhdGUgX3JlbmRlckxheWVyczogSVJlbmRlckxheWVyW107XG4gIHByaXZhdGUgX2RldmljZVBpeGVsUmF0aW86IG51bWJlcjtcbiAgcHJpdmF0ZSBfc2NyZWVuRHByTW9uaXRvcjogU2NyZWVuRHByTW9uaXRvcjtcbiAgcHJpdmF0ZSBfaXNQYXVzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfbmVlZHNGdWxsUmVmcmVzaDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTogSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5O1xuXG4gIHB1YmxpYyBjb2xvck1hbmFnZXI6IENvbG9yTWFuYWdlcjtcbiAgcHVibGljIGRpbWVuc2lvbnM6IElSZW5kZXJEaW1lbnNpb25zO1xuXG4gIHByaXZhdGUgX29uQ2FudmFzUmVzaXplID0gbmV3IEV2ZW50RW1pdHRlcjI8eyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9PigpO1xuICBwdWJsaWMgZ2V0IG9uQ2FudmFzUmVzaXplKCk6IElFdmVudDx7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uQ2FudmFzUmVzaXplLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVuZGVyID0gbmV3IEV2ZW50RW1pdHRlcjI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfdGVybWluYWw6IElUZXJtaW5hbCwgdGhlbWU6IElUaGVtZSkge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3QgYWxsb3dUcmFuc3BhcmVuY3kgPSB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5O1xuICAgIHRoaXMuY29sb3JNYW5hZ2VyID0gbmV3IENvbG9yTWFuYWdlcihkb2N1bWVudCwgYWxsb3dUcmFuc3BhcmVuY3kpO1xuICAgIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5ID0gbmV3IENoYXJhY3RlckpvaW5lclJlZ2lzdHJ5KF90ZXJtaW5hbCk7XG4gICAgaWYgKHRoZW1lKSB7XG4gICAgICB0aGlzLmNvbG9yTWFuYWdlci5zZXRUaGVtZSh0aGVtZSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzID0gW1xuICAgICAgbmV3IFRleHRSZW5kZXJMYXllcih0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LCAwLCB0aGlzLmNvbG9yTWFuYWdlci5jb2xvcnMsIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LCBhbGxvd1RyYW5zcGFyZW5jeSksXG4gICAgICBuZXcgU2VsZWN0aW9uUmVuZGVyTGF5ZXIodGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudCwgMSwgdGhpcy5jb2xvck1hbmFnZXIuY29sb3JzKSxcbiAgICAgIG5ldyBMaW5rUmVuZGVyTGF5ZXIodGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudCwgMiwgdGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLCB0aGlzLl90ZXJtaW5hbCksXG4gICAgICBuZXcgQ3Vyc29yUmVuZGVyTGF5ZXIodGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudCwgMywgdGhpcy5jb2xvck1hbmFnZXIuY29sb3JzKVxuICAgIF07XG4gICAgdGhpcy5kaW1lbnNpb25zID0ge1xuICAgICAgc2NhbGVkQ2hhcldpZHRoOiBudWxsLFxuICAgICAgc2NhbGVkQ2hhckhlaWdodDogbnVsbCxcbiAgICAgIHNjYWxlZENlbGxXaWR0aDogbnVsbCxcbiAgICAgIHNjYWxlZENlbGxIZWlnaHQ6IG51bGwsXG4gICAgICBzY2FsZWRDaGFyTGVmdDogbnVsbCxcbiAgICAgIHNjYWxlZENoYXJUb3A6IG51bGwsXG4gICAgICBzY2FsZWRDYW52YXNXaWR0aDogbnVsbCxcbiAgICAgIHNjYWxlZENhbnZhc0hlaWdodDogbnVsbCxcbiAgICAgIGNhbnZhc1dpZHRoOiBudWxsLFxuICAgICAgY2FudmFzSGVpZ2h0OiBudWxsLFxuICAgICAgYWN0dWFsQ2VsbFdpZHRoOiBudWxsLFxuICAgICAgYWN0dWFsQ2VsbEhlaWdodDogbnVsbFxuICAgIH07XG4gICAgdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICB0aGlzLm9uT3B0aW9uc0NoYW5nZWQoKTtcblxuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlciA9IG5ldyBSZW5kZXJEZWJvdW5jZXIodGhpcy5fcmVuZGVyUm93cy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9zY3JlZW5EcHJNb25pdG9yID0gbmV3IFNjcmVlbkRwck1vbml0b3IoKTtcbiAgICB0aGlzLl9zY3JlZW5EcHJNb25pdG9yLnNldExpc3RlbmVyKCgpID0+IHRoaXMub25XaW5kb3dSZXNpemUod2luZG93LmRldmljZVBpeGVsUmF0aW8pKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3NjcmVlbkRwck1vbml0b3IpO1xuXG4gICAgLy8gRGV0ZWN0IHdoZXRoZXIgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgZGV0ZWN0ZWQgYW5kIGVuYWJsZSByZW5kZXJlciBwYXVzZVxuICAgIC8vIGFuZCByZXN1bWUgYmFzZWQgb24gdGVybWluYWwgdmlzaWJpbGl0eSBpZiBzb1xuICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZSA9PiB0aGlzLm9uSW50ZXJzZWN0aW9uQ2hhbmdlKGVbZS5sZW5ndGggLSAxXSksIHsgdGhyZXNob2xkOiAwIH0pO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLl90ZXJtaW5hbC5lbGVtZW50KTtcbiAgICAgIHRoaXMucmVnaXN0ZXIoeyBkaXNwb3NlOiAoKSA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCkgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5kaXNwb3NlKCkpO1xuICB9XG5cbiAgcHVibGljIG9uSW50ZXJzZWN0aW9uQ2hhbmdlKGVudHJ5OiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KTogdm9pZCB7XG4gICAgdGhpcy5faXNQYXVzZWQgPSBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA9PT0gMDtcbiAgICBpZiAoIXRoaXMuX2lzUGF1c2VkICYmIHRoaXMuX25lZWRzRnVsbFJlZnJlc2gpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2goMCwgdGhpcy5fdGVybWluYWwucm93cyAtIDEpO1xuICAgICAgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbldpbmRvd1Jlc2l6ZShkZXZpY2VQaXhlbFJhdGlvOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBJZiB0aGUgZGV2aWNlIHBpeGVsIHJhdGlvIGNoYW5nZWQsIHRoZSBjaGFyIGF0bGFzIG5lZWRzIHRvIGJlIHJlZ2VuZXJhdGVkXG4gICAgLy8gYW5kIHRoZSB0ZXJtaW5hbCBuZWVkcyB0byByZWZyZXNoZWRcbiAgICBpZiAodGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyAhPT0gZGV2aWNlUGl4ZWxSYXRpbykge1xuICAgICAgdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyA9IGRldmljZVBpeGVsUmF0aW87XG4gICAgICB0aGlzLm9uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXRUaGVtZSh0aGVtZTogSVRoZW1lKTogSUNvbG9yU2V0IHtcbiAgICB0aGlzLmNvbG9yTWFuYWdlci5zZXRUaGVtZSh0aGVtZSk7XG5cbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGwub25UaGVtZUNoYW5nZWQodGhpcy5fdGVybWluYWwsIHRoaXMuY29sb3JNYW5hZ2VyLmNvbG9ycyk7XG4gICAgICBsLnJlc2V0KHRoaXMuX3Rlcm1pbmFsKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2goMCwgdGhpcy5fdGVybWluYWwucm93cyAtIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbG9yTWFuYWdlci5jb2xvcnM7XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9uc1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcblxuICAgIC8vIFJlc2l6ZSBhbGwgcmVuZGVyIGxheWVyc1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5yZXNpemUodGhpcy5fdGVybWluYWwsIHRoaXMuZGltZW5zaW9ucykpO1xuXG4gICAgLy8gRm9yY2UgYSByZWZyZXNoXG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdGVybWluYWwucmVmcmVzaCgwLCB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSk7XG4gICAgfVxuXG4gICAgLy8gUmVzaXplIHRoZSBzY3JlZW5cbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuXG4gICAgdGhpcy5fb25DYW52YXNSZXNpemUuZmlyZSh7XG4gICAgICB3aWR0aDogdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbkJsdXIodGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25Gb2N1cyh0aGlzLl90ZXJtaW5hbCkpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLl9ydW5PcGVyYXRpb24obCA9PiBsLm9uU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl90ZXJtaW5hbCwgc3RhcnQsIGVuZCwgY29sdW1uU2VsZWN0TW9kZSkpO1xuICB9XG5cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9ydW5PcGVyYXRpb24obCA9PiBsLm9uQ3Vyc29yTW92ZSh0aGlzLl90ZXJtaW5hbCkpO1xuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5jb2xvck1hbmFnZXIuYWxsb3dUcmFuc3BhcmVuY3kgPSB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5O1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25PcHRpb25zQ2hhbmdlZCh0aGlzLl90ZXJtaW5hbCkpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwucmVzZXQodGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHByaXZhdGUgX3J1bk9wZXJhdGlvbihvcGVyYXRpb246IChsYXllcjogSVJlbmRlckxheWVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBvcGVyYXRpb24obCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgYSByZWZyZXNoIGJldHdlZW4gdHdvIHJvd3MgKGluY2x1c2l2ZSksIHRvIGJlIGRvbmUgb24gbmV4dCBhbmltYXRpb25cbiAgICogZnJhbWUuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgc3RhcnQgcm93LlxuICAgKiBAcGFyYW0gZW5kIFRoZSBlbmQgcm93LlxuICAgKi9cbiAgcHVibGljIHJlZnJlc2hSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyRGVib3VuY2VyLnJlZnJlc2goc3RhcnQsIGVuZCwgdGhpcy5fdGVybWluYWwucm93cyk7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgdGhlIHJlZnJlc2ggbG9vcCBjYWxsYmFjaywgY2FsbGluZyByZWZyZXNoIG9ubHkgaWYgYSByZWZyZXNoIGlzXG4gICAqIG5lY2Vzc2FyeSBiZWZvcmUgcXVldWVpbmcgdXAgdGhlIG5leHQgb25lLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbkdyaWRDaGFuZ2VkKHRoaXMuX3Rlcm1pbmFsLCBzdGFydCwgZW5kKSk7XG4gICAgdGhpcy5fb25SZW5kZXIuZmlyZSh7IHN0YXJ0LCBlbmQgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVjYWxjdWxhdGVzIHRoZSBjaGFyYWN0ZXIgYW5kIGNhbnZhcyBkaW1lbnNpb25zLlxuICAgKi9cbiAgcHJpdmF0ZSBfdXBkYXRlRGltZW5zaW9ucygpOiB2b2lkIHtcbiAgICAvLyBQZXJmb3JtIGEgbmV3IG1lYXN1cmUgaWYgdGhlIENoYXJNZWFzdXJlIGRpbWVuc2lvbnMgYXJlIG5vdCB5ZXQgYXZhaWxhYmxlXG4gICAgaWYgKCF0aGlzLl90ZXJtaW5hbC5jaGFyTWVhc3VyZS53aWR0aCB8fCAhdGhpcy5fdGVybWluYWwuY2hhck1lYXN1cmUuaGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2hhcmFjdGVyIHdpZHRoLiBXaWR0aCBpcyBmbG9vcmVkIGFzIGl0IG11c3QgYmVcbiAgICAvLyBkcmF3biB0byBhbiBpbnRlZ2VyIGdyaWQgaW4gb3JkZXIgZm9yIHRoZSBDaGFyQXRsYXMgXCJzdGFtcHNcIiB0byBub3QgYmVcbiAgICAvLyBibHVycnkuIFdoZW4gdGV4dCBpcyBkcmF3biB0byB0aGUgZ3JpZCBub3QgdXNpbmcgdGhlIENoYXJBdGxhcywgaXQgaXNcbiAgICAvLyBjbGlwcGVkIHRvIGVuc3VyZSB0aGVyZSBpcyBubyBvdmVybGFwIHdpdGggdGhlIG5leHQgY2VsbC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoID0gTWF0aC5mbG9vcih0aGlzLl90ZXJtaW5hbC5jaGFyTWVhc3VyZS53aWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNoYXJhY3RlciBoZWlnaHQuIEhlaWdodCBpcyBjZWlsZWQgaW4gY2FzZVxuICAgIC8vIGRldmljZVBpeGVsUmF0aW8gaXMgYSBmbG9hdGluZyBwb2ludCBudW1iZXIgaW4gb3JkZXIgdG8gZW5zdXJlIHRoZXJlIGlzXG4gICAgLy8gZW5vdWdoIHNwYWNlIHRvIGRyYXcgdGhlIGNoYXJhY3RlciB0byB0aGUgY2VsbC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCA9IE1hdGguY2VpbCh0aGlzLl90ZXJtaW5hbC5jaGFyTWVhc3VyZS5oZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjZWxsIGhlaWdodCwgaWYgbGluZUhlaWdodCBpcyBub3QgMSB0aGVuIHRoZSB2YWx1ZVxuICAgIC8vIHdpbGwgYmUgZmxvb3JlZCBiZWNhdXNlIHNpbmNlIGxpbmVIZWlnaHQgY2FuIG5ldmVyIGJlIGxvd2VyIHRoZW4gMSwgdGhlcmVcbiAgICAvLyBpcyBhIGd1YXJlbnRlZSB0aGF0IHRoZSBzY2FsZWQgbGluZSBoZWlnaHQgd2lsbCBhbHdheXMgYmUgbGFyZ2VyIHRoYW5cbiAgICAvLyBzY2FsZWQgY2hhciBoZWlnaHQuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgPSBNYXRoLmZsb29yKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0ICogdGhpcy5fdGVybWluYWwub3B0aW9ucy5saW5lSGVpZ2h0KTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgeSBjb29yZGluYXRlIHdpdGhpbiBhIGNlbGwgdGhhdCB0ZXh0IHNob3VsZCBkcmF3IGZyb20gaW5cbiAgICAvLyBvcmRlciB0byBkcmF3IGluIHRoZSBjZW50ZXIgb2YgYSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wID0gdGhpcy5fdGVybWluYWwub3B0aW9ucy5saW5lSGVpZ2h0ID09PSAxID8gMCA6IE1hdGgucm91bmQoKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0IC0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQpIC8gMik7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjZWxsIHdpZHRoLCB0YWtpbmcgdGhlIGxldHRlclNwYWNpbmcgaW50byBhY2NvdW50LlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoICsgTWF0aC5yb3VuZCh0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxldHRlclNwYWNpbmcpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB4IGNvb3JkaW5hdGUgd2l0aCBhIGNlbGwgdGhhdCB0ZXh0IHNob3VsZCBkcmF3IGZyb20gaW5cbiAgICAvLyBvcmRlciB0byBkcmF3IGluIHRoZSBjZW50ZXIgb2YgYSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdCA9IE1hdGguZmxvb3IodGhpcy5fdGVybWluYWwub3B0aW9ucy5sZXR0ZXJTcGFjaW5nIC8gMik7XG5cbiAgICAvLyBSZWNhbGN1bGF0ZSB0aGUgY2FudmFzIGRpbWVuc2lvbnM7IHNjYWxlZCogZGVmaW5lIHRoZSBhY3R1YWwgbnVtYmVyIG9mXG4gICAgLy8gcGl4ZWwgaW4gdGhlIGNhbnZhc1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgPSB0aGlzLl90ZXJtaW5hbC5yb3dzICogdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoID0gdGhpcy5fdGVybWluYWwuY29scyAqIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg7XG5cbiAgICAvLyBUaGUgdGhlIHNpemUgb2YgdGhlIGNhbnZhcyBvbiB0aGUgcGFnZS4gSXQncyB2ZXJ5IGltcG9ydGFudCB0aGF0IHRoaXNcbiAgICAvLyByb3VuZHMgdG8gbmVhcmVzdCBpbnRlZ2VyIGFuZCBub3QgY2VpbHMgYXMgYnJvd3NlcnMgb2Z0ZW4gc2V0XG4gICAgLy8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gYXMgc29tZXRoaW5nIGxpa2UgMS4xMDAwMDAwMjM4NDE4NTgsIHdoZW4gaXQnc1xuICAgIC8vIGFjdHVhbGx5IDEuMS4gQ2VpbGluZyBjYXVzZXMgYmx1cnJpbmVzcyBhcyB0aGUgYmFja2luZyBjYW52YXMgaW1hZ2UgaXMgMVxuICAgIC8vIHBpeGVsIHRvbyBsYXJnZSBmb3IgdGhlIGNhbnZhcyBlbGVtZW50IHNpemUuXG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggPSBNYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIEdldCB0aGUgX2FjdHVhbF8gZGltZW5zaW9ucyBvZiBhbiBpbmRpdmlkdWFsIGNlbGwuIFRoaXMgbmVlZHMgdG8gYmVcbiAgICAvLyBkZXJpdmVkIGZyb20gdGhlIGNhbnZhc1dpZHRoL0hlaWdodCBjYWxjdWxhdGVkIGFib3ZlIHdoaWNoIHRha2VzIGludG9cbiAgICAvLyBhY2NvdW50IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLiBDaGFyTWVhc3VyZS53aWR0aC9oZWlnaHQgYnkgaXRzZWxmIGlzXG4gICAgLy8gaW5zdWZmaWNpZW50IHdoZW4gdGhlIHBhZ2UgaXMgbm90IGF0IDEwMCUgem9vbSBsZXZlbCBhcyBDaGFyTWVhc3VyZSBpc1xuICAgIC8vIG1lYXN1cmVkIGluIENTUyBwaXhlbHMsIGJ1dCB0aGUgYWN0dWFsIGNoYXIgc2l6ZSBvbiB0aGUgY2FudmFzIGNhblxuICAgIC8vIGRpZmZlci5cbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgLyB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuICAgIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggLyB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6IENoYXJhY3RlckpvaW5lckhhbmRsZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnkuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgQmFzZVJlbmRlckxheWVyIH0gZnJvbSAnLi9CYXNlUmVuZGVyTGF5ZXInO1xuXG5pbnRlcmZhY2UgSVNlbGVjdGlvblN0YXRlIHtcbiAgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl07XG4gIGVuZDogW251bWJlciwgbnVtYmVyXTtcbiAgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbjtcbiAgeWRpc3A6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFNlbGVjdGlvblJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IElTZWxlY3Rpb25TdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50LCB6SW5kZXg6IG51bWJlciwgY29sb3JzOiBJQ29sb3JTZXQpIHtcbiAgICBzdXBlcihjb250YWluZXIsICdzZWxlY3Rpb24nLCB6SW5kZXgsIHRydWUsIGNvbG9ycyk7XG4gICAgdGhpcy5fY2xlYXJTdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJTdGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHN0YXJ0OiBudWxsLFxuICAgICAgZW5kOiBudWxsLFxuICAgICAgY29sdW1uU2VsZWN0TW9kZTogbnVsbCxcbiAgICAgIHlkaXNwOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IElUZXJtaW5hbCwgZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZSh0ZXJtaW5hbCwgZGltKTtcbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fY2xlYXJTdGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUuc3RhcnQgJiYgdGhpcy5fc3RhdGUuZW5kKSB7XG4gICAgICB0aGlzLl9jbGVhclN0YXRlKCk7XG4gICAgICB0aGlzLmNsZWFyQWxsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZCh0ZXJtaW5hbDogSVRlcm1pbmFsLCBzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gU2VsZWN0aW9uIGhhcyBub3QgY2hhbmdlZFxuICAgIGlmICghdGhpcy5fZGlkU3RhdGVDaGFuZ2Uoc3RhcnQsIGVuZCwgY29sdW1uU2VsZWN0TW9kZSwgdGVybWluYWwuYnVmZmVyLnlkaXNwKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbGwgc2VsZWN0aW9uc1xuICAgIHRoaXMuY2xlYXJBbGwoKTtcblxuICAgIC8vIFNlbGVjdGlvbiBkb2VzIG5vdCBleGlzdFxuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgdGhpcy5fY2xlYXJTdGF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyYW5zbGF0ZSBmcm9tIGJ1ZmZlciBwb3NpdGlvbiB0byB2aWV3cG9ydCBwb3NpdGlvblxuICAgIGNvbnN0IHZpZXdwb3J0U3RhcnRSb3cgPSBzdGFydFsxXSAtIHRlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gTWF0aC5tYXgodmlld3BvcnRTdGFydFJvdywgMCk7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRFbmRSb3cgPSBNYXRoLm1pbih2aWV3cG9ydEVuZFJvdywgdGVybWluYWwucm93cyAtIDEpO1xuXG4gICAgLy8gTm8gbmVlZCB0byBkcmF3IHRoZSBzZWxlY3Rpb25cbiAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyA+PSB0ZXJtaW5hbC5yb3dzIHx8IHZpZXdwb3J0Q2FwcGVkRW5kUm93IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuc2VsZWN0aW9uLmNzcztcblxuICAgIGlmIChjb2x1bW5TZWxlY3RNb2RlKSB7XG4gICAgICBjb25zdCBzdGFydENvbCA9IHN0YXJ0WzBdO1xuICAgICAgY29uc3Qgd2lkdGggPSBlbmRbMF0gLSBzdGFydENvbDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDE7XG4gICAgICB0aGlzLmZpbGxDZWxscyhzdGFydENvbCwgdmlld3BvcnRDYXBwZWRTdGFydFJvdywgd2lkdGgsIGhlaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERyYXcgZmlyc3Qgcm93XG4gICAgICBjb25zdCBzdGFydENvbCA9IHZpZXdwb3J0U3RhcnRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPyBzdGFydFswXSA6IDA7XG4gICAgICBjb25zdCBzdGFydFJvd0VuZENvbCA9IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gZW5kWzBdIDogdGVybWluYWwuY29scztcbiAgICAgIHRoaXMuZmlsbENlbGxzKHN0YXJ0Q29sLCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCBzdGFydFJvd0VuZENvbCAtIHN0YXJ0Q29sLCAxKTtcblxuICAgICAgLy8gRHJhdyBtaWRkbGUgcm93c1xuICAgICAgY29uc3QgbWlkZGxlUm93c0NvdW50ID0gTWF0aC5tYXgodmlld3BvcnRDYXBwZWRFbmRSb3cgLSB2aWV3cG9ydENhcHBlZFN0YXJ0Um93IC0gMSwgMCk7XG4gICAgICB0aGlzLmZpbGxDZWxscygwLCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMSwgdGVybWluYWwuY29scywgbWlkZGxlUm93c0NvdW50KTtcblxuICAgICAgLy8gRHJhdyBmaW5hbCByb3dcbiAgICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ICE9PSB2aWV3cG9ydENhcHBlZEVuZFJvdykge1xuICAgICAgICAvLyBPbmx5IGRyYXcgdmlld3BvcnRFbmRSb3cgaWYgaXQncyBub3QgdGhlIHNhbWUgYXMgdmlld3BvcnRTdGFydFJvd1xuICAgICAgICBjb25zdCBlbmRDb2wgPSB2aWV3cG9ydEVuZFJvdyA9PT0gdmlld3BvcnRDYXBwZWRFbmRSb3cgPyBlbmRbMF0gOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgICB0aGlzLmZpbGxDZWxscygwLCB2aWV3cG9ydENhcHBlZEVuZFJvdywgZW5kQ29sLCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTYXZlIHN0YXRlIGZvciBuZXh0IHJlbmRlclxuICAgIHRoaXMuX3N0YXRlLnN0YXJ0ID0gW3N0YXJ0WzBdLCBzdGFydFsxXV07XG4gICAgdGhpcy5fc3RhdGUuZW5kID0gW2VuZFswXSwgZW5kWzFdXTtcbiAgICB0aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlID0gY29sdW1uU2VsZWN0TW9kZTtcbiAgICB0aGlzLl9zdGF0ZS55ZGlzcCA9IHRlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgfVxuXG4gIHByaXZhdGUgX2RpZFN0YXRlQ2hhbmdlKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4sIHlkaXNwOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoc3RhcnQsIHRoaXMuX3N0YXRlLnN0YXJ0KSB8fFxuICAgICAgIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoZW5kLCB0aGlzLl9zdGF0ZS5lbmQpIHx8XG4gICAgICBjb2x1bW5TZWxlY3RNb2RlICE9PSB0aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlIHx8XG4gICAgICB5ZGlzcCAhPT0gdGhpcy5fc3RhdGUueWRpc3A7XG4gIH1cblxuICBwcml2YXRlIF9hcmVDb29yZGluYXRlc0VxdWFsKGNvb3JkMTogW251bWJlciwgbnVtYmVyXSwgY29vcmQyOiBbbnVtYmVyLCBudW1iZXJdKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb29yZDEgfHwgIWNvb3JkMikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBjb29yZDFbMF0gPT09IGNvb3JkMlswXSAmJiBjb29yZDFbMV0gPT09IGNvb3JkMlsxXTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBOVUxMX0NFTExfQ09ERSB9IGZyb20gJy4uL0J1ZmZlcic7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElSZW5kZXJEaW1lbnNpb25zLCBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IENoYXJEYXRhLCBJVGVybWluYWwsIElDZWxsRGF0YSB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IEdyaWRDYWNoZSB9IGZyb20gJy4vR3JpZENhY2hlJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJy4vQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IENlbGxEYXRhLCBBdHRyaWJ1dGVEYXRhLCBDb250ZW50IH0gZnJvbSAnLi4vQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBKb2luZWRDZWxsRGF0YSB9IGZyb20gJy4vQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnknO1xuXG4vKipcbiAqIFRoaXMgQ2hhckRhdGEgbG9va3MgbGlrZSBhIG51bGwgY2hhcmFjdGVyLCB3aGljaCB3aWxsIGZvcmMgYSBjbGVhciBhbmQgcmVuZGVyXG4gKiB3aGVuIHRoZSBjaGFyYWN0ZXIgY2hhbmdlcyAoYSByZWd1bGFyIHNwYWNlICcgJyBjaGFyYWN0ZXIgbWF5IG5vdCBhcyBpdCdzXG4gKiBkcmF3biBzdGF0ZSBpcyBhIGNsZWFyZWQgY2VsbCkuXG4gKi9cbi8vIGNvbnN0IE9WRVJMQVBfT1dORURfQ0hBUl9EQVRBOiBDaGFyRGF0YSA9IFtudWxsLCAnJywgMCwgLTFdO1xuXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IEdyaWRDYWNoZTxDaGFyRGF0YT47XG4gIHByaXZhdGUgX2NoYXJhY3RlcldpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX2NoYXJhY3RlckZvbnQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfY2hhcmFjdGVyT3ZlcmxhcENhY2hlOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuICBwcml2YXRlIF9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTogSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5O1xuICBwcml2YXRlIF93b3JrQ2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHpJbmRleDogbnVtYmVyLCBjb2xvcnM6IElDb2xvclNldCwgY2hhcmFjdGVySm9pbmVyUmVnaXN0cnk6IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSwgYWxwaGE6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihjb250YWluZXIsICd0ZXh0JywgekluZGV4LCBhbHBoYSwgY29sb3JzKTtcbiAgICB0aGlzLl9zdGF0ZSA9IG5ldyBHcmlkQ2FjaGU8Q2hhckRhdGE+KCk7XG4gICAgdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgPSBjaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IElUZXJtaW5hbCwgZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZSh0ZXJtaW5hbCwgZGltKTtcblxuICAgIC8vIENsZWFyIHRoZSBjaGFyYWN0ZXIgd2lkdGggY2FjaGUgaWYgdGhlIGZvbnQgb3Igd2lkdGggaGFzIGNoYW5nZWRcbiAgICBjb25zdCB0ZXJtaW5hbEZvbnQgPSB0aGlzLl9nZXRGb250KHRlcm1pbmFsLCBmYWxzZSwgZmFsc2UpO1xuICAgIGlmICh0aGlzLl9jaGFyYWN0ZXJXaWR0aCAhPT0gZGltLnNjYWxlZENoYXJXaWR0aCB8fCB0aGlzLl9jaGFyYWN0ZXJGb250ICE9PSB0ZXJtaW5hbEZvbnQpIHtcbiAgICAgIHRoaXMuX2NoYXJhY3RlcldpZHRoID0gZGltLnNjYWxlZENoYXJXaWR0aDtcbiAgICAgIHRoaXMuX2NoYXJhY3RlckZvbnQgPSB0ZXJtaW5hbEZvbnQ7XG4gICAgICB0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGUgPSB7fTtcbiAgICB9XG4gICAgLy8gUmVzaXppbmcgdGhlIGNhbnZhcyBkaXNjYXJkcyB0aGUgY29udGVudHMgb2YgdGhlIGNhbnZhcyBzbyBjbGVhciBzdGF0ZVxuICAgIHRoaXMuX3N0YXRlLmNsZWFyKCk7XG4gICAgdGhpcy5fc3RhdGUucmVzaXplKHRlcm1pbmFsLmNvbHMsIHRlcm1pbmFsLnJvd3MpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGF0ZS5jbGVhcigpO1xuICAgIHRoaXMuY2xlYXJBbGwoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZvckVhY2hDZWxsKFxuICAgIHRlcm1pbmFsOiBJVGVybWluYWwsXG4gICAgZmlyc3RSb3c6IG51bWJlcixcbiAgICBsYXN0Um93OiBudW1iZXIsXG4gICAgam9pbmVyUmVnaXN0cnk6IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSB8IG51bGwsXG4gICAgY2FsbGJhY2s6IChcbiAgICAgIGNlbGw6IElDZWxsRGF0YSxcbiAgICAgIHg6IG51bWJlcixcbiAgICAgIHk6IG51bWJlclxuICAgICkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBmb3IgKGxldCB5ID0gZmlyc3RSb3c7IHkgPD0gbGFzdFJvdzsgeSsrKSB7XG4gICAgICBjb25zdCByb3cgPSB5ICsgdGVybWluYWwuYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQocm93KTtcbiAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IGpvaW5lclJlZ2lzdHJ5ID8gam9pbmVyUmVnaXN0cnkuZ2V0Sm9pbmVkQ2hhcmFjdGVycyhyb3cpIDogW107XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRlcm1pbmFsLmNvbHM7IHgrKykge1xuICAgICAgICBsaW5lLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgICAgbGV0IGNlbGwgPSB0aGlzLl93b3JrQ2VsbDtcblxuICAgICAgICAvLyBJZiB0cnVlLCBpbmRpY2F0ZXMgdGhhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIocykgdG8gZHJhdyB3ZXJlIGpvaW5lZC5cbiAgICAgICAgbGV0IGlzSm9pbmVkID0gZmFsc2U7XG4gICAgICAgIGxldCBsYXN0Q2hhclggPSB4O1xuXG4gICAgICAgIC8vIFRoZSBjaGFyYWN0ZXIgdG8gdGhlIGxlZnQgaXMgYSB3aWRlIGNoYXJhY3RlciwgZHJhd2luZyBpcyBvd25lZCBieVxuICAgICAgICAvLyB0aGUgY2hhciBhdCB4LTFcbiAgICAgICAgaWYgKGNlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJvY2VzcyBhbnkgam9pbmVkIGNoYXJhY3RlciByYW5nZXMgYXMgbmVlZGVkLiBCZWNhdXNlIG9mIGhvdyB0aGVcbiAgICAgICAgLy8gcmFuZ2VzIGFyZSBwcm9kdWNlZCwgd2Uga25vdyB0aGF0IHRoZXkgYXJlIHZhbGlkIGZvciB0aGUgY2hhcmFjdGVyc1xuICAgICAgICAvLyBhbmQgYXR0cmlidXRlcyBvZiBvdXIgaW5wdXQuXG4gICAgICAgIGlmIChqb2luZWRSYW5nZXMubGVuZ3RoID4gMCAmJiB4ID09PSBqb2luZWRSYW5nZXNbMF1bMF0pIHtcbiAgICAgICAgICBpc0pvaW5lZCA9IHRydWU7XG4gICAgICAgICAgY29uc3QgcmFuZ2UgPSBqb2luZWRSYW5nZXMuc2hpZnQoKTtcblxuICAgICAgICAgIC8vIFdlIGFscmVhZHkga25vdyB0aGUgZXhhY3Qgc3RhcnQgYW5kIGVuZCBjb2x1bW4gb2YgdGhlIGpvaW5lZCByYW5nZSxcbiAgICAgICAgICAvLyBzbyB3ZSBnZXQgdGhlIHN0cmluZyBhbmQgd2lkdGggcmVwcmVzZW50aW5nIGl0IGRpcmVjdGx5XG5cbiAgICAgICAgICBjZWxsID0gbmV3IEpvaW5lZENlbGxEYXRhKFxuICAgICAgICAgICAgdGhpcy5fd29ya0NlbGwsXG4gICAgICAgICAgICBsaW5lLnRyYW5zbGF0ZVRvU3RyaW5nKHRydWUsIHJhbmdlWzBdLCByYW5nZVsxXSksXG4gICAgICAgICAgICByYW5nZVsxXSAtIHJhbmdlWzBdXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFNraXAgb3ZlciB0aGUgY2VsbHMgb2NjdXBpZWQgYnkgdGhpcyByYW5nZSBpbiB0aGUgbG9vcFxuICAgICAgICAgIGxhc3RDaGFyWCA9IHJhbmdlWzFdIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgYW4gb3ZlcmxhcHBpbmcgY2hhciBhbmQgdGhlIGNoYXJhY3RlciB0byB0aGVcbiAgICAgICAgLy8gcmlnaHQgaXMgYSBzcGFjZSwgdGFrZSBvd25lcnNoaXAgb2YgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0LiBXZSBza2lwXG4gICAgICAgIC8vIHRoaXMgY2hlY2sgZm9yIGpvaW5lZCBjaGFyYWN0ZXJzIGJlY2F1c2UgdGhlaXIgcmVuZGVyaW5nIGxpa2VseSB3b24ndFxuICAgICAgICAvLyB5aWVsZCB0aGUgc2FtZSByZXN1bHQgYXMgcmVuZGVyaW5nIHRoZSBsYXN0IGNoYXJhY3RlciBpbmRpdmlkdWFsbHkuXG4gICAgICAgIGlmICghaXNKb2luZWQgJiYgdGhpcy5faXNPdmVybGFwcGluZyhjZWxsKSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgaXMgb3ZlcmxhcHBpbmcsIHdlIHdhbnQgdG8gZm9yY2UgYSByZS1yZW5kZXIgb24gZXZlcnlcbiAgICAgICAgICAvLyBmcmFtZS4gVGhpcyBpcyBzcGVjaWZpY2FsbHkgdG8gd29yayBhcm91bmQgdGhlIGNhc2Ugd2hlcmUgdHdvXG4gICAgICAgICAgLy8gb3ZlcmxhcGluZyBjaGFycyBgYWAgYW5kIGBiYCBhcmUgYWRqYWNlbnQsIHRoZSBjdXJzb3IgaXMgbW92ZWQgdG8gYiBhbmQgYVxuICAgICAgICAgIC8vIHNwYWNlIGlzIGFkZGVkLiBXaXRob3V0IHRoaXMsIHRoZSBmaXJzdCBoYWxmIG9mIGBiYCB3b3VsZCBuZXZlclxuICAgICAgICAgIC8vIGdldCByZW1vdmVkLCBhbmQgYGFgIHdvdWxkIG5vdCByZS1yZW5kZXIgYmVjYXVzZSBpdCB0aGlua3MgaXQnc1xuICAgICAgICAgIC8vIGFscmVhZHkgaW4gdGhlIGNvcnJlY3Qgc3RhdGUuXG4gICAgICAgICAgLy8gdGhpcy5fc3RhdGUuY2FjaGVbeF1beV0gPSBPVkVSTEFQX09XTkVEX0NIQVJfREFUQTtcbiAgICAgICAgICBpZiAobGFzdENoYXJYIDwgbGluZS5sZW5ndGggLSAxICYmIGxpbmUuZ2V0Q29kZVBvaW50KGxhc3RDaGFyWCArIDEpID09PSBOVUxMX0NFTExfQ09ERSkge1xuICAgICAgICAgICAgLy8gcGF0Y2ggd2lkdGggdG8gMlxuICAgICAgICAgICAgY2VsbC5jb250ZW50ICY9IH5Db250ZW50LldJRFRIX01BU0s7XG4gICAgICAgICAgICBjZWxsLmNvbnRlbnQgfD0gMiA8PCBDb250ZW50LldJRFRIX1NISUZUO1xuICAgICAgICAgICAgLy8gdGhpcy5fY2xlYXJDaGFyKHggKyAxLCB5KTtcbiAgICAgICAgICAgIC8vIFRoZSBvdmVybGFwcGluZyBjaGFyJ3MgY2hhciBkYXRhIHdpbGwgZm9yY2UgYSBjbGVhciBhbmQgcmVuZGVyIHdoZW4gdGhlXG4gICAgICAgICAgICAvLyBvdmVybGFwcGluZyBjaGFyIGlzIG5vIGxvbmdlciB0byB0aGUgbGVmdCBvZiB0aGUgY2hhcmFjdGVyIGFuZCBhbHNvIHdoZW5cbiAgICAgICAgICAgIC8vIHRoZSBzcGFjZSBjaGFuZ2VzIHRvIGFub3RoZXIgY2hhcmFjdGVyLlxuICAgICAgICAgICAgLy8gdGhpcy5fc3RhdGUuY2FjaGVbeCArIDFdW3ldID0gT1ZFUkxBUF9PV05FRF9DSEFSX0RBVEE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soXG4gICAgICAgICAgY2VsbCxcbiAgICAgICAgICB4LFxuICAgICAgICAgIHlcbiAgICAgICAgKTtcblxuICAgICAgICB4ID0gbGFzdENoYXJYO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyB0aGUgYmFja2dyb3VuZCBmb3IgYSBzcGVjaWZpZWQgcmFuZ2Ugb2YgY29sdW1ucy4gVHJpZXMgdG8gYmF0Y2ggYWRqYWNlbnQgY2VsbHMgb2YgdGhlXG4gICAqIHNhbWUgY29sb3IgdG9nZXRoZXIgdG8gcmVkdWNlIGRyYXcgY2FsbHMuXG4gICAqL1xuICBwcml2YXRlIF9kcmF3QmFja2dyb3VuZCh0ZXJtaW5hbDogSVRlcm1pbmFsLCBmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLl9jdHg7XG4gICAgY29uc3QgY29scyA9IHRlcm1pbmFsLmNvbHM7XG4gICAgbGV0IHN0YXJ0WDogbnVtYmVyID0gMDtcbiAgICBsZXQgc3RhcnRZOiBudW1iZXIgPSAwO1xuICAgIGxldCBwcmV2RmlsbFN0eWxlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIGN0eC5zYXZlKCk7XG5cbiAgICB0aGlzLl9mb3JFYWNoQ2VsbCh0ZXJtaW5hbCwgZmlyc3RSb3csIGxhc3RSb3csIG51bGwsIChjZWxsLCB4LCB5KSA9PiB7XG4gICAgICAvLyBsaWJ2dGUgYW5kIHh0ZXJtIGJvdGggZHJhdyB0aGUgYmFja2dyb3VuZCAoYnV0IG5vdCBmb3JlZ3JvdW5kKSBvZiBpbnZpc2libGUgY2hhcmFjdGVycyxcbiAgICAgIC8vIHNvIHdlIHNob3VsZCB0b28uXG4gICAgICBsZXQgbmV4dEZpbGxTdHlsZSA9IG51bGw7IC8vIG51bGwgcmVwcmVzZW50cyBkZWZhdWx0IGJhY2tncm91bmQgY29sb3JcblxuICAgICAgaWYgKGNlbGwuaXNJbnZlcnNlKCkpIHtcbiAgICAgICAgaWYgKGNlbGwuaXNGZ0RlZmF1bHQoKSkge1xuICAgICAgICAgIG5leHRGaWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgICBuZXh0RmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEZnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRGaWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtjZWxsLmdldEZnQ29sb3IoKV0uY3NzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1JHQigpKSB7XG4gICAgICAgIG5leHRGaWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0QmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICB9IGVsc2UgaWYgKGNlbGwuaXNCZ1BhbGV0dGUoKSkge1xuICAgICAgICBuZXh0RmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbY2VsbC5nZXRCZ0NvbG9yKCldLmNzcztcbiAgICAgIH1cblxuICAgICAgaWYgKHByZXZGaWxsU3R5bGUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBlaXRoZXIgdGhlIGZpcnN0IGl0ZXJhdGlvbiwgb3IgdGhlIGRlZmF1bHQgYmFja2dyb3VuZCB3YXMgc2V0LiBFaXRoZXIgd2F5LCB3ZVxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIGRyYXcgYW55dGhpbmcuXG4gICAgICAgIHN0YXJ0WCA9IHg7XG4gICAgICAgIHN0YXJ0WSA9IHk7XG4gICAgICB9IGlmICh5ICE9PSBzdGFydFkpIHtcbiAgICAgICAgLy8gb3VyIHJvdyBjaGFuZ2VkLCBkcmF3IHRoZSBwcmV2aW91cyByb3dcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHByZXZGaWxsU3R5bGU7XG4gICAgICAgIHRoaXMuZmlsbENlbGxzKHN0YXJ0WCwgc3RhcnRZLCBjb2xzIC0gc3RhcnRYLCAxKTtcbiAgICAgICAgc3RhcnRYID0geDtcbiAgICAgICAgc3RhcnRZID0geTtcbiAgICAgIH0gZWxzZSBpZiAocHJldkZpbGxTdHlsZSAhPT0gbmV4dEZpbGxTdHlsZSkge1xuICAgICAgICAvLyBvdXIgY29sb3IgY2hhbmdlZCwgZHJhdyB0aGUgcHJldmlvdXMgY2hhcmFjdGVycyBpbiB0aGlzIHJvd1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gcHJldkZpbGxTdHlsZTtcbiAgICAgICAgdGhpcy5maWxsQ2VsbHMoc3RhcnRYLCBzdGFydFksIHggLSBzdGFydFgsIDEpO1xuICAgICAgICBzdGFydFggPSB4O1xuICAgICAgICBzdGFydFkgPSB5O1xuICAgICAgfVxuXG4gICAgICBwcmV2RmlsbFN0eWxlID0gbmV4dEZpbGxTdHlsZTtcbiAgICB9KTtcblxuICAgIC8vIGZsdXNoIHRoZSBsYXN0IGNvbG9yIHdlIGVuY291bnRlcmVkXG4gICAgaWYgKHByZXZGaWxsU3R5bGUgIT09IG51bGwpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBwcmV2RmlsbFN0eWxlO1xuICAgICAgdGhpcy5maWxsQ2VsbHMoc3RhcnRYLCBzdGFydFksIGNvbHMgLSBzdGFydFgsIDEpO1xuICAgIH1cblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBwcml2YXRlIF9kcmF3Rm9yZWdyb3VuZCh0ZXJtaW5hbDogSVRlcm1pbmFsLCBmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9mb3JFYWNoQ2VsbCh0ZXJtaW5hbCwgZmlyc3RSb3csIGxhc3RSb3csIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LCAoY2VsbCwgeCwgeSkgPT4ge1xuICAgICAgaWYgKGNlbGwuaXNJbnZpc2libGUoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoY2VsbC5pc1VuZGVybGluZSgpKSB7XG4gICAgICAgIHRoaXMuX2N0eC5zYXZlKCk7XG5cbiAgICAgICAgaWYgKGNlbGwuaXNJbnZlcnNlKCkpIHtcbiAgICAgICAgICBpZiAoY2VsbC5pc0JnRGVmYXVsdCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0JnUkdCKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0QmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtjZWxsLmdldEJnQ29sb3IoKV0uY3NzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2VsbC5pc0ZnRGVmYXVsdCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0RmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmZyA9IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgICAgICAgICAgaWYgKHRlcm1pbmFsLm9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgJiYgY2VsbC5pc0JvbGQoKSAmJiBmZyA8IDgpIHtcbiAgICAgICAgICAgICAgZmcgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtmZ10uY3NzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmlsbEJvdHRvbUxpbmVBdENlbGxzKHgsIHksIGNlbGwuZ2V0V2lkdGgoKSk7XG4gICAgICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRyYXdDaGFycyh0ZXJtaW5hbCwgY2VsbCwgeCwgeSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25HcmlkQ2hhbmdlZCh0ZXJtaW5hbDogSVRlcm1pbmFsLCBmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBSZXNpemUgaGFzIG5vdCBiZWVuIGNhbGxlZCB5ZXRcbiAgICBpZiAodGhpcy5fc3RhdGUuY2FjaGUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NoYXJBdGxhcykge1xuICAgICAgdGhpcy5fY2hhckF0bGFzLmJlZ2luRnJhbWUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFyQ2VsbHMoMCwgZmlyc3RSb3csIHRlcm1pbmFsLmNvbHMsIGxhc3RSb3cgLSBmaXJzdFJvdyArIDEpO1xuICAgIHRoaXMuX2RyYXdCYWNrZ3JvdW5kKHRlcm1pbmFsLCBmaXJzdFJvdywgbGFzdFJvdyk7XG4gICAgdGhpcy5fZHJhd0ZvcmVncm91bmQodGVybWluYWwsIGZpcnN0Um93LCBsYXN0Um93KTtcbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLnNldFRyYW5zcGFyZW5jeSh0ZXJtaW5hbCwgdGVybWluYWwub3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeSk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBhIGNoYXJhY3RlciBpcyBvdmVybGFwcGluZyB0byB0aGUgbmV4dCBjZWxsLlxuICAgKi9cbiAgcHJpdmF0ZSBfaXNPdmVybGFwcGluZyhjZWxsOiBJQ2VsbERhdGEpOiBib29sZWFuIHtcbiAgICAvLyBPbmx5IHNpbmdsZSBjZWxsIGNoYXJhY3RlcnMgY2FuIGJlIG92ZXJsYXBwaW5nLCByZW5kZXJpbmcgaXNzdWVzIGNhblxuICAgIC8vIG9jY3VyIHdpdGhvdXQgdGhpcyBjaGVja1xuICAgIGlmIChjZWxsLmdldFdpZHRoKCkgIT09IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBXZSBhc3N1bWUgdGhhdCBhbnkgYXNjaWkgY2hhcmFjdGVyIHdpbGwgbm90IG92ZXJsYXBcbiAgICBpZiAoY2VsbC5nZXRDb2RlKCkgPCAyNTYpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFycyA9IGNlbGwuZ2V0Q2hhcnMoKTtcblxuICAgIC8vIERlbGl2ZXIgZnJvbSBjYWNoZSBpZiBhdmFpbGFibGVcbiAgICBpZiAodGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlLmhhc093blByb3BlcnR5KGNoYXJzKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZVtjaGFyc107XG4gICAgfVxuXG4gICAgLy8gU2V0dXAgdGhlIGZvbnRcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5mb250ID0gdGhpcy5fY2hhcmFjdGVyRm9udDtcblxuICAgIC8vIE1lYXN1cmUgdGhlIHdpZHRoIG9mIHRoZSBjaGFyYWN0ZXIsIGJ1dCBNYXRoLmZsb29yIGl0XG4gICAgLy8gYmVjYXVzZSB0aGF0IGlzIHdoYXQgdGhlIHJlbmRlcmVyIGRvZXMgd2hlbiBpdCBjYWxjdWxhdGVzXG4gICAgLy8gdGhlIGNoYXJhY3RlciBkaW1lbnNpb25zIHdlIGFyZSBjb21wYXJpbmcgYWdhaW5zdFxuICAgIGNvbnN0IG92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLl9jdHgubWVhc3VyZVRleHQoY2hhcnMpLndpZHRoKSA+IHRoaXMuX2NoYXJhY3RlcldpZHRoO1xuXG4gICAgLy8gUmVzdG9yZSB0aGUgb3JpZ2luYWwgY29udGV4dFxuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cbiAgICAvLyBDYWNoZSBhbmQgcmV0dXJuXG4gICAgdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW2NoYXJzXSA9IG92ZXJsYXBzO1xuICAgIHJldHVybiBvdmVybGFwcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgY2hhcmNhdGVyIGF0IHRoZSBjZWxsIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiBvZiB0aGUgY2hhci5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyBvZiB0aGUgY2hhci5cbiAgICovXG4gIC8vIHByaXZhdGUgX2NsZWFyQ2hhcih4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAvLyAgIGxldCBjb2xzVG9DbGVhciA9IDE7XG4gIC8vICAgLy8gQ2xlYXIgdGhlIGFkamFjZW50IGNoYXJhY3RlciBpZiBpdCB3YXMgd2lkZVxuICAvLyAgIGNvbnN0IHN0YXRlID0gdGhpcy5fc3RhdGUuY2FjaGVbeF1beV07XG4gIC8vICAgaWYgKHN0YXRlICYmIHN0YXRlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPT09IDIpIHtcbiAgLy8gICAgIGNvbHNUb0NsZWFyID0gMjtcbiAgLy8gICB9XG4gIC8vICAgdGhpcy5jbGVhckNlbGxzKHgsIHksIGNvbHNUb0NsZWFyLCAxKTtcbiAgLy8gfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJR2x5cGhJZGVudGlmaWVyIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ3h0ZXJtJztcblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgQmFzZUNoYXJBdGxhcyBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfZGlkV2FybVVwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7IH1cblxuICAvKipcbiAgICogUGVyZm9ybSBhbnkgd29yayBuZWVkZWQgdG8gd2FybSB0aGUgY2FjaGUgYmVmb3JlIGl0IGNhbiBiZSB1c2VkLiBNYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlxuICAgKiBJbXBsZW1lbnQgX2RvV2FybVVwIGluc3RlYWQgaWYgeW91IG9ubHkgd2FudCB0byBnZXQgY2FsbGVkIG9uY2UuXG4gICAqL1xuICBwdWJsaWMgd2FybVVwKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fZGlkV2FybVVwKSB7XG4gICAgICB0aGlzLl9kb1dhcm1VcCgpO1xuICAgICAgdGhpcy5fZGlkV2FybVVwID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBhbnkgd29yayBuZWVkZWQgdG8gd2FybSB0aGUgY2FjaGUgYmVmb3JlIGl0IGNhbiBiZSB1c2VkLiBVc2VkIGJ5IHRoZSBkZWZhdWx0XG4gICAqIGltcGxlbWVudGF0aW9uIG9mIHdhcm1VcCgpLCBhbmQgd2lsbCBvbmx5IGJlIGNhbGxlZCBvbmNlLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9kb1dhcm1VcCgpOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB3ZSBzdGFydCBkcmF3aW5nIGEgbmV3IGZyYW1lLlxuICAgKlxuICAgKiBUT0RPOiBXZSByZWx5IG9uIHRoaXMgZ2V0dGluZyBjYWxsZWQgYnkgVGV4dFJlbmRlckxheWVyLiBUaGlzIHNob3VsZCByZWFsbHkgYmUgY2FsbGVkIGJ5XG4gICAqIFJlbmRlcmVyIGluc3RlYWQsIGJ1dCB3ZSBuZWVkIHRvIG1ha2UgUmVuZGVyZXIgdGhlIHNvdXJjZS1vZi10cnV0aCBmb3IgdGhlIGNoYXIgYXRsYXMsIGluc3RlYWRcbiAgICogb2YgQmFzZVJlbmRlckxheWVyLlxuICAgKi9cbiAgcHVibGljIGJlZ2luRnJhbWUoKTogdm9pZCB7IH1cblxuICAvKipcbiAgICogTWF5IGJlIGNhbGxlZCBiZWZvcmUgd2FybVVwIGZpbmlzaGVzLCBob3dldmVyIGl0IGlzIG9rYXkgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiB0b1xuICAgKiBkbyBub3RoaW5nIGFuZCByZXR1cm4gZmFsc2UgaW4gdGhhdCBjYXNlLlxuICAgKlxuICAgKiBAcGFyYW0gY3R4IFdoZXJlIHRvIGRyYXcgdGhlIGNoYXJhY3RlciBvbnRvLlxuICAgKiBAcGFyYW0gZ2x5cGggSW5mb3JtYXRpb24gYWJvdXQgd2hhdCB0byBkcmF3XG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiBvbiB0aGUgY29udGV4dCB0byBzdGFydCBkcmF3aW5nIGF0XG4gICAqIEBwYXJhbSB5IFRoZSBwb3NpdGlvbiBvbiB0aGUgY29udGV4dCB0byBzdGFydCBkcmF3aW5nIGF0XG4gICAqIEByZXR1cm5zIFRoZSBzdWNjZXNzIHN0YXRlLiBUcnVlIGlmIHdlIGRyZXcgdGhlIGNoYXJhY3Rlci5cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIGdseXBoOiBJR2x5cGhJZGVudGlmaWVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogYm9vbGVhbjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vLi4vVHlwZXMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVDb25maWcsIGNvbmZpZ0VxdWFscyB9IGZyb20gJy4vQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IEJhc2VDaGFyQXRsYXMgZnJvbSAnLi9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCBEeW5hbWljQ2hhckF0bGFzIGZyb20gJy4vRHluYW1pY0NoYXJBdGxhcyc7XG5pbXBvcnQgTm9uZUNoYXJBdGxhcyBmcm9tICcuL05vbmVDaGFyQXRsYXMnO1xuaW1wb3J0IFN0YXRpY0NoYXJBdGxhcyBmcm9tICcuL1N0YXRpY0NoYXJBdGxhcyc7XG5pbXBvcnQgeyBJQ2hhckF0bGFzQ29uZmlnIH0gZnJvbSAnLi9UeXBlcyc7XG5cbmNvbnN0IGNoYXJBdGxhc0ltcGxlbWVudGF0aW9ucyA9IHtcbiAgJ25vbmUnOiBOb25lQ2hhckF0bGFzLFxuICAnc3RhdGljJzogU3RhdGljQ2hhckF0bGFzLFxuICAnZHluYW1pYyc6IER5bmFtaWNDaGFyQXRsYXNcbn07XG5cbmludGVyZmFjZSBJQ2hhckF0bGFzQ2FjaGVFbnRyeSB7XG4gIGF0bGFzOiBCYXNlQ2hhckF0bGFzO1xuICBjb25maWc6IElDaGFyQXRsYXNDb25maWc7XG4gIC8vIE4uQi4gVGhpcyBpbXBsZW1lbnRhdGlvbiBwb3RlbnRpYWxseSBob2xkcyBvbnRvIGNvcGllcyBvZiB0aGUgdGVybWluYWwgZm9yZXZlciwgc29cbiAgLy8gdGhpcyBtYXkgY2F1c2UgbWVtb3J5IGxlYWtzLlxuICBvd25lZEJ5OiBJVGVybWluYWxbXTtcbn1cblxuY29uc3QgY2hhckF0bGFzQ2FjaGU6IElDaGFyQXRsYXNDYWNoZUVudHJ5W10gPSBbXTtcblxuLyoqXG4gKiBBY3F1aXJlcyBhIGNoYXIgYXRsYXMsIGVpdGhlciBnZW5lcmF0aW5nIGEgbmV3IG9uZSBvciByZXR1cm5pbmcgYW4gZXhpc3RpbmdcbiAqIG9uZSB0aGF0IGlzIGluIHVzZSBieSBhbm90aGVyIHRlcm1pbmFsLlxuICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSBjb2xvcnMgVGhlIGNvbG9ycyB0byB1c2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3F1aXJlQ2hhckF0bGFzKFxuICB0ZXJtaW5hbDogSVRlcm1pbmFsLFxuICBjb2xvcnM6IElDb2xvclNldCxcbiAgc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIsXG4gIHNjYWxlZENoYXJIZWlnaHQ6IG51bWJlclxuKTogQmFzZUNoYXJBdGxhcyB7XG4gIGNvbnN0IG5ld0NvbmZpZyA9IGdlbmVyYXRlQ29uZmlnKHNjYWxlZENoYXJXaWR0aCwgc2NhbGVkQ2hhckhlaWdodCwgdGVybWluYWwsIGNvbG9ycyk7XG5cbiAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSB0ZXJtaW5hbCBhbHJlYWR5IG93bnMgdGhpcyBjb25maWdcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyQXRsYXNDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVudHJ5ID0gY2hhckF0bGFzQ2FjaGVbaV07XG4gICAgY29uc3Qgb3duZWRCeUluZGV4ID0gZW50cnkub3duZWRCeS5pbmRleE9mKHRlcm1pbmFsKTtcbiAgICBpZiAob3duZWRCeUluZGV4ID49IDApIHtcbiAgICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAgIHJldHVybiBlbnRyeS5hdGxhcztcbiAgICAgIH1cbiAgICAgIC8vIFRoZSBjb25maWdzIGRpZmZlciwgcmVsZWFzZSB0aGUgdGVybWluYWwgZnJvbSB0aGUgZW50cnlcbiAgICAgIGlmIChlbnRyeS5vd25lZEJ5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBlbnRyeS5hdGxhcy5kaXNwb3NlKCk7XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudHJ5Lm93bmVkQnkuc3BsaWNlKG93bmVkQnlJbmRleCwgMSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBUcnkgbWF0Y2ggYSBjaGFyIGF0bGFzIGZyb20gdGhlIGNhY2hlXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGlmIChjb25maWdFcXVhbHMoZW50cnkuY29uZmlnLCBuZXdDb25maWcpKSB7XG4gICAgICAvLyBBZGQgdGhlIHRlcm1pbmFsIHRvIHRoZSBjYWNoZSBlbnRyeSBhbmQgcmV0dXJuXG4gICAgICBlbnRyeS5vd25lZEJ5LnB1c2godGVybWluYWwpO1xuICAgICAgcmV0dXJuIGVudHJ5LmF0bGFzO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5ld0VudHJ5OiBJQ2hhckF0bGFzQ2FjaGVFbnRyeSA9IHtcbiAgICBhdGxhczogbmV3IGNoYXJBdGxhc0ltcGxlbWVudGF0aW9uc1t0ZXJtaW5hbC5vcHRpb25zLmV4cGVyaW1lbnRhbENoYXJBdGxhc10oXG4gICAgICBkb2N1bWVudCxcbiAgICAgIG5ld0NvbmZpZ1xuICAgICksXG4gICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgb3duZWRCeTogW3Rlcm1pbmFsXVxuICB9O1xuICBjaGFyQXRsYXNDYWNoZS5wdXNoKG5ld0VudHJ5KTtcbiAgcmV0dXJuIG5ld0VudHJ5LmF0bGFzO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYSB0ZXJtaW5hbCByZWZlcmVuY2UgZnJvbSB0aGUgY2FjaGUsIGFsbG93aW5nIGl0cyBtZW1vcnkgdG8gYmUgZnJlZWQuXG4gKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsIHRvIHJlbW92ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlKHRlcm1pbmFsOiBJVGVybWluYWwpOiB2b2lkIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyQXRsYXNDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGluZGV4ID0gY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5pbmRleE9mKHRlcm1pbmFsKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYWNoZSBlbnRyeSBpZiBpdCdzIHRoZSBvbmx5IHRlcm1pbmFsXG4gICAgICAgIGNoYXJBdGxhc0NhY2hlW2ldLmF0bGFzLmRpc3Bvc2UoKTtcbiAgICAgICAgY2hhckF0bGFzQ2FjaGUuc3BsaWNlKGksIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2UgZnJvbSB0aGUgY2FjaGUgZW50cnlcbiAgICAgICAgY2hhckF0bGFzQ2FjaGVbaV0ub3duZWRCeS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEZvbnRXZWlnaHQgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBpc0ZpcmVmb3gsIGlzU2FmYXJpIH0gZnJvbSAnLi4vLi4vY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IElDb2xvciB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcsIENIQVJfQVRMQVNfQ0VMTF9TUEFDSU5HIH0gZnJvbSAnLi9UeXBlcyc7XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgY2hhciBhdGxhcy5cbiAqIEBwYXJhbSBjb250ZXh0IFRoZSB3aW5kb3cgb3Igd29ya2VyIGNvbnRleHQuXG4gKiBAcGFyYW0gY2FudmFzRmFjdG9yeSBBIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGEgY2FudmFzIHdpdGggYSB3aWR0aCBvciBoZWlnaHQuXG4gKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWcgZm9yIHRoZSBuZXcgY2hhciBhdGxhcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU3RhdGljQ2hhckF0bGFzVGV4dHVyZShjb250ZXh0OiBXaW5kb3csIGNhbnZhc0ZhY3Rvcnk6ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4gSFRNTENhbnZhc0VsZW1lbnQsIGNvbmZpZzogSUNoYXJBdGxhc0NvbmZpZyk6IEhUTUxDYW52YXNFbGVtZW50IHwgUHJvbWlzZTxJbWFnZUJpdG1hcD4ge1xuICBjb25zdCBjZWxsV2lkdGggPSBjb25maWcuc2NhbGVkQ2hhcldpZHRoICsgQ0hBUl9BVExBU19DRUxMX1NQQUNJTkc7XG4gIGNvbnN0IGNlbGxIZWlnaHQgPSBjb25maWcuc2NhbGVkQ2hhckhlaWdodCArIENIQVJfQVRMQVNfQ0VMTF9TUEFDSU5HO1xuICBjb25zdCBjYW52YXMgPSBjYW52YXNGYWN0b3J5KFxuICAgIC8qMjU1IGFzY2lpIGNoYXJzKi8yNTUgKiBjZWxsV2lkdGgsXG4gICAgKC8qZGVmYXVsdCtkZWZhdWx0IGJvbGQqLzIgKyAvKjAtMTUqLzE2ICsgLyowLTE1IGJvbGQqLzE2KSAqIGNlbGxIZWlnaHRcbiAgKTtcbiAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJywge2FscGhhOiBjb25maWcuYWxsb3dUcmFuc3BhcmVuY3l9KTtcblxuICBjdHguZmlsbFN0eWxlID0gY29uZmlnLmNvbG9ycy5iYWNrZ3JvdW5kLmNzcztcbiAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgY3R4LnNhdmUoKTtcbiAgY3R4LmZpbGxTdHlsZSA9IGNvbmZpZy5jb2xvcnMuZm9yZWdyb3VuZC5jc3M7XG4gIGN0eC5mb250ID0gZ2V0Rm9udChjb25maWcuZm9udFdlaWdodCwgY29uZmlnKTtcbiAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuXG4gIC8vIERlZmF1bHQgY29sb3JcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5yZWN0KGkgKiBjZWxsV2lkdGgsIDAsIGNlbGxXaWR0aCwgY2VsbEhlaWdodCk7XG4gICAgY3R4LmNsaXAoKTtcbiAgICBjdHguZmlsbFRleHQoU3RyaW5nLmZyb21DaGFyQ29kZShpKSwgaSAqIGNlbGxXaWR0aCwgY2VsbEhlaWdodCAvIDIpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbiAgLy8gRGVmYXVsdCBjb2xvciBib2xkXG4gIGN0eC5zYXZlKCk7XG4gIGN0eC5mb250ID0gZ2V0Rm9udChjb25maWcuZm9udFdlaWdodEJvbGQsIGNvbmZpZyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgucmVjdChpICogY2VsbFdpZHRoLCBjZWxsSGVpZ2h0LCBjZWxsV2lkdGgsIGNlbGxIZWlnaHQpO1xuICAgIGN0eC5jbGlwKCk7XG4gICAgY3R4LmZpbGxUZXh0KFN0cmluZy5mcm9tQ2hhckNvZGUoaSksIGkgKiBjZWxsV2lkdGgsIGNlbGxIZWlnaHQgKiAxLjUpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbiAgY3R4LnJlc3RvcmUoKTtcblxuICAvLyBDb2xvcnMgMC0xNVxuICBjdHguZm9udCA9IGdldEZvbnQoY29uZmlnLmZvbnRXZWlnaHQsIGNvbmZpZyk7XG4gIGZvciAobGV0IGNvbG9ySW5kZXggPSAwOyBjb2xvckluZGV4IDwgMTY7IGNvbG9ySW5kZXgrKykge1xuICAgIGNvbnN0IHkgPSAoY29sb3JJbmRleCArIDIpICogY2VsbEhlaWdodDtcbiAgICAvLyBEcmF3IGFzY2lpIGNoYXJhY3RlcnNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgY3R4LnJlY3QoaSAqIGNlbGxXaWR0aCwgeSwgY2VsbFdpZHRoLCBjZWxsSGVpZ2h0KTtcbiAgICAgIGN0eC5jbGlwKCk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gY29uZmlnLmNvbG9ycy5hbnNpW2NvbG9ySW5kZXhdLmNzcztcbiAgICAgIGN0eC5maWxsVGV4dChTdHJpbmcuZnJvbUNoYXJDb2RlKGkpLCBpICogY2VsbFdpZHRoLCB5ICsgY2VsbEhlaWdodCAvIDIpO1xuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG4gIH1cblxuICAvLyBDb2xvcnMgMC0xNSBib2xkXG4gIGN0eC5mb250ID0gZ2V0Rm9udChjb25maWcuZm9udFdlaWdodEJvbGQsIGNvbmZpZyk7XG4gIGZvciAobGV0IGNvbG9ySW5kZXggPSAwOyBjb2xvckluZGV4IDwgMTY7IGNvbG9ySW5kZXgrKykge1xuICAgIGNvbnN0IHkgPSAoY29sb3JJbmRleCArIDIgKyAxNikgKiBjZWxsSGVpZ2h0O1xuICAgIC8vIERyYXcgYXNjaWkgY2hhcmFjdGVyc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHgucmVjdChpICogY2VsbFdpZHRoLCB5LCBjZWxsV2lkdGgsIGNlbGxIZWlnaHQpO1xuICAgICAgY3R4LmNsaXAoKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBjb25maWcuY29sb3JzLmFuc2lbY29sb3JJbmRleF0uY3NzO1xuICAgICAgY3R4LmZpbGxUZXh0KFN0cmluZy5mcm9tQ2hhckNvZGUoaSksIGkgKiBjZWxsV2lkdGgsIHkgKyBjZWxsSGVpZ2h0IC8gMik7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuICBjdHgucmVzdG9yZSgpO1xuXG4gIC8vIFN1cHBvcnQgaXMgcGF0Y2h5IGZvciBjcmVhdGVJbWFnZUJpdG1hcCBhdCB0aGUgbW9tZW50LCBwYXNzIGEgY2FudmFzIGJhY2tcbiAgLy8gaWYgc3VwcG9ydCBpcyBsYWNraW5nIGFzIGRyYXdJbWFnZSB3b3JrcyB0aGVyZSB0b28uIEZpcmVmb3ggaXMgYWxzb1xuICAvLyBpbmNsdWRlZCBoZXJlIGFzIEltYWdlQml0bWFwIGFwcGVhcnMgYm90aCBidWdneSBhbmQgaGFzIGhvcnJpYmxlXG4gIC8vIHBlcmZvcm1hbmNlICh0ZXN0ZWQgb24gdjU1KS5cbiAgaWYgKCEoJ2NyZWF0ZUltYWdlQml0bWFwJyBpbiBjb250ZXh0KSB8fCBpc0ZpcmVmb3ggfHwgaXNTYWZhcmkpIHtcbiAgICAvLyBEb24ndCBhdHRlbXB0IHRvIGNsZWFyIGJhY2tncm91bmQgY29sb3JzIGlmIGNyZWF0ZUltYWdlQml0bWFwIGlzIG5vdCBzdXBwb3J0ZWRcbiAgICByZXR1cm4gY2FudmFzO1xuICB9XG5cbiAgY29uc3QgY2hhckF0bGFzSW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gIC8vIFJlbW92ZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmcm9tIHRoZSBpbWFnZSBzbyBjaGFyYWN0ZXJzIG1heSBvdmVybGFwXG4gIGNsZWFyQ29sb3IoY2hhckF0bGFzSW1hZ2VEYXRhLCBjb25maWcuY29sb3JzLmJhY2tncm91bmQpO1xuXG4gIHJldHVybiBjb250ZXh0LmNyZWF0ZUltYWdlQml0bWFwKGNoYXJBdGxhc0ltYWdlRGF0YSk7XG59XG5cbi8qKlxuICogTWFrZXMgYSBwYXJ0aWljdWxhciByZ2IgY29sb3IgaW4gYW4gSW1hZ2VEYXRhIGNvbXBsZXRlbHkgdHJhbnNwYXJlbnQuXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSByZXN1bHQgaXMgXCJlbXB0eVwiLCBtZWFuaW5nIGFsbCBwaXhlbHMgYXJlIGZ1bGx5IHRyYW5zcGFyZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJDb2xvcihpbWFnZURhdGE6IEltYWdlRGF0YSwgY29sb3I6IElDb2xvcik6IGJvb2xlYW4ge1xuICBsZXQgaXNFbXB0eSA9IHRydWU7XG4gIGNvbnN0IHIgPSBjb2xvci5yZ2JhID4+PiAyNDtcbiAgY29uc3QgZyA9IGNvbG9yLnJnYmEgPj4+IDE2ICYgMHhGRjtcbiAgY29uc3QgYiA9IGNvbG9yLnJnYmEgPj4+IDggJiAweEZGO1xuICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBpbWFnZURhdGEuZGF0YS5sZW5ndGg7IG9mZnNldCArPSA0KSB7XG4gICAgaWYgKGltYWdlRGF0YS5kYXRhW29mZnNldF0gPT09IHIgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgMV0gPT09IGcgJiZcbiAgICAgICAgaW1hZ2VEYXRhLmRhdGFbb2Zmc2V0ICsgMl0gPT09IGIpIHtcbiAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDNdID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaXNFbXB0eTtcbn1cblxuZnVuY3Rpb24gZ2V0Rm9udChmb250V2VpZ2h0OiBGb250V2VpZ2h0LCBjb25maWc6IElDaGFyQXRsYXNDb25maWcpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7Zm9udFdlaWdodH0gJHtjb25maWcuZm9udFNpemUgKiBjb25maWcuZGV2aWNlUGl4ZWxSYXRpb31weCAke2NvbmZpZy5mb250RmFtaWx5fWA7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbCB9IGZyb20gJy4uLy4uL1R5cGVzJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJy4uL1R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfQ09MT1IsIElDaGFyQXRsYXNDb25maWcgfSBmcm9tICcuL1R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnKHNjYWxlZENoYXJXaWR0aDogbnVtYmVyLCBzY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIsIHRlcm1pbmFsOiBJVGVybWluYWwsIGNvbG9yczogSUNvbG9yU2V0KTogSUNoYXJBdGxhc0NvbmZpZyB7XG4gIC8vIG51bGwgb3V0IHNvbWUgZmllbGRzIHRoYXQgZG9uJ3QgbWF0dGVyXG4gIGNvbnN0IGNsb25lZENvbG9ycyA9IDxJQ29sb3JTZXQ+e1xuICAgIGZvcmVncm91bmQ6IGNvbG9ycy5mb3JlZ3JvdW5kLFxuICAgIGJhY2tncm91bmQ6IGNvbG9ycy5iYWNrZ3JvdW5kLFxuICAgIGN1cnNvcjogbnVsbCxcbiAgICBjdXJzb3JBY2NlbnQ6IG51bGwsXG4gICAgc2VsZWN0aW9uOiBudWxsLFxuICAgIC8vIEZvciB0aGUgc3RhdGljIGNoYXIgYXRsYXMsIHdlIG9ubHkgdXNlIHRoZSBmaXJzdCAxNiBjb2xvcnMsIGJ1dCB3ZSBuZWVkIGFsbCAyNTYgZm9yIHRoZVxuICAgIC8vIGR5bmFtaWMgY2hhcmFjdGVyIGF0bGFzLlxuICAgIGFuc2k6IGNvbG9ycy5hbnNpLnNsaWNlKDAsIDE2KVxuICB9O1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHRlcm1pbmFsLm9wdGlvbnMuZXhwZXJpbWVudGFsQ2hhckF0bGFzLFxuICAgIGRldmljZVBpeGVsUmF0aW86IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgIHNjYWxlZENoYXJXaWR0aCxcbiAgICBzY2FsZWRDaGFySGVpZ2h0LFxuICAgIGZvbnRGYW1pbHk6IHRlcm1pbmFsLm9wdGlvbnMuZm9udEZhbWlseSxcbiAgICBmb250U2l6ZTogdGVybWluYWwub3B0aW9ucy5mb250U2l6ZSxcbiAgICBmb250V2VpZ2h0OiB0ZXJtaW5hbC5vcHRpb25zLmZvbnRXZWlnaHQsXG4gICAgZm9udFdlaWdodEJvbGQ6IHRlcm1pbmFsLm9wdGlvbnMuZm9udFdlaWdodEJvbGQsXG4gICAgYWxsb3dUcmFuc3BhcmVuY3k6IHRlcm1pbmFsLm9wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3ksXG4gICAgY29sb3JzOiBjbG9uZWRDb2xvcnNcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ0VxdWFscyhhOiBJQ2hhckF0bGFzQ29uZmlnLCBiOiBJQ2hhckF0bGFzQ29uZmlnKTogYm9vbGVhbiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5jb2xvcnMuYW5zaS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhLmNvbG9ycy5hbnNpW2ldLnJnYmEgIT09IGIuY29sb3JzLmFuc2lbaV0ucmdiYSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYS50eXBlID09PSBiLnR5cGUgJiZcbiAgICAgIGEuZGV2aWNlUGl4ZWxSYXRpbyA9PT0gYi5kZXZpY2VQaXhlbFJhdGlvICYmXG4gICAgICBhLmZvbnRGYW1pbHkgPT09IGIuZm9udEZhbWlseSAmJlxuICAgICAgYS5mb250U2l6ZSA9PT0gYi5mb250U2l6ZSAmJlxuICAgICAgYS5mb250V2VpZ2h0ID09PSBiLmZvbnRXZWlnaHQgJiZcbiAgICAgIGEuZm9udFdlaWdodEJvbGQgPT09IGIuZm9udFdlaWdodEJvbGQgJiZcbiAgICAgIGEuYWxsb3dUcmFuc3BhcmVuY3kgPT09IGIuYWxsb3dUcmFuc3BhcmVuY3kgJiZcbiAgICAgIGEuc2NhbGVkQ2hhcldpZHRoID09PSBiLnNjYWxlZENoYXJXaWR0aCAmJlxuICAgICAgYS5zY2FsZWRDaGFySGVpZ2h0ID09PSBiLnNjYWxlZENoYXJIZWlnaHQgJiZcbiAgICAgIGEuY29sb3JzLmZvcmVncm91bmQgPT09IGIuY29sb3JzLmZvcmVncm91bmQgJiZcbiAgICAgIGEuY29sb3JzLmJhY2tncm91bmQgPT09IGIuY29sb3JzLmJhY2tncm91bmQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpczI1NkNvbG9yKGNvbG9yQ29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBjb2xvckNvZGUgPCBERUZBVUxUX0NPTE9SO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBESU1fT1BBQ0lUWSwgSUdseXBoSWRlbnRpZmllciwgSU5WRVJURURfREVGQVVMVF9DT0xPUiwgSUNoYXJBdGxhc0NvbmZpZyB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IEJhc2VDaGFyQXRsYXMgZnJvbSAnLi9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCB7IERFRkFVTFRfQU5TSV9DT0xPUlMgfSBmcm9tICcuLi9Db2xvck1hbmFnZXInO1xuaW1wb3J0IHsgY2xlYXJDb2xvciB9IGZyb20gJy4vQ2hhckF0bGFzR2VuZXJhdG9yJztcbmltcG9ydCBMUlVNYXAgZnJvbSAnLi9MUlVNYXAnO1xuaW1wb3J0IHsgaXNGaXJlZm94LCBpc1NhZmFyaSB9IGZyb20gJy4uLy4uL2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICcuLi9UeXBlcyc7XG5cbi8vIEluIHByYWN0aWNlIHdlJ3JlIHByb2JhYmx5IG5ldmVyIGdvaW5nIHRvIGV4aGF1c3QgYSB0ZXh0dXJlIHRoaXMgbGFyZ2UuIEZvciBkZWJ1Z2dpbmcgcHVycG9zZXMsXG4vLyBob3dldmVyLCBpdCBjYW4gYmUgdXNlZnVsIHRvIHNldCB0aGlzIHRvIGEgcmVhbGx5IHRpbnkgdmFsdWUsIHRvIHZlcmlmeSB0aGF0IExSVSBldmljdGlvbiB3b3Jrcy5cbmNvbnN0IFRFWFRVUkVfV0lEVEggPSAxMDI0O1xuY29uc3QgVEVYVFVSRV9IRUlHSFQgPSAxMDI0O1xuXG5jb25zdCBUUkFOU1BBUkVOVF9DT0xPUiA9IHtcbiAgY3NzOiAncmdiYSgwLCAwLCAwLCAwKScsXG4gIHJnYmE6IDBcbn07XG5cbi8vIERyYXdpbmcgdG8gdGhlIGNhY2hlIGlzIGV4cGVuc2l2ZTogSWYgd2UgaGF2ZSB0byBkcmF3IG1vcmUgdGhhbiB0aGlzIG51bWJlciBvZiBnbHlwaHMgdG8gdGhlXG4vLyBjYWNoZSBpbiBhIHNpbmdsZSBmcmFtZSwgZ2l2ZSB1cCBvbiB0cnlpbmcgdG8gY2FjaGUgYW55dGhpbmcgZWxzZSwgYW5kIHRyeSB0byBmaW5pc2ggdGhlIGN1cnJlbnRcbi8vIGZyYW1lIEFTQVAuXG4vL1xuLy8gVGhpcyBoZWxwcyB0byBsaW1pdCB0aGUgYW1vdW50IG9mIGRhbWFnZSBhIHByb2dyYW0gY2FuIGRvIHdoZW4gaXQgd291bGQgb3RoZXJ3aXNlIHRocmFzaCB0aGVcbi8vIGNhY2hlLlxuY29uc3QgRlJBTUVfQ0FDSEVfRFJBV19MSU1JVCA9IDEwMDtcblxuLyoqXG4gKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBnZW5lcmF0aW5nIHRoZSBJbWFnZUJpdG1hcCwgdGhpcyBpcyB0byBkZWJvdW5jZS9iYXRjaFxuICogdGhlIG9wZXJhdGlvbiBhcyB3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAgaXMgYXN5bmNocm9ub3VzLlxuICovXG5jb25zdCBHTFlQSF9CSVRNQVBfQ09NTUlUX0RFTEFZID0gMTAwO1xuXG5pbnRlcmZhY2UgSUdseXBoQ2FjaGVWYWx1ZSB7XG4gIGluZGV4OiBudW1iZXI7XG4gIGlzRW1wdHk6IGJvb2xlYW47XG4gIGluQml0bWFwOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2x5cGhDYWNoZUtleShnbHlwaDogSUdseXBoSWRlbnRpZmllcik6IG51bWJlciB7XG4gIC8vIE5vdGUgdGhhdCB0aGlzIG9ubHkgcmV0dXJucyBhIHZhbGlkIGtleSB3aGVuIGNvZGUgPCAyNTZcbiAgLy8gTGF5b3V0OlxuICAvLyAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxOiBpdGFsaWMgKDEpXG4gIC8vIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTA6IGRpbSAoMSlcbiAgLy8gMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDogYm9sZCAoMSlcbiAgLy8gMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDExMTExMTExMTAwMDogZmcgKDkpXG4gIC8vIDBiMDAwMDAwMDAwMDAxMTExMTExMTEwMDAwMDAwMDAwMDA6IGJnICg5KVxuICAvLyAwYjAwMDExMTExMTExMDAwMDAwMDAwMDAwMDAwMDAwMDAwOiBjb2RlICg4KVxuICAvLyAwYjExMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwOiB1bnVzZWQgKDMpXG4gIHJldHVybiBnbHlwaC5jb2RlIDw8IDIxIHwgZ2x5cGguYmcgPDwgMTIgfCBnbHlwaC5mZyA8PCAzIHwgKGdseXBoLmJvbGQgPyAwIDogNCkgKyAoZ2x5cGguZGltID8gMCA6IDIpICsgKGdseXBoLml0YWxpYyA/IDAgOiAxKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHluYW1pY0NoYXJBdGxhcyBleHRlbmRzIEJhc2VDaGFyQXRsYXMge1xuICAvLyBBbiBvcmRlcmVkIG1hcCB0aGF0IHdlJ3JlIHVzaW5nIHRvIGtlZXAgdHJhY2sgb2Ygd2hlcmUgZWFjaCBnbHlwaCBpcyBpbiB0aGUgYXRsYXMgdGV4dHVyZS5cbiAgLy8gSXQncyBvcmRlcmVkIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB3aGVuIHRvIHJlbW92ZSB0aGUgb2xkIGVudHJpZXMuXG4gIHByaXZhdGUgX2NhY2hlTWFwOiBMUlVNYXA8SUdseXBoQ2FjaGVWYWx1ZT47XG5cbiAgLy8gVGhlIHRleHR1cmUgdGhhdCB0aGUgYXRsYXMgaXMgZHJhd24gdG9cbiAgcHJpdmF0ZSBfY2FjaGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9jYWNoZUN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIC8vIEEgdGVtcG9yYXJ5IGNvbnRleHQgdGhhdCBnbHlwaHMgYXJlIGRyYXduIHRvIGJlZm9yZSBiZWluZyB0cmFuc2ZlcmVkIHRvIHRoZSBhdGxhcy5cbiAgcHJpdmF0ZSBfdG1wQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgLy8gVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0b3JlZCBpbiB0aGUgYXRsYXMgYnkgd2lkdGgvaGVpZ2h0XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlQ291bnQ6IG51bWJlciA9IDA7XG5cbiAgLy8gQW4gYXJyYXkgb2YgZ2x5cGgga2V5cyB0aGF0IGFyZSB3YWl0aW5nIG9uIHRoZSBiaXRtYXAgdG8gYmUgZ2VuZXJhdGVkLlxuICBwcml2YXRlIF9nbHlwaHNXYWl0aW5nT25CaXRtYXA6IElHbHlwaENhY2hlVmFsdWVbXSA9IFtdO1xuXG4gIC8vIFRoZSB0aW1lb3V0IHRoYXQgaXMgdXNlZCB0byBiYXRjaCBiaXRtYXAgZ2VuZXJhdGlvbiBzbyBpdCdzIG5vdCByZXF1ZXN0ZWQgZm9yIGV2ZXJ5IG5ldyBnbHlwaC5cbiAgcHJpdmF0ZSBfYml0bWFwQ29tbWl0VGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gVGhlIGJpdG1hcCB0byBkcmF3IGZyb20sIHRoaXMgaXMgbXVjaCBmYXN0ZXIgb24gb3RoZXIgYnJvd3NlcnMgdGhhbiBvdGhlcnMuXG4gIHByaXZhdGUgX2JpdG1hcDogSW1hZ2VCaXRtYXAgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihkb2N1bWVudDogRG9jdW1lbnQsIHByaXZhdGUgX2NvbmZpZzogSUNoYXJBdGxhc0NvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY2FjaGVDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLl9jYWNoZUNhbnZhcy53aWR0aCA9IFRFWFRVUkVfV0lEVEg7XG4gICAgdGhpcy5fY2FjaGVDYW52YXMuaGVpZ2h0ID0gVEVYVFVSRV9IRUlHSFQ7XG4gICAgLy8gVGhlIGNhbnZhcyBuZWVkcyBhbHBoYSBiZWNhdXNlIHdlIHVzZSBjbGVhckNvbG9yIHRvIGNvbnZlcnQgdGhlIGJhY2tncm91bmQgY29sb3IgdG8gYWxwaGEuXG4gICAgLy8gSXQgbWlnaHQgYWxzbyBjb250YWluIHNvbWUgY2hhcmFjdGVycyB3aXRoIHRyYW5zcGFyZW50IGJhY2tncm91bmRzIGlmIGFsbG93VHJhbnNwYXJlbmN5IGlzXG4gICAgLy8gc2V0LlxuICAgIHRoaXMuX2NhY2hlQ3R4ID0gdGhpcy5fY2FjaGVDYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7YWxwaGE6IHRydWV9KTtcblxuICAgIGNvbnN0IHRtcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRtcENhbnZhcy53aWR0aCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGg7XG4gICAgdG1wQ2FudmFzLmhlaWdodCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0O1xuICAgIHRoaXMuX3RtcEN0eCA9IHRtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5fSk7XG5cbiAgICB0aGlzLl93aWR0aCA9IE1hdGguZmxvb3IoVEVYVFVSRV9XSURUSCAvIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgpO1xuICAgIHRoaXMuX2hlaWdodCA9IE1hdGguZmxvb3IoVEVYVFVSRV9IRUlHSFQgLyB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCk7XG4gICAgY29uc3QgY2FwYWNpdHkgPSB0aGlzLl93aWR0aCAqIHRoaXMuX2hlaWdodDtcbiAgICB0aGlzLl9jYWNoZU1hcCA9IG5ldyBMUlVNYXAoY2FwYWNpdHkpO1xuICAgIHRoaXMuX2NhY2hlTWFwLnByZWFsbG9jKGNhcGFjaXR5KTtcblxuICAgIC8vIFRoaXMgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmdcbiAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2NhY2hlQ2FudmFzKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGJlZ2luRnJhbWUoKTogdm9pZCB7XG4gICAgdGhpcy5fZHJhd1RvQ2FjaGVDb3VudCA9IDA7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBnbHlwaDogSUdseXBoSWRlbnRpZmllcixcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gICk6IGJvb2xlYW4ge1xuICAgIC8vIFNwYWNlIGlzIGFsd2F5cyBhbiBlbXB0eSBjZWxsLCBzcGVjaWFsIGNhc2UgdGhpcyBhcyBpdCdzIHNvIGNvbW1vblxuICAgIGlmIChnbHlwaC5jb2RlID09PSAzMikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRXhpdCBlYXJseSBmb3IgdW5jYWNoYWJsZSBnbHlwaHNcbiAgICBpZiAoIXRoaXMuX2NhbkNhY2hlKGdseXBoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGdseXBoS2V5ID0gZ2V0R2x5cGhDYWNoZUtleShnbHlwaCk7XG4gICAgY29uc3QgY2FjaGVWYWx1ZSA9IHRoaXMuX2NhY2hlTWFwLmdldChnbHlwaEtleSk7XG4gICAgaWYgKGNhY2hlVmFsdWUgIT09IG51bGwgJiYgY2FjaGVWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9kcmF3RnJvbUNhY2hlKGN0eCwgY2FjaGVWYWx1ZSwgeCwgeSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2RyYXdUb0NhY2hlQ291bnQgPCBGUkFNRV9DQUNIRV9EUkFXX0xJTUlUKSB7XG4gICAgICBsZXQgaW5kZXg7XG4gICAgICBpZiAodGhpcy5fY2FjaGVNYXAuc2l6ZSA8IHRoaXMuX2NhY2hlTWFwLmNhcGFjaXR5KSB7XG4gICAgICAgIGluZGV4ID0gdGhpcy5fY2FjaGVNYXAuc2l6ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHdlJ3JlIG91dCBvZiBzcGFjZSwgc28gb3VyIGNhbGwgdG8gc2V0IHdpbGwgZGVsZXRlIHRoaXMgaXRlbVxuICAgICAgICBpbmRleCA9IHRoaXMuX2NhY2hlTWFwLnBlZWsoKS5pbmRleDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhY2hlVmFsdWUgPSB0aGlzLl9kcmF3VG9DYWNoZShnbHlwaCwgaW5kZXgpO1xuICAgICAgdGhpcy5fY2FjaGVNYXAuc2V0KGdseXBoS2V5LCBjYWNoZVZhbHVlKTtcbiAgICAgIHRoaXMuX2RyYXdGcm9tQ2FjaGUoY3R4LCBjYWNoZVZhbHVlLCB4LCB5KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIF9jYW5DYWNoZShnbHlwaDogSUdseXBoSWRlbnRpZmllcik6IGJvb2xlYW4ge1xuICAgIC8vIE9ubHkgY2FjaGUgYXNjaWkgYW5kIGV4dGVuZGVkIGNoYXJhY3RlcnMgZm9yIG5vdywgdG8gYmUgc2FmZS4gSW4gdGhlIGZ1dHVyZSwgd2UgY291bGQgZG9cbiAgICAvLyBzb21ldGhpbmcgbW9yZSBjb21wbGljYXRlZCB0byBkZXRlcm1pbmUgdGhlIGV4cGVjdGVkIHdpZHRoIG9mIGEgY2hhcmFjdGVyLlxuICAgIC8vXG4gICAgLy8gSWYgd2Ugc3dpdGNoIHRoZSByZW5kZXJlciBvdmVyIHRvIHdlYmdsIGF0IHNvbWUgcG9pbnQsIHdlIG1heSBiZSBhYmxlIHRvIHVzZSBibGVuZGluZyBtb2Rlc1xuICAgIC8vIHRvIGRyYXcgb3ZlcmxhcHBpbmcgZ2x5cGhzIGZyb20gdGhlIGF0bGFzOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zZXJ2by93ZWJyZW5kZXIvaXNzdWVzLzQ2NCNpc3N1ZWNvbW1lbnQtMjU1NjMyODc1XG4gICAgLy8gaHR0cHM6Ly93ZWJnbGZ1bmRhbWVudGFscy5vcmcvd2ViZ2wvbGVzc29ucy93ZWJnbC10ZXh0LXRleHR1cmUuaHRtbFxuICAgIHJldHVybiBnbHlwaC5jb2RlIDwgMjU2O1xuICB9XG5cbiAgcHJpdmF0ZSBfdG9Db29yZGluYXRlWChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKGluZGV4ICUgdGhpcy5fd2lkdGgpICogdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aDtcbiAgfVxuXG4gIHByaXZhdGUgX3RvQ29vcmRpbmF0ZVkoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoaW5kZXggLyB0aGlzLl93aWR0aCkgKiB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdGcm9tQ2FjaGUoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgY2FjaGVWYWx1ZTogSUdseXBoQ2FjaGVWYWx1ZSxcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IG5lZWQgdG8gZG8gYW55dGhpbmcgaWYgdGhpcyBpcyB3aGl0ZXNwYWNlLlxuICAgIGlmIChjYWNoZVZhbHVlLmlzRW1wdHkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2FjaGVYID0gdGhpcy5fdG9Db29yZGluYXRlWChjYWNoZVZhbHVlLmluZGV4KTtcbiAgICBjb25zdCBjYWNoZVkgPSB0aGlzLl90b0Nvb3JkaW5hdGVZKGNhY2hlVmFsdWUuaW5kZXgpO1xuICAgIGN0eC5kcmF3SW1hZ2UoXG4gICAgICBjYWNoZVZhbHVlLmluQml0bWFwID8gdGhpcy5fYml0bWFwIDogdGhpcy5fY2FjaGVDYW52YXMsXG4gICAgICBjYWNoZVgsXG4gICAgICBjYWNoZVksXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLFxuICAgICAgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRDb2xvckZyb21BbnNpSW5kZXgoaWR4OiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGlmIChpZHggPCB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5hbnNpW2lkeF07XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX0FOU0lfQ09MT1JTW2lkeF07XG4gIH1cblxuICBwcml2YXRlIF9nZXRCYWNrZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmICh0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG1pZ2h0IGhhdmUgc29tZSB0cmFuc3BhcmVuY3ksIHNvIHdlIG5lZWQgdG8gcmVuZGVyIGl0IGFzIGZ1bGx5XG4gICAgICAvLyB0cmFuc3BhcmVudCBpbiB0aGUgYXRsYXMuIE90aGVyd2lzZSB3ZSdkIGVuZCB1cCBkcmF3aW5nIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHR3aWNlXG4gICAgICAvLyBhcm91bmQgdGhlIGFudGktYWxpYXNlZCBlZGdlcyBvZiB0aGUgZ2x5cGgsIGFuZCBpdCB3b3VsZCBsb29rIHRvbyBkYXJrLlxuICAgICAgcmV0dXJuIFRSQU5TUEFSRU5UX0NPTE9SO1xuICAgIH0gZWxzZSBpZiAoZ2x5cGguYmcgPT09IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gICAgfSBlbHNlIGlmIChnbHlwaC5iZyA8IDI1Nikge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChnbHlwaC5iZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQ7XG4gIH1cblxuICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmIChnbHlwaC5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZDtcbiAgICB9IGVsc2UgaWYgKGdseXBoLmZnIDwgMjU2KSB7XG4gICAgICAvLyAyNTYgY29sb3Igc3VwcG9ydFxuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChnbHlwaC5mZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gIH1cblxuICAvLyBUT0RPOiBXZSBkbyB0aGlzIChvciBzb21ldGhpbmcgc2ltaWxhcikgaW4gbXVsdGlwbGUgcGxhY2VzLiBXZSBzaG91bGQgc3BsaXQgdGhpcyBvZmZcbiAgLy8gaW50byBhIHNoYXJlZCBmdW5jdGlvbi5cbiAgcHJpdmF0ZSBfZHJhd1RvQ2FjaGUoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsIGluZGV4OiBudW1iZXIpOiBJR2x5cGhDYWNoZVZhbHVlIHtcbiAgICB0aGlzLl9kcmF3VG9DYWNoZUNvdW50Kys7XG5cbiAgICB0aGlzLl90bXBDdHguc2F2ZSgpO1xuXG4gICAgLy8gZHJhdyB0aGUgYmFja2dyb3VuZFxuICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IHRoaXMuX2dldEJhY2tncm91bmRDb2xvcihnbHlwaCk7XG4gICAgLy8gVXNlIGEgJ2NvcHknIGNvbXBvc2l0ZSBvcGVyYXRpb24gdG8gY2xlYXIgYW55IGV4aXN0aW5nIGdseXBoIG91dCBvZiBfdG1wQ3R4V2l0aEFscGhhLCByZWdhcmRsZXNzIG9mXG4gICAgLy8gdHJhbnNwYXJlbmN5IGluIGJhY2tncm91bmRDb2xvclxuICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnY29weSc7XG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZSA9IGJhY2tncm91bmRDb2xvci5jc3M7XG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KTtcbiAgICB0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblxuICAgIC8vIGRyYXcgdGhlIGZvcmVncm91bmQvZ2x5cGhcbiAgICBjb25zdCBmb250V2VpZ2h0ID0gZ2x5cGguYm9sZCA/IHRoaXMuX2NvbmZpZy5mb250V2VpZ2h0Qm9sZCA6IHRoaXMuX2NvbmZpZy5mb250V2VpZ2h0O1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGdseXBoLml0YWxpYyA/ICdpdGFsaWMnIDogJyc7XG4gICAgdGhpcy5fdG1wQ3R4LmZvbnQgPVxuICAgICAgYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7dGhpcy5fY29uZmlnLmZvbnRTaXplICogdGhpcy5fY29uZmlnLmRldmljZVBpeGVsUmF0aW99cHggJHt0aGlzLl9jb25maWcuZm9udEZhbWlseX1gO1xuICAgIHRoaXMuX3RtcEN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuICAgIHRoaXMuX3RtcEN0eC5maWxsU3R5bGUgPSB0aGlzLl9nZXRGb3JlZ3JvdW5kQ29sb3IoZ2x5cGgpLmNzcztcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGdseXBoLmRpbSkge1xuICAgICAgdGhpcy5fdG1wQ3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuICAgIC8vIERyYXcgdGhlIGNoYXJhY3RlclxuICAgIHRoaXMuX3RtcEN0eC5maWxsVGV4dChnbHlwaC5jaGFycywgMCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgICB0aGlzLl90bXBDdHgucmVzdG9yZSgpO1xuXG4gICAgLy8gY2xlYXIgdGhlIGJhY2tncm91bmQgZnJvbSB0aGUgY2hhcmFjdGVyIHRvIGF2b2lkIGlzc3VlcyB3aXRoIGRyYXdpbmcgb3ZlciB0aGUgcHJldmlvdXNcbiAgICAvLyBjaGFyYWN0ZXIgaWYgaXQgZXh0ZW5kcyBwYXN0IGl0J3MgYm91bmRzXG4gICAgY29uc3QgaW1hZ2VEYXRhID0gdGhpcy5fdG1wQ3R4LmdldEltYWdlRGF0YShcbiAgICAgIDAsIDAsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0XG4gICAgKTtcbiAgICBsZXQgaXNFbXB0eSA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KSB7XG4gICAgICBpc0VtcHR5ID0gY2xlYXJDb2xvcihpbWFnZURhdGEsIGJhY2tncm91bmRDb2xvcik7XG4gICAgfVxuXG4gICAgLy8gY29weSB0aGUgZGF0YSBmcm9tIGltYWdlRGF0YSB0byBfY2FjaGVDYW52YXNcbiAgICBjb25zdCB4ID0gdGhpcy5fdG9Db29yZGluYXRlWChpbmRleCk7XG4gICAgY29uc3QgeSA9IHRoaXMuX3RvQ29vcmRpbmF0ZVkoaW5kZXgpO1xuICAgIC8vIHB1dEltYWdlRGF0YSBkb2Vzbid0IGRvIGFueSBibGVuZGluZywgc28gaXQgd2lsbCBvdmVyd3JpdGUgYW55IGV4aXN0aW5nIGNhY2hlIGVudHJ5IGZvciB1c1xuICAgIHRoaXMuX2NhY2hlQ3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIHgsIHkpO1xuXG4gICAgLy8gQWRkIHRoZSBnbHlwaCBhbmQgcXVldWUgaXQgdG8gdGhlIGJpdG1hcCAoaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQpXG4gICAgY29uc3QgY2FjaGVWYWx1ZSA9IHtcbiAgICAgIGluZGV4LFxuICAgICAgaXNFbXB0eSxcbiAgICAgIGluQml0bWFwOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fYWRkR2x5cGhUb0JpdG1hcChjYWNoZVZhbHVlKTtcblxuICAgIHJldHVybiBjYWNoZVZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkR2x5cGhUb0JpdG1hcChjYWNoZVZhbHVlOiBJR2x5cGhDYWNoZVZhbHVlKTogdm9pZCB7XG4gICAgLy8gU3VwcG9ydCBpcyBwYXRjaHkgZm9yIGNyZWF0ZUltYWdlQml0bWFwIGF0IHRoZSBtb21lbnQsIHBhc3MgYSBjYW52YXMgYmFja1xuICAgIC8vIGlmIHN1cHBvcnQgaXMgbGFja2luZyBhcyBkcmF3SW1hZ2Ugd29ya3MgdGhlcmUgdG9vLiBGaXJlZm94IGlzIGFsc29cbiAgICAvLyBpbmNsdWRlZCBoZXJlIGFzIEltYWdlQml0bWFwIGFwcGVhcnMgYm90aCBidWdneSBhbmQgaGFzIGhvcnJpYmxlXG4gICAgLy8gcGVyZm9ybWFuY2UgKHRlc3RlZCBvbiB2NTUpLlxuICAgIGlmICghKCdjcmVhdGVJbWFnZUJpdG1hcCcgaW4gd2luZG93KSB8fCBpc0ZpcmVmb3ggfHwgaXNTYWZhcmkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGdseXBoIHRvIHRoZSBxdWV1ZVxuICAgIHRoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcC5wdXNoKGNhY2hlVmFsdWUpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYml0bWFwIGdlbmVyYXRpb24gdGltZW91dCBhbHJlYWR5IGV4aXN0c1xuICAgIGlmICh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2dlbmVyYXRlQml0bWFwKCksIEdMWVBIX0JJVE1BUF9DT01NSVRfREVMQVkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2VuZXJhdGVCaXRtYXAoKTogdm9pZCB7XG4gICAgY29uc3QgZ2x5cGhzTW92aW5nVG9CaXRtYXAgPSB0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA7XG4gICAgdGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwID0gW107XG4gICAgd2luZG93LmNyZWF0ZUltYWdlQml0bWFwKHRoaXMuX2NhY2hlQ2FudmFzKS50aGVuKGJpdG1hcCA9PiB7XG4gICAgICAvLyBTZXQgYml0bWFwXG4gICAgICB0aGlzLl9iaXRtYXAgPSBiaXRtYXA7XG5cbiAgICAgIC8vIE1hcmsgYWxsIG5ldyBnbHlwaHMgYXMgaW4gYml0bWFwLCBleGNsdWRpbmcgZ2x5cGhzIHRoYXQgY2FtZSBpbiBhZnRlclxuICAgICAgLy8gdGhlIGJpdG1hcCB3YXMgcmVxdWVzdGVkXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdseXBoc01vdmluZ1RvQml0bWFwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2x5cGhzTW92aW5nVG9CaXRtYXBbaV07XG4gICAgICAgIC8vIEl0IGRvZXNuJ3QgbWF0dGVyIGlmIHRoZSB2YWx1ZSB3YXMgYWxyZWFkeSBldmljdGVkLCBpdCB3aWxsIGJlXG4gICAgICAgIC8vIHJlbGVhc2VkIGZyb20gbWVtb3J5IGFmdGVyIHRoaXMgYmxvY2sgaWYgc28uXG4gICAgICAgIHZhbHVlLmluQml0bWFwID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ID0gbnVsbDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbnRlcmZhY2UgSUxpbmtlZExpc3ROb2RlPFQ+IHtcbiAgcHJldjogSUxpbmtlZExpc3ROb2RlPFQ+O1xuICBuZXh0OiBJTGlua2VkTGlzdE5vZGU8VD47XG4gIGtleTogbnVtYmVyO1xuICB2YWx1ZTogVDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTFJVTWFwPFQ+IHtcbiAgcHJpdmF0ZSBfbWFwOiB7IFtrZXk6IG51bWJlcl06IElMaW5rZWRMaXN0Tm9kZTxUPiB9ID0ge307XG4gIHByaXZhdGUgX2hlYWQ6IElMaW5rZWRMaXN0Tm9kZTxUPiA9IG51bGw7XG4gIHByaXZhdGUgX3RhaWw6IElMaW5rZWRMaXN0Tm9kZTxUPiA9IG51bGw7XG4gIHByaXZhdGUgX25vZGVQb29sOiBJTGlua2VkTGlzdE5vZGU8VD5bXSA9IFtdO1xuICBwdWJsaWMgc2l6ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY2FwYWNpdHk6IG51bWJlcikgeyB9XG5cbiAgcHJpdmF0ZSBfdW5saW5rTm9kZShub2RlOiBJTGlua2VkTGlzdE5vZGU8VD4pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2ID0gbm9kZS5wcmV2O1xuICAgIGNvbnN0IG5leHQgPSBub2RlLm5leHQ7XG4gICAgaWYgKG5vZGUgPT09IHRoaXMuX2hlYWQpIHtcbiAgICAgIHRoaXMuX2hlYWQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobm9kZSA9PT0gdGhpcy5fdGFpbCkge1xuICAgICAgdGhpcy5fdGFpbCA9IHByZXY7XG4gICAgfVxuICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICBwcmV2Lm5leHQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobmV4dCAhPT0gbnVsbCkge1xuICAgICAgbmV4dC5wcmV2ID0gcHJldjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hcHBlbmROb2RlKG5vZGU6IElMaW5rZWRMaXN0Tm9kZTxUPik6IHZvaWQge1xuICAgIGNvbnN0IHRhaWwgPSB0aGlzLl90YWlsO1xuICAgIGlmICh0YWlsICE9PSBudWxsKSB7XG4gICAgICB0YWlsLm5leHQgPSBub2RlO1xuICAgIH1cbiAgICBub2RlLnByZXYgPSB0YWlsO1xuICAgIG5vZGUubmV4dCA9IG51bGw7XG4gICAgdGhpcy5fdGFpbCA9IG5vZGU7XG4gICAgaWYgKHRoaXMuX2hlYWQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2hlYWQgPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVhbGxvY2F0ZSBhIGJ1bmNoIG9mIGxpbmtlZC1saXN0IG5vZGVzLiBBbGxvY2F0aW5nIHRoZXNlIG5vZGVzIGFoZWFkIG9mIHRpbWUgbWVhbnMgdGhhdFxuICAgKiB0aGV5J3JlIG1vcmUgbGlrZWx5IHRvIGxpdmUgbmV4dCB0byBlYWNoIG90aGVyIGluIG1lbW9yeSwgd2hpY2ggc2VlbXMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZS5cbiAgICpcbiAgICogRWFjaCBlbXB0eSBvYmplY3Qgb25seSBjb25zdW1lcyBhYm91dCA2MCBieXRlcyBvZiBtZW1vcnksIHNvIHRoaXMgaXMgcHJldHR5IGNoZWFwLCBldmVuIGZvclxuICAgKiBsYXJnZSBtYXBzLlxuICAgKi9cbiAgcHVibGljIHByZWFsbG9jKGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMuX25vZGVQb29sO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgbm9kZVBvb2wucHVzaCh7XG4gICAgICAgIHByZXY6IG51bGwsXG4gICAgICAgIG5leHQ6IG51bGwsXG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQoa2V5OiBudW1iZXIpOiBUIHwgbnVsbCB7XG4gICAgLy8gVGhpcyBpcyB1bnNhZmU6IFdlJ3JlIGFzc3VtaW5nIG91ciBrZXlzcGFjZSBkb2Vzbid0IG92ZXJsYXAgd2l0aCBPYmplY3QucHJvdG90eXBlLiBIb3dldmVyLFxuICAgIC8vIGl0J3MgZmFzdGVyIHRoYW4gY2FsbGluZyBoYXNPd25Qcm9wZXJ0eSwgYW5kIGluIG91ciBjYXNlLCBpdCB3b3VsZCBuZXZlciBvdmVybGFwLlxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl91bmxpbmtOb2RlKG5vZGUpO1xuICAgICAgdGhpcy5fYXBwZW5kTm9kZShub2RlKTtcbiAgICAgIHJldHVybiBub2RlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgZnJvbSBhIGtleSB3aXRob3V0IG1hcmtpbmcgaXQgYXMgdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBpdGVtLlxuICAgKi9cbiAgcHVibGljIHBlZWtWYWx1ZShrZXk6IG51bWJlcik6IFQgfCBudWxsIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5fbWFwW2tleV07XG4gICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHBlZWsoKTogVCB8IG51bGwge1xuICAgIGNvbnN0IGhlYWQgPSB0aGlzLl9oZWFkO1xuICAgIHJldHVybiBoZWFkID09PSBudWxsID8gbnVsbCA6IGhlYWQudmFsdWU7XG4gIH1cblxuICBwdWJsaWMgc2V0KGtleTogbnVtYmVyLCB2YWx1ZTogVCk6IHZvaWQge1xuICAgIC8vIFRoaXMgaXMgdW5zYWZlOiBTZWUgbm90ZSBhYm92ZS5cbiAgICBsZXQgbm9kZSA9IHRoaXMuX21hcFtrZXldO1xuICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFscmVhZHkgZXhpc3RzLCB3ZSBqdXN0IG5lZWQgdG8gbXV0YXRlIGl0IGFuZCBtb3ZlIGl0IHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgIG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICAgIHRoaXMuX3VubGlua05vZGUobm9kZSk7XG4gICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNpemUgPj0gdGhpcy5jYXBhY2l0eSkge1xuICAgICAgLy8gd2UncmUgb3V0IG9mIHNwYWNlOiByZWN5Y2xlIHRoZSBoZWFkIG5vZGUsIG1vdmUgaXQgdG8gdGhlIHRhaWxcbiAgICAgIG5vZGUgPSB0aGlzLl9oZWFkO1xuICAgICAgdGhpcy5fdW5saW5rTm9kZShub2RlKTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9tYXBbbm9kZS5rZXldO1xuICAgICAgbm9kZS5rZXkgPSBrZXk7XG4gICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLl9tYXBba2V5XSA9IG5vZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1ha2UgYSBuZXcgZWxlbWVudFxuICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLl9ub2RlUG9vbDtcbiAgICAgIGlmIChub2RlUG9vbC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHVzZSBhIHByZWFsbG9jYXRlZCBub2RlIGlmIHdlIGNhblxuICAgICAgICBub2RlID0gbm9kZVBvb2wucG9wKCk7XG4gICAgICAgIG5vZGUua2V5ID0ga2V5O1xuICAgICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlID0ge1xuICAgICAgICAgIHByZXY6IG51bGwsXG4gICAgICAgICAgbmV4dDogbnVsbCxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX21hcFtrZXldID0gbm9kZTtcbiAgICAgIHRoaXMuc2l6ZSsrO1xuICAgIH1cbiAgICB0aGlzLl9hcHBlbmROb2RlKG5vZGUpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICpcbiAqIEEgZHVtbXkgQ2hhckF0bGFzIGltcGxlbWVudGF0aW9uIHRoYXQgYWx3YXlzIGZhaWxzIHRvIGRyYXcgY2hhcmFjdGVycy5cbiAqL1xuXG5pbXBvcnQgeyBJR2x5cGhJZGVudGlmaWVyLCBJQ2hhckF0bGFzQ29uZmlnIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgQmFzZUNoYXJBdGxhcyBmcm9tICcuL0Jhc2VDaGFyQXRsYXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb25lQ2hhckF0bGFzIGV4dGVuZHMgQmFzZUNoYXJBdGxhcyB7XG4gIGNvbnN0cnVjdG9yKGRvY3VtZW50OiBEb2N1bWVudCwgY29uZmlnOiBJQ2hhckF0bGFzQ29uZmlnKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIGdseXBoOiBJR2x5cGhJZGVudGlmaWVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IERJTV9PUEFDSVRZLCBJR2x5cGhJZGVudGlmaWVyLCBERUZBVUxUX0NPTE9SLCBJQ2hhckF0bGFzQ29uZmlnLCBDSEFSX0FUTEFTX0NFTExfU1BBQ0lORyB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVTdGF0aWNDaGFyQXRsYXNUZXh0dXJlIH0gZnJvbSAnLi9DaGFyQXRsYXNHZW5lcmF0b3InO1xuaW1wb3J0IEJhc2VDaGFyQXRsYXMgZnJvbSAnLi9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCB7IGlzMjU2Q29sb3IgfSBmcm9tICcuL0NoYXJBdGxhc1V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdGljQ2hhckF0bGFzIGV4dGVuZHMgQmFzZUNoYXJBdGxhcyB7XG4gIHByaXZhdGUgX3RleHR1cmU6IEhUTUxDYW52YXNFbGVtZW50IHwgSW1hZ2VCaXRtYXA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZG9jdW1lbnQ6IERvY3VtZW50LCBwcml2YXRlIF9jb25maWc6IElDaGFyQXRsYXNDb25maWcpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2FudmFzRmFjdG9yeSA9ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nXG4gICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxuXG4gIHByb3RlY3RlZCBfZG9XYXJtVXAoKTogdm9pZCB7XG4gICAgY29uc3QgcmVzdWx0ID0gZ2VuZXJhdGVTdGF0aWNDaGFyQXRsYXNUZXh0dXJlKHdpbmRvdywgdGhpcy5fY2FudmFzRmFjdG9yeSwgdGhpcy5fY29uZmlnKTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgIHRoaXMuX3RleHR1cmUgPSByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC50aGVuKHRleHR1cmUgPT4ge1xuICAgICAgICB0aGlzLl90ZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2lzQ2FjaGVkKGdseXBoOiBJR2x5cGhJZGVudGlmaWVyLCBjb2xvckluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBpc0FzY2lpID0gZ2x5cGguY29kZSA8IDI1NjtcbiAgICAvLyBBIGNvbG9yIGlzIGJhc2ljIGlmIGl0IGlzIG9uZSBvZiB0aGUgNCBiaXQgQU5TSSBjb2xvcnMuXG4gICAgY29uc3QgaXNCYXNpY0NvbG9yID0gZ2x5cGguZmcgPCAxNjtcbiAgICBjb25zdCBpc0RlZmF1bHRDb2xvciA9IGdseXBoLmZnID09PSBERUZBVUxUX0NPTE9SO1xuICAgIGNvbnN0IGlzRGVmYXVsdEJhY2tncm91bmQgPSBnbHlwaC5iZyA9PT0gREVGQVVMVF9DT0xPUjtcbiAgICByZXR1cm4gaXNBc2NpaSAmJiAoaXNCYXNpY0NvbG9yIHx8IGlzRGVmYXVsdENvbG9yKSAmJiBpc0RlZmF1bHRCYWNrZ3JvdW5kICYmICFnbHlwaC5pdGFsaWM7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBnbHlwaDogSUdseXBoSWRlbnRpZmllcixcbiAgICB4OiBudW1iZXIsXG4gICAgeTogbnVtYmVyXG4gICk6IGJvb2xlYW4ge1xuICAgIC8vIHdlJ3JlIG5vdCB3YXJtZWQgdXAgeWV0XG4gICAgaWYgKHRoaXMuX3RleHR1cmUgPT09IG51bGwgfHwgdGhpcy5fdGV4dHVyZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNvbG9ySW5kZXggPSAwO1xuICAgIGlmIChpczI1NkNvbG9yKGdseXBoLmZnKSkge1xuICAgICAgY29sb3JJbmRleCA9IDIgKyBnbHlwaC5mZyArIChnbHlwaC5ib2xkID8gMTYgOiAwKTtcbiAgICB9IGVsc2UgaWYgKGdseXBoLmZnID09PSBERUZBVUxUX0NPTE9SKSB7XG4gICAgICAvLyBJZiBkZWZhdWx0IGNvbG9yIGFuZCBib2xkXG4gICAgICBpZiAoZ2x5cGguYm9sZCkge1xuICAgICAgICBjb2xvckluZGV4ID0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0aGlzLl9pc0NhY2hlZChnbHlwaCwgY29sb3JJbmRleCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjdHguc2F2ZSgpO1xuXG4gICAgLy8gSW1hZ2VCaXRtYXAncyBkcmF3IGFib3V0IHR3aWNlIGFzIGZhc3QgYXMgZnJvbSBhIGNhbnZhc1xuICAgIGNvbnN0IGNoYXJBdGxhc0NlbGxXaWR0aCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGggKyBDSEFSX0FUTEFTX0NFTExfU1BBQ0lORztcbiAgICBjb25zdCBjaGFyQXRsYXNDZWxsSGVpZ2h0ID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQgKyBDSEFSX0FUTEFTX0NFTExfU1BBQ0lORztcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGdseXBoLmRpbSkge1xuICAgICAgY3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuXG4gICAgY3R4LmRyYXdJbWFnZShcbiAgICAgIHRoaXMuX3RleHR1cmUsXG4gICAgICBnbHlwaC5jb2RlICogY2hhckF0bGFzQ2VsbFdpZHRoLFxuICAgICAgY29sb3JJbmRleCAqIGNoYXJBdGxhc0NlbGxIZWlnaHQsXG4gICAgICBjaGFyQXRsYXNDZWxsV2lkdGgsXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgY2hhckF0bGFzQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHRcbiAgICApO1xuXG4gICAgY3R4LnJlc3RvcmUoKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEZvbnRXZWlnaHQgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICcuLi9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTE9SID0gMjU2O1xuZXhwb3J0IGNvbnN0IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgPSAyNTc7XG5leHBvcnQgY29uc3QgRElNX09QQUNJVFkgPSAwLjU7XG5cbmV4cG9ydCBjb25zdCBDSEFSX0FUTEFTX0NFTExfU1BBQ0lORyA9IDE7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdseXBoSWRlbnRpZmllciB7XG4gIGNoYXJzOiBzdHJpbmc7XG4gIGNvZGU6IG51bWJlcjtcbiAgYmc6IG51bWJlcjtcbiAgZmc6IG51bWJlcjtcbiAgYm9sZDogYm9vbGVhbjtcbiAgZGltOiBib29sZWFuO1xuICBpdGFsaWM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNoYXJBdGxhc0NvbmZpZyB7XG4gIHR5cGU6ICdub25lJyB8ICdzdGF0aWMnIHwgJ2R5bmFtaWMnO1xuICBkZXZpY2VQaXhlbFJhdGlvOiBudW1iZXI7XG4gIGZvbnRTaXplOiBudW1iZXI7XG4gIGZvbnRGYW1pbHk6IHN0cmluZztcbiAgZm9udFdlaWdodDogRm9udFdlaWdodDtcbiAgZm9udFdlaWdodEJvbGQ6IEZvbnRXZWlnaHQ7XG4gIHNjYWxlZENoYXJXaWR0aDogbnVtYmVyO1xuICBzY2FsZWRDaGFySGVpZ2h0OiBudW1iZXI7XG4gIGFsbG93VHJhbnNwYXJlbmN5OiBib29sZWFuO1xuICBjb2xvcnM6IElDb2xvclNldDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlcmVyLCBJUmVuZGVyRGltZW5zaW9ucywgSUNvbG9yU2V0IH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgSUxpbmtpZmllckV2ZW50LCBJVGVybWluYWwsIENoYXJhY3RlckpvaW5lckhhbmRsZXIgfSBmcm9tICcuLi8uLi9UeXBlcyc7XG5pbXBvcnQgeyBJVGhlbWUgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBDb2xvck1hbmFnZXIgfSBmcm9tICcuLi9Db2xvck1hbmFnZXInO1xuaW1wb3J0IHsgUmVuZGVyRGVib3VuY2VyIH0gZnJvbSAnLi4vLi4vdWkvUmVuZGVyRGVib3VuY2VyJztcbmltcG9ydCB7IEJPTERfQ0xBU1MsIElUQUxJQ19DTEFTUywgQ1VSU09SX0NMQVNTLCBDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MsIENVUlNPUl9CTElOS19DTEFTUywgQ1VSU09SX1NUWUxFX0JBUl9DTEFTUywgQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUywgRG9tUmVuZGVyZXJSb3dGYWN0b3J5IH0gZnJvbSAnLi9Eb21SZW5kZXJlclJvd0ZhY3RvcnknO1xuaW1wb3J0IHsgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJy4uL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlcjIsIElFdmVudCB9IGZyb20gJy4uLy4uL2NvbW1vbi9FdmVudEVtaXR0ZXIyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICcuLi8uLi9jb21tb24vTGlmZWN5Y2xlJztcblxuY29uc3QgVEVSTUlOQUxfQ0xBU1NfUFJFRklYID0gJ3h0ZXJtLWRvbS1yZW5kZXJlci1vd25lci0nO1xuY29uc3QgUk9XX0NPTlRBSU5FUl9DTEFTUyA9ICd4dGVybS1yb3dzJztcbmNvbnN0IEZHX0NMQVNTX1BSRUZJWCA9ICd4dGVybS1mZy0nO1xuY29uc3QgQkdfQ0xBU1NfUFJFRklYID0gJ3h0ZXJtLWJnLSc7XG5jb25zdCBGT0NVU19DTEFTUyA9ICd4dGVybS1mb2N1cyc7XG5jb25zdCBTRUxFQ1RJT05fQ0xBU1MgPSAneHRlcm0tc2VsZWN0aW9uJztcblxubGV0IG5leHRUZXJtaW5hbElkID0gMTtcblxuLy8gVE9ETzogUHVsbCBpbnRvIGFuIGFkZG9uIHdoZW4gVFMgY29tcG9zaXRlIHByb2plY3RzIGFsbG93IGVhc2llciBzaGFyaW5nIG9mIGNvZGUgKG5vdCBqdXN0XG4vLyBpbnRlcmZhY2VzKSBiZXR3ZWVuIGNvcmUgYW5kIGFkZG9uc1xuXG4vKipcbiAqIEEgZmFsbGJhY2sgcmVuZGVyZXIgZm9yIHdoZW4gY2FudmFzIGlzIHNsb3cuIFRoaXMgaXMgbm90IG1lYW50IHRvIGJlXG4gKiBwYXJ0aWN1bGFybHkgZmFzdCBvciBmZWF0dXJlIGNvbXBsZXRlLCBtb3JlIGp1c3Qgc3RhYmxlIGFuZCB1c2FibGUgZm9yIHdoZW5cbiAqIGNhbnZhcyBpcyBub3QgYW4gb3B0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRG9tUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfcmVuZGVyRGVib3VuY2VyOiBSZW5kZXJEZWJvdW5jZXI7XG4gIHByaXZhdGUgX3Jvd0ZhY3Rvcnk6IERvbVJlbmRlcmVyUm93RmFjdG9yeTtcbiAgcHJpdmF0ZSBfdGVybWluYWxDbGFzczogbnVtYmVyID0gbmV4dFRlcm1pbmFsSWQrKztcblxuICBwcml2YXRlIF90aGVtZVN0eWxlRWxlbWVudDogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfZGltZW5zaW9uc1N0eWxlRWxlbWVudDogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93RWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG4gIHB1YmxpYyBjb2xvck1hbmFnZXI6IENvbG9yTWFuYWdlcjtcblxuICBwcml2YXRlIF9vbkNhbnZhc1Jlc2l6ZSA9IG5ldyBFdmVudEVtaXR0ZXIyPHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvbkNhbnZhc1Jlc2l6ZSgpOiBJRXZlbnQ8eyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vbkNhbnZhc1Jlc2l6ZS5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlbmRlciA9IG5ldyBFdmVudEVtaXR0ZXIyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlbmRlcigpOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlbmRlci5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3Rlcm1pbmFsOiBJVGVybWluYWwsIHRoZW1lOiBJVGhlbWUgfCB1bmRlZmluZWQpIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IGFsbG93VHJhbnNwYXJlbmN5ID0gdGhpcy5fdGVybWluYWwub3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeTtcbiAgICB0aGlzLmNvbG9yTWFuYWdlciA9IG5ldyBDb2xvck1hbmFnZXIoZG9jdW1lbnQsIGFsbG93VHJhbnNwYXJlbmN5KTtcbiAgICB0aGlzLnNldFRoZW1lKHRoZW1lKTtcblxuICAgIHRoaXMuX3Jvd0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFJPV19DT05UQUlORVJfQ0xBU1MpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5zdHlsZS5saW5lSGVpZ2h0ID0gJ25vcm1hbCc7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dFbGVtZW50cyh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuY2xhc3NMaXN0LmFkZChTRUxFQ1RJT05fQ0xBU1MpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcblxuICAgIHRoaXMuZGltZW5zaW9ucyA9IHtcbiAgICAgIHNjYWxlZENoYXJXaWR0aDogbnVsbCxcbiAgICAgIHNjYWxlZENoYXJIZWlnaHQ6IG51bGwsXG4gICAgICBzY2FsZWRDZWxsV2lkdGg6IG51bGwsXG4gICAgICBzY2FsZWRDZWxsSGVpZ2h0OiBudWxsLFxuICAgICAgc2NhbGVkQ2hhckxlZnQ6IG51bGwsXG4gICAgICBzY2FsZWRDaGFyVG9wOiBudWxsLFxuICAgICAgc2NhbGVkQ2FudmFzV2lkdGg6IG51bGwsXG4gICAgICBzY2FsZWRDYW52YXNIZWlnaHQ6IG51bGwsXG4gICAgICBjYW52YXNXaWR0aDogbnVsbCxcbiAgICAgIGNhbnZhc0hlaWdodDogbnVsbCxcbiAgICAgIGFjdHVhbENlbGxXaWR0aDogbnVsbCxcbiAgICAgIGFjdHVhbENlbGxIZWlnaHQ6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcblxuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlciA9IG5ldyBSZW5kZXJEZWJvdW5jZXIodGhpcy5fcmVuZGVyUm93cy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9yb3dGYWN0b3J5ID0gbmV3IERvbVJlbmRlcmVyUm93RmFjdG9yeShfdGVybWluYWwub3B0aW9ucywgZG9jdW1lbnQpO1xuXG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFRFUk1JTkFMX0NMQVNTX1BSRUZJWCArIHRoaXMuX3Rlcm1pbmFsQ2xhc3MpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fcm93Q29udGFpbmVyKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lcik7XG5cbiAgICB0aGlzLl90ZXJtaW5hbC5saW5raWZpZXIub25MaW5rSG92ZXIoZSA9PiB0aGlzLl9vbkxpbmtIb3ZlcihlKSk7XG4gICAgdGhpcy5fdGVybWluYWwubGlua2lmaWVyLm9uTGlua0xlYXZlKGUgPT4gdGhpcy5fb25MaW5rTGVhdmUoZSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFRFUk1JTkFMX0NMQVNTX1BSRUZJWCArIHRoaXMuX3Rlcm1pbmFsQ2xhc3MpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fcm93Q29udGFpbmVyKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lcik7XG4gICAgdGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl90aGVtZVN0eWxlRWxlbWVudCk7XG4gICAgdGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggPSBNYXRoLmZsb29yKHRoaXMuX3Rlcm1pbmFsLmNoYXJNZWFzdXJlLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMuX3Rlcm1pbmFsLmNoYXJNZWFzdXJlLmhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCArIE1hdGgucm91bmQodGhpcy5fdGVybWluYWwub3B0aW9ucy5sZXR0ZXJTcGFjaW5nKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgKiB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxpbmVIZWlnaHQpO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdCA9IDA7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3AgPSAwO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggKiB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAqIHRoaXMuX3Rlcm1pbmFsLnJvd3M7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fdGVybWluYWwuY29scztcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgLyB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuXG4gICAgdGhpcy5fcm93RWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGh9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgICBlbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSBgJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgICAvLyBNYWtlIHN1cmUgcm93cyBkb24ndCBvdmVyZmxvdyBvbnRvIGZvbGxvd2luZyByb3dcbiAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCkge1xuICAgICAgdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlcyA9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9IHNwYW4ge2AgK1xuICAgICAgICBgIGRpc3BsYXk6IGlubGluZS1ibG9jaztgICtcbiAgICAgICAgYCBoZWlnaHQ6IDEwMCU7YCArXG4gICAgICAgIGAgdmVydGljYWwtYWxpZ246IHRvcDtgICtcbiAgICAgICAgYCB3aWR0aDogJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRofXB4YCArXG4gICAgICAgIGB9YDtcblxuICAgIHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQuaW5uZXJIVE1MID0gc3R5bGVzO1xuXG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICg8YW55PnRoaXMuX3Rlcm1pbmFsKS5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmhlaWdodDtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuICB9XG5cbiAgcHVibGljIHNldFRoZW1lKHRoZW1lOiBJVGhlbWUgfCB1bmRlZmluZWQpOiBJQ29sb3JTZXQge1xuICAgIGlmICh0aGVtZSkge1xuICAgICAgdGhpcy5jb2xvck1hbmFnZXIuc2V0VGhlbWUodGhlbWUpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIEJhc2UgQ1NTXG4gICAgbGV0IHN0eWxlcyA9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBjb2xvcjogJHt0aGlzLmNvbG9yTWFuYWdlci5jb2xvcnMuZm9yZWdyb3VuZC5jc3N9O2AgK1xuICAgICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLmJhY2tncm91bmQuY3NzfTtgICtcbiAgICAgICAgYCBmb250LWZhbWlseTogJHt0aGlzLl90ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRGYW1pbHknKX07YCArXG4gICAgICAgIGAgZm9udC1zaXplOiAke3RoaXMuX3Rlcm1pbmFsLmdldE9wdGlvbignZm9udFNpemUnKX1weDtgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIFRleHQgc3R5bGVzXG4gICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IHNwYW46bm90KC4ke0JPTERfQ0xBU1N9KSB7YCArXG4gICAgICAgIGAgZm9udC13ZWlnaHQ6ICR7dGhpcy5fdGVybWluYWwub3B0aW9ucy5mb250V2VpZ2h0fTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi4ke0JPTERfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBmb250LXdlaWdodDogJHt0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmZvbnRXZWlnaHRCb2xkfTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi4ke0lUQUxJQ19DTEFTU30ge2AgK1xuICAgICAgICBgIGZvbnQtc3R5bGU6IGl0YWxpYztgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIEJsaW5rIGFuaW1hdGlvblxuICAgIHN0eWxlcyArPVxuICAgICAgICBgQGtleWZyYW1lcyBibGluayB7YCArXG4gICAgICAgIGAgMCUgeyBvcGFjaXR5OiAxLjA7IH1gICtcbiAgICAgICAgYCA1MCUgeyBvcGFjaXR5OiAwLjA7IH1gICtcbiAgICAgICAgYCAxMDAlIHsgb3BhY2l0eTogMS4wOyB9YCArXG4gICAgICAgIGB9YDtcbiAgICAvLyBDdXJzb3JcbiAgICBzdHlsZXMgKz1cbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU306bm90KC4ke0ZPQ1VTX0NMQVNTfSkgLiR7Q1VSU09SX0NMQVNTfSB7YCArXG4gICAgICAgIGAgb3V0bGluZTogMXB4IHNvbGlkICR7dGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgICBgIG91dGxpbmUtb2Zmc2V0OiAtMXB4O2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX0JMSU5LX0NMQVNTfSB7YCArXG4gICAgICAgIGAgYW5pbWF0aW9uOiBibGluayAxcyBzdGVwLWVuZCBpbmZpbml0ZTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30uJHtGT0NVU19DTEFTU30gLiR7Q1VSU09SX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9CTE9DS19DTEFTU30ge2AgK1xuICAgICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgICBgIGNvbG9yOiAke3RoaXMuY29sb3JNYW5hZ2VyLmNvbG9ycy5jdXJzb3JBY2NlbnQuY3NzfTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30uJHtGT0NVU19DTEFTU30gLiR7Q1VSU09SX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9CQVJfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBib3gtc2hhZG93OiAxcHggMCAwICR7dGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLmN1cnNvci5jc3N9IGluc2V0O2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTU30ge2AgK1xuICAgICAgICBgIGJveC1zaGFkb3c6IDAgLTFweCAwICR7dGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLmN1cnNvci5jc3N9IGluc2V0O2AgK1xuICAgICAgICBgfWA7XG4gICAgLy8gU2VsZWN0aW9uXG4gICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1NFTEVDVElPTl9DTEFTU30ge2AgK1xuICAgICAgICBgIHBvc2l0aW9uOiBhYnNvbHV0ZTtgICtcbiAgICAgICAgYCB0b3A6IDA7YCArXG4gICAgICAgIGAgbGVmdDogMDtgICtcbiAgICAgICAgYCB6LWluZGV4OiAxO2AgK1xuICAgICAgICBgIHBvaW50ZXItZXZlbnRzOiBub25lO2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtTRUxFQ1RJT05fQ0xBU1N9IGRpdiB7YCArXG4gICAgICAgIGAgcG9zaXRpb246IGFic29sdXRlO2AgK1xuICAgICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLnNlbGVjdGlvbi5jc3N9O2AgK1xuICAgICAgICBgfWA7XG4gICAgLy8gQ29sb3JzXG4gICAgdGhpcy5jb2xvck1hbmFnZXIuY29sb3JzLmFuc2kuZm9yRWFjaCgoYywgaSkgPT4ge1xuICAgICAgc3R5bGVzICs9XG4gICAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7RkdfQ0xBU1NfUFJFRklYfSR7aX0geyBjb2xvcjogJHtjLmNzc307IH1gICtcbiAgICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtCR19DTEFTU19QUkVGSVh9JHtpfSB7IGJhY2tncm91bmQtY29sb3I6ICR7Yy5jc3N9OyB9YDtcbiAgICB9KTtcbiAgICBzdHlsZXMgKz1cbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7RkdfQ0xBU1NfUFJFRklYfSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn0geyBjb2xvcjogJHt0aGlzLmNvbG9yTWFuYWdlci5jb2xvcnMuYmFja2dyb3VuZC5jc3N9OyB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0JHX0NMQVNTX1BSRUZJWH0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9IHsgYmFja2dyb3VuZC1jb2xvcjogJHt0aGlzLmNvbG9yTWFuYWdlci5jb2xvcnMuZm9yZWdyb3VuZC5jc3N9OyB9YDtcblxuICAgIHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50LmlubmVySFRNTCA9IHN0eWxlcztcbiAgICByZXR1cm4gdGhpcy5jb2xvck1hbmFnZXIuY29sb3JzO1xuICB9XG5cbiAgcHVibGljIG9uV2luZG93UmVzaXplKGRldmljZVBpeGVsUmF0aW86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dFbGVtZW50cyhjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEFkZCBtaXNzaW5nIGVsZW1lbnRzXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aDsgaSA8PSByb3dzOyBpKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50cy5wdXNoKHJvdyk7XG4gICAgfVxuICAgIC8vIFJlbW92ZSBleGNlc3MgZWxlbWVudHNcbiAgICB3aGlsZSAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID4gcm93cykge1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoUm93RWxlbWVudHMoY29scywgcm93cyk7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX29uQ2FudmFzUmVzaXplLmZpcmUoe1xuICAgICAgd2lkdGg6IHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCxcbiAgICAgIGhlaWdodDogdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIG9uQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNfQ0xBU1MpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoRk9DVVNfQ0xBU1MpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFsbCBzZWxlY3Rpb25zXG4gICAgd2hpbGUgKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuY2hpbGRyZW5bMF0pO1xuICAgIH1cblxuICAgIC8vIFNlbGVjdGlvbiBkb2VzIG5vdCBleGlzdFxuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyYW5zbGF0ZSBmcm9tIGJ1ZmZlciBwb3NpdGlvbiB0byB2aWV3cG9ydCBwb3NpdGlvblxuICAgIGNvbnN0IHZpZXdwb3J0U3RhcnRSb3cgPSBzdGFydFsxXSAtIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gTWF0aC5tYXgodmlld3BvcnRTdGFydFJvdywgMCk7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRFbmRSb3cgPSBNYXRoLm1pbih2aWV3cG9ydEVuZFJvdywgdGhpcy5fdGVybWluYWwucm93cyAtIDEpO1xuXG4gICAgLy8gTm8gbmVlZCB0byBkcmF3IHRoZSBzZWxlY3Rpb25cbiAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyA+PSB0aGlzLl90ZXJtaW5hbC5yb3dzIHx8IHZpZXdwb3J0Q2FwcGVkRW5kUm93IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgc2VsZWN0aW9uc1xuICAgIGNvbnN0IGRvY3VtZW50RnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICBpZiAoY29sdW1uU2VsZWN0TW9kZSkge1xuICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZChcbiAgICAgICAgdGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCBzdGFydFswXSwgZW5kWzBdLCB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gdmlld3BvcnRTdGFydFJvdyA9PT0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IHN0YXJ0WzBdIDogMDtcbiAgICAgIGNvbnN0IGVuZENvbCA9IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gZW5kWzBdIDogdGhpcy5fdGVybWluYWwuY29scztcbiAgICAgIGRvY3VtZW50RnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCBzdGFydENvbCwgZW5kQ29sKSk7XG4gICAgICAvLyBEcmF3IG1pZGRsZSByb3dzXG4gICAgICBjb25zdCBtaWRkbGVSb3dzQ291bnQgPSB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgLSAxO1xuICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxLCAwLCB0aGlzLl90ZXJtaW5hbC5jb2xzLCBtaWRkbGVSb3dzQ291bnQpKTtcbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gdmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0dGFydFJvd1xuICAgICAgICBjb25zdCBlbmRDb2wgPSB2aWV3cG9ydEVuZFJvdyA9PT0gdmlld3BvcnRDYXBwZWRFbmRSb3cgPyBlbmRbMF0gOiB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQodmlld3BvcnRDYXBwZWRFbmRSb3csIDAsIGVuZENvbCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnRGcmFnbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNlbGVjdGlvbiBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSByb3cgVGhlIHJvdyBvZiB0aGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gY29sU3RhcnQgVGhlIHN0YXJ0IGNvbHVtbi5cbiAgICogQHBhcmFtIGNvbEVuZCBUaGUgZW5kIGNvbHVtbnMuXG4gICAqL1xuICBwcml2YXRlIF9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHJvdzogbnVtYmVyLCBjb2xTdGFydDogbnVtYmVyLCBjb2xFbmQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlciA9IDEpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7cm93Q291bnQgKiB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS50b3AgPSBgJHtyb3cgKiB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7Y29sU3RhcnQgKiB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRofXB4YDtcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCAqIChjb2xFbmQgLSBjb2xTdGFydCl9cHhgO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHtcbiAgICAvLyBOby1vcCwgdGhlIGN1cnNvciBpcyBkcmF3biB3aGVuIHJvd3MgYXJlIGRyYXduXG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICAvLyBGb3JjZSBhIHJlZnJlc2hcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5zZXRUaGVtZSh1bmRlZmluZWQpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2goMCwgdGhpcy5fdGVybWluYWwucm93cyAtIDEpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzLmZvckVhY2goZSA9PiBlLmlubmVySFRNTCA9ICcnKTtcbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlci5yZWZyZXNoKHN0YXJ0LCBlbmQsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG5cbiAgICBjb25zdCBjdXJzb3JBYnNvbHV0ZVkgPSB0ZXJtaW5hbC5idWZmZXIueWJhc2UgKyB0ZXJtaW5hbC5idWZmZXIueTtcbiAgICBjb25zdCBjdXJzb3JYID0gdGhpcy5fdGVybWluYWwuYnVmZmVyLng7XG4gICAgY29uc3QgY3Vyc29yQmxpbmsgPSB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmN1cnNvckJsaW5rO1xuXG4gICAgZm9yIChsZXQgeSA9IHN0YXJ0OyB5IDw9IGVuZDsgeSsrKSB7XG4gICAgICBjb25zdCByb3dFbGVtZW50ID0gdGhpcy5fcm93RWxlbWVudHNbeV07XG4gICAgICByb3dFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICBjb25zdCByb3cgPSB5ICsgdGVybWluYWwuYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3QgbGluZURhdGEgPSB0ZXJtaW5hbC5idWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgICBjb25zdCBjdXJzb3JTdHlsZSA9IHRlcm1pbmFsLm9wdGlvbnMuY3Vyc29yU3R5bGU7XG4gICAgICByb3dFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3Jvd0ZhY3RvcnkuY3JlYXRlUm93KGxpbmVEYXRhLCByb3cgPT09IGN1cnNvckFic29sdXRlWSwgY3Vyc29yU3R5bGUsIGN1cnNvclgsIGN1cnNvckJsaW5rLCB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoLCB0ZXJtaW5hbC5jb2xzKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fb25SZW5kZXIuZmlyZSh7IHN0YXJ0LCBlbmQgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldCBfdGVybWluYWxTZWxlY3RvcigpOiBzdHJpbmcge1xuICAgIHJldHVybiBgLiR7VEVSTUlOQUxfQ0xBU1NfUFJFRklYfSR7dGhpcy5fdGVybWluYWxDbGFzc31gO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6IENoYXJhY3RlckpvaW5lckhhbmRsZXIpOiBudW1iZXIgeyByZXR1cm4gLTE7IH1cbiAgcHVibGljIGRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQ6IG51bWJlcik6IGJvb2xlYW4geyByZXR1cm4gZmFsc2U7IH1cblxuICBwcml2YXRlIF9vbkxpbmtIb3ZlcihlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRDZWxsVW5kZXJsaW5lKGUueDEsIGUueDIsIGUueTEsIGUueTIsIGUuY29scywgdHJ1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9vbkxpbmtMZWF2ZShlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRDZWxsVW5kZXJsaW5lKGUueDEsIGUueDIsIGUueTEsIGUueTIsIGUuY29scywgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0Q2VsbFVuZGVybGluZSh4OiBudW1iZXIsIHgyOiBudW1iZXIsIHk6IG51bWJlciwgeTI6IG51bWJlciwgY29sczogbnVtYmVyLCBlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgd2hpbGUgKHggIT09IHgyIHx8IHkgIT09IHkyKSB7XG4gICAgICBjb25zdCByb3cgPSB0aGlzLl9yb3dFbGVtZW50c1t5XTtcbiAgICAgIGlmICghcm93KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwYW4gPSA8SFRNTEVsZW1lbnQ+cm93LmNoaWxkcmVuW3hdO1xuICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgc3Bhbi5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IGVuYWJsZWQgPyAndW5kZXJsaW5lJyA6ICdub25lJztcbiAgICAgIH1cbiAgICAgIGlmICgrK3ggPj0gY29scykge1xuICAgICAgICB4ID0gMDtcbiAgICAgICAgeSsrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyAgTlVMTF9DRUxMX0NPREUsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSIH0gZnJvbSAnLi4vLi4vQnVmZmVyJztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAnLi4vLi4vVHlwZXMnO1xuaW1wb3J0IHsgSU5WRVJURURfREVGQVVMVF9DT0xPUiB9IGZyb20gJy4uL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IENlbGxEYXRhLCBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnLi4vLi4vQnVmZmVyTGluZSc7XG5cbmV4cG9ydCBjb25zdCBCT0xEX0NMQVNTID0gJ3h0ZXJtLWJvbGQnO1xuZXhwb3J0IGNvbnN0IERJTV9DTEFTUyA9ICd4dGVybS1kaW0nO1xuZXhwb3J0IGNvbnN0IElUQUxJQ19DTEFTUyA9ICd4dGVybS1pdGFsaWMnO1xuZXhwb3J0IGNvbnN0IFVOREVSTElORV9DTEFTUyA9ICd4dGVybS11bmRlcmxpbmUnO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9DTEFTUyA9ICd4dGVybS1jdXJzb3InO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9CTElOS19DTEFTUyA9ICd4dGVybS1jdXJzb3ItYmxpbmsnO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9TVFlMRV9CTE9DS19DTEFTUyA9ICd4dGVybS1jdXJzb3ItYmxvY2snO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9TVFlMRV9CQVJfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJhcic7XG5leHBvcnQgY29uc3QgQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUyA9ICd4dGVybS1jdXJzb3ItdW5kZXJsaW5lJztcblxuZXhwb3J0IGNsYXNzIERvbVJlbmRlcmVyUm93RmFjdG9yeSB7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3Rlcm1pbmFsT3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucyxcbiAgICBwcml2YXRlIF9kb2N1bWVudDogRG9jdW1lbnRcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlUm93KGxpbmVEYXRhOiBJQnVmZmVyTGluZSwgaXNDdXJzb3JSb3c6IGJvb2xlYW4sIGN1cnNvclN0eWxlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGN1cnNvclg6IG51bWJlciwgY3Vyc29yQmxpbms6IGJvb2xlYW4sIGNlbGxXaWR0aDogbnVtYmVyLCBjb2xzOiBudW1iZXIpOiBEb2N1bWVudEZyYWdtZW50IHtcbiAgICBjb25zdCBmcmFnbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIC8vIEZpbmQgdGhlIGxpbmUgbGVuZ3RoIGZpcnN0LCB0aGlzIHByZXZlbnRzIHRoZSBuZWVkIHRvIG91dHB1dCBhIGJ1bmNoIG9mXG4gICAgLy8gZW1wdHkgY2VsbHMgYXQgdGhlIGVuZC4gVGhpcyBjYW5ub3QgZWFzaWx5IGJlIGludGVncmF0ZWQgaW50byB0aGUgbWFpblxuICAgIC8vIGxvb3AgYmVsb3cgYmVjYXVzZSBvZiB0aGUgY29sQ291bnQgZmVhdHVyZSAod2hpY2ggY2FuIGJlIHJlbW92ZWQgYWZ0ZXIgd2VcbiAgICAvLyBwcm9wZXJseSBzdXBwb3J0IHJlZmxvdyBhbmQgZGlzYWxsb3cgZGF0YSB0byBnbyBiZXlvbmQgdGhlIHJpZ2h0LXNpZGUgb2ZcbiAgICAvLyB0aGUgdmlld3BvcnQpLlxuICAgIGxldCBsaW5lTGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCB4ID0gTWF0aC5taW4obGluZURhdGEubGVuZ3RoLCBjb2xzKSAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICBpZiAobGluZURhdGEubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpLmdldENvZGUoKSAhPT0gTlVMTF9DRUxMX0NPREUgfHwgKGlzQ3Vyc29yUm93ICYmIHggPT09IGN1cnNvclgpKSB7XG4gICAgICAgIGxpbmVMZW5ndGggPSB4ICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBsaW5lTGVuZ3RoOyB4KyspIHtcbiAgICAgIGxpbmVEYXRhLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKTtcblxuICAgICAgLy8gVGhlIGNoYXJhY3RlciB0byB0aGUgbGVmdCBpcyBhIHdpZGUgY2hhcmFjdGVyLCBkcmF3aW5nIGlzIG93bmVkIGJ5IHRoZSBjaGFyIGF0IHgtMVxuICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGFyRWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIGlmICh3aWR0aCA+IDEpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtjZWxsV2lkdGggKiB3aWR0aH1weGA7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0N1cnNvclJvdyAmJiB4ID09PSBjdXJzb3JYKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX0NMQVNTKTtcblxuICAgICAgICBpZiAoY3Vyc29yQmxpbmspIHtcbiAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlNPUl9CTElOS19DTEFTUyk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGN1cnNvclN0eWxlKSB7XG4gICAgICAgICAgY2FzZSAnYmFyJzpcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX1NUWUxFX0JBUl9DTEFTUyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd1bmRlcmxpbmUnOlxuICAgICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlNPUl9TVFlMRV9CTE9DS19DTEFTUyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuaXNCb2xkKCkgJiYgdGhpcy5fdGVybWluYWxPcHRpb25zLmVuYWJsZUJvbGQpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChCT0xEX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmlzSXRhbGljKCkpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChJVEFMSUNfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuaXNEaW0oKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKERJTV9DTEFTUyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc1VuZGVybGluZSgpKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoVU5ERVJMSU5FX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgY2hhckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpIHx8IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuXG4gICAgICBjb25zdCBzd2FwQ29sb3IgPSB0aGlzLl93b3JrQ2VsbC5pc0ludmVyc2UoKTtcblxuICAgICAgLy8gZmdcbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgbGV0IHN0eWxlID0gY2hhckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzdHlsZScpIHx8ICcnO1xuICAgICAgICBzdHlsZSArPSBgJHtzd2FwQ29sb3IgPyAnYmFja2dyb3VuZC0nIDogJyd9Y29sb3I6cmdiKCR7KEF0dHJpYnV0ZURhdGEudG9Db2xvclJHQih0aGlzLl93b3JrQ2VsbC5nZXRGZ0NvbG9yKCkpKS5qb2luKCcsJyl9KTtgO1xuICAgICAgICBjaGFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGUpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93b3JrQ2VsbC5pc0ZnUGFsZXR0ZSgpKSB7XG4gICAgICAgIGxldCBmZyA9IHRoaXMuX3dvcmtDZWxsLmdldEZnQ29sb3IoKTtcbiAgICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmlzQm9sZCgpICYmIGZnIDwgOCAmJiAhc3dhcENvbG9yICYmXG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbE9wdGlvbnMuZW5hYmxlQm9sZCAmJiB0aGlzLl90ZXJtaW5hbE9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMpIHtcbiAgICAgICAgICBmZyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLSR7c3dhcENvbG9yID8gJ2InIDogJ2YnfWctJHtmZ31gKTtcbiAgICAgIH0gZWxzZSBpZiAoc3dhcENvbG9yKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLWJnLSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gYmdcbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0JnUkdCKCkpIHtcbiAgICAgICAgbGV0IHN0eWxlID0gY2hhckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzdHlsZScpIHx8ICcnO1xuICAgICAgICBzdHlsZSArPSBgJHtzd2FwQ29sb3IgPyAnJyA6ICdiYWNrZ3JvdW5kLSd9Y29sb3I6cmdiKCR7KEF0dHJpYnV0ZURhdGEudG9Db2xvclJHQih0aGlzLl93b3JrQ2VsbC5nZXRCZ0NvbG9yKCkpKS5qb2luKCcsJyl9KTtgO1xuICAgICAgICBjaGFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGUpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl93b3JrQ2VsbC5pc0JnUGFsZXR0ZSgpKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLSR7c3dhcENvbG9yID8gJ2YnIDogJ2InfWctJHt0aGlzLl93b3JrQ2VsbC5nZXRCZ0NvbG9yKCl9YCk7XG4gICAgICB9IGVsc2UgaWYgKHN3YXBDb2xvcikge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKGB4dGVybS1mZy0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9YCk7XG4gICAgICB9XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGNoYXJFbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnLi4vY29tbW9uL1R5cGVzJztcblxuLyoqXG4gKiBBZGRzIGEgZGlzcG9zYWJsZSBsaXN0ZW5lciB0byBhIG5vZGUgaW4gdGhlIERPTSwgcmV0dXJuaW5nIHRoZSBkaXNwb3NhYmxlLlxuICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gKiBAcGFyYW0gaGFuZGxlciBUaGUgaGFuZGxlciBmb3IgdGhlIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKFxuICBub2RlOiBFbGVtZW50IHwgV2luZG93IHwgRG9jdW1lbnQsXG4gIHR5cGU6IHN0cmluZyxcbiAgaGFuZGxlcjogKGU6IGFueSkgPT4gdm9pZCxcbiAgdXNlQ2FwdHVyZT86IGJvb2xlYW5cbik6IElEaXNwb3NhYmxlIHtcbiAgbm9kZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpO1xuICByZXR1cm4ge1xuICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAvLyBBbHJlYWR5IGRpc3Bvc2VkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCB1c2VDYXB0dXJlKTtcbiAgICB9XG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnLi4vY29tbW9uL1R5cGVzJztcblxuLyoqXG4gKiBEZWJvdW5jZXMgY2FsbHMgdG8gcmVuZGVyIHRlcm1pbmFsIHJvd3MgdXNpbmcgYW5pbWF0aW9uIGZyYW1lcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmRlckRlYm91bmNlciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfcm93U3RhcnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcm93RW5kOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2FuaW1hdGlvbkZyYW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfcmVuZGVyQ2FsbGJhY2s6IChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcikgPT4gdm9pZFxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoKHJvd1N0YXJ0OiBudW1iZXIsIHJvd0VuZDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q291bnQgPSByb3dDb3VudDtcbiAgICAvLyBHZXQgdGhlIG1pbi9tYXggcm93IHN0YXJ0L2VuZCBmb3IgdGhlIGFyZyB2YWx1ZXNcbiAgICByb3dTdGFydCA9IHJvd1N0YXJ0ICE9PSB1bmRlZmluZWQgPyByb3dTdGFydCA6IDA7XG4gICAgcm93RW5kID0gcm93RW5kICE9PSB1bmRlZmluZWQgPyByb3dFbmQgOiB0aGlzLl9yb3dDb3VudCAtIDE7XG4gICAgLy8gU2V0IHRoZSBwcm9wZXJ0aWVzIHRvIHRoZSB1cGRhdGVkIHZhbHVlc1xuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gdGhpcy5fcm93U3RhcnQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWluKHRoaXMuX3Jvd1N0YXJ0LCByb3dTdGFydCkgOiByb3dTdGFydDtcbiAgICB0aGlzLl9yb3dFbmQgPSB0aGlzLl9yb3dFbmQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWF4KHRoaXMuX3Jvd0VuZCwgcm93RW5kKSA6IHJvd0VuZDtcblxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9pbm5lclJlZnJlc2goKSk7XG4gIH1cblxuICBwcml2YXRlIF9pbm5lclJlZnJlc2goKTogdm9pZCB7XG4gICAgLy8gTWFrZSBzdXJlIHZhbHVlcyBhcmUgc2V0XG4gICAgaWYgKHRoaXMuX3Jvd1N0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93RW5kID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93Q291bnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsYW1wIHZhbHVlc1xuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gTWF0aC5tYXgodGhpcy5fcm93U3RhcnQsIDApO1xuICAgIHRoaXMuX3Jvd0VuZCA9IE1hdGgubWluKHRoaXMuX3Jvd0VuZCwgdGhpcy5fcm93Q291bnQgLSAxKTtcblxuICAgIC8vIFJ1biByZW5kZXIgY2FsbGJhY2tcbiAgICB0aGlzLl9yZW5kZXJDYWxsYmFjayh0aGlzLl9yb3dTdGFydCwgdGhpcy5fcm93RW5kKTtcblxuICAgIC8vIFJlc2V0IGRlYm91bmNlclxuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3Jvd0VuZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi4vY29tbW9uL0xpZmVjeWNsZSc7XG5cbmV4cG9ydCB0eXBlIFNjcmVlbkRwckxpc3RlbmVyID0gKG5ld0RldmljZVBpeGVsUmF0aW8/OiBudW1iZXIsIG9sZERldmljZVBpeGVsUmF0aW8/OiBudW1iZXIpID0+IHZvaWQ7XG5cbi8qKlxuICogVGhlIHNjcmVlbiBkZXZpY2UgcGl4ZWwgcmF0aW8gbW9uaXRvciBhbGxvd3MgbGlzdGVuaW5nIGZvciB3aGVuIHRoZVxuICogd2luZG93LmRldmljZVBpeGVsUmF0aW8gdmFsdWUgY2hhbmdlcy4gVGhpcyBpcyBkb25lIG5vdCB3aXRoIHBvbGxpbmcgYnV0IHdpdGhcbiAqIHRoZSB1c2Ugb2Ygd2luZG93Lm1hdGNoTWVkaWEgdG8gd2F0Y2ggbWVkaWEgcXVlcmllcy4gV2hlbiB0aGUgZXZlbnQgZmlyZXMsXG4gKiB0aGUgbGlzdGVuZXIgd2lsbCBiZSByZWF0dGFjaGVkIHVzaW5nIGEgZGlmZmVyZW50IG1lZGlhIHF1ZXJ5IHRvIGVuc3VyZSB0aGF0XG4gKiBhbnkgZnVydGhlciBjaGFuZ2VzIHdpbGwgcmVnaXN0ZXIuXG4gKlxuICogVGhlIGxpc3RlbmVyIHNob3VsZCBmaXJlIG9uIGJvdGggd2luZG93IHpvb20gY2hhbmdlcyBhbmQgc3dpdGNoaW5nIHRvIGFcbiAqIG1vbml0b3Igd2l0aCBhIGRpZmZlcmVudCBEUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTY3JlZW5EcHJNb25pdG9yIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvOiBudW1iZXIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgcHJpdmF0ZSBfb3V0ZXJMaXN0ZW5lcjogKCh0aGlzOiBNZWRpYVF1ZXJ5TGlzdCwgZXY6IE1lZGlhUXVlcnlMaXN0RXZlbnQpID0+IGFueSkgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2xpc3RlbmVyOiBTY3JlZW5EcHJMaXN0ZW5lciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0OiBNZWRpYVF1ZXJ5TGlzdCB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgc2V0TGlzdGVuZXIobGlzdGVuZXI6IFNjcmVlbkRwckxpc3RlbmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVyKSB7XG4gICAgICB0aGlzLmNsZWFyTGlzdGVuZXIoKTtcbiAgICB9XG4gICAgdGhpcy5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB0aGlzLl9vdXRlckxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9saXN0ZW5lcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9saXN0ZW5lcih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgdGhpcy5fY3VycmVudERldmljZVBpeGVsUmF0aW8pO1xuICAgICAgdGhpcy5fdXBkYXRlRHByKCk7XG4gICAgfTtcbiAgICB0aGlzLl91cGRhdGVEcHIoKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLmNsZWFyTGlzdGVuZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZURwcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCB8fCAhdGhpcy5fb3V0ZXJMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsZWFyIGxpc3RlbmVycyBmb3Igb2xkIERQUlxuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgZm9yIG5ldyBEUFJcbiAgICB0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCA9IHdpbmRvdy5tYXRjaE1lZGlhKGBzY3JlZW4gYW5kIChyZXNvbHV0aW9uOiAke3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCk7XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LmFkZExpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgfHwgIXRoaXMuX2xpc3RlbmVyIHx8ICF0aGlzLl9vdXRlckxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcbiAgICB0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fb3V0ZXJMaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==